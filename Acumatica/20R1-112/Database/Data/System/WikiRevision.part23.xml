<?xml version="1.0" encoding="utf-8"?>
<data>
	<table name="WikiRevision">
		<col name="CompanyID" type="Int" default="Zero" />
		<col name="PageID" type="UniqueIdentifier" />
		<col name="Language" type="VarChar(50)" />
		<col name="PageRevisionID" type="Int" />
		<col name="Content" type="NVarChar(MAX)" />
		<col name="ContentHtml" type="NVarChar(MAX)" nullable="true" />
		<col name="PlainText" type="NVarChar(MAX)" />
		<col name="ApprovalByID" type="UniqueIdentifier" nullable="true" />
		<col name="ApprovalDateTime" type="DateTime" nullable="true" />
		<col name="CreatedByID" type="UniqueIdentifier" />
		<col name="CreatedDateTime" type="DateTime" />
		<col name="CompanyMask" type="VarBinary(32)" default="CompanyMaskReadOnly" />
		<col name="UID" type="UniqueIdentifier" />
		<col name="RecordSourceID" type="SmallInt" nullable="true" />
	</table>
	<rows>
		<row PageID="258373da-50b0-4c84-94d6-78ab7f28baf1" Language="en-US" PageRevisionID="1" Content="&#xA;Stay tuned for important information about fixes, enhancements, and key features that are available in Acumatica ERP. {br}{TOC}" PlainText="Release Notes Overview Stay tuned for important information about fixes, enhancements, and key features that are     available in Acumatica ERP.  " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="03a8e3d7-7faa-19ba-3fe5-ecfd4b1cb88c" RecordSourceID="22377" />
		<row PageID="f2c869ca-fcc9-4bdf-85ea-0e680e4d4498" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c5a89f1f-73a1-8079-8807-425a02bb3296" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP Construction                         Edition 2020 R1, the following functionality is no longer included in the ''Construction'' customization project but is available in the core product if the ''Construction'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form:[anchor|#_87e91874-5faf-4500-83fc-b264fff45418]
*Joint checks, which give users the ability to specify joint payees for accounts payable documents on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form and to process these joint checks.
*Subcontracts, which give users the ability to manage subcontracts in the system
*Compliance tracking, which makes it possible for users to track various compliance items associated with specific entities and documents in the system
*Lien waiver automation, which makes it possible to automatically generate lien waivers

The following sections describe all changes in Acumatica ERP Construction                         Edition 2020 R1 and how they may affect the upgrade process.{br}{TOC}
==Changes to the User Interface==
In Acumatica ERP Construction                         Edition 2020 R1, the '''Sub Job''' and '''Schedule of Values''' columns have been renamed to '''Project Task''' on the following forms:[anchor|#_c00b35f0-d734-475b-a1de-dc08641f8f39]
*[HelpRoot_FormReference\PM_30_40_00|Project Transactions] ([~/?ScreenId=PM304000|PM304000])
*[HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000])
*[HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000])
*[HelpRoot_Construction\SC_30_10_00|Subcontracts] ([~/?ScreenId=SC301000|SC301000])
*[HelpRoot_FormReference\PM_30_85_00|Change Requests] ([~/?ScreenId=PM308500|PM308500])
*[HelpRoot_FormReference\PM_30_80_00|Change Orders] ([~/?ScreenId=PM308000|PM308000])
*[HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000])
*[HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000])
*[HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000])
*[HelpRoot_FormReference\PM_30_60_00|Commitments] ([~/?ScreenId=PM306000|PM306000])
*[HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000])

The '''Billing Item''' columns on the '''Progress Billing''' and '''Time and Material''' tabs of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form also have been renamed to '''Project Task'''.{br}

The available options in the '''Type''' box in the Summary area of the [HelpRoot_FormReference\PM_30_20_00|Project Tasks] ([~/?ScreenId=PM302000|PM302000]), [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]), [HelpRoot_FormReference\PM_20_80_00|Project Templates] ([~/?ScreenId=PM208000|PM208000]), and [HelpRoot_FormReference\PM_30_45_00|Project Quotes] ([~/?ScreenId=PM304500|PM304500]) forms have been renamed as follows.[anchor|#_73150772-9f25-46b8-a9a6-26cc1498b8a5]
{| class="checklist" | width="100%" 
|- 
!width="50%" ! From
!width="50%" ! To
|- 
| ''Sub Job''
|  ''Cost Task''
|- 
|  ''Schedule of Values''
|  ''Revenue Task''
|- 
|  ''Sub Job / Schedule of Values''
|  ''Cost and Revenue Task''
|}
The renamed options on the [HelpRoot_FormReference\PM_30_20_00|Project Tasks] form are shown in the following screenshot.[anchor|#_96a3a874-9e82-4a88-be87-2c48160c521d][anchor|#_46061494-1688-4a40-af4a-fc3277e85423][image:ReleaseNotes/Images/RN_2020_R1_Construction_Migration_Project_Task_Type.png|popup|Type options on the Project Tasks form|450px]
The '''Account Group/Item''' column has been renamed to '''Inventory ID''' on the following forms:[anchor|#_d711a4a6-6dad-42f5-841e-fc8c056b5d94]
*[HelpRoot_FormReference\PO_30_10_00|Purchase Orders]
*[HelpRoot_FormReference\PO_30_20_00|Purchase Receipts]
*[HelpRoot_Construction\SC_30_10_00|Subcontracts]
*[HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments]
*[HelpRoot_FormReference\AR_30_10_00|Invoices and Memos]

On the '''Commitments''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form, the '''Create Subcontract''' button has been added to the table toolbar (as shown in the following screenshot). By clicking this button, the user can open the [HelpRoot_Construction\SC_30_10_00|Subcontracts] ([~/?ScreenId=SC301000|SC301000]) form where a new subcontract can be created and linked to the project. The button is available only if the ''Construction'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.[anchor|#_af6cab9a-c5d4-4ada-8b8e-3ee80e164c66][anchor|#_7216483c-80bd-4032-8b0f-bf0fe8006292][image:ReleaseNotes/Images/RN_2020_R1_Construction_Migration_Create_Subcontract.png|popup|Commitments tab of the Projects form|450px][anchor|#_e1294e05-2d35-414a-8197-ea9af9b41115]
==Upgrade Notes==
Before upgrading Acumatica ERP Construction                         Edition to 2020 R1, note the following:[anchor|#_c7f68500-84cf-4577-b7b7-4201134dc52b]
*All construction-related customization packages must be unpublished before the upgrade.
*If any automation steps were configured for the [HelpRoot_Construction\SC_30_10_00|Subcontracts] ([~/?ScreenId=SC301000|SC301000]) form or the layout was modified for the Subcontracts app form in the mobile application in Version 2019 R1 or earlier, all changes will be lost after the upgrade to Version 2020 R1.
*If the [HelpRoot_Construction\SC_30_10_00|Subcontracts] form was previously removed from the site map on the [HelpRoot_FormReference\SM_20_05_20|Site Map] ([~/?ScreenId=SM200520|SM200520]) form and then added again, a duplicate [HelpRoot_Construction\SC_30_10_00|Subcontracts] form could appear on the workspace menu after an upgrade to Version 2020 R1. The duplicate can be removed manually.
*The ''Subcontracts (SC3010PL) ''generic inquiry used as a list of subcontracts that is shown as a substitute for the [HelpRoot_Construction\SC_30_10_00|Subcontracts] form will be preserved after the upgrade to Version 2020 R1, but any changes to that generic inquiry that may be provided with upcoming Acumatica ERP Construction                         Edition updates will not be applied to the generic inquiry. An administrator who needs to reset the generic inquiry to the default state should contact the Support team and request a database script.
*The filter tabs on the [HelpRoot_Construction\CL_40_10_00|Compliance Management] ([~/?ScreenId=CL401000|CL401000]) form will be preserved after the upgrade to Version 2020 R1, but any changes to those filter tabs that may be provided with upcoming Acumatica ERP Construction                         Edition updates will not be applied to the filter tabs. An administrator who needs to update the filter tabs should contact the Support team and request a database script. If a new instance is deployed on the new version of the system, the default filters will be available on the [HelpRoot_Construction\CL_40_10_00|Compliance Management] form.
*The <tt>Compliance.ComplianceDocumentIdForReport</tt> field has been deleted from the following reports: ''Conditional Waiver and Release on Progress Payment (CL642001)'', ''Unconditional Waiver and Release on Progress Payment (CL642002)'', ''Conditional Waiver and Release on Final Payment (CL642003)'', and ''Unconditional Waiver and Release on Final Payment (CL642004)''. If the user has a customized version of one of these reports, after the upgrade, the lien waiver parameter has to be changed to the new default version of this parameter specified in the report.
]]></column>
			<column name="PlainText"><![CDATA[Construction: Migration to the Core Product Starting in  Acumatica ERP Construction                         Edition 2020 R1,     the following functionality is no longer included in the  Construction  customization     project but is available in the core product if the  Construction  feature is enabled on     the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form: Joint checks, which give users the ability to specify joint payees for accounts payable      documents on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form and to process      these joint checks. Subcontracts, which give users the ability to manage subcontracts in the system Compliance tracking, which makes it possible for users to track various compliance items      associated with specific entities and documents in the system Lien waiver automation, which makes it possible to automatically generate lien waivers The following sections describe all changes in  Acumatica ERP Construction                         Edition 2020 R1     and how they may affect the upgrade process. Changes to the User Interface In  Acumatica ERP Construction                         Edition 2020 R1,     the  Sub Job  and  Schedule of Values  columns have     been renamed to  Project Task  on the following forms:  ([~/?ScreenId=PM304000|PM304000]) Project Transactions (PM304000)  ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000)  ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000)  ([~/?ScreenId=SC301000|SC301000]) Subcontracts (SC301000)  ([~/?ScreenId=PM308500|PM308500]) Change Requests (PM308500)  ([~/?ScreenId=PM308000|PM308000]) Change Orders (PM308000)  ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000)  ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000)  ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000)  ([~/?ScreenId=PM306000|PM306000]) Commitments (PM306000)  ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details (PM401000) The  Billing Item  columns on the  Progress Billing      and  Time and Material  tabs of the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form also have been renamed to       Project Task . The available options in the  Type  box in the Summary area of the   ([~/?ScreenId=PM302000|PM302000]) Project Tasks (PM302000),   ([~/?ScreenId=PM301000|PM301000]) Projects     (PM301000),   ([~/?ScreenId=PM208000|PM208000]) Project Templates     (PM208000), and   ([~/?ScreenId=PM304500|PM304500]) Project Quotes (PM304500) forms have been renamed as follows. From To Sub Job Cost Task Schedule of Values Revenue Task Sub Job / Schedule of Values Cost and Revenue Task The renamed options on the   ([~/?ScreenId=PM302000|PM302000]) Project Tasks form are shown in the     following screenshot. Type options on the Project Tasks form The  Account Group/Item  column has been renamed to  Inventory      ID  on the following forms:  ([~/?ScreenId=PO301000|PO301000]) Purchase Orders ([~/?ScreenId=PO301000|PO301000]) ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts ([~/?ScreenId=PO301000|PO301000]) ([~/?ScreenId=PO302000|PO302000]) ([~/?ScreenId=SC301000|SC301000]) Subcontracts ([~/?ScreenId=PO301000|PO301000]) ([~/?ScreenId=PO302000|PO302000]) ([~/?ScreenId=SC301000|SC301000]) ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments ([~/?ScreenId=PO301000|PO301000]) ([~/?ScreenId=PO302000|PO302000]) ([~/?ScreenId=SC301000|SC301000]) ([~/?ScreenId=AP301000|AP301000]) ([~/?ScreenId=AR301000|AR301000]) Invoices and MemosOn the  Commitments  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form, the  Create      Subcontract  button has been added to the table toolbar (as shown in the following     screenshot). By clicking this button, the user can open the   ([~/?ScreenId=SC301000|SC301000]) Subcontracts (SC301000) form where a new subcontract can be created     and linked to the project. The button is available only if the  Construction  feature is     enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. Commitments tab of the Projects form Upgrade Notes Before upgrading  Acumatica ERP Construction                         Edition to       2020 R1, note the following: All construction-related customization packages must be unpublished before the upgrade. If any automation steps were configured for the   ([~/?ScreenId=SC301000|SC301000]) Subcontracts      (SC301000) form or the layout was modified for the Subcontracts app form in the mobile      application in Version 2019 R1 or earlier, all changes will be lost after the upgrade to      Version  2020 R1. If the   ([~/?ScreenId=SC301000|SC301000]) Subcontracts form was previously removed from the      site map on the   ([~/?ScreenId=SM200520|SM200520]) Site Map (SM200520) form and then added      again, a duplicate   ([~/?ScreenId=SC301000|SC301000]) Subcontracts form could appear on the      workspace menu after an upgrade to Version  2020 R1.      The duplicate can be removed manually. The  Subcontracts (SC3010PL)  generic inquiry used as a list of subcontracts that is      shown as a substitute for the   ([~/?ScreenId=SC301000|SC301000]) Subcontracts form will be      preserved after the upgrade to Version  2020 R1,      but any changes to that generic inquiry that may be provided with upcoming  Acumatica ERP Construction                         Edition      updates will not be applied to the generic inquiry. An administrator who needs to reset the      generic inquiry to the default state should contact the Support team and request a database      script. The filter tabs on the   ([~/?ScreenId=CL401000|CL401000]) Compliance Management (CL401000) form      will be preserved after the upgrade to Version  2020 R1,      but any changes to those filter tabs that may be provided with upcoming  Acumatica ERP Construction                         Edition      updates will not be applied to the filter tabs. An administrator who needs to update the filter      tabs should contact the Support team and request a database script. If a new instance is      deployed on the new version of the system, the default filters will be available on the   ([~/?ScreenId=CL401000|CL401000]) Compliance Management form. The  Compliance.ComplianceDocumentIdForReport  field has been deleted from      the following reports:  Conditional Waiver and Release on Progress Payment (CL642001) ,        Unconditional Waiver and Release on Progress Payment (CL642002) ,  Conditional Waiver       and Release on Final Payment (CL642003) , and  Unconditional Waiver and Release on Final       Payment (CL642004) . If the user has a customized version of one of these reports, after      the upgrade, the lien waiver parameter has to be changed to the new default version of this      parameter specified in the report. ]]></column>
		</row>
		<row PageID="8b9e86c9-14aa-4333-af23-44ae11aa4c86" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="bf6a4e43-3e37-682b-eecc-b5c03df0d1f0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP a user can convert a business account to a customer account, a vendor account, or both by using the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form. After this conversion, the business account continues to exist and is used in marketing processes.{br}

Starting with the 2020 R1 version, if any rules based on restriction groups have been configured for the customer or vendor accounts that were created from this business account, the system applies these rules to the business account as well. {br}

That is, if access to a customer or vendor account has been restricted to deny access to a group of employees, these employes will not be able to view the related business account on the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form. Also, the access will be denied to any related entity, such as contact, case, opportunity, marketing list, and marketing campaign. However, if a customer and a vendor account were created from the same business account and then different restriction rules were configured for the customer account than those configured for the vendor account, the system applies restriction rules, inherited from customer and vendor to the business account and its related entities. If either set of these rules grants access for a business account for a user, then the user will get access to the business account.{br}

For details on configuring restriction groups to control access to the system entities, see [HelpRoot_Administration\RS__mng_Managing_Restriction_groups|Managing Visibility with Restriction Groups].{br}

There are limitations to the implemented functionality. If a contact of a business account has been added to a marketing list and then access to the business account was restricted (through restriction groups) to a group of employees, these employees will see the contact in the marketing list but will not be able to review its details on the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form.]]></column>
			<column name="PlainText"><![CDATA[CRM: Restriction of Access to Business Accounts In  Acumatica ERP a     user can convert a business account to a customer account, a vendor account, or both by using     the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form. After this conversion, the     business account continues to exist and is used in marketing processes. Starting with the  2020 R1     version, if any rules based on restriction groups have been configured for the customer or     vendor accounts that were created from this business account, the system applies these rules to     the business account as well.  That is, if access to a customer or vendor account has been restricted to deny access to a         group of employees, these employes will not be able to view the related business account on         the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts form. Also, the access will be denied to         any related entity, such as contact, case, opportunity, marketing list, and marketing         campaign. However, if a customer and a vendor account were created from the same business         account and then different restriction rules were configured for the customer account than         those configured for the vendor account, the system applies restriction rules, inherited         from customer and vendor to the business account and its related entities. If either set of         these rules grants access for a business account for a user, then the user will get access         to the business account. For details on configuring restriction groups to control access to the system entities, see       Managing Visibility with Restriction Groups. There are limitations to the implemented functionality. If a contact of a business account has     been added to a marketing list and then access to the business account was restricted (through     restriction groups) to a group of employees, these employees will see the contact in the     marketing list but will not be able to review its details on the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form. ]]></column>
		</row>
		<row PageID="bc934f18-7a56-4976-a5a5-e9ea3eef7d35" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="3bf9c828-0182-60c0-1725-d0985d3ab7d0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the following improvements to the user interface and usability have been introduced for multiple forms related to the CRM functionality of Acumatica ERP.{br}{TOC}
==Modification of the Order of Inventory Items in Opportunities and Quotes==
Users can now modify the order of inventory items included in an opportunity or quote by dragging lines on the '''Document Details''' tab of the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) or [HelpRoot_FormReference\CR_30_45_00|Sales Quotes] ([~/?ScreenId=CR304500|CR304500]) form.{br}

A user can modify the order of the document details for an opportunity only if it has the ''Open'' status and no submitted quotes (that is, any associated quotes should have the ''Draft'' status).{br}

A user can modify the order of the document details for a quote only if it has the ''Draft'' status and associated opportunity is open.{br}

When a user modifies the order of the lines of an opportunity and saves these changes, the system applies the changes to associated primary quotes. Similarly, when a user changes the order of the lines for a primary quote, the system applies the changes to the associated opportunity.{br}

When a user converts an opportunity to a sales order, an invoice, or a service order, the system orders the document lines in the same way as they have been ordered in the opportunity.
==Other UI Improvements==
On the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form, the '''Class ID''' box has been moved up before the '''Stage''' box in the Summary area to streamline the opportunity creation.{br}

Also, the '''Class ID''' and '''Class Description''' columns have been added to the '''Opportunities''' tab of the following forms:[anchor|#_9bd1ce28-aa90-4c15-a851-0480ee505aa2]
*[HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000])
*[HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000])
*[HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000])
*[HelpRoot_FormReference\CR_20_20_00|Marketing Campaigns] ([~/?ScreenId=CR202000|CR202000])

By default, these columns are hidden. A user can add the hidden columns by using the '''Column Configurator''' dialog box, as shown in the screenshot below.[anchor|#_64a54fdb-bb69-4ab7-94aa-8cc423026421][anchor|#_d8278cce-ab19-45a0-b500-d978044ae63d][image:ReleaseNotes/Images/RN_2020_R1_CRM_HiddenColumns.png|popup|Hidden columns on the Opportunity tab of the Business Accounts form|450px]]]></column>
			<column name="PlainText"><![CDATA[CRM: Improvements on the UI In  Acumatica ERP 2020 R1, the following improvements to the user interface and usability have been introduced for         multiple forms related to the CRM functionality of  Acumatica ERP. Modification of the Order of Inventory Items in Opportunities and Quotes Users can now modify the order of inventory items included in an opportunity or quote by         dragging lines on the  Document Details  tab of the   ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000) or   ([~/?ScreenId=CR304500|CR304500]) Sales Quotes (CR304500) form. A user can modify the order of the document details for an opportunity only if it has the            Open  status and no submitted quotes (that is, any associated quotes should have the            Draft  status). A user can modify the order of the document details for a quote only if it has the            Draft  status and associated opportunity is open. When a user modifies the order of the lines of an opportunity and saves these changes, the         system applies the changes to  associated primary quotes. Similarly, when a user changes the         order of the lines for a primary quote, the system applies the changes to the associated         opportunity. When a user converts an opportunity to a sales order, an  invoice, or a service order, the         system orders the document lines in the same way as they have been ordered in the         opportunity. Other UI Improvements On the   ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000) form, the  Class           ID  box has been moved up before the  Stage  box in the         Summary area to streamline the opportunity creation. Also, the  Class ID  and  Class Description          columns have been added to the  Opportunities  tab of the following         forms:  ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000)  ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000)  ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000)  ([~/?ScreenId=CR202000|CR202000]) Marketing Campaigns (CR202000) By default, these columns are hidden. A user can add the hidden columns by using the            Column Configurator  dialog box, as shown in the screenshot         below. Hidden columns on the Opportunity tab of the Business Accounts form ]]></column>
		</row>
		<row PageID="d2ff105b-55c7-4885-ab8a-0ae94dedfdfb" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="fd3bbb64-28b7-cad8-2c16-f03b2b307f68" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the processing of opportunities and cases has been redesigned to use a new workflow engine. {br}{TOC}
==Processing Opportunities==
The system now automatically assigns an opportunity the applicable status based on user actions, rather than the user needing to manually change the status repeatedly. That is, the '''Status''' box has become unavailable for editing on the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form.{br}

To change the status of an opportunity, a user should click the corresponding action button on the form toolbar; the system opens the new '''Details''' dialog box so the user can provide the details to be used for the change. Namely, the user selects the reason for the change and the next stage to move the opportunity to, as shown in the following screenshot. (In this example, the user has clicked the '''Open''' button for the new opportunity.) [anchor|#_14ddbbbf-1d15-4ba5-8fe2-f4ebdbb0e61d][anchor|#_e896fa06-af10-4a8e-80aa-37dda0409cc5][image:ReleaseNotes/Images/RN_2020_R1_CRM_Opportunity_Workflow_Reason.png|popup|The Details dialog box on the Opportunities form|450px]
The actions that are most relevant to the current status of an opportunity are displayed directly on the form toolbar, and other actions are grouped under the '''Actions''' menu. For example, for an opportunity with the ''New'' status, the '''Open''' and '''Create Quote''' actions are displayed on the form toolbar, as shown in the following screenshot.[anchor|#_242e436e-b79d-4d68-b9f0-374170ec33df][anchor|#_d890075c-d72c-45d7-bec7-59bd79b4a7f7][image:ReleaseNotes/Images/RN_2020_R1_CRM_Opportunity_Workflow_buttons.png|popup|Actions on the Opportunities form toolbar|450px]
The following boxes, which support the new workflow, have been added to the Selection area of the [HelpRoot_FormReference\CR_50_31_20|Update Opportunities] ([~/?ScreenId=CR503120|CR503120]) form, which is designed for mass processing:[anchor|#_4d87836c-df58-4294-ad43-adc37ac9aae0]
*'''Operation''': Offers the following options: ''Update Settings'' (performs a mass update of the processed opportunity records; this is the operation that was performed on the form in previous versions) and ''Execute Action'' (makes the '''Action''' box available, which includes actions for changing the status of each processed opportunity).
*'''Action''': Includes the following options: ''Open'', ''Close as Won'', and ''Close as Lost''.

The following screenshot demonstrates the changes to this form. When a user invokes processing, for the selected opportunities or all opportunities, the system performs the selected operation (and action, if the selected operation is ''Execute Action'').[anchor|#_fa4ce4db-8aa5-4bae-963f-c428c2bcc870][anchor|#_87843143-da1f-436a-9584-05c3c0f505ef][image:ReleaseNotes/Images/RN_2020_R1_CRM_Opportunity_Mass_Workflow.png|popup|New boxes in the Selection area of the Update Opportunities form|450px]
==Processing Cases==
As with opportunities, the system now automatically assigns a case the applicable status based on user actions, rather than the user needing to manually change the status repeatedly. That is, the '''Status''' box has become unavailable for editing on the [HelpRoot_FormReference\CR_30_60_00|Cases] ([~/?ScreenId=CR306000|CR306000]) form.{br}

To change the status of a case, a user should click the corresponding action button on the form toolbar. The system opens the new '''Details''' dialog box so the user can provide the details to be used for the change, as shown in the following screenshot. (In this example, the user has clicked the '''Close''' button for the case.) [anchor|#_e6b24c7e-4972-4945-9639-a76b94c0f516][anchor|#_50705f30-e687-4310-9d91-3dac96d75447][image:ReleaseNotes/Images/RN_2020_R1_CRM_Case_Workflow_Reason.png|popup|The Details dialog box on the Cases form|450px]
The actions that are most relevant to the current status of a case are displayed directly on the form toolbar, while other actions are grouped under the '''Actions''' menu. For example, for a case with the ''New'' status, the '''Open''' and '''Take Case''' actions are displayed on the form toolbar, and other actions are grouped under the '''Actions''' menu.{br}

The following boxes, which support the new workflow, have been added to the Selection area of the [HelpRoot_FormReference\CR_50_32_20|Update Cases] ([~/?ScreenId=CR503220|CR503220]) form, which is designed for mass processing:[anchor|#_ab82cac0-2111-4738-bee4-f8208f6b3fe4]
*'''Operation''': Offers the following options: ''Update Settings'' (performs a mass update of the case records that are included in processing; this is the operation that was performed on the form in previous versions) and ''Execute Action'' (makes available the '''Action''' box, which includes actions for changing the status of each processed case).
*'''Action''': Includes the following options ''Open'', ''Pending Customer'', ''Close''.

When a user invokes processing, for the selected cases or all cases listed on the form, the system performs the selected operation (and action, if the selected operation is'' Execute Action'').]]></column>
			<column name="PlainText"><![CDATA[CRM: New Workflow in Opportunities and Cases In  Acumatica ERP 2020 R1, the processing of opportunities and cases has been redesigned to use a new workflow         engine.  Processing Opportunities The system now automatically assigns an opportunity the applicable status based on user         actions, rather than the user needing to manually change the status repeatedly. That is, the            Status  box has become unavailable for editing on the   ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000) form. To change the status of an opportunity, a user should click the corresponding action button on         the form toolbar; the system opens the new  Details  dialog box so the         user can provide the details to be used for the change. Namely, the user selects the reason         for the change and the next stage to move the opportunity to, as shown in the following         screenshot. (In this example, the user has clicked the  Open  button         for the new opportunity.)  The Details dialog box on the Opportunities form The actions that are most relevant to the current status of an opportunity are displayed         directly on the form toolbar, and other actions are grouped under the            Actions  menu. For example, for an opportunity with the  New          status, the  Open  and  Create Quote  actions are         displayed on the form toolbar, as shown in the following screenshot. Actions on the Opportunities form toolbar The following boxes, which support the new workflow, have been added to the Selection area of         the   ([~/?ScreenId=CR503120|CR503120]) Update Opportunities (CR503120) form, which is designed for mass         processing: Operation : Offers the following options:  Update Settings            (performs a mass update of the processed opportunity records; this is the operation that           was performed on the form in previous versions) and  Execute Action  (makes the              Action  box available, which includes actions for changing the           status of each processed opportunity). Action : Includes the following options:  Open ,  Close as             Won , and  Close as Lost . The following screenshot demonstrates the changes to this form. When a user invokes         processing, for the selected opportunities or all opportunities, the system performs the         selected operation (and action, if the selected operation is  Execute Action ). New boxes in the Selection area of the Update Opportunities form Processing Cases As with opportunities, the system now automatically assigns a case the applicable status         based on user actions, rather than the user needing to manually change the status         repeatedly. That is, the  Status  box has become unavailable for         editing on the   ([~/?ScreenId=CR306000|CR306000]) Cases (CR306000) form. To change the status of a case, a user should click the corresponding action button on the         form toolbar. The system opens the new  Details  dialog box so the user         can provide the details to be used for the change, as shown in the following screenshot. (In         this example, the user has clicked the  Close  button for the case.)  The Details dialog box on the Cases form The actions that are most relevant to the current status of a case are displayed directly         on the form toolbar, while other actions are grouped under the            Actions  menu. For example, for a case with the  New  status,         the  Open  and  Take Case  actions are displayed         on the form toolbar, and other actions are grouped under the  Actions          menu. The following boxes, which support the new workflow, have been added to the Selection area         of the   ([~/?ScreenId=CR503220|CR503220]) Update Cases (CR503220) form, which is designed for         mass processing: Operation : Offers the following options:   Update Settings            (performs a mass update of the case records that are included in processing; this is the           operation that was performed on the form in previous versions) and  Execute Action            (makes available the  Action  box, which includes actions for           changing the status of each processed case). Action : Includes the following options  Open ,  Pending             Customer ,  Close . When a user invokes processing, for the selected cases or all cases listed on the form, the         system performs the selected operation (and action, if the selected operation is  Execute           Action ). ]]></column>
		</row>
		<row PageID="53139adf-aa4f-4b1e-91bd-9e73467d1ee5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="836a7d52-0cbb-3f28-30e6-06bff4125a5f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, each contact could be associated with only one lead. After a lead had been converted to a contact, a sales team could not convert a contact back to a lead so that the marketing team could nurture it.{br}

Starting from Acumatica ERP 2020 R1, the lead workflow has been redesigned and a new workflow engine has been implemented.
As part of redesigning this workflow, the new ''Lead Classes (CR2070PL)'' form has been introduced. Also, the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form has been redesigned to improve its usability: New tabs and boxes have been added, and the existing tabs have been regrouped.{br}{TOC}
==New Forms for Classes==
In previous versions of Acumatica ERP, there was only one form for both lead classes and contact classes—the ''Contact & Lead Classes (CR207000) '' form. The following forms based on the ''Contact & Lead Classes'' form have been developed: [anchor|#_6a8cc1d5-bf3f-483e-8cb4-fbe5b62d438c]
*''Lead Classes (CR207000) ''
* ''Contact Classes (CR205000)''

The new ''Lead Classes'' form is shown in the following screenshot.[anchor|#_c1d4f92e-3424-453d-8229-cd4b8b2ec069][anchor|#_4a676258-4a73-4431-b806-48142cf096c7][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_Lead_Classes_Form.png|popup|The Lead Classes (CR207000) form|350px]
The new ''Contact Classes'' form is shown in the following screenshot.[anchor|#_fadb00c9-2aa8-4d3e-aa27-82035cb2de07][anchor|#_63ec4f9d-38c9-48f9-b6ef-ac425c71ea02][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_Contact_Classes_Form.png|popup|The Contact Classes (CR205000) form|350px]
On the '''Details''' tabs of these forms, the following enhancements have been made over the ''Contact & Lead Classes'' form: [anchor|#_281fdee6-bf88-4faf-bd5b-2dd8c09e704d]
*In the '''Data Entry Settings''' section, users can select or create assignment maps.
*In the '''Conversion Settings''' section, users can specify default classes for records that can be created from the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) or [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form.

==Improved Layout for the Leads Form==
On the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form, the following changes have been made to improve the usability of the form:[anchor|#_65677004-34ed-46d0-97b9-b2ee78bfb97a]
*The '''Details''' tab has been renamed to the '''Contact Info''', as shown in the following screenshot. The boxes on the tab are grouped into the '''Contact''', '''Address''' and '''Personal Data Privacy''' sections. On this tab, the new '''Override''' check box has been added. Also on this tab, in the Summary area, the '''Description''' box has been added. [anchor|#_890e3cbc-2437-454d-901e-9dd342e7b616][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_Contact_Info_Tab.png|popup|The Contact Info tab of the Leads (CR301000) form|400px]
*The '''CRM Info''' and '''Opportunities''' tabs (shown in the following screenshots) have been added:[anchor|#_2a2229c7-1760-4121-aad4-30e4d786c4c9][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_CRM_Info_Tab.png|popup|The CRM Info tab of the Leads (CR301000) form|400px][anchor|#_a17be21c-cb6a-4676-8a91-cdce56f6738f][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_Opportunities_Tab.png|popup|The Opportunities tab of the Leads (CR301000) form|400px]

With the new layout of the [HelpRoot_FormReference\CR_30_10_00|Leads] form, users can update contact information by using the [HelpRoot_FormReference\CR_30_10_00|Leads], [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]), and [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) forms. If the '''Override''' check box on the '''Contact Info''' tab is cleared, the contact information for a lead on the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]), [HelpRoot_FormReference\CR_30_10_00|Leads], and [HelpRoot_FormReference\CR_30_30_00|Business Accounts] forms is synchronized. If the check box is selected, the contact information for the selected lead on the [HelpRoot_FormReference\CR_30_10_00|Leads] form can differ from the contact information of the lead (on the related [HelpRoot_FormReference\CR_30_20_00|Contacts], [HelpRoot_FormReference\CR_30_10_00|Leads], and [HelpRoot_FormReference\CR_30_30_00|Business Accounts] forms) and from the contact information of the leads related to this lead. The synchronization or overriding of settings applies to all the settings on the '''Contact Info''' tab.
On the [HelpRoot_FormReference\CR_30_10_00|Leads] form, users can create a contact, a business account, and an opportunity by using the respective dialog boxes which are shown in the following screenshots.
A user can invoke the '''New Contact''' dialog box by selecting the '''Create Contact''' action from the '''Actions''' menu of the [HelpRoot_FormReference\CR_30_10_00|Leads] form toolbar.[anchor|#_286f50b4-a0b5-46e6-b409-88f5ba2190c8][anchor|#_9d0c5329-2f9a-4cb1-ba17-f60d6e37f210][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_New_Contact_Dialog_Box.png|popup|The New Contact dialog box|250px]
A user can invoke the '''New Account''' dialog box by clicking the '''Create Account''' button on the '''Actions''' menu of the [HelpRoot_FormReference\CR_30_10_00|Leads] form toolbar.[anchor|#_67170031-119e-4797-8115-b7beef3c1801][anchor|#_344f8257-d046-421a-948a-73b117fc37d4][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_New_Account_Dialog_Box.png|popup|The New Account dialog box|250px]
A user can invoke the '''New Opportunity''' dialog box by selecting the '''Convert to Opportunity''' action from the '''Actions''' menu of the [HelpRoot_FormReference\CR_30_10_00|Leads] form toolbar or by clicking the '''Convert to Opportunity''' button on the '''Opportunities''' tab of this form.[anchor|#_14f528ed-6a01-405b-986b-20a5c3faad50][anchor|#_9d143827-ee84-461a-aaef-5d62c6162d04][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Workflow_New_Opportunity_Dialog_Box.png|popup|The New Opportunity dialog box|250px]
==Improved Layout of the Business Accounts (CR303000) Form==
On the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form, the '''Leads''' tab has been added, as shown in the following screenshot. With this tab, users can easily navigate to the [HelpRoot_FormReference\CR_30_10_00|Leads] form.[anchor|#_00792005-2330-4022-a367-a2593241fda6][anchor|#_aa75f1ab-7796-4083-b3ba-ffb3eafab392][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Lead_Qualification_Bus_Account_Leads_Tab.png|popup|The Leads tab of the Business Accounts (CR303000) form|450px]
==Improved Layout of the Contacts (CR302000) Form==
On the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form, the '''Leads''' tab has been added. With this tab, users can easily navigate to the [HelpRoot_FormReference\CR_30_10_00|Leads] form. For details, see [HelpRoot_ReleaseNotes\RN_2020_R1_CRM_New_Contacts_Form_Layout|CRM: New Layout of the Contacts Form].
==Enhanced Lead Qualification Workflow==
With the new workflow, users can link multiple leads to a contact. Also, a sales team can change the state of a lead, to return a lead that has been converted to a contact back to the marketing team for nurturing if the contact is not ready to purchase company products now but may have interest in future offers.{br}

On the new '''Leads''' tabs of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) and the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) forms, users can see all the leads linked to a business account or a contact respectively. Users can create a lead by using the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) or the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form. A user can open the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form, select a lead, specify the information about the business account and contact account (if needed), and create an opportunity by clicking '''Actions''' > '''Create Opportunity''' on the form toolbar. On the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form, which opens, the user can specify the necessary settings for the opportunity; then the user can go back to the [HelpRoot_FormReference\CR_30_10_00|Leads] form to continue working with the lead, which now has the ''Converted'' state, and change the state of the lead to ''Open'', if needed, for the lead to be further nurtured by the marketing team.
==Updated Lead States==
As required in the new workflow, transitions between lead states have been implemented as actions on the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form. Customers or partners can customize the lead workflow to define what states correspond to the ''Active'' (nurtured) state of the lead. A system administrator can configure notifications related to lead states. The lead state is displayed in the '''Status''' box of the [HelpRoot_FormReference\CR_30_10_00|Leads] form. The updated lead states are shown in the following table.[anchor|#_3b5f8f1c-d459-44aa-a7d2-dbd03ab4fc63]
===Lead states===
{| class="checklist" | width="100%" 
|- 
!width="31%" ! Name of the State
!width="68%" ! Description
|- 
| Active
| A lead is in this state is active and can be nurtured. A lead in the ''Active'' state can also be in other states (''New'', ''Open'', ''Sales-Ready'', ''Sales-Accepted''). This state is represented by the lead '''Active''' check box.
|- 
| New
| 
A lead is in this state after it has been created. This state can be implemented as the initial state.{br}

The businesses differentiate new leads from processed leads by this state.
|- 
| Open
| A lead is in this state if it is nurtured by the marketing team, but neither team has confidence that the lead is more ready for purchase than the other leads.
|- 
| Sales-Ready
| A lead is in this state if the marketing team believes that the lead showed more interest in the organization&rsquo;s products than the others, and it is worth to let the sales team look at it.
|- 
| Sales-Accepted
| A lead is this state after it has been initially reviewed or qualified by the lead qualification team and it is ready to meet with the sales team for further qualification.
|- 
| Converted
| 
A lead is in this state after it has been converted to an opportunity and no further nurturing for it is needed.{br}

Businesses that do not use opportunities can use this state to stop lead nurturing after an account or contact has been created or assigned for a lead.
|- 
| Disqualified
| 
A lead is in this state if it is known that there&rsquo;s no interest in the organization&rsquo;s products, or the lead is not reachable (for example, the contact information is not valid).{br}

Some organizations may also use this state for deduplicated leads.((({S:Warn}On upgrade to 2020R1, lead records with the old automation ''Closed'' status are migrated to the ''Disqualified'' status.
)))
|- 
| Suspended
| The state is added to support upgrade from the previous versions of Acumatica ERP. If customers have leads with the ''Suspended'' status, they should end up in this state after the upgrade to 2020R1. There are no transitions leading to this state.
|}
The transitions of lead states are shown in the following table.[anchor|#_67182604-64c4-45f9-ac47-004ac6a9eb2f]
===Transitions of lead states===
{| class="checklist" | width="100%" 
|- 
!width="33%" ! From State
!width="33%" ! To State
!width="33%" ! Name of the Action
|- 
| Not applicable
| ''New''
| Not Applicable
|- 
| All statuses
| ''Open''
|  '''Open'''
|- 
|  ''New'' or ''Open''
|  ''Sales-Ready''
|  '''Qualify'''
|- 
|  ''New'', ''Open'', or ''Sales-Ready''
|  ''Sales-Accepted''
|  '''Accept'''
|- 
|  ''New'', ''Open'', ''Sales-Ready'', or ''Sales-Accepted''
|  ''Converted''
|  '''Convert to Opportunity'''
|- 
|  ''New'', ''Open'', ''Sales-Ready'', or ''Sales-Accepted''
|  ''Disqualified''
|  '''Disqualify'''
|}]]></column>
			<column name="PlainText"><![CDATA[CRM: New Lead Qualification Workflow In previous versions of  Acumatica ERP, each contact could be associated with only one lead. After a lead had been converted to         a contact,          a         sales team could not  convert a contact back to a lead so that the         marketing team could nurture it. Starting from  Acumatica ERP 2020 R1, the lead workflow has been redesigned and a new workflow engine has been         implemented. As part of redesigning this workflow, the new  Lead Classes (CR2070PL)  form has been         introduced. Also, the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form has been         redesigned to improve its usability: New tabs and boxes have been added, and the existing         tabs have been regrouped. New Forms for Classes In previous versions of  Acumatica ERP, there was only one form for both lead classes and contact classes—the            Contact           & Lead Classes (CR207000)   form. The following forms based on         the  Contact & Lead Classes  form have been developed:  Lead Classes (CR207000)  Contact Classes (CR205000) The new  Lead Classes  form is shown in the following screenshot. The Lead Classes (CR207000) form The new  Contact Classes  form is shown in the following screenshot. The Contact Classes (CR205000) form On the  Details  tabs of these forms, the following enhancements have         been          made          over the  Contact & Lead Classes  form:  In the  Data Entry Settings  section, users can select or create           assignment maps. In the  Conversion Settings  section, users can specify default           classes for records that can be created from the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) or   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form. Improved Layout for the Leads Form On the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form, the following changes         have been made to improve the usability of the form: The  Details  tab has been renamed to the  Contact             Info , as shown in the following screenshot. The boxes on the tab are grouped           into the  Contact ,  Address  and              Personal Data Privacy  sections. On this tab, the new              Override  check box has been added. Also on this tab, in the           Summary area, the  Description  box has been added.  The Contact Info tab of the Leads (CR301000) form The  CRM Info  and  Opportunities  tabs (shown           in the following screenshots) have been added: The CRM Info tab of the Leads (CR301000) form The Opportunities tab of the Leads (CR301000) form With the new layout of the   ([~/?ScreenId=CR301000|CR301000]) Leads form, users can         update contact information by using the   ([~/?ScreenId=CR301000|CR301000]) Leads,   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000), and   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) forms. If the            Override  check box on the  Contact Info  tab         is cleared, the contact information for a lead on the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000),   ([~/?ScreenId=CR301000|CR301000]) Leads, and   ([~/?ScreenId=CR303000|CR303000]) Business Accounts         forms is synchronized. If the check box is selected, the contact information for the         selected lead on the   ([~/?ScreenId=CR301000|CR301000]) Leads form can differ from the         contact information of the lead (on the related   ([~/?ScreenId=CR302000|CR302000]) Contacts,   ([~/?ScreenId=CR301000|CR301000]) Leads, and   ([~/?ScreenId=CR303000|CR303000]) Business Accounts forms) and from the contact information of the         leads related to this lead.          The         synchronization or overriding of settings applies  to all the settings on         the  Contact Info  tab. On the   ([~/?ScreenId=CR301000|CR301000]) Leads form, users can create a contact, a         business account, and an opportunity by using the respective dialog boxes which are shown in         the following screenshots. A user can invoke the  New Contact  dialog box by selecting the            Create Contact  action from the  Actions  menu         of the   ([~/?ScreenId=CR301000|CR301000]) Leads form toolbar. The New Contact dialog box A user can invoke the  New Account  dialog box by clicking the            Create Account  button on the  Actions  menu of         the   ([~/?ScreenId=CR301000|CR301000]) Leads form toolbar. The New Account dialog box A user can invoke the  New Opportunity  dialog box by selecting the            Convert to Opportunity  action from the            Actions  menu of the   ([~/?ScreenId=CR301000|CR301000]) Leads         form toolbar or by clicking the  Convert to Opportunity  button on the            Opportunities  tab of this form. The New Opportunity dialog box Improved Layout of the Business Accounts (CR303000) Form On the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form, the            Leads  tab has been added, as shown in the following screenshot.         With this tab, users can easily navigate to the   ([~/?ScreenId=CR301000|CR301000]) Leads         form. The Leads tab of the Business Accounts (CR303000) form Improved Layout of the Contacts (CR302000) Form On the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form, the            Leads  tab has been added. With this tab, users can easily navigate         to the   ([~/?ScreenId=CR301000|CR301000]) Leads form. For details, see  CRM: New Layout of the Contacts Form. Enhanced Lead Qualification Workflow With the new workflow,          users         can link multiple leads to a contact . Also, a sales team can change the         state of a lead, to return a lead that has been converted to a contact back to the marketing         team for nurturing if the contact is not ready to purchase company products now but may have         interest in future offers. On the new  Leads  tabs of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) and the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) forms, users can see all the leads         linked to a business account or a contact respectively. Users can create a lead by using the             ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) or the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form. A user can open the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form, select a lead, specify the         information about the business account and contact account (if needed), and create an         opportunity by clicking  Actions Create Opportunity  on the form toolbar. On the   ([~/?ScreenId=CR304000|CR304000]) Opportunities         (CR304000) form, which opens, the user can specify the necessary settings for the         opportunity; then the user can go back to the   ([~/?ScreenId=CR301000|CR301000]) Leads         form to continue working with the lead, which now has the  Converted  state, and change         the state of the lead to  Open , if needed, for the lead to be further nurtured by the         marketing team. Updated Lead States As required in the new workflow, transitions between lead states have been implemented as         actions on the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form. Customers or         partners can customize the lead workflow to define what states correspond to the            Active  (nurtured) state of the lead. A system administrator can configure         notifications related to lead states. The lead state is displayed in the  Status  box         of the   ([~/?ScreenId=CR301000|CR301000]) Leads form. The updated lead states are shown         in the following table. Lead states Name of the State Description Active A lead                  is                  in this state is active and can be nurtured. A lead in the  Active  state can                 also be in other states ( New ,  Open ,  Sales-Ready ,                    Sales-Accepted ). This state is represented by the lead                    Active  check box. New A lead is in this state after it has been created. This state can be implemented                   as the initial state. The businesses differentiate new leads from processed leads by this state. Open A lead is in this state if it is nurtured by the marketing team, but neither                 team has confidence that the lead is more ready for purchase than the other                 leads. Sales-Ready A lead is in this state if the marketing team believes that the lead showed                 more interest in the organization's products than the others, and it is worth to let                 the sales team look at it. Sales-Accepted A lead is this state after it has been initially reviewed or qualified by the                 lead qualification team and it is ready to meet with the sales team for further                 qualification. Converted A lead is in this state after it has been converted to an opportunity and no                   further nurturing for it is needed. Businesses that do not use opportunities can use this state to stop lead                   nurturing after an account or contact has been created or assigned for a lead. Disqualified A lead is in this state if it is known that there's no interest in the                   organization's products, or the lead is not reachable (for example, the contact                   information is not valid). Some organizations may also use this state for deduplicated leads. On upgrade to 2020R1, lead records with the old automation  Closed                    status are migrated to the  Disqualified  status. Suspended The state is added to support upgrade from the previous versions of  Acumatica ERP. If customers have leads with the  Suspended  status, they should end up in                 this state after the upgrade to 2020R1. There are no transitions leading to this                 state. The transitions of lead states are shown in the following table. Transitions of lead states From State To State Name of the Action Not applicable New Not Applicable All statuses Open Open New  or  Open Sales-Ready Qualify New ,  Open , or  Sales-Ready Sales-Accepted Accept New ,  Open ,  Sales-Ready , or  Sales-Accepted Converted Convert to Opportunity New ,  Open ,  Sales-Ready , or  Sales-Accepted Disqualified Disqualify ]]></column>
		</row>
		<row PageID="dc8f9295-4ae9-4a19-ae9f-f1355d2449d9" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="81627e83-3979-4799-87b0-6c57cea76d01" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a new layout of the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form, which is similar to the layout of the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form, has been introduced. The form has been optimized for quick data entry. With the new layout, users can more easily link the data on the [HelpRoot_FormReference\CR_30_20_00|Contacts] and [HelpRoot_FormReference\CR_30_10_00|Leads] forms.{br}{TOC}
==New and Updated Tabs of the Contacts (CR302000) Form==
The '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form contains general information about the contact—such as contact information, address, and settings related to personal data privacy—as shown in the following screenshot.[anchor|#_cf1b00bf-72fc-43c2-8fec-0841d341cfa2][anchor|#_66f7b5e2-2122-4d79-b520-5517dd1d591a][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Contacts_Form_Layout_Details_Tab.png|popup|The Details tab of the Contacts (CR302000) form|450px]
The '''CRM Info''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form contains the CRM information, activity statistics data, contact preference information, personal data, and the photo of the contact, as shown in the following screenshot.[anchor|#_f7f0fd4c-7358-4931-8fa6-ceb26c134271][anchor|#_a0371ce0-9744-4736-8b19-f1b06919e8c9][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Contacts_Form_Layout_CRM_Info_Tab.png|popup|The CRM Info tab of the Contacts (CR302000) form|450px]
The '''Leads''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form contains the information about leads, linked to the contact, as shown in the following screenshot.[anchor|#_9450f4f3-c67c-4f64-9826-a8b38ac1d459][anchor|#_80721a18-c089-4b74-95cd-fb84413d71bb][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Contacts_Form_Leads_Tab.png|popup|The Leads tab of the Contacts (CR302000) form|450px]]]></column>
			<column name="PlainText"><![CDATA[CRM: New Layout of the Contacts Form In  Acumatica ERP 2020 R1,     a new layout of the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form, which is     similar to the layout of the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form, has     been introduced. The form has been optimized for quick data entry. With the new layout, users     can more easily link the data on the   ([~/?ScreenId=CR302000|CR302000]) Contacts and   ([~/?ScreenId=CR301000|CR301000]) Leads forms. New and Updated Tabs of the Contacts (CR302000) Form The  Details  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts     (CR302000) form contains general information about the contact—such as contact     information, address, and settings related to personal data      privacy —as     shown in the following screenshot. The Details tab of the Contacts (CR302000) form The  CRM Info  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts     form contains the CRM information, activity statistics data, contact preference information,     personal data, and the photo of the contact, as shown in the following screenshot. The CRM Info tab of the Contacts (CR302000) form The  Leads  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts form     contains the information about leads, linked to the contact, as shown in the following     screenshot. The Leads tab of the Contacts (CR302000) form ]]></column>
		</row>
		<row PageID="2a4237f5-050e-4605-9a41-a4642b8f0abc" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a6c13fde-c75b-edc5-21fb-883861aac212" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a new set of reports for marketing and support has been introduced to improve transparency, productivity, and decision making for employees who utilize the Acumatica ERP functionality related to providing marketing and support services.{br}

The inquiry forms and the data on the tabs of the forms are implemented through built-in Acumatica ERP capabilities, namely generic inquires and pivot tables. The data used for the reports can be exposed to an external system easily through the OData protocol.{br}

The following inquiry forms have been added to the system, and users can access them in the '''Inquiries''' category of the '''Marketing''' workspace, as shown in the following screenshot:[anchor|#_f5521ff7-383a-4187-adbc-c994ccb81cc9]
*''Leads BI (CR3010BI)''
* ''Lead Conversion BI (CR3011BI)''
[anchor|#_246a4bd0-32a2-4778-8b6e-198b89883b7e][anchor|#_f994058e-3b5c-4c45-9aec-0c33b239a4b6][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Reports_Leads_BI.png|The new reports in the Marketing workspace |400px]
Most of the tabs of these inquiry forms display marketing data in pivot tables and contain lead qualification metrics.{br}

The ''Cases BI (CR3060BI)'' inquiry form has also been introduced, and users can access it in the '''Inquiries''' category of the '''Support''' workspace, as shown in the following screenshot.[anchor|#_7b35338d-3911-4637-8406-92fe4e01e5b2][anchor|#_ba4357b9-624e-4ce7-bfea-56faf706da40][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Reports_Cases_BI.png|The new reports in the Support workspace|400px]{br}{TOC}
==Inquiry Form Showing Lead Metrics==
The ''Leads BI (CR3010BI)'' inquiry form is based on the ''Leads BI'' generic inquiry, which was created and can be modified on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form. Most of the predefined tabs on the form (shown in the following screenshot) contain pivot tables that display lead generation analysis and lead processing metrics, which can provide valuable information for marketing personnel. [anchor|#_3fa7a7d3-677c-45dd-92ca-60f54720c7a3][anchor|#_a40239a7-e435-43bd-bf28-7705da7f8baa][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Pivot_Tables_Leads_BI.png|The pivot tables of the Leads BI generic inquiry|450px]
The predefined tabs of the form are described in the following table.[anchor|#_0b922ed3-4ba3-4d7c-a1fa-f1a1a1d8a93d]
===Tabs of the Leads BI (CR3010BI) form===
{| class="checklist" | width="100%" 
|- 
!width="35%" ! Name of the Tab
!width="64%" ! Description
|- 
| '''All Records'''
| Shows all the leads that have been added to the system.
|- 
| '''Lead Analysis'''
| Provides an overview of the lead pipeline, including the following details:[anchor|#_d0a5284d-6b74-4391-8cc6-a6532edff5ac]
*The number of leads that have been acquired over a period of time
*The sources of the leads
*The number of leads in the pipeline
*The statuses of the leads
*The owners of the leads
A user can add other dimensions and filters based on custom attributes and user-defined fields.
|- 
| '''Lead Activity Analysis'''
| Shows lead activity in general and within a number of specified periods of time. Sales managers can use this information to decrease the possibility that lead will be lost because of a late reply from a sales representative.
|- 
| '''Lead Response Time'''
| 
Shows how much time it takes a sales representative to respond to a lead.{br}

In most cases, the sooner a sales representative contacts a lead, the higher the chance that this lead will be converted into an opportunity. 
|- 
| '''Lead Qualification Analysis'''
| Shows the number of leads that have been converted to opportunities. This information can help sales managers to determine the quality of leads.
|- 
| '''Lead Qualification Time'''
| Displays how much time it takes to convert a lead to a contact. The information can be treated as an indicator of the quality of the marketing-supplied leads.
|- 
| '''Lead Disqualification Reasons'''
| Shows the main reasons leads get disqualified for each lead source.
|}
==Inquiry Form Showing Lead Conversion Metrics=={br}

The ''Lead Conversion BI (CR3011BI)'' inquiry form is based on the ''Lead Conversion BI'' generic inquiry, which was created and can be modified on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form. Most of the predefined tabs on the form (shown in the following screenshot) contain pivot tables that display lead conversion and lead revenue metrics, which can yield valuable information for marketing personnel. [anchor|#_e86c0c5a-3c67-4114-aa34-386827351d6c][anchor|#_31370ac4-15fd-4c18-a495-5bed795a25c1][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Pivot_Tables_Lead_Conv_BI.png|The pivot tables of the Lead Conversion BI generic inquiry|450px]
The predefined tabs of the form are described in the following table.[anchor|#_f4fe012e-d932-4eae-899c-62954de0938c]
===Tabs of the Lead Conversion BI (CR3011BI) form===
{| class="checklist" | width="100%" 
|- 
!width="34%" ! Name of the Tab
!width="65%" ! Description
|- 
| '''All Records'''
| Shows all the leads that have been added to the system.
|- 
| '''Lead Conversion Analysis'''
| Provides an overview of the lead-to-opportunity conversion.
|- 
| '''Lead Revenue Analysis'''
| Displays data that sales managers can use to identify the channels and sources that generate the most revenue, both prospective revenue for open opportunities and actual revenue for won opportunities.
|}{br}{TOC}
==Calculated Fields in Marketing Pivot Tables==
The system calculates the following fields in some of the pivot tables showing lead response time metrics:[anchor|#_b229f0c0-424b-408e-a9c7-bd9c8dcb8323]
*'''Last Activity Aging'''
* '''Last Response Time'''
* '''Lead Qualification Time'''

For the '''Last Activity Aging''' field, the following values are available:[anchor|#_bba559e4-7519-45aa-bb0f-b99e80f2c09e]
*''Empty'': No outgoing activity was logged into the system.
*''Last 30 days'': The last outgoing activity was performed within the last 30 days.
*''30—60 days'': The last outgoing activity was performed more than 30 days ago, but less than or equal to 60 days ago.
*''60—90 days'': The last outgoing activity was performed more than 60 days ago, but less than or equal to 90 days ago.
*''Over 90 days'': The last outgoing activity was performed more than 90 days ago.

For the '''Lead Response Time''' field, the value shows the amount of time it takes for a sales representative to follow up (for example, by calling or emailing) with a lead after self-identifying as a lead. Response time is displayed as days, hours, or minutes.{br}

For the '''Lead Qualification Time''' field, the value shows the number of days it takes for a sales manager to convert a lead.
==Support Inquiry Form==
The ''Cases BI (CR3060BI)'' form is based on the ''Cases BI'' generic inquiry, which was created and can be modified on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form.{br}

The generic inquiry, which has been designed based on the Customer Operations Performance Center Customer Experience (COPC CX) standard, collects different data related to case management. Multiple pivot tables based on the collected data have been added as tabs to the generic inquiry, as shown in the following screenshot.[anchor|#_cb0e0e2e-1c4a-4fad-a5da-f5cf962bbadb][anchor|#_da881680-b489-4a35-94c0-09fc342ad988][image:ReleaseNotes/Images/RN_2020_R1_CRM_New_Pivot_Tables_Cases_BI.png|popup|The pivot tables of the Cases BI generic inquiry|450px]
Most of the predefined tabs of the form contain pivot tables that display case-related metrics, which can yield valuable information for support personnel. The predefined tabs of the form are described in the following table.[anchor|#_cf08d1e8-e2e2-4420-85ad-d33f822f26df]
===Tabs of the Cases BI (CR3060BI) form===
{| class="checklist" | width="100%" 
|- 
!width="34%" ! Name of the Tab
!width="65%" ! Description
|- 
| '''All Records'''
| Shows all the cases that have been added to the system.
|- 
| '''Escalations'''
| Shows the number of escalations to a different tier that were made in a certain period of time.
|- 
| '''Efficiency Analysis'''
| Provides data, including the following, that support managers can use to understand the amount of work done by a support team over a certain period of time:[anchor|#_b9601eb8-b063-46d6-8608-33200821c517]
*The number of created activities (support transactions)
*The types of created activities
*The name of the team or support representative that created the activity

|- 
| '''Volume Analysis'''
| Provides an overview of incoming cases over a period of time, including the following data:[anchor|#_112b9dd9-b72f-40fc-929c-2ec6b1af1d7c]
*The number of cases received for a certain period of time
*The statuses of the cases
*The priorities of the cases
*The owners of the cases

|- 
| '''Backlog Analysis'''
| Provides an overview of cases in backlog, including the following data:[anchor|#_3069e63e-32da-4786-bdc8-c260ceb3384e]
*The number of the cases
*The priorities of the cases
*The owners of the cases
*The number of cases to be resolved in the given period according to the case SLA

|- 
| '''Closed On Time'''
| Shows the number of cases that are compliant with the case SLA in a certain period of time.
|}
A user can build other pivot tables based on the generic inquiry, filter data by any column, or use the inquiry as a source for multiple dashboard widgets. Also, a user with sufficient access rights can modify the generic inquiry by using the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form.
==Calculated Fields in Support Pivot Tables==
The system calculates the following fields in some of the pivot tables related to support:[anchor|#_755556fb-360f-4caf-8c0d-c08cc20921e2]
*'''Case On-Time'''
* '''External Activity'''

A case is ''on time'' (that is, meets the SLA) if it was closed within the SLA, or if it is not yet closed, but the target SLA for closing it is still in the future.{br}

{{{{Case On Time = IIF(
     [SLA Target Date] &lt;= (IIF(
        [Status] = "Closed",
        [Closed On],
        NOW()),
    "No",
    "Yes")
}}}}
An activity is ''external'' if it involves communication with a customer.]]></column>
			<column name="PlainText"><![CDATA[CRM: New      Report s In  Acumatica ERP 2020 R1, a new set of reports for marketing and support has been introduced to improve         transparency, productivity, and decision making for employees who utilize the  Acumatica ERP functionality related to providing marketing and support services. The inquiry forms and the data on the tabs of the forms are implemented through built-in            Acumatica ERP capabilities, namely generic inquires and pivot tables. The data used for the reports can         be exposed to an external system easily through the OData protocol. The following inquiry forms have been added to the system, and users can access them in the            Inquiries  category of the  Marketing          workspace, as shown in the following screenshot: Leads BI (CR3010BI) Lead Conversion BI (CR3011BI) The new reports in the Marketing workspace  Most of the tabs of these inquiry forms display marketing data in pivot tables and contain         lead qualification metrics. The  Cases BI (CR3060BI)  inquiry form has also been introduced, and users can access         it in the  Inquiries  category of the  Support          workspace, as shown in the following screenshot. The new reports in the Support workspace Inquiry Form Showing Lead Metrics The  Leads BI (CR3010BI)  inquiry form is based on the  Leads BI  generic         inquiry, which was created and can be modified on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form. Most of the predefined tabs on the         form (shown in the following screenshot) contain pivot tables that display lead generation         analysis and lead processing metrics, which can provide valuable information for marketing         personnel.  The pivot tables of the Leads BI generic inquiry The predefined tabs of the form are described in the following table. Tabs of the Leads BI (CR3010BI) form Name of the Tab Description All Records Shows all the leads that have been added to the system. Lead Analysis Provides an overview of the lead pipeline, including the following details: The number of leads that have been acquired over a period of time The sources of the leads The number of leads in the pipeline The statuses of the leads The owners of the leads A user can add other dimensions and filters based on custom attributes and                 user-defined fields. Lead Activity Analysis Shows lead activity in general and within a number of specified periods of                 time. Sales managers can use this information to decrease the possibility that lead                 will be lost because of a late reply from a sales representative. Lead Response Time Shows how much time it takes a sales representative to respond to a lead. In most cases, the sooner a sales representative contacts a lead, the higher the                   chance that this lead will be converted into an opportunity.  Lead Qualification Analysis Shows the number of leads that have been converted to opportunities. This                 information can help sales managers to determine the quality of leads. Lead Qualification Time Displays how much time it takes to convert a lead to a contact. The information                 can be treated as an indicator of the quality of the marketing-supplied                 leads. Lead Disqualification Reasons Shows the main reasons leads get disqualified for each lead source. Inquiry Form Showing Lead Conversion Metrics The  Lead Conversion BI (CR3011BI)  inquiry form is based on the  Lead Conversion           BI  generic inquiry, which was created and can be modified on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form. Most of the predefined tabs on the         form (shown in the following screenshot) contain pivot tables that display lead conversion         and lead revenue metrics, which can yield valuable information for marketing personnel.  The pivot tables of the Lead Conversion BI generic inquiry The predefined tabs of the form are described in the following table. Tabs of the Lead Conversion BI (CR3011BI) form Name of the Tab Description All Records Shows all the leads that have been added to the system. Lead Conversion Analysis Provides an overview of the lead-to-opportunity conversion. Lead Revenue Analysis Displays data that sales managers can use to identify the channels and sources                 that generate the most revenue, both prospective revenue for open opportunities and                 actual revenue for won opportunities. Calculated Fields in Marketing Pivot Tables The system calculates the following fields in some of the pivot tables showing lead response         time metrics: Last Activity Aging Last Response Time Lead Qualification Time For the  Last Activity Aging  field, the following values are         available: Empty : No outgoing activity was logged into the system. Last 30 days : The last outgoing activity was performed within the last 30 days. 30—60 days : The last outgoing activity was performed more than 30 days ago, but           less than or equal to 60 days ago. 60—90 days : The last outgoing activity was performed more than 60 days ago, but           less than or equal to 90 days ago. Over 90 days : The last outgoing activity was performed more than 90 days ago. For the  Lead Response Time  field, the value shows the amount of time it         takes for a sales representative to follow up (for example, by calling or emailing) with a         lead after self-identifying as a lead. Response time is displayed as days, hours, or         minutes. For the  Lead Qualification Time  field, the value shows the number of         days it takes for a sales manager to convert a lead. Support Inquiry Form The  Cases BI (CR3060BI)  form is based on the  Cases BI  generic inquiry, which         was created and can be modified on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry         (SM208000) form. The generic inquiry, which has been designed based on the Customer Operations Performance         Center Customer Experience (COPC CX) standard, collects different data related to case         management. Multiple pivot tables based on the collected data have been added as tabs to the         generic inquiry, as shown in the following screenshot. The pivot tables of the Cases BI generic inquiry Most of the predefined tabs of the form contain pivot tables that display case-related         metrics, which can yield valuable information for support personnel. The predefined tabs of         the form are described in the following table. Tabs of the Cases BI (CR3060BI) form Name of the Tab Description All Records Shows all the cases that have been added to the system. Escalations Shows the number of escalations to a different tier that were made in a certain                 period of time. Efficiency Analysis Provides data, including the following, that support managers can use to                 understand the amount of work done by a support team over a certain period of                   time: The number of created activities (support transactions) The types of created activities The name of the team or support representative that created the activity Volume Analysis Provides an overview of incoming cases over a period of time, including the                 following data: The number of cases received for a certain period of time The statuses of the cases The priorities of the cases The owners of the cases Backlog Analysis Provides an overview of cases in backlog, including the following data: The number of the cases The priorities of the cases The owners of the cases The number of cases to be resolved in the given period according to the case                     SLA Closed On Time Shows the number of cases that are compliant with the case SLA in a certain                 period of time. A user can build other pivot tables based on the generic inquiry, filter data by any         column, or use the inquiry as a source for multiple dashboard widgets. Also, a user with         sufficient access rights can modify the generic inquiry by using the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form. Calculated Fields in Support Pivot Tables The system calculates the following fields in some of the pivot tables related to support: Case On-Time External Activity A case is  on time  (that is, meets the SLA) if it was closed within the SLA, or if it is         not yet closed, but the target SLA for closing it is still in the future. Case On Time = IIF(
     [SLA Target Date] <= (IIF(
        [Status] = "Closed",
        [Closed On],
        NOW()),
    "No",
    "Yes") An activity is  external  if it involves communication with a customer. ]]></column>
		</row>
		<row PageID="d1754110-a550-44fd-bce0-5b4aa57905ff" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="da0092b8-b8f6-4157-ef0d-cf1a2aeff999" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, email routing was always enabled for all system email accounts.{br}{TOC}
==Routing Emails==
Starting from Acumatica ERP 2020 R1, a user can configure whether the incoming mail received by a particular system email account should be routed to particular employees.{br}

On the [HelpRoot_FormReference\SM_20_40_02|System Email Accounts] ([~/?ScreenId=SM204002|SM204002]) form, the '''Route Employee Emails''' check box has been added in the '''Main Processing''' section of the '''Incoming Mail Processing''' tab. The check box is cleared by default; the user can select it when the '''Incoming Mail Processing''' check box is selected on the tab, as shown in the following screenshot.[anchor|#_7f8d9033-6916-4f36-adda-ba31e88937c5][anchor|#_097626ab-2108-466e-ab0b-f0a510101b61][image:ReleaseNotes/Images/RN_2020_R1_CRM_Configurable_Email_Routing_Route_Employee_Emails_Check_Box.png|popup|Route Employee Emails check box|350px]
The incoming mail is routed to the email accounts specified for the employees on the [HelpRoot_FormReference\EP_20_30_00|Employees] ([~/?ScreenId=EP203000|EP203000]) form as follows:[anchor|#_2799e1f5-d40a-4b8a-97fd-e6a70f08eb45]
#The system creates an incoming duplicate email without recipients.
#The system adds to the duplicate email the following recipients: the parent activity owner (the owner of the outgoing email to which the sender of the incoming email has replied), the related entity owner (such as the owner of the opportunity, contact, or case), and business account owner.

Users can view the incoming mail on the [HelpRoot_FormReference\CO_40_90_00|Incoming] ([~/?ScreenId=CO409000|CO409000]) form, and any employee who works with specific entities—such as contacts, opportunities, and cases—and engages in email communication can receive emails from interested parties that they work with if the following settings are specified:[anchor|#_beff7570-3b86-4903-96a9-fffc4a4728b5]
*The '''Route Employee Emails''' check box is selected on the [HelpRoot_FormReference\SM_20_40_02|System Email Accounts] form, as described above.
*The '''Route Emails''' check box is selected on the [HelpRoot_FormReference\EP_20_30_00|Employees] ([~/?ScreenId=EP203000|EP203000]) form for the specific employee, as shown in the following screenshot. The check box is selected by default when a new employee record is created on the form, and can be cleared at any time, if needed.
[anchor|#_215bc7cf-6809-45f4-8a94-5e43d3245b6a][anchor|#_3444f77a-f306-404a-be9a-0d27b312c096][image:ReleaseNotes/Images/RN_2020_R1_CRM_Configurable_Email_Routing_Route_Emails_Check_Box.png|popup|Route Emails check box|450px]]]></column>
			<column name="PlainText"><![CDATA[CRM: Configurable Email Routing In previous versions of  Acumatica ERP,  email routing was always enabled for all system email accounts. Routing Emails Starting from  Acumatica ERP 2020 R1, a user can configure whether the incoming mail received by a particular system email         account should be routed to particular employees. On the   ([~/?ScreenId=SM204002|SM204002]) System Email Accounts (SM204002) form, the  Route           Employee Emails  check box has been added in the  Main           Processing  section of the  Incoming Mail Processing  tab.         The check box is cleared by default; the user can select it when the  Incoming           Mail Processing  check box is selected on the tab, as shown in the following         screenshot. Route Employee Emails check box The incoming mail is routed to the email accounts specified for the employees on the   ([~/?ScreenId=EP203000|EP203000]) Employees (EP203000) form as follows: The system creates an incoming duplicate email without recipients. The system adds to the duplicate email the following recipients: the parent activity           owner (the owner of the outgoing email to which the sender of the incoming email has           replied), the related entity owner (such as the owner of the opportunity,            contact,           or case ), and business account owner. Users can view the incoming mail on          the             ([~/?ScreenId=CO409000|CO409000]) Incoming (CO409000) form , and any         employee who works with specific entities—such as contacts, opportunities, and         cases—and engages in email communication can receive emails          from         interested parties that they work with  if the           following settings are specified: The  Route Employee Emails  check box is selected on the   ([~/?ScreenId=SM204002|SM204002]) System Email Accounts form, as described above. The  Route Emails  check box is selected on the   ([~/?ScreenId=EP203000|EP203000]) Employees (EP203000) form for the specific employee, as           shown in the following screenshot. The check box is            selected           by default  when a new employee record is           created on the form, and can be cleared at any time, if needed. Route Emails check box ]]></column>
		</row>
		<row PageID="5079ecda-7d35-4b00-869e-ab49b80624c5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a1924528-cf9b-cc17-1751-e8ff5ed6672e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, users could purge unconverted or closed contacts and leads, or contacts and leads with no related activities from the contacts list by using the ''Purge Leads and Contacts (CR508000)'' form. {br}

Starting from Acumatica ERP 2020 R1, users can mass-purge contacts only by using such inquiry forms as the ''Contacts (CR3020PL)'' and ''Leads (CR3010PL)'' forms, and they can mass-purge opportunities only by using the ''Opportunities (CR3040PL)'' form. These capabilities are available if a system administrator has enabled the mass deletion of records for the corresponding inquiry forms, as described in the following section. The ''Purge Leads and Contacts'' form has been removed from the system.{br}{TOC}
==Enabling the Contact Deletion Operation==
A system administrator can enable record deletion for any generic inquiry by selecting the '''Enable Mass Record Deletion''' check box in the '''Operations with Records''' section on the '''Entry Point''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form, as shown in the following screenshot.[anchor|#_cab36b6c-8814-4fb2-b16d-3dfcecb3fa9d][anchor|#_2735f5f3-89cd-4646-8915-e34dc684e70f][image:ReleaseNotes/Images/RN_2020_R1_CRM_Enable_Mass_Record_Deletion_Setting.png|popup|The Enable Mass Record Deletion check box|450px]
If an administrator has selected this check box for the ''Contacts (CR3020PL)'' form, the '''Delete''' button becomes visible on the ''Contacts'' form. Users can delete contacts from Acumatica ERP on this form by filtering contacts (if needed), selecting the unlabeled check boxes in the rows of the contacts to be deleted, and clicking the '''Delete''' button on the form toolbar, as shown in the following screenshot.[anchor|#_ca7d3821-5e1b-4b14-ad60-f4e225379830][anchor|#_35047b1c-6b7f-4cfc-8bfd-19e35c0720ad][image:ReleaseNotes/Images/RN_2020_R1_CRM_Deleting_Inactive_Contacts.png|popup|Deleting inactive contacts on the Contacts form|450px]]]></column>
			<column name="PlainText"><![CDATA[CRM: Deletion of the Purge Leads and Contacts Form In previous versions of  Acumatica ERP, users could purge unconverted or closed contacts and leads, or contacts and leads with         no related activities from the contacts list by using the  Purge Leads and Contacts           (CR508000)  form.  Starting from  Acumatica ERP 2020 R1,          users         can mass-purge contacts only  by using such inquiry forms as the            Contacts (CR3020PL)  and  Leads (CR3010PL)          forms ,         and they can mass-purge opportunities only by using the  Opportunities (CR3040PL)          form . These capabilities are available if a system administrator has         enabled the mass deletion of records for the corresponding inquiry forms, as described in         the following section. The  Purge Leads and Contacts  form has been removed from the         system. Enabling the Contact Deletion Operation A system administrator can enable record deletion for any generic inquiry by selecting the            Enable Mass Record Deletion  check box in the  Operations           with Records  section on the  Entry Point  tab of the             ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form, as shown in the following         screenshot. The Enable Mass Record Deletion check box If an administrator has selected this check box for the  Contacts (CR3020PL)  form,         the  Delete  button becomes visible on the  Contacts  form. Users         can delete contacts from  Acumatica ERP on this form by          filtering         contacts (if needed), selecting the unlabeled check boxes in the rows of the contacts to be         deleted , and clicking the  Delete  button on the         form toolbar, as shown in the following screenshot. Deleting inactive contacts on the Contacts form ]]></column>
		</row>
		<row PageID="a961b928-8055-4200-9222-b95245ee169a" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4ad76da4-3e3a-9a45-5814-526d5720864a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, the ''AR Aged Past Due'' ''(AR631000)'' and ''AR Aged Past Due MC'' ''(AR631100)'' reports showed open AR documents, regardless of the date a user specified in the '''Aging Date''' box on the '''Report Parameters''' tab of the respective report form. That is, the reports showed open AR documents even if they were dated later than the specified aging date. The aging date was used only to break down the listed documents by aging periods, and users could not view document balances as of a specific date.{br}

Starting from Acumatica ERP 2020 R1, the improved [HelpRoot_ReportReference\AR_63_10_00|AR Aging] ([~/?ScreenId=AR631000|AR631000]) and [HelpRoot_ReportReference\AR_63_11_00|AR Aging MC] ([~/?ScreenId=AR631100|AR631100]) reports show released AR documents whose document dates are earlier than or the same as the date specified by the user in the '''Age as of Date''' box on the '''Report Parameters''' tab. The reports also show the document balances as of the aging date, each of which is calculated as the difference between the original amount of the document and the application amounts of the documents that were applied no later than the specified aging date.{br}

If the [HelpRoot_ReportReference\AR_63_10_00|AR Aging] report is run with the ''Detailed with Retainage'' format selected on the '''Report Parameters''' tab, the report shows only released retainage invoices with a document date earlier than or the same as the aging date. The unreleased retainage is calculated as the total retainage amount of an invoice minus the sum of the original document amounts of the linked retainage invoices.{br}

For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=29ef9c86-8f91-4705-bdfc-a649053c8e22|Using AR Aging Reports].{br}{TOC}
==UI Changes==
The following UI changes have been introduced to support these improvements:[anchor|#_6a6c687e-aed1-47f3-9fe4-7180c3dbeaae]
*''AR Aged Past Due'' ''(AR631000)'' has been renamed to [HelpRoot_ReportReference\AR_63_10_00|AR Aging] ([~/?ScreenId=AR631000|AR631000])
*''AR Aged Past Due MC'' ''(AR631100)'' has been renamed to [HelpRoot_ReportReference\AR_63_11_00|AR Aging MC] ([~/?ScreenId=AR631100|AR631100])
*''AR Aged Outstanding'' ''(AR631500)'' has been renamed to [HelpRoot_ReportReference\AR_63_15_00|AR Coming Due] ([~/?ScreenId=AR631500|AR631500]) and ''AR Aged Outstanding MC'' ''(AR631600)'' has been renamed to [HelpRoot_ReportReference\AR_63_16_00|AR Coming Due MC] ([~/?ScreenId=AR631600|AR631600]), because these reports show documents with expected future payments, but not aged documents.
*On the [HelpRoot_ReportReference\AR_63_10_00|AR Aging] and [HelpRoot_ReportReference\AR_63_11_00|AR Aging MC] forms, the '''Aging Date''' box on the '''Report Parameters''' tab has been renamed to '''Age as of Date'''.
]]></column>
			<column name="PlainText"><![CDATA[Finance: Aging Report Improvements In previous versions of  Acumatica ERP, the  AR Aged Past Due (AR631000)  and  AR Aged Past Due MC (AR631100)  reports showed open AR documents, regardless of                                 the date a user specified in the  Aging Date                                  box on the  Report Parameters  tab of the                                 respective report form. That is, the reports showed open AR                                 documents even if they were dated later than the specified aging                                 date. The aging date was used only to break down the listed                                 documents by aging periods, and users could not view document                                 balances as of a specific date. Starting from  Acumatica ERP 2020 R1, the improved   ([~/?ScreenId=AR631000|AR631000]) AR Aging                                 (AR631000) and   ([~/?ScreenId=AR631100|AR631100]) AR Aging MC                                 (AR631100) reports show released AR documents whose document dates                                 are earlier than or the same as the date specified by the user in                                 the  Age as of Date  box on the                                          Report Parameters  tab. The reports                                 also show the document balances as of the aging date, each of which                                 is calculated as the difference between the original amount of the                                 document and the application amounts of the documents that were                                 applied no later than the specified aging date. If the   ([~/?ScreenId=AR631000|AR631000]) AR Aging report is run with the  Detailed with                                         Retainage  format selected on the  Report                                         Parameters  tab, the report shows only released                                 retainage invoices with a document date earlier than or the same as                                 the aging date. The unreleased retainage is calculated as the total                                 retainage amount of an invoice minus the sum of the original                                 document amounts of the linked retainage invoices. For details, see  Using AR Aging Reports Using AR Aging Reports. UI Changes The following UI changes have been introduced to support these improvements: AR Aged Past Due (AR631000)  has been renamed to   ([~/?ScreenId=AR631000|AR631000]) AR Aging                                         (AR631000) AR Aged Past Due MC (AR631100)  has been renamed to   ([~/?ScreenId=AR631100|AR631100]) AR Aging MC                                         (AR631100) AR Aged Outstanding (AR631500)  has been renamed to   ([~/?ScreenId=AR631500|AR631500]) AR Coming Due (AR631500)                                         and  AR Aged Outstanding MC (AR631600)  has been renamed to   ([~/?ScreenId=AR631600|AR631600]) AR Coming Due MC (AR631600),                                         because these reports show documents with expected future                                         payments, but not aged documents. On the   ([~/?ScreenId=AR631000|AR631000]) AR Aging and   ([~/?ScreenId=AR631100|AR631100]) AR Aging MC forms, the                                                  Aging Date  box on the                                                  Report Parameters  tab has                                         been renamed to  Age as of Date . ]]></column>
		</row>
		<row PageID="98b8f31e-b9bc-495b-be09-a8fc563f2279" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="0462a346-35b7-e40a-7d5b-69555f833bfc" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In many industries, organizations need to manage sales and payments at a granular level—that is, by the individual lines of accounts receivable invoices.{br}

In previous versions of Acumatica ERP, the system allowed users to apply payments fully or partially to only an accounts receivable invoice as a whole. As a result, if an invoice was partially paid, the payment could not be linked to specific lines of it.{br}

 Acumatica ERP 2020 R1 introduces the ability to enter payments for accounts receivable documents by individual lines. When the ''Payment Application by Line'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, users can still apply payments fully or partially, but they can also select whether to apply payments to the entire document or to individual document lines.{br}

If the ''Retainage Support'' feature is also enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, users can now track retainage by the individual document line. For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=639f41a0-4d47-401f-8b58-d208e4871180|Applying Payments to Particular Lines of AR Documents].{br}{TOC}
==Changes to the Invoices and Memos (AR301000) Form==
The following changes have been made to the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form:[anchor|#_123eb53c-c01c-447f-87c0-6c74c083b13f]
*In the Summary area, the '''Pay by Line''' check box has been added (shown in the screenshot below).
*:If the check box is cleared, payments are applied to the outstanding balance of the entire document (as the system worked previously). If the check box is selected for a document, payments are applied to individual document lines.
*:((({S:Warn}The functionality that gives users the ability to pay accounts receivable invoices by line currently does not support the processing of group and document discounts. A user can apply these discounts to an accounts receivable document only if the '''Pay by Line''' check box is cleared.
)))
*:For each new accounts receivable document, the check box inherits its default value from the settings of the customer that is selected in the document. This setting is specified for an individual customer in the '''Financial Settings''' section on the '''General Info''' tab of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form. On the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the '''Pay by Line''' check box can be selected or cleared only if no lines have been added to the document. For credit memos, overdue charges, and credit write-offs, the check box is cleared and unavailable for editing.
*On the '''Document Details''' tab, the following columns have been added:
**'''Line Nbr.''': The number of the document line.
**'''Balance''': The outstanding balance of the individual document line. The balance of the line includes the applicable taxes; document-level taxes are prorated among all the lines of a document. If a payment applied to the document line has been released, the balance is updated accordingly. 
**:This column is hidden until the original document (invoice or a debit memo) is released.
**'''Unreleased Retainage''': A hidden column that reflects the retainage amount that has been associated with the document line but has not been released yet. If the '''Retain Taxes''' check box is selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form, this column includes the corresponding retained tax amount for each line of the document.
**'''Retained Tax''': The amount of tax calculated based on the value in the '''Retainage Amount''' column. If the '''Retain Taxes''' check box is selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] form, the retained tax amounts will be included in retainage invoices. This column is hidden by default.
**'''Tax Amount''': The total tax amount calculated for the line. The column is hidden by default and appears in the table when the original document is released. For retainage invoices, this column displays the total of all retained taxes.
**'''Cash Discount Balance''': The balance of cash discounts for the whole document, distributed proportionally among all document lines. This column is hidden by default and appears in the table when the original document is released.
*:((({S:Warn}If the '''Pay by Line''' check box is cleared for the invoice on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, by default, the '''Balance''', '''Unreleased Retainage''', '''Retained Tax''', '''Cash Discount Balance''', and '''Tax Amount''' columns are not visible on the form. In this case, if a user adds the columns to the form by using the '''Column Configuration''' dialog box, the values in these columns are not calculated and are always ''0''.
)))[anchor|#_558b443a-0d48-49e7-9fc6-2cd0c0abf642][image:ReleaseNotes/Images/RN_2020_R1_Finance_Payments_by_Line_Invoices_and_Memos.png|popup|Summary area and Document Details tab|450px]
*On the '''Retainage''' tab, the '''Released Retainage''' box has been added and is displayed for AR documents for which the '''Apply Retainage''' check box (in the Summary area of this form) is selected. The system calculates the value in this box as the difference between the original (total) retainage and the unreleased retainage for the document.

For details on creating invoices, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=ae630c03-9143-4e63-9800-e8f70a5bc705|To Enter an Invoice with Retainage that Can Be Paid by Line].
==Changes to the Payments and Applications (AR302000) Form==
The following columns, which are shown in the screenshot below, have been added to the '''Documents to Apply''' tab of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form:[anchor|#_10c7b45d-8079-43f5-9406-aa16efa17093]
*'''Line Nbr.''': The number of the document line to which the payment can be applied. If the line represents the entire document, ''0'' is specified.
*'''Inventory ID''', '''Project''', '''Project Task''', '''Cost Code''', and '''Account''': The inventory item, project, project task, cost code, and account, respectively, associated with the document line.
*:The '''Cost Code''' column is available only if the ''Cost Codes'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
[anchor|#_48bb38f7-f96b-49d1-83d7-91c8767986e4][anchor|#_46a755e1-473c-46de-b21d-38f47949567c][image:ReleaseNotes/Images/RN_2020_R1_Finance_Payments_by_Line_Payments_and_Applications.png|popup|Documents to Apply tab|450px]
The functionality of document loading on the '''Documents to Apply''' tab has changed. Users load documents and individual document lines either manually or by clicking '''Load Documents'''. When a user applies filters in the '''Load Options''' dialog box that opens when the user clicks '''Load Documents''', the system loads documents and individual document lines.{br}

A user can add lines from different invoices that are associated with the same customer. If a document line has been included in a payment that has not been released yet, that line cannot be included in a different payment. If a document with a payment applied to a document line has been released but the document line has not been fully paid, the user can open another payment document and select the document line to pay the remaining balance.{br}

For each document line, the user can manually specify a full or partial amount to be paid. When the payment is released, the document balance and the balances of the document lines are updated accordingly. For details on paying invoices by line, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=2bac729e-c586-4e5c-bca9-bda34d39ce80|To Pay Separate Lines of an AR Invoice].
==Changes to the Release AR Retainage (AR510000) Form==
The following columns have been added to the [HelpRoot_FormReference\AR_51_00_00|Release AR Retainage] ([~/?ScreenId=AR510000|AR510000]) form:[anchor|#_fc7379e7-5af2-4c18-b6ee-bb6273dc2dcd]
*'''Line Nbr.''': The number of the document line that can be selected for processing.
*'''Inventory ID''', '''Project Task''', '''Cost Code''', and '''Account''': The inventory item, project task, cost code, and account, respectively, associated with the document line.
*:The '''Cost Code''' box is available only if the ''Cost Codes'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.

==Changes to the Customers (AR303000) Form==
The '''Pay by Line''' check box has been added to the '''Financial Settings''' section on the '''General Info''' tab of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form. If it is selected, by default, for customer invoices created on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, the '''Pay by Line''' check box is selected and payments can be applied to individual lines of these invoices.{br}

When the ''Payment Application by Line'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, newly created customers inherit the default state of the '''Pay by Line''' check box from the customer class selected for them.
==Changes to the Customer Classes (AR201000) Form==
In the '''Default Financial Settings''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the following check boxes have been added:[anchor|#_c14870bc-75f6-49fc-8b6f-72cc1430620b]
*'''Pay by Line''': If this check box is selected, the ability to apply payments by line is turned on for customers of the class that are created after this setting has been specified; that is, the '''Pay by Line''' check box is selected on the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form for these customers. 
*:When an administrator enables the ''Payment Application by Line'' feature, this check box is cleared by default for existing customer classes. For customer classes created after the feature is enabled, it is also cleared by default. ((({S:Warn}If a user selects or clears this check box for an existing customer class, the state of this check box does not change for existing customers of the class.
)))
*'''Apply Retainage''': If this check box is selected for a customer class, the retainage functionality will be turned on by default for all customers that are subsequently created and assigned to this customer class. That is, for these customers, the '''Apply Retainage''' check box will be selected on the [HelpRoot_FormReference\AR_30_30_00|Customers] form.
*:When an administrator enables the ''Retainage Support'' feature for the first time, this check box is cleared by default for existing customer classes. This check box is also cleared by default for new customer classes. ((({S:Warn}If a user selects or clears this check box for an existing customer class, the state of this check box does not change for existing customers of the class.
)))

==Support of Auto-Application==
The auto-application functionality is also supported for AR documents that can be paid by line. Users can select the '''Auto-Apply Payments''' check box on the '''General Info''' tab of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form for the automatic application of a selected document or use the [HelpRoot_FormReference\AR_50_60_00|Auto-Apply Payments] ([~/?ScreenId=AR506000|AR506000]) form for the auto-application of multiple documents. 
==Upgrade Notes==
After the upgrade to Acumatica ERP 2020 R1, for a released or unreleased document that was created in a previous version of Acumatica ERP, the '''Pay by Line''' check box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form will be cleared and unavailable if the document has at least one line.
==Limitations==
The following limitations apply to the new functionality:[anchor|#_8300e7f6-24ec-4011-b8d7-ed95db301506]
*In Acumatica ERP, users currently cannot apply VAT recalculated on cash discounts to accounts receivable documents for which the '''Pay by Line''' check box is selected on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form.
*Group and document discounts are not supported for accounts receivable documents that have the '''Pay by Line''' check box selected on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
*The '''Reverse and Apply to Memo''' action on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form cannot be used for the documents with the '''Pay by Line''' check box selected. 
*:Users should instead select the '''Reverse''' action and then create an application to a credit memo on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.
*An invoice with the '''Pay by Line''' check box selected cannot be applied to a credit memo on the '''Applications''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form. Users should apply this credit memo to document lines on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form instead.
*The feature is not compatible with migration mode. If the '''Activate Migration Mode''' check box is selected in the '''Posting Settings''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form, the '''Pay by Line''' check box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] is cleared and unavailable for editing.
*The feature is not compatible with the ''Invoice Rounding'' feature.
*Calculation of taxes in Avalara is not supported.
*Balance write-off cannot be performed at the line level.
]]></column>
			<column name="PlainText"><![CDATA[Finance: Application of Payments to Particular Lines of AR Documents In many industries, organizations need to manage sales and payments at a granular level—that         is, by the individual lines of accounts receivable invoices. In previous versions of  Acumatica ERP, the system allowed users to apply payments fully or partially to only an accounts         receivable invoice as a whole. As a result, if an invoice was partially paid, the payment         could not be linked to specific lines of it.  Acumatica ERP 2020 R1 introduces the ability to enter payments for accounts receivable documents by individual         lines. When the  Payment Application by Line  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, users can still apply payments         fully or partially, but they can also select whether to apply payments to the entire         document or to individual document lines. If the  Retainage Support  feature is also enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, users can now track retainage by the         individual document line. For details, see  Applying Payments to Particular Lines of AR           Documents Applying Payments to Particular Lines of AR Documents. Changes to the Invoices and Memos (AR301000) Form The following changes have been made to the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos         (AR301000) form: In the Summary area, the  Pay by Line  check box has been added           (shown in the screenshot below). If the check box is cleared, payments are applied to             the outstanding balance of the entire document (as the system worked previously). If the             check box is selected for a document, payments are applied to individual document             lines. The functionality that gives users the ability to pay accounts             receivable invoices by line currently does not support the processing of group and             document discounts. A user can apply these discounts to an accounts receivable document             only if the  Pay by Line  check box is cleared. For each             new accounts receivable document, the check box inherits its default value from the             settings of the customer that is selected in the document. This setting is specified for             an individual customer in the  Financial Settings  section on the                General Info  tab of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form. On the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the  Pay by Line              check box can be selected or cleared only if no lines have been added to the document.             For credit memos, overdue charges, and credit write-offs, the check box is cleared and             unavailable for editing. On the  Document Details  tab, the following columns have been             added: Line Nbr. : The number of the document line. Balance : The outstanding balance of the individual document               line. The balance of the line includes the applicable taxes; document-level taxes are               prorated among all the lines of a document. If a payment applied to the document line               has been released, the balance is updated accordingly.  This column is hidden until                 the original document (invoice or a debit memo) is released. Unreleased Retainage : A hidden column that reflects the               retainage amount that has been associated with the document line but has not been               released yet. If the  Retain Taxes  check box is selected on the                   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form, this column includes               the corresponding retained tax amount for each line of the document. Retained Tax : The amount of tax calculated based on the value               in the  Retainage Amount  column. If the  Retain                 Taxes  check box is selected on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences form, the retained tax amounts will be               included in retainage invoices. This column is hidden by default. Tax Amount : The total tax amount calculated for the line. The               column is hidden by default and appears in the table when the original document is               released. For retainage invoices, this column displays the total of all retained               taxes. Cash Discount Balance : The balance of cash discounts for the               whole document, distributed proportionally among all document lines. This column is               hidden by default and appears in the table when the original document is               released. If the  Pay by Line  check box is cleared for the invoice             on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, by default, the                Balance ,  Unreleased Retainage ,                Retained Tax ,  Cash Discount Balance , and                Tax Amount  columns are not visible on the form. In this case,             if a user adds the columns to the form by using the  Column               Configuration  dialog box, the values in these columns are not calculated             and are always  0 . Summary area and Document Details tab On the  Retainage  tab, the  Released             Retainage  box has been added and is displayed for AR documents for which the              Apply Retainage  check box (in the Summary area of this form) is           selected. The system calculates the value in this box as the difference between the           original (total) retainage and the unreleased retainage for the document. For details on creating invoices, see  To Enter an Invoice with Retainage that Can Be Paid by           Line To Enter an Invoice with Retainage that Can Be Paid by Line. Changes to the Payments and Applications (AR302000) Form The following columns, which are shown in the screenshot below, have been added to the            Documents to Apply  tab of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form: Line Nbr. : The number of the document line to which the payment           can be applied. If the line represents the entire document,  0  is specified. Inventory ID ,  Project ,  Project             Task ,  Cost Code , and  Account :           The inventory item, project, project task, cost code, and account, respectively,           associated with the document line. The  Cost Code  column is             available only if the  Cost Codes  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. Documents to Apply tab The functionality of document loading on the  Documents to Apply  tab         has changed. Users load documents and individual document lines either manually or by         clicking  Load Documents . When a user applies filters in the            Load Options  dialog box that opens when the user clicks            Load Documents , the system loads documents and individual document         lines. A user can add lines from different invoices that are associated with the same customer. If         a document line has been included in a payment that has not been released yet, that line         cannot be included in a different payment. If a document with a payment applied to a         document line has been released but the document line has not been fully paid, the user can         open another payment document and select the document line to pay the remaining balance. For each document line, the user can manually specify a full or partial amount to be paid.         When the payment is released, the document balance and the balances of the document lines         are updated accordingly. For details on paying invoices by line, see  To Pay Separate Lines of an AR Invoice To Pay Separate Lines of an AR Invoice. Changes to the Release AR Retainage (AR510000) Form The following columns have been added to the   ([~/?ScreenId=AR510000|AR510000]) Release AR Retainage         (AR510000) form: Line Nbr. : The number of the document line that can be selected           for processing. Inventory ID ,  Project Task ,              Cost Code , and  Account : The inventory           item, project task, cost code, and account, respectively, associated with the document             line. The  Cost Code  box is available only if the  Cost               Codes  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features             (CS100000) form. Changes to the Customers (AR303000) Form The  Pay by Line  check box has been added to the  Financial           Settings  section on the  General Info  tab of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form. If it is selected, by default, for         customer invoices created on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000)         form, the  Pay by Line  check box is selected and payments can be         applied to individual lines of these invoices. When the  Payment Application by Line  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, newly created customers inherit         the default state of the  Pay by Line  check box from the customer         class selected for them. Changes to the Customer Classes (AR201000) Form In the  Default Financial Settings  section on the  General           Settings  tab of the    ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000)         form, the following check boxes have been added: Pay by Line : If this check box is selected, the ability to apply           payments by line is turned on for customers of the class that are created after this           setting has been specified; that is, the  Pay by Line  check box is           selected on the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form for these           customers.  When an administrator enables the  Payment Application by Line              feature, this check box is cleared by default for existing customer classes. For             customer classes created after the feature is enabled, it is also cleared by default.                If a user selects or clears this check box for an existing customer class, the               state of this check box does not change for existing customers of the             class. Apply Retainage : If this check box is selected for a customer           class, the retainage functionality will be turned on by default for all customers that are           subsequently created and assigned to this customer class. That is, for these customers,           the  Apply Retainage  check box will be selected on the   ([~/?ScreenId=AR303000|AR303000]) Customers form. When an administrator enables the                Retainage Support  feature for the first time, this check box is cleared by             default for existing customer classes. This check box is also cleared by default for new             customer classes.  If a user selects or clears this check box for an existing               customer class, the state of this check box does not change for existing customers of               the class. Support of Auto-Application The auto-application functionality is also supported for AR documents that can be paid by         line. Users can select the  Auto-Apply Payments  check box on the            General Info  tab of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form for the automatic application of a selected document or use the   ([~/?ScreenId=AR506000|AR506000]) Auto-Apply Payments (AR506000) form for the auto-application of         multiple documents.  Upgrade Notes After the upgrade to  Acumatica ERP 2020 R1, for a released or unreleased document that was created in a previous version of  Acumatica ERP, the  Pay by Line  check box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form will be cleared and unavailable if         the document has at least one line. Limitations The following limitations apply to the new functionality: In  Acumatica ERP, users currently cannot apply VAT recalculated on cash discounts to accounts receivable           documents for which the  Pay by Line  check box is selected on the               ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. Group and document discounts are not supported for accounts receivable documents that           have the  Pay by Line  check box selected on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. The  Reverse and Apply to Memo  action on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form cannot be used for the documents with the              Pay by Line  check box selected.  Users should instead select             the  Reverse  action and then create an application to a credit             memo on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. An invoice with the  Pay by Line  check box selected cannot be           applied to a credit memo on the  Applications  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Users should apply this credit memo to           document lines on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form instead. The feature is not compatible with migration mode. If the  Activate Migration             Mode  check box is selected in the  Posting Settings            section on the  General Settings  tab of the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form, the  Pay by             Line  check box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos is           cleared and unavailable for editing. The feature is not compatible with the  Invoice Rounding  feature. Calculation of taxes in Avalara is not supported. Balance write-off cannot be performed at the line level. ]]></column>
		</row>
		<row PageID="3618ae9f-694f-47d5-a916-c139839b82e5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="01b704eb-a871-1436-439e-4d0f0ca243e4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
A new inquiry form, [HelpRoot_FormReference\AP_40_45_00|Check Register] ([~/?ScreenId=AP404500|AP404500]), has been added to Acumatica ERP 2020 R1. Users can run this inquiry to find out whether a particular check number has been used and, if it has, by which AP check.{br}

On the [HelpRoot_FormReference\AP_50_52_00|Release Payments] ([~/?ScreenId=AP505200|AP505200]) form, a user can return a printed AP check to the ''Pending Print'' status for further reprinting. The user can either reprint the AP check with the same number (the system will reuse the check number) or with a new number (the system will void the previous check number). The [HelpRoot_FormReference\AP_40_45_00|Check Register] inquiry enables visibility of the voided check numbers.{br}

The screenshot below shows the inquiry with the cash account, payment method, and check number specified in the Selection area.[anchor|#_3bf370f0-1120-425c-946f-74d710168cd0][anchor|#_8844f89d-23f8-455a-be78-7cfb76cce51d][image:ReleaseNotes/Images/RN_2020_R1_Finance_Check_Register_Form.png|popup|Check Register (AP404500) form|450px]
By default, access to the new inquiry has been granted to the following predefined financial roles:[anchor|#_ff95ca09-56f3-47ec-be18-f747d8c8513c]
*''AP Clerk''
* ''AP Admin''
* ''AP Viewer''
{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Finance: Check Register Inquiry A new inquiry form,   ([~/?ScreenId=AP404500|AP404500]) Check Register (AP404500), has been added to       Acumatica ERP 2020 R1.     Users can run this inquiry to find out whether a particular check number has been used and, if     it has, by which AP check. On the   ([~/?ScreenId=AP505200|AP505200]) Release Payments (AP505200) form, a user can return a     printed AP check to the  Pending Print  status for further reprinting. The user can either     reprint the AP check with the same number (the system will reuse the check number) or with a new     number (the system will void the previous check number). The   ([~/?ScreenId=AP404500|AP404500]) Check Register inquiry enables visibility of the voided check     numbers. The screenshot below shows the inquiry with the cash account, payment method, and check number     specified in the Selection area. Check Register (AP404500) form By default, access to the new inquiry has been granted to the following predefined financial     roles: AP Clerk AP Admin AP Viewer ]]></column>
		</row>
		<row PageID="6f77c8c7-cb79-4629-a38d-47b8a0c0c46f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="8102936c-da78-891c-da64-a73b26e628d6" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the depreciation calculation engine has been redesigned for more efficient calculation of depreciation amounts and their rounding.{br}

Starting from 2020 R1, for depreciation methods that use the ''Straight-Line'' calculation method with the ''Full Period'' averaging convention, the state of the '''Accelerated Depreciation for SL Depr. Method''' check box on the '''General Settings''' tab of the [HelpRoot_FormReference\FA_20_10_00|Fixed Asset Classes] ([~/?ScreenId=FA201000|FA201000]) form is ignored by the system. If these settings are specified in Acumatica ERP 2020 R1, the asset’s net value may not become zero at the end of its useful life if the useful life was changed or the asset was revalued.{br}

If there is at least one book for an asset that uses a depreciation method based on the ''Straight-Line'' calculation method and the ''Full Period'' averaging convention, the system now displays a warning about the changed behavior in the following cases:[anchor|#_707b4871-c2ac-422a-99bb-f56f5f4934fd]
*When a user clicks '''Actions''' > '''Calculate Depreciation''' on the [HelpRoot_FormReference\FA_30_30_00|Fixed Assets] ([~/?ScreenId=FA303000|FA303000]) form, the system displays the warning on the '''Balance''' tab.
*When a user selects an asset and clicks '''Process''' on the toolbar of the [HelpRoot_FormReference\FA_50_20_00|Calculate Depreciation] ([~/?ScreenId=FA502000|FA502000]) form, the system displays the warning when the processing is completed.
{br}

If the user wants the system to maintain the behavior provided when the '''Accelerated Depreciation for SL Depr. Method''' check box is selected in the previous versions of Acumatica ERP, when an asset will have reached zero net value at the end of its useful life, the user should change the depreciation method to a method based on the ''Remaining Value'' calculation method. To do this, the user changes the option in the '''Depreciation Method''' column on the '''Balance''' tab of the [HelpRoot_FormReference\FA_30_30_00|Fixed Assets] form. For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=f3d4ae85-1c86-47f4-8fcd-7ffbc6f7f0af|Depreciation Configuration].{br}{TOC}
==Calculation Example==
The following example shows the difference in the calculated depreciation of a fixed asset with the '''Accelerated Depreciation for SL Depr. Method''' check box selected in Acumatica ERP 2020 R1 and in previous versions. To demonstrate the differences in the calculated depreciation, the example consists of the following parts: the depreciation history of an asset without additions, the depreciation history of the asset with an addition calculated in previous versions of Acumatica ERP, and the depreciation history of the asset with an addition in Acumatica ERP 2020 R1. {br}

For this example, suppose that a fixed asset with the following settings on the [HelpRoot_FormReference\FA_30_30_00|Fixed Assets] ([~/?ScreenId=FA303000|FA303000]) form has been purchased:[anchor|#_a6f7a3c9-8523-4988-8fc6-34b5968138d7]
*'''Asset Class''': ''COMPUTER''
* '''Useful Life, Years''': <tt>2</tt>
*'''Placed-in-Service Date''': ''1/1/2019''
* '''Orig. Acquisition Cost''': <tt>2400</tt>

The asset has been depreciated by using the ''Straight-Line'' calculation method and the ''Full Period'' averaging convention, with the '''Accelerated Depreciation for SL Depr. Method''' check box on the [HelpRoot_FormReference\FA_20_10_00|Fixed Asset Classes] ([~/?ScreenId=FA201000|FA201000]) form selected. The following table illustrates the depreciation history for this asset; this history is applicable to all versions of Acumatica ERP.[anchor|#_0936220c-9e36-476e-9d09-f8ea457876de]
===Depreciation history of an asset without additions (applicable to the 2020 R1 version of Acumatica ERP as well as to previous versions)===
{| class="checklist" | width="100%" 
|- 
!width="25%" ! Period
!width="25%" ! Depreciation Expense
!width="25%" ! Accumulated Depreciation
!width="25%" ! Net Value
|- 
| 01-2019
| 100.00
| 100.00
| 2300.00
|- 
| 02-2019
| 100.00
| 200.00
| 2200.00
|- 
| 03-2019
| 100.00
| 300.00
| 2100.00
|- 
| 04-2019
| 100.00
| 400.00
| 2000.00
|- 
| 05-2019
| 100.00
| 500.00
| 1900.00
|- 
| 06-2019
| 100.00
| 600.00
| 1800.00
|- 
| 07-2019
| 100.00
| 700.00
| 1700.00
|- 
| 08-2019
| 100.00
| 800.00
| 1600.00
|- 
| 09-2019
| 100.00
| 900.00
| 1500.00
|- 
| 10-2019
| 100.00
| 1000.00
| 1400.00
|- 
| 11-2019
| 100.00
| 1100.00
| 1300.00
|- 
| 12-2019
| 100.00
| 1200.00
| 1200.00
|- 
| 01-2020
| 100.00
| 1300.00
| 1100.00
|- 
| 02-2020
| 100.00
| 1400.00
| 1000.00
|- 
| 03-2020
| 100.00
| 1500.00
| 900.00
|- 
| 04-2020
| 100.00
| 1600.00
| 800.00
|- 
| 05-2020
| 100.00
| 1700.00
| 700.00
|- 
| 06-2020
| 100.00
| 1800.00
| 600.00
|- 
| 07-2020
| 100.00
| 1900.00
| 500.00
|- 
| 08-2020
| 100.00
| 2000.00
| 400.00
|- 
| 09-2020
| 100.00
| 2100.00
| 300.00
|- 
| 10-2020
| 100.00
| 2200.00
| 200.00
|- 
| 11-2020
| 100.00
| 2300.00
| 100.00
|- 
| 12-2020
| 100.00
| 2400.00
| '''0.00'''
|}
At the end of the useful life, the net value of the asset became $0.00.{br}

Suppose that an addition of $1200 was made to the asset on January 1, 2020. In this case, for previous versions of Acumatica ERP, the following table reflects the depreciation history for the asset with the '''Accelerated Depreciation for SL Depr. Method''' check box.[anchor|#_2bf0550b-4c24-431e-adfb-149dd534639f]
===Depreciation history of the asset with an addition (applicable to previous versions of Acumatica ERP)===
{| class="checklist" | width="100%" 
|- 
!width="25%" ! Period
!width="25%" ! Depreciation Expense
!width="25%" ! Accumulated Depreciation
!width="25%" ! Net Value
|- 
| 01-2019
| 100.00
| 100.00
| 2300.00
|- 
| 02-2019
| 100.00
| 200.00
| 2200.00
|- 
| 03-2019
| 100.00
| 300.00
| 2100.00
|- 
| 04-2019
| 100.00
| 400.00
| 2000.00
|- 
| 05-2019
| 100.00
| 500.00
| 1900.00
|- 
| 06-2019
| 100.00
| 600.00
| 1800.00
|- 
| 07-2019
| 100.00
| 700.00
| 1700.00
|- 
| 08-2019
| 100.00
| 800.00
| 1600.00
|- 
| 09-2019
| 100.00
| 900.00
| 1500.00
|- 
| 10-2019
| 100.00
| 1000.00
| 1400.00
|- 
| 11-2019
| 100.00
| 1100.00
| 1300.00
|- 
| 12-2019
| 100.00
| 1200.00
| 1200.00
|- 
| 01-2020
| 200.00
| 1400.00
| 2200.00
|- 
| 02-2020
| 200.00
| 1600.00
| 2000.00
|- 
| 03-2020
| 200.00
| 1800.00
| 1800.00
|- 
| 04-2020
| 200.00
| 2000.00
| 1600.00
|- 
| 05-2020
| 200.00
| 2200.00
| 1400.00
|- 
| 06-2020
| 200.00
| 2400.00
| 1200.00
|- 
| 07-2020
| 200.00
| 2600.00
| 1000.00
|- 
| 08-2020
| 200.00
| 2800.00
| 800.00
|- 
| 09-2020
| 200.00
| 3000.00
| 600.00
|- 
| 10-2020
| 200.00
| 3200.00
| 400.00
|- 
| 11-2020
| 200.00
| 3400.00
| 200.00
|- 
| 12-2020
| 200.00
| 3600.00
| '''0.00'''
|}
At the end of the useful life, the net value of the asset with the addition was still $0.00 because the '''Accelerated Depreciation for SL Depr. Method''' check box was selected.{br}

With the new calculation engine in Acumatica ERP 2020 R1, the depreciation history of this asset with the addition of $1200 is as shown in the following table. Thus, the net value at the end of the useful life is greater than zero, regardless of whether the '''Accelerated Depreciation for SL Depr. Method''' check box is selected or cleared.[anchor|#_1de4ffb6-5fdb-43a4-8c79-535f6e54b3eb]
===Depreciation history of the asset with an addition (applicable to Acumatica ERP 2020 R1)===
{| class="checklist" | width="100%" 
|- 
!width="25%" ! Period
!width="25%" ! Depreciation Expense
!width="25%" ! Accumulated Depreciation
!width="25%" ! Net Value
|- 
| 01-2019
| 100.00
| 100.00
| 2300.00
|- 
| 02-2019
| 100.00
| 200.00
| 2200.00
|- 
| 03-2019
| 100.00
| 300.00
| 2100.00
|- 
| 04-2019
| 100.00
| 400.00
| 2000.00
|- 
| 05-2019
| 100.00
| 500.00
| 1900.00
|- 
| 06-2019
| 100.00
| 600.00
| 1800.00
|- 
| 07-2019
| 100.00
| 700.00
| 1700.00
|- 
| 08-2019
| 100.00
| 800.00
| 1600.00
|- 
| 09-2019
| 100.00
| 900.00
| 1500.00
|- 
| 10-2019
| 100.00
| 1000.00
| 1400.00
|- 
| 11-2019
| 100.00
| 1100.00
| 1300.00
|- 
| 12-2019
| 100.00
| 1200.00
| 1200.00
|- 
| 01-2020
| 150.00
| 1350.00
| 2250.00
|- 
| 02-2020
| 150.00
| 1500.00
| 2100.00
|- 
| 03-2020
| 150.00
| 1650.00
| 1950.00
|- 
| 04-2020
| 150.00
| 1800.00
| 1800.00
|- 
| 05-2020
| 150.00
| 1950.00
| 1650.00
|- 
| 06-2020
| 150.00
| 2100.00
| 1500.00
|- 
| 07-2020
| 150.00
| 2250.00
| 1350.00
|- 
| 08-2020
| 150.00
| 2400.00
| 1200.00
|- 
| 09-2020
| 150.00
| 2550.00
| 1050.00
|- 
| 10-2020
| 150.00
| 2700.00
| 900.00
|- 
| 11-2020
| 150.00
| 2850.00
| 750.00
|- 
| 12-2020
| 150.00
| 3000.00
| '''600.00'''
|}
In this part of the example, the net value of the asset at the end of its useful life remains $600.[anchor|#_889f8f24-53ae-4bc1-a0be-00add5639484]
==Upgrade Notes==
After an upgrade to Acumatica ERP 2020 R1, to use the calculations shown in the second table of the example, before depreciating fixed assets, a user has to change the depreciation method of the depreciation book of the needed assets to another depreciation method that uses the ''Remaining Value'' calculation method. To do this, the user has to change the value in the '''Depreciation Method''' column on the '''Balance''' tab of the [HelpRoot_FormReference\FA_30_30_00|Fixed Assets] ([~/?ScreenId=FA303000|FA303000]) form for every needed asset.]]></column>
			<column name="PlainText"><![CDATA[Finance: Code Improvements to the Straight-Line Depreciation Method In  Acumatica ERP 2020 R1, the depreciation calculation engine has been redesigned for more efficient calculation         of depreciation amounts and their rounding. Starting from  2020 R1, for depreciation methods that use the  Straight-Line  calculation method with the            Full Period  averaging convention, the state of the  Accelerated           Depreciation for SL Depr. Method  check box on the  General           Settings  tab of the   ([~/?ScreenId=FA201000|FA201000]) Fixed Asset Classes (FA201000)         form is ignored by the system. If these settings are specified in  Acumatica ERP 2020 R1, the asset’s net value may not become zero at the end of its useful life if the useful         life was changed or the asset was revalued. If there is at least one book for an asset that uses a depreciation method based on the            Straight-Line  calculation method and the  Full Period  averaging convention,         the system now displays a warning about the changed behavior in the following cases: When a user clicks  Actions Calculate Depreciation  on the   ([~/?ScreenId=FA303000|FA303000]) Fixed Assets (FA303000) form, the             system displays the warning on the  Balance  tab. When a user selects an asset and clicks  Process  on the toolbar             of the   ([~/?ScreenId=FA502000|FA502000]) Calculate Depreciation (FA502000) form, the system displays             the warning when the processing is completed. If the user wants the system to maintain the behavior provided when the            Accelerated Depreciation for SL Depr. Method  check box is selected         in the previous versions of  Acumatica ERP, when an asset will have reached zero net value at the end of its useful life, the user         should change the depreciation method to a method based on the  Remaining Value          calculation method. To do this, the user changes the option in the  Depreciation           Method  column on the  Balance  tab of the   ([~/?ScreenId=FA303000|FA303000]) Fixed Assets form. For details, see  Depreciation Configuration Depreciation Configuration. Calculation Example The following example shows the difference in the calculated depreciation of a fixed asset         with the  Accelerated Depreciation for SL Depr. Method  check box         selected in  Acumatica ERP 2020 R1 and in previous versions. To demonstrate the differences in the calculated depreciation,         the example consists of the following parts: the depreciation history of an asset without         additions, the depreciation history of the asset with an addition calculated in previous         versions of  Acumatica ERP, and the depreciation history of the asset with an addition in  Acumatica ERP 2020 R1.  For this example, suppose that a fixed asset with the following settings on the   ([~/?ScreenId=FA303000|FA303000]) Fixed Assets (FA303000) form has been purchased: Asset Class :  COMPUTER Useful Life, Years :  2 Placed-in-Service Date :  1/1/2019 Orig. Acquisition Cost :  2400 The asset has been depreciated by using the  Straight-Line  calculation method and the            Full Period  averaging convention, with the  Accelerated Depreciation for           SL Depr. Method  check box on the   ([~/?ScreenId=FA201000|FA201000]) Fixed Asset Classes         (FA201000) form selected. The following table illustrates the depreciation history for this         asset; this history is applicable to all versions of  Acumatica ERP. Depreciation history of an asset without additions (applicable to the  2020 R1 version of  Acumatica ERP as well as to previous versions) Period Depreciation Expense Accumulated Depreciation Net Value 01-2019 100.00 100.00 2300.00 02-2019 100.00 200.00 2200.00 03-2019 100.00 300.00 2100.00 04-2019 100.00 400.00 2000.00 05-2019 100.00 500.00 1900.00 06-2019 100.00 600.00 1800.00 07-2019 100.00 700.00 1700.00 08-2019 100.00 800.00 1600.00 09-2019 100.00 900.00 1500.00 10-2019 100.00 1000.00 1400.00 11-2019 100.00 1100.00 1300.00 12-2019 100.00 1200.00 1200.00 01-2020 100.00 1300.00 1100.00 02-2020 100.00 1400.00 1000.00 03-2020 100.00 1500.00 900.00 04-2020 100.00 1600.00 800.00 05-2020 100.00 1700.00 700.00 06-2020 100.00 1800.00 600.00 07-2020 100.00 1900.00 500.00 08-2020 100.00 2000.00 400.00 09-2020 100.00 2100.00 300.00 10-2020 100.00 2200.00 200.00 11-2020 100.00 2300.00 100.00 12-2020 100.00 2400.00 0.00 At the end of the useful life, the net value of the asset became $0.00. Suppose that an addition of $1200 was made to the asset on January 1, 2020. In this case,         for previous versions of  Acumatica ERP, the following table reflects the depreciation history for the asset with the            Accelerated Depreciation for SL Depr. Method  check box. Depreciation history of the asset with an addition (applicable to previous versions           of  Acumatica ERP) Period Depreciation Expense Accumulated Depreciation Net Value 01-2019 100.00 100.00 2300.00 02-2019 100.00 200.00 2200.00 03-2019 100.00 300.00 2100.00 04-2019 100.00 400.00 2000.00 05-2019 100.00 500.00 1900.00 06-2019 100.00 600.00 1800.00 07-2019 100.00 700.00 1700.00 08-2019 100.00 800.00 1600.00 09-2019 100.00 900.00 1500.00 10-2019 100.00 1000.00 1400.00 11-2019 100.00 1100.00 1300.00 12-2019 100.00 1200.00 1200.00 01-2020 200.00 1400.00 2200.00 02-2020 200.00 1600.00 2000.00 03-2020 200.00 1800.00 1800.00 04-2020 200.00 2000.00 1600.00 05-2020 200.00 2200.00 1400.00 06-2020 200.00 2400.00 1200.00 07-2020 200.00 2600.00 1000.00 08-2020 200.00 2800.00 800.00 09-2020 200.00 3000.00 600.00 10-2020 200.00 3200.00 400.00 11-2020 200.00 3400.00 200.00 12-2020 200.00 3600.00 0.00 At the end of the useful life, the net value of the asset with the addition was still $0.00         because the  Accelerated Depreciation for SL Depr. Method  check box         was selected. With the new calculation engine in  Acumatica ERP 2020 R1, the depreciation history of this asset with the addition of $1200 is as shown in the         following table. Thus, the net value at the end of the useful life is greater than zero,         regardless of whether the  Accelerated Depreciation for SL Depr.           Method  check box is selected or cleared. Depreciation history of the asset with an addition (applicable to  Acumatica ERP 2020 R1) Period Depreciation Expense Accumulated Depreciation Net Value 01-2019 100.00 100.00 2300.00 02-2019 100.00 200.00 2200.00 03-2019 100.00 300.00 2100.00 04-2019 100.00 400.00 2000.00 05-2019 100.00 500.00 1900.00 06-2019 100.00 600.00 1800.00 07-2019 100.00 700.00 1700.00 08-2019 100.00 800.00 1600.00 09-2019 100.00 900.00 1500.00 10-2019 100.00 1000.00 1400.00 11-2019 100.00 1100.00 1300.00 12-2019 100.00 1200.00 1200.00 01-2020 150.00 1350.00 2250.00 02-2020 150.00 1500.00 2100.00 03-2020 150.00 1650.00 1950.00 04-2020 150.00 1800.00 1800.00 05-2020 150.00 1950.00 1650.00 06-2020 150.00 2100.00 1500.00 07-2020 150.00 2250.00 1350.00 08-2020 150.00 2400.00 1200.00 09-2020 150.00 2550.00 1050.00 10-2020 150.00 2700.00 900.00 11-2020 150.00 2850.00 750.00 12-2020 150.00 3000.00 600.00 In this part of the example, the net value of the asset at the end of its useful life         remains $600. Upgrade Notes After an upgrade to  Acumatica ERP 2020 R1, to use the calculations shown in the second table of the example, before depreciating         fixed assets, a user has to change the depreciation method of the depreciation book of the         needed assets to another depreciation method that uses the  Remaining Value          calculation method. To do this, the user has to change the value in the            Depreciation Method  column on the  Balance          tab of the   ([~/?ScreenId=FA303000|FA303000]) Fixed Assets (FA303000) form for every needed         asset. ]]></column>
		</row>
		<row PageID="b6efa9c3-950e-4f60-ab18-d63790a8573d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="8e119cfe-cd24-07ea-5d37-d9c3c05e73af" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the following improvements have been introduced that affect the processing of credit card payments:[anchor|#_abf06251-5b2e-4442-846d-a025961bb3d4]
*The new ''Pending Processing'' status for AR documents in which a credit card payment method is used
*UI enhancements on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) and [HelpRoot_FormReference\AR_30_40_00|Cash Sales] ([~/?ScreenId=AR304000|AR304000]) forms
*The new [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] ([~/?ScreenId=AR513000|AR513000]) form

The following sections describe these improvements in more detail.{br}{TOC}
==Overview of the Pending Processing Status==
In Acumatica ERP 2020 R1, a new status, ''Pending Processing'', has been added for AR documents in which credit card transactions are used. This status indicates that the document is ready for credit card operations or for synchronization with the credit card processing center.{br}

The ''Pending Processing'' status can be assigned to AR documents of the following types:[anchor|#_052c06e4-8994-473d-a8a1-53f521efa2b8]
*''Payment'', ''Prepayment'', and ''Voided Payment'' on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications]form. For more information, see [[#_64cb8346-7d76-4e84-a36b-1da69c4e8f21|The Pending Processing Status for AR Payments, Prepayments, and Voided Payments].
*''Cash Sale'' and ''Cash Return'' on the [HelpRoot_FormReference\AR_30_40_00|Cash Sales] form. For more information, see [[#_ade19486-afa2-439f-a667-a6ad5ea10c9a|The Pending Processing Status for Cash Sales and Cash Returns].
*''Customer Refund'' on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form. For more information, see [[#_c143422f-6304-42f0-b059-63f8c39d4714|The Pending Processing Status for Customer Refunds].

The actions that a user can perform on an AR document with the ''Pending Processing'' status are determined by whether a credit card transaction is linked to the document and what the state of this credit card transaction is. The table below lists the substates of the ''Pending Processing'' status and the actions available to users.((({S:Warn}In the table below, the following terms are used:[anchor|#_03022568-59d9-4491-808b-912a88242660]
*An ''active transaction'' is the last successful credit card transaction, which determines the status of the document.
*An ''incomplete transaction'' is a credit card transaction that has not yet been captured.
)))[anchor|#_29c42fb8-b64b-4ad0-8b01-6afb3be3c0b7]
===Substates of the Pending Processing status and available actions===
{| class="checklist" | width="100%" 
|- 
!width="41%" ! Substate
!width="58%" ! Actions Available to Users
|- 
| No credit card transactions
| [anchor|#_7ea9855e-ef81-432d-bec8-580f2899ab6b]
*Edit the document details
*Delete the document
*Initiate new credit card transactions
*Sync the processing status and payment status with the processing center
*Record external transactions

|- 
| One active incomplete transaction
| [anchor|#_8fd13a45-f44b-4e61-89ca-026975369fc1]
*Sync the processing status and payment status with the processing center
*Perform operations on existing credit card transactions (that is, capture authorized payments and void existing transactions)

|- 
| No active credit card transactions
| [anchor|#_148b55b6-094c-48ae-a474-c2717d9e0b97]
*Edit the document details
*Initiate new credit card transactions
*Sync the processing status and payment status with the processing center
*Record external transactions

|- 
| Syncing processing and payment statuses or waiting for external processing
| Sync the processing status and payment status with the processing center
|}((({S:Warn}AR documents with the ''Pending Processing'' status do not prevent financial periods from being closed and do not appear on the ''Unposted AR Documents'' report even if they have active incomplete transactions. However, financial periods that have documents with the ''Pending Processing'' status cannot be locked.
)))[anchor|#_64cb8346-7d76-4e84-a36b-1da69c4e8f21]
==The Pending Processing Status for AR Payments, Prepayments, and Voided Payments==
The diagram below illustrates the processing of an AR payment or prepayment based on a credit card when the integrated credit card processing functionality is enabled—that is, when the '''Enable Integrated CC Processing''' check box is selected in the '''Data Processing Settings''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. In the diagram, the yellow shaded blocks labeled 1 and 2 illustrate the stages of the processing when the ''Pending Processing'' status is assigned to a payment document and the operations with credit card transactions that users can perform.[anchor|#_0910352d-632a-49e1-9542-13a63b116d20][anchor|#_39e79be7-9c44-40ed-b2c4-6ebb83aca059][image:ReleaseNotes/Images/RN_2020_R1_Finance_Pending_Processing_CC_Payments.png|popup|Processing of an AR payment or prepayment with a payment method based on a credit card|400px]
When an AR payment or prepayment created on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form is taken off hold and a credit card payment method is selected, the system assigns the ''Pending Processing'' status to the document and the document maintains this status until the credit card payment is successfully captured, the document is put back on hold, or a payment method that is not based on credit cards is selected for the document. When a user invokes the '''Authorize CC Payment''' or '''Void CC Payment''' action on the form toolbar or selects another credit card payment method, the status of the document does not change. Once the payment is successfully captured—when a user invokes the '''Capture CC Payment''', '''Record CC Payment''', or '''Extern. Authorized CC Payment''' action—the document is assigned the ''Balanced'' status. Because the '''Enable Integrated CC Processing''' check box is selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] form, the document is immediately released when the credit card payment is captured, and the system assigns the ''Open'' status to the document.{br}

When a user voids an AR payment that has been made with a credit card, a voided payment is created with the ''Pending Processing'' status. When a user invokes the '''Void CC Payment''' action on the voided payment, the voided payment is assigned the ''Closed'' status and the original payment is assigned the ''Voided'' status.[anchor|#_ade19486-afa2-439f-a667-a6ad5ea10c9a]
==The Pending Processing Status for Cash Sales and Cash Returns==
The diagram below illustrates the processing of a cash sale and a cash return with payment by credit card when the integrated credit card processing functionality is enabled—that is, when the '''Enable Integrated CC Processing''' check box is selected in the '''Data Processing Settings''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. In the diagram, the yellow shaded blocks labeled 1 and 2 illustrate the stages of the processing when the ''Pending Processing'' status is assigned to a cash sale and a cash return, as well as the operations with credit card transactions that users can perform.[anchor|#_2df6671a-266e-441e-b945-f318bf2949fc][anchor|#_d167d4fa-4660-4cca-b91a-a081d538b63f][image:ReleaseNotes/Images/RN_2020_R1_Finance_Pending_Processing_CC_Cash_Sale.png|popup|Processing of a cash sale and cash return with payment by credit card|400px]
The processing of a cash sale is similar to that of an AR payment. The cash sale is assigned the ''Pending Processing'' status when it is created on the [HelpRoot_FormReference\AR_30_40_00|Cash Sales] ([~/?ScreenId=AR304000|AR304000]) form and a credit card payment method is selected. The document maintains this status until the associated credit card payment is captured, which causes the system to assign the cash sale the ''Balanced'' status. Because the '''Enable Integrated CC Processing''' check box is selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] form, the document is immediately released when the credit card payment is captured, and the system assigns the ''Closed'' status to the document.{br}

When a cash sale paid with a credit card is reversed, a cash return is created with the ''Pending Processing'' status. When a user voids or refunds the credit card payment associated with the cash sale, the system assigns the ''Closed'' status to the cash return.[anchor|#_c143422f-6304-42f0-b059-63f8c39d4714]
==The Pending Processing Status for Customer Refunds==
The following diagram illustrates the processing of a customer refund with payment by card when the integrated credit card functionality is enabled—that is, when the '''Enable Integrated CC Processing''' check box is selected in the '''Data Processing Settings''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. The yellow shaded block illustrates the stage of the processing when the ''Pending Processing'' status is assigned to a customer refund and the operations with credit card transactions that users can perform.[anchor|#_a6eb79c0-f0c2-4d4f-bc9c-78a5b6471dd0][anchor|#_63ee7c8e-0701-4cf6-b0bf-3d3ff41b2da3][image:ReleaseNotes/Images/RN_2020_R1_Finance_Pending_Processing_CC_CustomerRefund.png|popup|Statuses of a customer refund with payment by credit card|400px]
When a customer refund is created on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form and a credit card payment method is selected, the system assigns the customer refund the ''Pending Processing'' status either when it is taken off hold if approvals are not configured for customer refunds, or when it is approved if the approvals are in place. The document maintains this status until the original credit card payment is refunded, at which point the system assigns the ''Balanced'' status to the customer refund. Because the '''Enable Integrated CC Processing''' check box is selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] form, the customer refund is then immediately released and assigned the ''Closed'' status.
==Changes to the Payments and Applications (AR302000) Form==
When a user creates a payment on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) and selects a payment method based on a credit card, the '''Processing Status''' box, which was previously displayed in the Summary area, is now hidden because there are no credit card transactions yet. When a new credit card transaction is initiated—for example, when a user invokes the '''Authorize CC Payment''' action—the '''New Card''' check box disappears and the '''Processing Status''' box appears below the '''Card/Account No.''' box. The screenshots below show the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form when there are no credit card transactions and when there is one active credit card transaction.[anchor|#_028fba43-de03-44f2-80a3-6f9e357cf4f2][anchor|#_36052be6-aabe-4b2e-8d22-ce619041461c][image:ReleaseNotes/Images/RN_2020_R1_Finance_CC_Changes_to_Payments_and_Applications.png|popup|Payment with no credit card transactions|400px][anchor|#_ab4fda57-0f49-4b77-b08f-a61e13e67b08][anchor|#_d5f0371b-4a89-496a-88d8-f856e502fb8b][image:ReleaseNotes/Images/RN_2020_R1_Finance_CC_Changes_to_Payments_and_Applications_2.png|popup|Payment with an active credit card transaction|400px]
==Changes to the Cash Sales (AR304000) Form==
When a user creates a cash sale on the [HelpRoot_FormReference\AR_30_40_00|Cash Sales] ([~/?ScreenId=AR304000|AR304000]) form and selects a payment method based on a credit card, the '''Processing Status''' box, which was previously displayed in the Summary area, is now hidden because there are no credit card transactions yet. When a new credit card transaction is initiated—for example, when a user invokes the '''Authorize CC Payment''' action—the '''Processing Status''' box appears below the '''Card/Account No.''' box, as shown in the following screenshot.[anchor|#_998573be-719b-4980-9d90-1ea438d37af3][anchor|#_6abac3d8-2b4a-4ec5-ad6a-42beb789624f][image:ReleaseNotes/Images/RN_2020_R1_Finance_CC_Changes_to_Cash_Sales.png|popup|Cash sale with an active credit card transaction|400px]
==Validate External Transactions (AR513000) Form==
In Acumatica ERP 2020 R1, the new [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] ([~/?ScreenId=AR513000|AR513000]) form has been introduced. The form, which is shown in the screenshot below, lists the credit card transactions with the ''Held for Review'' status that are associated with AR payments or cash sales. By using this form, users can request the updated status of the transactions from the processing center. Credit card transactions that are associated with documents that do not support the '''Validate CC Payment''' action are not displayed on this form.[anchor|#_a27f587b-adb8-4f86-afc4-2ad0dad7db8d][anchor|#_40134cc4-4bf6-4fa0-b7f4-e36735ef7948][image:ReleaseNotes/Images/RN_2020_R1_Finance_CC_Validate_External_Transactions.png|popup|Validate External Transactions form|450px]
By using the [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] form, users can do the following:[anchor|#_3f8980d1-3375-4a4c-91a6-867f6ee5d372]
*Validate the status of individual credit card transactions by selecting the credit card transactions in the table and clicking '''Validate''' on the form toolbar.
*Validate the status of all credit card transactions on the form by clicking '''Validate All''' on the form toolbar.
*Bring up the '''Automation Schedules''' pop-up window, in which you can configure validation to be run automatically according to a schedule. For more information on creating automation schedules, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=178e2dda-7b76-4382-a2c5-919e87391662|Scheduled Processing].

By default, access to the new form has been granted to the following predefined financial roles:[anchor|#_ff95ca09-56f3-47ec-be18-f747d8c8513c]
*''AR Admin''
* ''AR Clerk''

For information about the processing of credit card transactions held for review in the processing center, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=df8b048c-059f-4ef3-9174-6d8d1dab91e0|Card Payments].]]></column>
			<column name="PlainText"><![CDATA[Finance: Improvements to Credit Card Payment Processing In  Acumatica ERP 2020 R1,     the following improvements have been introduced that affect the processing of credit card     payments: The new  Pending Processing  status for AR documents in which a credit card payment      method is used UI enhancements on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) and   ([~/?ScreenId=AR304000|AR304000]) Cash Sales (AR304000) forms The new   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions (AR513000) form The following sections describe these improvements in more detail. Overview of the Pending Processing Status In  Acumatica ERP 2020 R1,     a new status,  Pending Processing , has been added for AR documents in which credit card     transactions are used. This status indicates that the document is ready for credit card     operations or for synchronization with the credit card processing center. The  Pending Processing  status can be assigned to AR documents of the following     types: Payment ,  Prepayment , and  Voided Payment  on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applicationsform. For more information, see  The Pending Processing Status for AR Payments, Prepayments, and Voided Payments The Pending Processing Status for AR Payments, Prepayments, and Voided Payments. Cash Sale  and  Cash Return  on the   ([~/?ScreenId=AR304000|AR304000]) Cash Sales      form. For more information, see  The Pending Processing Status for Cash Sales and Cash Returns The Pending Processing Status for Cash Sales and Cash Returns. Customer Refund  on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form. For more      information, see  The Pending Processing Status for Customer Refunds The Pending Processing Status for Customer Refunds. The actions that a user can perform on an AR document with the  Pending Processing      status are determined by whether a credit card transaction is linked to the document and what     the state of this credit card transaction is. The table below lists the substates of the       Pending Processing  status and the actions available to users. In the table below, the following terms are used: An  active transaction  is the last successful credit card transaction, which       determines the status of the document. An  incomplete transaction  is a credit card transaction that has not yet been       captured. Substates of the Pending Processing status and available actions Substate Actions Available to Users No credit card transactions Edit the document details Delete the document Initiate new credit card transactions Sync the processing status and payment status with the processing center Record external transactions One active incomplete transaction Sync the processing status and payment status with the processing center Perform operations on existing credit card transactions (that is, capture authorized           payments and void existing transactions) No active credit card transactions Edit the document details Initiate new credit card transactions Sync the processing status and payment status with the processing center Record external transactions Syncing processing and payment statuses or waiting for external processing Sync the processing status and payment status with the processing center AR documents with the  Pending Processing  status do not prevent financial periods     from being closed and do not appear on the  Unposted AR Documents  report even if they have     active incomplete transactions. However, financial periods that have documents with the       Pending Processing  status cannot be locked. The Pending Processing Status for AR Payments, Prepayments, and Voided Payments The diagram below illustrates the processing of an AR payment or prepayment based on a credit     card when the integrated credit card processing functionality is enabled—that is, when the       Enable Integrated CC Processing  check box is selected in the       Data Processing Settings  section on the  General      Settings  tab of the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form.     In the diagram, the yellow shaded blocks labeled 1 and 2 illustrate the stages of the processing     when the  Pending Processing  status is assigned to a payment document and the operations     with credit card transactions that users can perform. Processing of an AR payment or prepayment with a payment method based on a credit      card When an AR payment or prepayment created on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications     (AR302000) form is taken off hold and a credit card payment method is selected, the system     assigns the  Pending Processing  status to the document and the document maintains this     status until the credit card payment is successfully captured, the document is put back on hold,     or a payment method that is not based on credit cards is selected for the document. When a user     invokes the  Authorize CC Payment  or  Void CC      Payment  action on the form toolbar or selects another credit card payment method,     the status of the document does not change. Once the payment is successfully captured—when a     user invokes the  Capture CC Payment ,  Record CC      Payment , or  Extern. Authorized CC Payment  action—the     document is assigned the  Balanced  status. Because the  Enable Integrated CC      Processing  check box is selected on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences form, the document is immediately released when the credit card payment is captured, and the     system assigns the  Open  status to the document. When a user voids an AR payment that has been made with a credit card, a voided payment is     created with the  Pending Processing  status. When a user invokes the  Void CC      Payment  action on the voided payment, the voided payment is assigned the       Closed  status and the original payment is assigned the  Voided  status. The Pending Processing Status for Cash Sales and Cash Returns The diagram below illustrates the processing of a cash sale and a cash return with payment by     credit card when the integrated credit card processing functionality is enabled—that is, when     the  Enable Integrated CC Processing  check box is selected in the       Data Processing Settings  section on the  General      Settings  tab of the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form.     In the diagram, the yellow shaded blocks labeled 1 and 2 illustrate the stages of the processing     when the  Pending Processing  status is assigned to a cash sale and a cash return, as well     as the operations with credit card transactions that users can perform. Processing of a cash sale and cash return with payment by credit card The processing of a cash sale is similar to that of an AR payment. The cash sale is assigned     the  Pending Processing  status when it is created on the   ([~/?ScreenId=AR304000|AR304000]) Cash Sales (AR304000) form and a credit card payment method is     selected. The document maintains this status until the associated credit card payment is     captured, which causes the system to assign the cash sale the  Balanced  status. Because     the  Enable Integrated CC Processing  check box is selected on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences form, the document is immediately released when the     credit card payment is captured, and the system assigns the  Closed  status to the     document. When a cash sale paid with a credit card is reversed, a cash return is created with the       Pending Processing  status. When a user voids or refunds the credit card payment     associated with the cash sale, the system assigns the  Closed  status to the cash     return. The Pending Processing Status for Customer Refunds The following diagram illustrates the processing of a customer refund with payment by card     when the integrated credit card functionality is enabled—that is, when the  Enable      Integrated CC Processing  check box is selected in the  Data Processing      Settings  section on the  General Settings  tab of the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form. The yellow shaded block illustrates the     stage of the processing when the  Pending Processing  status is assigned to a customer     refund and the operations with credit card transactions that users can perform. Statuses of a customer refund with payment by credit card When a customer refund is created on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications     (AR302000) form and a credit card payment method is selected, the system assigns the customer     refund the  Pending Processing  status either when it is taken off hold if approvals are     not configured for customer refunds, or when it is approved if the approvals are in place. The     document maintains this status until the original credit card payment is refunded, at which     point the system assigns the  Balanced  status to the customer refund. Because the       Enable Integrated CC Processing  check box is selected on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences form, the customer refund is then immediately released     and assigned the  Closed  status. Changes to the Payments and Applications (AR302000) Form When a user creates a payment on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000)     and selects a payment method based on a credit card, the  Processing      Status  box, which was previously displayed in the Summary area, is now hidden     because there are no credit card transactions yet. When a new credit card transaction is     initiated—for example, when a user invokes the  Authorize CC Payment      action—the  New Card  check box disappears and the  Processing      Status  box appears below the  Card/Account No.  box. The     screenshots below show the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form when there are no     credit card transactions and when there is one active credit card transaction. Payment with no credit card transactions Payment with an active credit card transaction Changes to the Cash Sales (AR304000) Form When a user creates a cash sale on the   ([~/?ScreenId=AR304000|AR304000]) Cash Sales (AR304000)     form and selects a payment method based on a credit card, the  Processing      Status  box, which was previously displayed in the Summary area, is now hidden     because there are no credit card transactions yet. When a new credit card transaction is     initiated—for example, when a user invokes the  Authorize CC Payment      action—the  Processing Status  box appears below the       Card/Account No.  box, as shown in the following screenshot. Cash sale with an active credit card transaction Validate External Transactions (AR513000) Form In  Acumatica ERP 2020 R1,     the new   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions (AR513000) form has been introduced. The     form, which is shown in the screenshot below, lists the credit card transactions with the       Held for Review  status that are associated with AR payments or cash sales. By using this     form, users can request the updated status of the transactions from the processing center.     Credit card transactions that are associated with documents that do not support the       Validate CC Payment  action are not displayed on this form. Validate External Transactions form By using the   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions form, users can do the     following: Validate the status of individual credit card transactions by selecting the credit card      transactions in the table and clicking  Validate  on the form      toolbar. Validate the status of all credit card transactions on the form by clicking        Validate All  on the form toolbar. Bring up the  Automation Schedules  pop-up window, in which you can      configure validation to be run automatically according to a schedule. For more information on      creating automation schedules, see  Scheduled Processing Scheduled Processing. By default, access to the new form has been granted to the following predefined financial     roles: AR Admin AR Clerk For  information about the processing of credit card transactions held for review in the     processing center, see  Card Payments Card Payments. ]]></column>
		</row>
		<row PageID="d7e92d75-bde6-4f73-8ade-43b37a7469e8" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="e8b8b087-f2b4-ce09-9f54-533a1c52dd2a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, it was not possible to calculate inclusive taxes at the document level. If a tax amount was included in the price of a product or service, the only possible way to calculate the taxes was at the line level; the system calculated the tax amount for each line based on the tax rate and rounded it according to the currency precision. Then the results were summed to get the tax amount of the document.{br}

Starting from Acumatica ERP 2020 R1, users can create an AR document in which total inclusive tax will be extracted from the document amount, but not totaled from the taxes calculated for the document lines.{br}{TOC}
==Calculation Rules==
A new tax engine has been implemented to calculate and round inclusive tax amounts based on document amounts. The system uses the following rules to calculate tax amounts:[anchor|#_04be6ad7-8554-4096-92df-10a9223eeb84]
#The amount of the document before taxes is calculated as follows:
#*Line amounts of the document with the same applicable taxes are totaled ({{Line Amount = Ext. Price – Line, Group, and Document Discounts}}). If more than one tax is applicable to a document, the system groups document lines by the rates of the applied taxes.
#*The amount before taxes is extracted from the sum of the document line amounts. The result is not rounded.
#The tax amount based on the unrounded amount before taxes is calculated. The result is then rounded to the currency precision.
#The exact amount before taxes is calculated by subtracting the rounded tax amount from the sum of the document line amounts.

To prepare journal entries posted to GL on release of a document with inclusive VAT at the document level, the system still calculates line-level taxes for each line to get the amounts before taxes that are posted to the revenue account specified in the lines. Because the document-level tax posted to the tax payable account may differ from the total of tax amount of each line, to balance the transaction the system posts the difference to a special gain and loss account.{br}

 The example below illustrates how the system calculates the amount before taxes and the tax amount for each line.[anchor|#_47e8c577-b15c-4ab6-a0b0-0fc80a852bce]
===Tax calculation by line===
{| class="checklist" | width="100%" 
|- 
!width="20%" ! Item
!width="20%" ! Line Amount
!width="20%" ! Tax Rate
!width="20%" ! Line Tax Amount (rounded)
!width="20%" ! Line Amount Before Taxes to Post to Revenue Account
|- 
| Item 1
| 105.55
| 19%
| 105.55 / 1.19 &#42; 0.19 = '''16.85'''
| 105.55 – 16.85 = '''88.70'''
|- 
| Item 2
| 112.99
| 19%
| 112.99 / 1.19 &#42; 0.19 = '''18.04'''
| 112.99 – 18.04 = '''94.95'''
|- 
| Item 3
| 87.70
| 19%
| 87.70 / 1.19 &#42; 0.19 = '''14.00'''
| 87.70 – 14.00 = '''73.70'''
|}
The system has calculated these amounts as follows:[anchor|#_21e810b3-c1ef-4cff-b17c-d38afbc0a3f9]
*Line amount before taxes:
**Line 1: 105.55 / 1.19 = 88.697479
**Line 2: 112.99 / 1.19 = 94.9495798
**Line 3: 87.70 / 1.19 = 73.697479
*Line tax amount:
**Line 1: 88.697479 &#42; 0.19 = 16.852521 ~ '''16.85'''
**Line 2: 94.9495798 &#42; 0.19 = 18.0404202 ~ '''18.04'''
**Line 3: 73.697479 &#42; 0.19 = 14.002521 ~ '''14.00'''
*Rounded line amount before taxes to post to revenue account:
**Line 1: 105.55 – 16.85 = '''88.70'''
**Line 2: 112.99 – 18.04 = '''94.95'''
**Line 3: 87.70 – 14.00 = '''73.70'''

In the next step, the system calculates the document amount before taxes and the tax amount as follows:[anchor|#_99d9535e-d086-435a-91d8-b40ba9f62547]
*Document amount before taxes:
**Sum of the line amounts: 105.55 + 112.99 + 87.70 = 306.24
**Amount before taxes: 306.24 / 1.19 = 257.344538
*Document tax amount: 257.344538 &#42; 0.19 = 48.8954622 ~ 48.90
*Rounded document amount before taxes: 306.24 – 48.90 = 257.34

As a result of the calculations, there is a difference between the amount before taxes by lines ('''257.35''') and the document amount before taxes: ('''257.34'''). The difference will be posted to the Tax Rounding Gain/Loss account. The system generates the GL batch whose details are shown in the following table.[anchor|#_25c6de10-21aa-4c7c-8249-72160b1ca23b]
===Generated GL batch with the rounding difference===
{| class="checklist" | width="100%" 
|- 
!width="33%" ! Account
!width="33%" ! Debit
!width="33%" ! Credit
|- 
| Accounts Receivable
| 306.24
| 
|- 
| Revenue of line 1
| 
| 88.70
|- 
| Revenue of line 2
| 
| 94.95
|- 
| Revenue of line 3
| 
| 73.70
|- 
| Tax Payable
| 
| 48.90
|- 
| Tax Rounding Gain/Loss
| 0.01
| 
|- 
| 
| 306.25
| 306.25
|}
For details on this type of tax, see the ''Inclusive Output VAT at the Document Level'' section in [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=64353310-a668-43ce-bc96-82d7a0dd4635|Value-Added Tax and Its Variations].
==UI Changes==
The new [HelpRoot_FormReference\TX_10_30_00|Tax Preferences] ([~/?ScreenId=TX103000|TX103000]) form, shown in the screenshot below, has been added to the system. On this form, users can specify the accounts and subaccounts (if applicable) where amounts related to tax rounding gains and losses will be posted. If the ''Net/Gross Entry Mode'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the boxes on this form are mandatory.[anchor|#_fa62b7b3-bccf-4ef1-81fb-04c7de046cbb][anchor|#_1aad59dd-5e2b-4b28-ab20-a568e6e18fa3][image:ReleaseNotes/Images/RN_2020_R1_Finance_Tax_Preferences_form.png|popup|Tax Preferences (TX103000) form|300px]{br}

On the [HelpRoot_FormReference\TX_20_50_00|Taxes] ([~/?ScreenId=TX205000|TX205000]) form, the '''Calculate On''' box on the '''Tax Settings''' tab has been renamed to '''Calculation Rule'''. The options that users can select in this box have been also renamed as shown in the following table.[anchor|#_e319ef2d-ff19-4f7a-be56-237d45161ed6]
===Renamed options in the Calculation Rule box===
{| class="checklist" | width="100%" 
|- 
!width="50%" ! Previous Option Name
!width="50%" ! Option Name Starting from 2020 R1
|- 
|  ''Extract From Item Amount''
|  ''Inclusive Line-Level''
|- 
|  ''Calc. On Item Amount''
|  ''Exclusive Line-Level''
|- 
|  ''Calc. On Item + Tax Amount''
|  ''Compound Line-Level''
|- 
|  ''Calc. On Document Amount''
|  ''Exclusive Document-Level''
|- 
|  ''Calc. On Document + Tax Amount''
|  ''Compound Document-Level''
|}
The '''Tax Calculation Mode''' box has been added to the following forms:[anchor|#_c6a4d715-48bc-4022-ac02-f91e9629df69]
*[HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]): The '''Default Location Settings''' section on the '''Delivery Settings''' tab
*[HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]): The '''Location Settings''' section on the '''General Info''' tab
*[HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]): The '''Default General Settings''' section on the '''General Settings''' tab
*[HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]): The '''Tax Info''' section on the '''Financial Details''' tab
*[HelpRoot_FormReference\AR_30_40_00|Cash Sales] ([~/?ScreenId=AR304000|AR304000]): The '''Tax Info''' section on the '''Financial Details''' tab
*[HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]): The '''Default Location Settings''' section on the '''Delivery Settings''' tab
*[HelpRoot_FormReference\CR_30_30_10|Account Locations] ([~/?ScreenId=CR303010|CR303010]): The '''Location Settings''' section on the '''General Info''' tab
*[HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]): The '''Additional Details''' section on the '''Details''' tab
*[HelpRoot_FormReference\CR_30_45_00|Sales Quotes] ([~/?ScreenId=CR304500|CR304500]): The '''Financial Details''' section on the '''Details''' tab
*[HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]): The '''Financial Information''' section on the '''Financial Settings''' tab
*[HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]): The '''Tax Info''' section on the '''Financial Details''' tab
*[HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]): The '''Financial Information''' section on the '''Financial Settings''' tab
*[HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]): The '''Financial Information''' section on the '''Financial Settings''' tab

The '''Tax Calculation Mode''' box appears on the forms if the ''Net/Gross Entry Mode'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form. In this box, one of the following options should be selected: [anchor|#_b339f27a-e742-4a7e-86bc-98382dc8bdb6]
*''Tax Settings'': The system inserts the value specified for the selected customer location. This is the default value.
*''Gross'': The tax amount is included in the item price.
*''Net'': The tax amount is not included in the item price.
{br}

For details on creating this type of tax, see the ''To Create an Inclusive Document-Level Output VAT'' section in [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=ca8b2224-4fa3-4b23-b5e8-8971705b1660|To Create a Value-Added Tax].{br}

For inclusive document taxes to be calculated, the following conditions must be met: [anchor|#ul_xw5_jqt_jkb]
*The ''Gross'' option has to be selected in the '''Tax Calculation Mode''' box on the form where the document is created. 
*The user can apply to the document only VAT and sales taxes for which the ''Exclusive Document-Level'' option is selected in the '''Calculation Rule''' box on the [HelpRoot_FormReference\TX_20_50_00|Taxes] form. 
[anchor|#_c0d7a92a-ecbd-4c36-ab4b-b3f19888f87d]
==Upgrade Notes==
After the upgrade to Acumatica ERP 2020 R1, the ''Tax Settings'' option will be selected by default in the '''Tax Calculation Mode''' box on the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]), [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]), [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), and [HelpRoot_FormReference\CR_30_30_10|Account Locations] ([~/?ScreenId=CR303010|CR303010]) forms for all existing documents that have been created on these forms.{br}

If the ''Net/Gross Entry Mode'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, after the upgrade, the system updates the mandatory boxes on the new [HelpRoot_FormReference\TX_10_30_00|Tax Preferences] ([~/?ScreenId=TX103000|TX103000]) form with the values specified in the '''Rounding Settings''' section on the [HelpRoot_FormReference\GL_10_20_00|General Ledger Preferences] ([~/?ScreenId=GL102000|GL102000]) form or leaves them empty. If the system leaves the boxes empty, users will have to specify the accounts and subaccounts (if applicable) in these boxes; otherwise, an error message will be displayed on an attempt to release a document with inclusive document-level taxes and a calculated rounding amount.]]></column>
			<column name="PlainText"><![CDATA[Finance: Inclusive Output Tax at the Document Level In previous versions of  Acumatica ERP, it was not possible to calculate inclusive taxes at the document level. If a tax amount         was included in the price of a product or service, the only possible way to calculate the         taxes was at the line level; the system calculated the tax amount for each line based on the         tax rate and rounded it according to the currency precision. Then the results were summed to         get the tax amount of the document. Starting from  Acumatica ERP 2020 R1, users can create an AR document in which total inclusive tax will be extracted from the         document amount, but not totaled from the taxes calculated for the document lines. Calculation Rules A new tax engine has been implemented to calculate and round inclusive tax amounts based on         document amounts. The system uses the following rules to calculate tax amounts: The amount of the document before taxes is calculated as follows: Line amounts of the document with the same applicable taxes are totaled                 ( Line Amount = Ext. Price – Line, Group, and Document                 Discounts ). If more than one tax is applicable to a document, the system               groups document lines by the rates of the applied taxes. The amount before taxes is extracted from the sum of the document line amounts. The               result is not rounded. The tax amount based on the unrounded amount before taxes is calculated. The result is           then rounded to the currency precision. The exact amount before taxes is calculated by subtracting the rounded tax amount from           the sum of the document line amounts. To prepare         journal entries posted to GL on release of a document with inclusive VAT at the document         level, the system still calculates line-level taxes for each line to get the amounts before         taxes that are posted to the revenue account specified in the lines. Because the         document-level tax posted to the tax payable account may differ from the total of tax amount         of each line, to balance the transaction the system posts the difference to a special gain         and loss account.  The example below illustrates how the system calculates the amount before taxes and the         tax amount for each line. Tax calculation by line Item Line Amount Tax Rate Line Tax Amount (rounded) Line Amount Before Taxes to Post to Revenue Account Item 1 105.55 19% 105.55 / 1.19 * 0.19 =  16.85 105.55 – 16.85 =  88.70 Item 2 112.99 19% 112.99 / 1.19 * 0.19 =  18.04 112.99 – 18.04 =  94.95 Item 3 87.70 19% 87.70 / 1.19 * 0.19 =  14.00 87.70 – 14.00 =  73.70 The system has calculated these amounts as follows: Line amount before taxes: Line 1: 105.55 / 1.19 = 88.697479 Line 2: 112.99 / 1.19 = 94.9495798 Line 3: 87.70 / 1.19 = 73.697479 Line tax amount: Line 1: 88.697479 * 0.19 = 16.852521 ~  16.85 Line 2: 94.9495798 * 0.19 = 18.0404202 ~  18.04 Line 3: 73.697479 * 0.19 = 14.002521 ~  14.00 Rounded line amount before taxes to post to revenue account: Line 1: 105.55 – 16.85 =  88.70 Line 2: 112.99 – 18.04 =  94.95 Line 3: 87.70 – 14.00 =  73.70 In the next step, the system calculates the document amount before taxes and the tax amount         as follows: Document amount before taxes: Sum of the line amounts: 105.55 + 112.99 + 87.70 = 306.24 Amount before taxes: 306.24 / 1.19 = 257.344538 Document tax amount: 257.344538 * 0.19 = 48.8954622 ~ 48.90 Rounded document amount before taxes: 306.24 – 48.90 = 257.34 As a result of the calculations, there is a difference between the amount before taxes by         lines ( 257.35 ) and the document amount before taxes: ( 257.34 ). The difference         will be posted to the Tax Rounding Gain/Loss account. The system generates the GL batch         whose details are shown in the following table. Generated GL batch with the rounding difference Account Debit Credit Accounts Receivable 306.24 Revenue of line 1 88.70 Revenue of line 2 94.95 Revenue of line 3 73.70 Tax Payable 48.90 Tax Rounding Gain/Loss 0.01 306.25 306.25 For details on this type of tax, see the  Inclusive Output VAT at the Document Level          section in  Value-Added Tax and Its Variations Value-Added Tax and Its Variations. UI Changes The new   ([~/?ScreenId=TX103000|TX103000]) Tax Preferences (TX103000) form, shown in the         screenshot below, has been added to the system. On this form, users can specify the accounts         and subaccounts (if applicable) where amounts related to tax rounding gains and losses will         be posted. If the  Net/Gross Entry Mode  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the boxes on this form are           mandatory. Tax Preferences (TX103000) form On the   ([~/?ScreenId=TX205000|TX205000]) Taxes (TX205000) form, the            Calculate On  box on the  Tax Settings  tab has         been renamed to  Calculation Rule . The options that users can select         in this box have been also renamed as shown in the following table. Renamed options in the Calculation Rule box Previous Option Name Option Name Starting from  2020 R1Extract From Item Amount Inclusive Line-Level Calc. On Item Amount Exclusive Line-Level Calc. On Item + Tax Amount Compound Line-Level Calc. On Document Amount Exclusive Document-Level Calc. On Document + Tax Amount Compound Document-Level The  Tax Calculation Mode  box has been added to the following         forms:  ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000): The  Default Location             Settings  section on the  Delivery Settings  tab  ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020): The  Location             Settings  section on the  General Info  tab  ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000): The  Default General             Settings  section on the  General Settings  tab  ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000): The  Tax             Info  section on the  Financial Details  tab  ([~/?ScreenId=AR304000|AR304000]) Cash Sales (AR304000): The  Tax             Info  section on the  Financial Details  tab  ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000): The  Default Location             Settings  section on the  Delivery Settings  tab  ([~/?ScreenId=CR303010|CR303010]) Account Locations (CR303010): The  Location             Settings  section on the  General Info  tab  ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000): The  Additional             Details  section on the  Details  tab  ([~/?ScreenId=CR304500|CR304500]) Sales Quotes (CR304500): The  Financial             Details  section on the  Details  tab  ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000): The  Financial             Information  section on the  Financial Settings            tab  ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000): The  Tax             Info  section on the  Financial Details  tab  ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100): The  Financial             Information  section on the  Financial Settings            tab  ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200): The  Financial             Information  section on the  Financial Settings            tab The  Tax Calculation Mode  box appears on the forms if the            Net/Gross Entry Mode  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. In this box, one of the following options         should be selected:  Tax Settings : The system inserts the value specified for the selected customer             location. This is the default value. Gross : The tax amount is included in the item price. Net : The tax amount is not included in the item price. For details on creating this type of tax,         see  the  To           Create an Inclusive Document-Level Output VAT  section in  To Create a Value-Added Tax To Create a Value-Added Tax. For inclusive document taxes to be calculated, the following conditions must be met:  The  Gross  option has to be selected in the  Tax Calculation               Mode  box on the form where the document is created.  The user can apply to the document only VAT and sales taxes for which the  Exclusive               Document-Level  option is selected in the  Calculation Rule              box on the   ([~/?ScreenId=TX205000|TX205000]) Taxes form.  Upgrade Notes After the upgrade to  Acumatica ERP 2020 R1, the  Tax Settings  option will be selected by default in the  Tax           Calculation Mode  box on the   ([~/?ScreenId=AR303000|AR303000]) Customers         (AR303000),   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000),   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020),   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000), and   ([~/?ScreenId=CR303010|CR303010]) Account Locations (CR303010) forms for all existing documents that         have been created on these forms. If the  Net/Gross Entry Mode  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, after the upgrade, the system         updates the mandatory boxes on the new   ([~/?ScreenId=TX103000|TX103000]) Tax Preferences         (TX103000) form with the values specified in the  Rounding Settings          section on the   ([~/?ScreenId=GL102000|GL102000]) General Ledger Preferences (GL102000) form or leaves them         empty. If the system leaves the boxes empty, users will have to specify the accounts and         subaccounts (if applicable) in these boxes; otherwise, an error message will be displayed on         an attempt to release a document with inclusive document-level taxes and a calculated         rounding amount. ]]></column>
		</row>
		<row PageID="93e80d9d-e59d-4c6d-b335-47f7eb8c7a30" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="3704f0cb-618e-1c27-1b74-869c1af8e501" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, users could not release an AR invoice from credit hold if the customer&rsquo;s credit limit was exceeded. Starting from Acumatica ERP 2020 R1, users can put invoices on credit hold and release invoices from credit hold. For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=37b9df0d-1dc9-433d-8f75-59617b8489a5|Customer Credit Hold].{br}{TOC}
==Changes to the Invoices and Memos Form==
The following changes have been made to the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, as shown in the screenshot below:[anchor|#_60f15f89-c58e-4cf2-b5d9-9b4ef66e1c92]
*The '''Put on Credit Hold''' menu command has been added to the '''Actions''' menu. This action is available for documents that have the ''Invoice'', ''Debit Memo'', or ''Overdue Charge'' type and the ''On Hold'' or ''Balanced'' status. The action is not applicable when approval is required for the document type. When the system places the document on credit hold, it changes the document’s status to ''Credit Hold''.
*The '''Release from Credit Hold''' menu command has been added to the '''Actions''' menu. This action is available if the document has the ''Credit Hold'' status. 
*:When a user saves an AR document or clears the '''Hold''' check box, the system validates the customer&rsquo;s credit limit and places the document on credit hold if the validation has failed (which can occur due to the credit limit being exceeded or when a customer has documents that are long past due). 
*The ''Credit Hold'' option has been added to the '''Status''' box in the Summary area.
[anchor|#_c336d592-dee5-4341-9809-e203021da1f7][anchor|#_947fba60-1223-4d89-b918-f83a7dc62639][image:ReleaseNotes/Images/RN_2020_R1_Finance_ReleaseFromCreditHold_Invoices_and_Memos.png|popup|UI changes on the Invoices and Memos form|450px]
To put a document on credit hold, the user clicks '''Actions''' > '''Put on Credit Hold'''. For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=80532b3d-06e7-4d87-8a0e-33b46f2d4abd|To Put a Document on Credit Hold].{br}

To release a document from credit hold, a user clicks '''Actions''' > '''Release from Credit Hold'''. When a user releases a document from credit hold, the system sets the document status to ''Balanced''. If a user modifies a document that has been released from credit hold, the system puts this document on credit hold again if the updated invoice amount is greater than the amount at the moment when the invoice was released from credit hold. For details, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=49694d30-540d-492d-b9f0-eb4f84f8c071|To Release a Document that Is on Credit Hold].{br}

If approvals are configured for AR documents—that is, if the ''Approval Workflow'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and an approval map is selected for a document type on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form—an invoice is assigned the ''Pending Approval'' status when a user clears the '''Hold''' check box. Once this invoice is approved, it is assigned the ''Credit Hold'' status and can then be released from credit hold.]]></column>
			<column name="PlainText"><![CDATA[Finance: Release from Credit Hold for AR Invoices In previous versions of  Acumatica ERP, users could not release an AR invoice from credit hold if the customer's credit limit         was exceeded. Starting from  Acumatica ERP 2020 R1, users can put invoices on credit hold and release invoices from credit hold. For         details, see  Customer Credit Hold Customer Credit Hold. Changes to the Invoices and Memos Form The following changes have been made to the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos         (AR301000) form, as shown in the screenshot below: The  Put on Credit Hold  menu command has been added to the                Actions  menu. This action is available for documents that have             the  Invoice ,  Debit Memo , or  Overdue Charge  type and the  On               Hold  or  Balanced  status. The action is not applicable when approval is             required for the document type. When the system places the document on credit hold, it             changes the document’s status to  Credit Hold . The  Release from Credit Hold  menu command has been added to the                Actions  menu. This action is available if the document has the                Credit Hold  status.  When a user saves an AR document or clears the                  Hold  check box, the system validates the customer's credit               limit and places the document on credit hold if the validation has failed (which can               occur due to the credit limit being exceeded or when a customer has documents that are               long past due).  The  Credit Hold  option has been added to the  Status  box             in the Summary area. UI changes on the Invoices and Memos form To put a document on credit hold, the user clicks  Actions Put on Credit Hold . For details, see  To Put a Document on Credit Hold To Put a Document on Credit Hold. To release a document from credit hold, a user clicks  Actions Release from Credit Hold . When a user releases a document from credit hold, the system sets the         document status to  Balanced . If a user modifies a document that has been released         from credit hold, the system puts this document on credit hold again if the updated invoice         amount is greater than the amount at the moment when the invoice was released from credit         hold. For details, see  To Release a Document that Is on Credit Hold To Release a Document that Is on Credit Hold. If approvals are configured for AR documents—that is, if the  Approval Workflow          feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and         an approval map is selected for a document type on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form—an invoice is assigned the            Pending Approval  status when a user clears the  Hold  check         box. Once this invoice is approved, it is assigned the  Credit Hold  status and can         then be released from credit hold. ]]></column>
		</row>
		<row PageID="fca29619-8adb-46de-93b4-3fcaca0b202d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6aee6147-6b56-d353-124c-9415a829e8d6" RecordSourceID="22377">
			<column name="Content"><![CDATA[
The Acumatica ERP database now holds the bank transaction match and relevance calculation settings configured for a particular cash account in the '''Transaction Match Settings''' dialog box, which is invoked when a user selects a cash account on the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form and clicks the '''Match Settings''' button on the form toolbar.{br}

In previous versions of Acumatica ERP, when a user updated the settings for a cash account in the '''Transaction Match Settings''' dialog box, the updated values were effective for only the duration of the user&rsquo;s session. When the user was signed out, the account-specific settings were reset to the default values, which are configured on the '''Bank Statement Settings''' tab of the [HelpRoot_FormReference\CA_10_10_00|Cash Management Preferences] ([~/?ScreenId=CA101000|CA101000]) form.{br}

Starting from Acumatica ERP 2020 R1, the settings saved for a particular cash account in the '''Transaction Match Settings''' dialog box are maintained in the database and not limited to a particular user&rsquo;s session. On the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] form, when a user selects a cash account for which custom settings were previously saved and opens the '''Transaction Match Settings''' dialog box, the settings that have been specified for the cash account are now displayed in this dialog box.{br}

A user can reset the settings specific to a cash account to the default values by clicking the new '''Reset to Default''' button in the '''Transaction Match Settings''' dialog box, as shown in the following screenshot.[anchor|#_20e7080d-af5c-4659-ad44-db875f1136c1][anchor|#_07dd21f5-553a-4689-bbfd-47c018cd8072][image:ReleaseNotes/Images/RN_2020_R1_Finance_Saving_Matching_Settings_per_Cash_Account.png|popup|The new Reset to Default button in the Transaction Match Settings dialog box|300px]
For more information, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=f60d8a9e-2f69-4a67-b37a-e5a4765fecba|To Set Up Transaction Matching Settings Applicable to a Particular Cash Account].]]></column>
			<column name="PlainText"><![CDATA[Finance: Saving Bank Transaction Matching Settings per Cash Account The  Acumatica ERP database now holds the bank transaction match and relevance calculation settings         configured for a particular cash account in the  Transaction Match           Settings  dialog box, which is invoked when a user selects a cash account on         the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form and clicks the            Match Settings  button on the form toolbar. In previous versions of  Acumatica ERP, when a user updated the settings for a cash account in the  Transaction Match           Settings  dialog box, the updated values were effective for only the duration         of the user's session. When the user was signed out, the account-specific settings were         reset to the default values, which are configured on the  Bank Statement           Settings  tab of the   ([~/?ScreenId=CA101000|CA101000]) Cash Management Preferences (CA101000)         form. Starting from  Acumatica ERP 2020 R1, the settings saved for a particular cash account in the  Transaction Match           Settings  dialog box are maintained in the database and not limited to a         particular user's session. On the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions form, when a         user selects a cash account for which custom settings were previously saved and opens the            Transaction Match Settings  dialog box, the settings that have been         specified for the cash account are now displayed in this dialog box. A user can reset the settings specific to a cash account to the default values by clicking         the new  Reset to Default  button in the  Transaction Match           Settings  dialog box, as shown in the following screenshot. The new Reset to Default button in the Transaction Match Settings dialog box For more information, see  To Set Up Transaction Matching Settings Applicable to a           Particular Cash Account To Set Up Transaction Matching Settings Applicable to a Particular Cash Account. ]]></column>
		</row>
		<row PageID="f4932d00-42cf-4c43-a6a5-88526375188e" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="709bd5c9-8502-e75a-3baf-e5b902e99c5e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, multiple enhancements to the finance functionality have been introduced.{br}{TOC}
==Combined Enabling of Centralized Period Management and Multiple Calendar Support Features==
The ''Centralized Period Management'' and ''Multiple Calendar Support'' features are mutually exclusive. That is, ''Multiple Calendar Support'' can be enabled if ''Centralized Period Management'' is disabled, and ''Centralized Period Management'' can be enabled if ''Multiple Calendar Support'' is disabled. {br}

In previous versions of Acumatica ERP, to ensure the consistent state of the check boxes corresponding to these features on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, each of these check boxes was unavailable for editing if the other was selected. However, this system behavior was not clear for the users. To improve the user experience, in Acumatica ERP 2020 R1, these check boxes are available, and if the check box selections are not valid, the system displays the appropriate error messages informing the users about the use of the features.
==Changed Location of the GL Accounts Tab on the Taxes (TX205000) Form==
On the [HelpRoot_FormReference\TX_20_50_00|Taxes] ([~/?ScreenId=TX205000|TX205000]) form, the '''GL Accounts''' tab has been moved and is now located in the bottom part of the form, as shown in the screenshot below. This change has been introduced because GL accounts are attributes of a tax. Thus, the change supports the uniformity of the user interface of the [HelpRoot_FormReference\TX_20_50_00|Taxes] form and other Acumatica ERP forms on which the Summary area is displayed for all tabs.[anchor|#_3715df2d-5d29-4ce8-818d-a3f3bc0d227e][anchor|#_ee7030a9-3287-42d8-9b42-17afa6bec061][image:ReleaseNotes/Images/RN_2020_R1_Finance_Taxes_GL_Accounts_Tab.png|popup|GL Accounts tab on the Taxes (TX205000) form|450px]
==Changed Presentation of Data on the Customer Details (AR402000) Form==
In previous versions of Acumatica ERP, when auto-numbering was enabled for customer accounts—that is, when the '''Auto Number''' check box was selected for the ''CUSTOMER'' segmented key on the [HelpRoot_FormReference\CS_20_20_00|Segmented Keys] ([~/?ScreenId=CS202000|CS202000]) form—it was difficult for users to distinguish between the child accounts to which documents on the [HelpRoot_FormReference\AR_40_20_00|Customer Details] ([~/?ScreenId=AR402000|AR402000]) form were related.{br}

Starting from Acumatica ERP 2020 R1, the '''Customer''' column in the table on the [HelpRoot_FormReference\AR_40_20_00|Customer Details] form displays the customer name after the customer ID, as illustrated in the following screenshot.[anchor|#_bce9e4da-4725-471c-a8e0-bdb99c92b9bf][anchor|#_511fb024-8821-4148-bc07-ec87310d3068][image:ReleaseNotes/Images/RN_2020_R1_Finance_Other_Enhancements_Customer_Details_Form.png|popup|Customer Details (AR402000) form|400px]
==Renaming of Forms in the Fixed Asset Subledger==
In order to have consistent form names in the general ledger and the fixed asset subledger, the following UI changes have been introduced to forms in Acumatica ERP 2020 R1:[anchor|#_3df2c372-e04d-4c41-adbd-40dceeed38da]
*''Book Calendars'' ''(FA206000)'' has been renamed to [HelpRoot_FormReference\FA_20_60_00|Book Calendar Setup] ([~/?ScreenId=FA206000|FA206000]).
*''Generate FA Calendars'' ''(FA501000)'' has been renamed to [HelpRoot_FormReference\FA_50_10_00|Generate Book Calendars] ([~/?ScreenId=FA501000|FA501000]).
*''Book Periods'' ''(FA304000)'' has been renamed to [HelpRoot_FormReference\FA_30_40_00|Book Calendars] ([~/?ScreenId=FA304000|FA304000]).

==Payment Application by Lines Not Allowed for Debit Adjustments==
If the ''Payment Application by Line'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, debit adjustments created in the system manually or by reversing a document cannot be applied by line. In other words, for debit adjustments created on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form, the '''Pay by Line''' check box in the Summary area will always be cleared and unavailable for editing.{br}

After an upgrade to Acumatica ERP 2020 R1, if any debit adjustments with payment application by line exist in the system, they will be processed by using the logic that had been applied before this change.
==Changes to the Load Options Dialog Box==
The following changes have been introduced to the '''Load Options''' dialog box of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, which a user brings up by clicking '''Load Documents''' on the table toolbar of the '''Documents to Apply''' tab:[anchor|#_b4f7952d-8340-4747-a9fb-78838e3da65a]
*The new '''Company/Branch''' box has replaced the separate '''Company''' and '''Branch''' boxes.
*The '''Max. Number of Documents''' box has been renamed to '''Max. Number of Rows'''.
*The UI elements have also been rearranged as shown in the screenshot below.
[anchor|#_63124c71-458e-4309-9f98-5f52dda59c8c][anchor|#_c539cd93-f239-42f5-adaf-f56267e1376d][image:ReleaseNotes/Images/RN_2020_R1_Finance_Load_Options_Updates.png|popup|The updated Load Options dialog box|300px]]]></column>
			<column name="PlainText"><![CDATA[Finance: Other Enhancements In  Acumatica ERP 2020 R1, multiple enhancements to the finance functionality have been introduced. Combined Enabling of Centralized Period Management and Multiple Calendar Support         Features The  Centralized Period Management  and  Multiple Calendar Support  features are         mutually exclusive. That is,  Multiple Calendar Support  can be enabled if            Centralized Period Management  is disabled, and  Centralized Period Management          can be enabled if  Multiple Calendar Support  is disabled.  In previous versions of  Acumatica ERP, to ensure the consistent state of the check boxes corresponding to these features on the             ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, each of these check boxes         was unavailable for editing if the other was selected. However, this system behavior was not         clear for the users. To improve the user experience, in  Acumatica ERP 2020 R1, these check boxes are available, and if the check box selections are not valid, the         system displays the appropriate error messages informing the users about the use of the         features. Changed Location of the GL Accounts Tab on the Taxes (TX205000) Form On the   ([~/?ScreenId=TX205000|TX205000]) Taxes (TX205000) form, the  GL           Accounts  tab has been moved and is now located in the bottom part of the form,         as shown in the screenshot below. This change has been introduced because GL accounts are         attributes of a tax. Thus, the change supports the uniformity of the user interface of the             ([~/?ScreenId=TX205000|TX205000]) Taxes form and other  Acumatica ERP forms on which the Summary area is displayed for all tabs. GL Accounts tab on the Taxes (TX205000) form Changed Presentation of Data on the Customer Details (AR402000) Form In previous versions of  Acumatica ERP, when auto-numbering was enabled for customer accounts—that is, when the            Auto Number  check box was selected for the  CUSTOMER          segmented key on the   ([~/?ScreenId=CS202000|CS202000]) Segmented Keys (CS202000) form—it         was difficult for users to distinguish between the child accounts to which documents on the             ([~/?ScreenId=AR402000|AR402000]) Customer Details (AR402000) form were related. Starting from  Acumatica ERP 2020 R1, the  Customer  column in the table on the   ([~/?ScreenId=AR402000|AR402000]) Customer Details form displays the customer name after the customer         ID, as illustrated in the following screenshot. Customer Details (AR402000) form Renaming of Forms in the Fixed Asset Subledger In order to have consistent form names in the general ledger and the fixed asset subledger,         the following UI changes have been introduced to forms in  Acumatica ERP 2020 R1: Book Calendars (FA206000)  has been renamed to   ([~/?ScreenId=FA206000|FA206000]) Book Calendar Setup           (FA206000). Generate FA Calendars (FA501000)  has been renamed to   ([~/?ScreenId=FA501000|FA501000]) Generate Book Calendars           (FA501000). Book Periods (FA304000)  has been renamed to   ([~/?ScreenId=FA304000|FA304000]) Book Calendars           (FA304000). Payment Application by Lines Not Allowed for Debit Adjustments If the  Payment Application by Line  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, debit adjustments created in the         system manually or by reversing a document cannot be applied by line. In other words, for         debit adjustments created on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000)         form, the  Pay by Line  check box in the Summary area will always be         cleared and unavailable for editing. After an upgrade to  Acumatica ERP 2020 R1, if any debit adjustments with payment application by line exist in the system, they will         be processed by using the logic that had been applied before this change. Changes to the Load Options Dialog Box The following changes have been introduced to the  Load Options          dialog box of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, which a user         brings up by clicking  Load Documents  on the table toolbar of the            Documents to Apply  tab: The new  Company/Branch  box has replaced the separate              Company  and  Branch  boxes. The  Max. Number of Documents  box has been renamed to              Max. Number of Rows . The UI elements have also been rearranged as shown in the screenshot below. The updated Load Options dialog box ]]></column>
		</row>
		<row PageID="9f491839-5839-4797-8d69-aa9dccfb5dcf" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="0ace64eb-1b85-1080-678b-387315bc8f03" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a new type of items called ''matrix items'' has been implemented. These items represent variants of high-level items (''template items''), such as T-shirts, that have multiple attributes, such as material, color, and size. Template items exist solely to provide default settings for matrix items and cannot be added to AP, AR, inventory, sales, or purchase documents. A matrix item is a stock or non-stock item that corresponds to a physical good or service with particular set of attributes. For example, a matrix item can be a stock item that represents a black cotton T-shirt in size XL. With matrix items, users can quickly create a wide variety of stock or non-stock items. For more information, see [https://help-2019r2.acumatica.com/Help?ScreenId=ShowWiki&pageid=7ee21351-6cd7-4209-9c9d-f9f3d50680d0|Matrix Items: General Information].{br}

The functionality of matrix items is available if the ''Matrix Items'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
==Creation of Matrix Items==
When initially defining a particular group of related matrix items, the user should perform the following steps:[anchor|#_c2a53fbe-f89f-433f-a78c-8ca893bc1810]
#On the [HelpRoot_FormReference\CS_20_50_00|Attributes] ([~/?ScreenId=CS205000|CS205000]) form, creating all attributes that will be used for these matrix items. The attributes must have the ''Combo'' control type.
#On the [HelpRoot_FormReference\IN_20_10_00|Item Classes] ([~/?ScreenId=IN201000|IN201000]) form, creating an item class that will provide default settings for the template item. On the '''Attributes''' tab, the user then adds the attributes that characterize the matrix items. For each of these attributes, in the new '''Category''' column (see the following screenshot), the user selects ''Variant'' to indicate that this attribute will be used for creating matrix items that are variants of the template item.[anchor|#_f5e1c540-f0e2-4070-8d40-6b618bf704e6][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_ItemClass.png|popup|The Attributes tab on the Item Classes form|400px]
#On the new [HelpRoot_FormReference\IN_20_30_00|Template Items] ([~/?ScreenId=IN203000|IN203000]) form, creating the template item that will provide the basic settings for the matrix items. On the '''Attribute Configuration''' tab, the user adds attributes and specifies the settings to be used for the segments of the inventory IDs and descriptions of the matrix items (see the following screenshot).[anchor|#_b9c5cf20-6718-4d5e-8e08-fd888882b476][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_TemplateItems.png|popup|The Attribute Configuration tab of the Template Items form|450px]
#On the new [HelpRoot_FormReference\IN_20_35_00|Create Matrix Items] ([~/?ScreenId=IN203500|IN203500]) form, creating the needed matrix items based on the created template item as follows:
##In the '''Template ID''' box, the user selects the ID of the template item for which matrix items should be generated.
##In the '''Column Attribute ID''' box, the user selects the attribute to be displayed in matrix columns.
##In the '''Row Attribute ID''' box, the user selects the attribute to be displayed in matrix rows.
##In the table with other attributes below the Selection area, the user selects the values of other attributes configured for the template item.
##In the table at the bottom of the form, the user selects check boxes that represent the attributes of the items to be generated, as shown in the following screenshot. To select the check box for each column in the row, the user selects the check box in the '''Select Row''' column. To select the check box for each row in the column, the user selects the check box in the '''Select Column''' row.[anchor|#_237abe56-4855-429a-8780-27c1285b52c6][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_CreateMatrixItems.png|popup|The Create Matrix Items form|300px]
##On the form toolbar, the user clicks '''Create Matrix Items'''.
##In the '''Create Matrix Items''' dialog box, which opens (as shown in the following screenshot), the user reviews the list of items to be generated, and clicks '''Confirmation''' in the lower right corner. The system generates the items listed in the dialog box and closes the dialog box.[anchor|#_d946ff2c-0155-453f-83a6-7f9dec53afe8][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_CreateMatrixItems2.png|popup|The Create Matrix Items dialog box|450px]
#:((({S:Hint}Matrix items can also be created on the '''Create Matrix Items''' tab of the [HelpRoot_FormReference\IN_20_30_00|Template Items] form.
)))

A user can view the list of matrix items related to a particular template item on the '''Matrix Items''' tab of the [HelpRoot_FormReference\IN_20_30_00|Template Items] form (see the following screenshot).[anchor|#_e85a60ba-94cd-4ddd-99c8-fe37b2694c21][anchor|#_f8a72c05-9747-4e48-a497-9f332f250659][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_CreateMatrixItems3.png|popup|The Matrix Items tab of the Template Items form|450px]
To check whether a particular item is a matrix item, a user can open the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) for a stock item or the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form for a non-stock item and view the value of the '''Template ID''' box on the '''General Settings''' tab. If the box is empty, the item is not a matrix item. If the ID of a template item is specified in this box, the item is a matrix item (as is the case in the following screenshot).[anchor|#_17c1e440-b6f3-4613-8ab9-d6e032d4bff5][anchor|#_0461a60d-0986-4a80-be09-46a69c689c23][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_StockItems.png|popup|The Stock Items form showing a matrix item|450px]
==Maintenance of Template and Matrix Items==
The settings of individual matrix items can be changed by using the [HelpRoot_FormReference\IN_20_25_00|Stock Items] or [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] form (depending on whether the item is a stock or non-stock item, respectively). If it is necessary to change a particular setting for all matrix items of a template item, the user should make these changes for the template item on the [HelpRoot_FormReference\IN_20_30_00|Template Items] form and then apply the changes to all related matrix items by clicking the '''Apply to Matrix Items''' button on the form toolbar.{br}

If it is necessary to completely remove matrix items from the system, on the [HelpRoot_FormReference\IN_20_30_00|Template Items] form, a user should open the '''Matrix Items''' tab, select the unlabeled check boxes for the items to be removed, and click '''Delete''' on the table toolbar.
==Document Processing with Matrix Items==
Sales, marketing, and purchasing managers can specify prices and discounts for a template item on the [HelpRoot_FormReference\AR_20_20_00|Sales Prices] ([~/?ScreenId=AR202000|AR202000]), [HelpRoot_FormReference\AR_20_20_10|Sales Price Worksheets] ([~/?ScreenId=AR202010|AR202010]), [HelpRoot_FormReference\AR_20_95_00|Discounts] ([~/?ScreenId=AR209500|AR209500]), [HelpRoot_FormReference\AP_20_20_00|Vendor Prices] ([~/?ScreenId=AP202000|AP202000]), [HelpRoot_FormReference\AP_20_20_10|Vendor Price Worksheets] ([~/?ScreenId=AP202010|AP202010]), and [HelpRoot_FormReference\AP_20_50_00|Vendor Discounts] ([~/?ScreenId=AP205000|AP205000]) forms. These prices and discounts will be applied to the matrix items related to this template item if specific prices and discounts have not been not specified for individual matrix items of the template item.{br}

Matrix items can be added to sales or purchase orders one by one, as non-matrix items, or users can add multiple items at a time. On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) and [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) forms, the '''Add Matrix Item''' button has been added to the table toolbar on the '''Document Details''' tab (see the following screenshot).[anchor|#_38940dba-c025-4dd0-942c-a55a148fdb7c][anchor|#_e1ea4f06-ceba-4593-9162-e6c5179f4590][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_SalesOrder1.png|popup|The Add Matrix Item button on the Sales Orders form|450px]
To add matrix items to a document, either a table view or a matrix view can be used. In the table view, the user should select a template item and specify the attribute values of the matrix items that they need to add to the document. In this view, the user can select any set of available attribute values, even if a matrix item with this set does not exist in the system (for example, a purchasing manager knows that the vendor sells items with particular attributes and the manager does not need to create these items in the system specifically). In the table of the '''Add Matrix Item: Table View''' dialog box (shown in the following screenshot), the '''New''' check box becomes selected for each new item. The system generates the new items on the fly when the items are being added to the document.[anchor|#_dbcf4e40-d5db-492d-8f52-eb47a90a262c][anchor|#_e9931b59-76f5-46a5-8aab-56c1bc499637][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_SalesOrder4.png|popup|The Add Matrix Item: Table View dialog box|450px]{br}

In the matrix view (shown in the following screenshot), which is opened when a user clicks the '''Open Matrix View''' button in the '''Add Matrix Item: Table View''' dialog box, the user can select existing matrix items by entering the required quantities in the matrix. If the '''Display Availability Details''' check box is selected and the user clicks the matrix cell, the availability information about the matrix item is displayed in the table footer.((({S:Danger}For adding matrix items to documents, either the table view or matrix view (but not both views) must be used. If the user selects items in the table view and switches to the matrix view, the selected items are discarded.
)))[anchor|#_c2f02b4e-d688-4b6f-ab53-1f956e3ade60][anchor|#_ee7f1a04-b725-49f2-933f-f01da2b56763][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_SalesOrder2.png|popup|The Add Matrix Item: Matrix View dialog box|450px]
On the '''Document Details''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) or [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form, the user can then review the list of matrix items added to the sales or purchase order. (The following screenshot displays this list based on the settings specified in the dialog box in the previous screenshot.)[anchor|#_d590c3c1-1130-44f2-bc25-08a356342120][anchor|#_fff91bdb-b222-4613-a09e-a8df21a5b05a][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_SalesOrder3.png|popup|The sales order with the added matrix items|450px]
==Reports and Inquiries for Matrix Items==
To give users the ability to print invoices or memos, sales orders, and purchase orders that contain matrix items, the following reports have been implemented:[anchor|#_2c5ecaab-d705-4518-9ceb-68b37f9e6a1c]
*[HelpRoot_ReportReference\SO_64_30_10|Matrix Invoice/Memo] ([~/?ScreenId=SO643010|SO643010])
*[HelpRoot_ReportReference\SO_64_10_20|Matrix Sales Order] ([~/?ScreenId=SO641020|SO641020])
*[HelpRoot_ReportReference\PO_64_10_10|Matrix Purchase Order] ([~/?ScreenId=PO641010|PO641010])

The [HelpRoot_FormReference\IN_40_15_00|Matrix Inventory Summary] ([~/?ScreenId=IN401500|IN401500]) form has also been introduced (shown in the following screenshot) to give users the ability to view detailed information about the matrix items available at the warehouse selected on the form.[anchor|#_c4e3b926-9da2-48be-8cbd-29fb5af4c7fc][anchor|#_2219b7d3-c69d-492e-9d48-0ac4ab7dd30b][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_MatrixItems_Inventory_Summary.png|popup|The Matrix Inventory Summary form|400px]]]></column>
			<column name="PlainText"><![CDATA[Inventory and Order Management: Matrix Items In  Acumatica ERP 2020 R1, a new type of items called  matrix items  has been implemented. These items         represent variants of high-level items ( template items ), such as T-shirts, that have         multiple attributes, such as material, color, and size. Template items exist solely to         provide default settings for matrix items and cannot be added to AP, AR, inventory, sales,         or purchase documents. A matrix item is a stock or non-stock item that corresponds to a         physical good or service with particular set of attributes. For example, a matrix item can         be a stock item that represents a black cotton T-shirt in size XL. With matrix items, users         can quickly create a wide variety of stock or non-stock items. For more information, see            Matrix Items: General Information Matrix Items: General Information. The functionality of matrix items is available if the  Matrix Items  feature is         enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. Creation of Matrix Items When initially defining a particular group of related matrix items, the user should perform         the following steps: On the   ([~/?ScreenId=CS205000|CS205000]) Attributes (CS205000) form, creating all attributes           that will be used for these matrix items. The attributes must have the  Combo            control type. On the   ([~/?ScreenId=IN201000|IN201000]) Item Classes (IN201000) form, creating an item class           that will provide default settings for the template item. On the              Attributes  tab, the user then adds the attributes that           characterize the matrix items. For each of these attributes, in the new              Category  column (see the following screenshot), the user selects              Variant  to indicate that this attribute will be used for creating matrix items           that are variants of the template item. The Attributes tab on the Item Classes form On the new   ([~/?ScreenId=IN203000|IN203000]) Template Items (IN203000) form, creating the           template item that will provide the basic settings for the matrix items. On the              Attribute Configuration  tab, the user adds attributes and           specifies the settings to be used for the segments of the inventory IDs and descriptions           of the matrix items (see the following screenshot). The Attribute Configuration tab of the Template Items form On the new   ([~/?ScreenId=IN203500|IN203500]) Create Matrix Items (IN203500) form, creating the needed           matrix items based on the created template item as follows: In the  Template ID  box, the user selects the ID of the               template item for which matrix items should be generated. In the  Column Attribute ID  box, the user selects the               attribute to be displayed in matrix columns. In the  Row Attribute ID  box, the user selects the attribute               to be displayed in matrix rows. In the table with other attributes below the Selection area, the user selects the               values of other attributes configured for the template item. In the table at the bottom of the form, the user selects check boxes that represent               the attributes of the items to be generated, as shown in the following screenshot. To               select the check box for each column in the row, the user selects the check box in the                  Select Row  column. To select the check box for each row in               the column, the user selects the check box in the  Select Column                  row. The Create Matrix Items form On the form toolbar, the user clicks  Create Matrix               Items . In the  Create Matrix Items  dialog box, which opens (as shown               in the following screenshot), the user reviews the list of items to be generated, and               clicks  Confirmation  in the lower right corner. The system               generates the items listed in the dialog box and closes the dialog box. The Create Matrix Items dialog box Matrix items can also be created on the  Create Matrix               Items  tab of the   ([~/?ScreenId=IN203000|IN203000]) Template Items           form. A user can view the list of matrix items related to a particular template item on the            Matrix Items  tab of the   ([~/?ScreenId=IN203000|IN203000]) Template Items form (see the following screenshot). The Matrix Items tab of the Template Items form To check whether a particular item is a matrix item, a user can open the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500) for a stock item or the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form for a non-stock item and view the         value of the  Template ID  box on the  General           Settings  tab. If the box is empty, the item is not a matrix item. If the ID of         a template item is specified in this box, the item is a matrix item (as is the case in the         following screenshot). The Stock Items form showing a matrix item Maintenance of Template and Matrix Items The settings of individual matrix items can be changed by using the   ([~/?ScreenId=IN202500|IN202500]) Stock Items or   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items         form (depending on whether the item is a stock or non-stock item, respectively). If it is         necessary to change a particular setting for all matrix items of a template item, the user         should make these changes for the template item on the   ([~/?ScreenId=IN203000|IN203000]) Template Items form and then apply the changes to all related         matrix items by clicking the  Apply to Matrix Items  button on the form         toolbar. If it is necessary to completely remove matrix items from the system, on the   ([~/?ScreenId=IN203000|IN203000]) Template Items form, a user should open the  Matrix           Items  tab, select the unlabeled check boxes for the items to be removed, and         click  Delete  on the table toolbar. Document Processing with Matrix Items Sales, marketing, and purchasing managers can specify prices and discounts for a template         item on the   ([~/?ScreenId=AR202000|AR202000]) Sales Prices (AR202000),   ([~/?ScreenId=AR202010|AR202010]) Sales Price Worksheets (AR202010),   ([~/?ScreenId=AR209500|AR209500]) Discounts (AR209500),   ([~/?ScreenId=AP202000|AP202000]) Vendor Prices (AP202000),   ([~/?ScreenId=AP202010|AP202010]) Vendor Price Worksheets (AP202010), and   ([~/?ScreenId=AP205000|AP205000]) Vendor Discounts (AP205000) forms. These prices and discounts will         be applied to the matrix items related to this template item if specific prices and         discounts have not been not specified for individual matrix items of the template item. Matrix items can be added to sales or purchase orders one by one, as non-matrix items, or         users can add multiple items at a time. On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders         (SO301000) and   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) forms, the            Add Matrix Item  button has been added to the table toolbar on the            Document Details  tab (see the following screenshot). The Add Matrix Item button on the Sales Orders form To add matrix items to a document, either a table view or a matrix view can be used. In the         table view, the user should select a template item and specify the attribute values of the         matrix items that they need to add to the document. In this view, the user can select any         set of available attribute values, even if a matrix item with this set does not exist in the         system (for example, a purchasing manager knows that the vendor sells items with particular         attributes and the manager does not need to create these items in the system specifically).         In the table of the  Add Matrix Item: Table View  dialog box (shown in         the following screenshot), the  New  check box becomes selected for         each new item. The system generates the new items on the fly when the items are being added         to the document. The Add Matrix Item: Table View dialog box In the matrix view (shown in the following screenshot), which is opened when a user clicks         the  Open Matrix View  button in the  Add Matrix Item: Table           View  dialog box, the user can select existing matrix items by entering the         required quantities in the matrix. If the  Display Availability           Details  check box is selected and the user clicks the matrix cell, the         availability information about the matrix item is displayed in the table footer. For adding matrix items to documents, either the table view or matrix         view (but not both views) must be used. If the user selects items in the table view and         switches to the matrix view, the selected items are discarded. The Add Matrix Item: Matrix View dialog box On the  Document Details  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) or   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) form, the user can then review the list         of matrix items added to the sales or purchase order. (The following screenshot displays         this list based on the settings specified in the dialog box in the previous screenshot.) The sales order with the added matrix items Reports and Inquiries for Matrix Items To give users the ability to print invoices or memos, sales orders, and purchase orders that         contain matrix items, the following reports have been implemented:  ([~/?ScreenId=SO643010|SO643010]) Matrix Invoice/Memo (SO643010)  ([~/?ScreenId=SO641020|SO641020]) Matrix Sales Order (SO641020)  ([~/?ScreenId=PO641010|PO641010]) Matrix Purchase Order (PO641010) The   ([~/?ScreenId=IN401500|IN401500]) Matrix Inventory Summary (IN401500) form has also been introduced         (shown in the following screenshot) to give users the ability to view detailed information         about the matrix items available at the warehouse selected on the form. The Matrix Inventory Summary form ]]></column>
		</row>
		<row PageID="7153c939-5e21-4c6a-8fd2-63e0bd2dd8ef" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="568dd59d-fbbb-9ac5-c2d2-a610265c2fbb" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Some companies may need to include tax amounts in the cost of stock items. In Acumatica ERP 2020 R1, a user can now configure taxes so that the applicable tax amounts will be posted to the inventory accounts of the stock or non-stock items being purchased.{br}{TOC}
==Configuration of a Tax for Inclusion in the Items&rsquo; Cost==
To include tax amounts in the costs of items in purchase orders, the following actions must be completed in the system:[anchor|#_ddb0a59a-4b7e-4638-bb69-615e81152c5a]
*A tax reason code of the ''Adjustment'' type must be defined on the [HelpRoot_FormReference\CS_21_10_00|Reason Codes] ([~/?ScreenId=CS211000|CS211000]) form, and specified as the '''Tax Reason Code''' on the [HelpRoot_FormReference\PO_10_10_00|Purchase Orders Preferences] ([~/?ScreenId=PO101000|PO101000]) form.
*In the tax settings, the '''Use Tax Expense Account''' check box must be cleared on the '''GL Accounts''' tab on the [HelpRoot_FormReference\TX_20_50_00|Taxes] ([~/?ScreenId=TX205000|TX205000]) form.

==Inclusion of Tax Amounts in Costs for Stock Items==
For a stock item with the ''Average'', ''Specific'', or ''FIFO'' valuation method, on release of an AP bill prepared for a purchase order that includes the item, an inventory adjustment transaction is automatically generated to post tax amounts to the item&rsquo;s inventory account. The system shows the link to the generated inventory adjustment transaction in the '''Adjustment Nbr.''' box on the '''Financial Details''' tab on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form for the AP bill.{br}

For stock items with the ''Standard'' valuation method, in the GL transaction generated on AP bill release, the tax amount is posted directly to the account defined by the '''Tax Reason Code'''. {br}

If an accounts payable bill is processed for a purchase order before the purchase receipt is created, the tax amounts are posted to the inventory account on release of the purchase receipt.{br}

When the tax amount is posted to item&rsquo;s inventory account, the system generates the following GL transactions:[anchor|#_4c56cf01-38a9-47a7-9378-d043078628bc]
*Inventory Account, Dr, Tax Amount
*PO Accrual account, Cr, Tax Amount
((({S:Warn}For partially deductible VAT taxes, only the expense part is posted on the item&rsquo;s inventory account.
)))
==Taxes in Purchase Returns and on Bill Reversal==
On the reversal of an AP bill for which the inventory adjustment with included taxes has been processed, the system generates a debit adjustment. On release of this debit adjustment, the system also generates a reversing inventory adjustment transaction (that is, an inventory adjustment for which the opposite GL batch is generated).{br}

When a purchase return for taxable stock items with taxes included in items&rsquo; cost is released, the system automatically generates a debit adjustment with the appropriate tax amounts to be posted to the account specified in the tax reason code. The system calculates the tax amounts to be subtracted from items&rsquo; cost on return depending on the state of the '''Process Return with Original Cost''' check box in the purchase return on the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form.
==Inclusion of Tax Amounts in Costs for Non-Stock Items==
For non-stock item with the '''Require Receipt''' check box selected on the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form, the system calculates the taxes and accrues them in the '''COGS/Expense Account''' specified in the purchase receipt line on the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form.{br}

The following GL transactions are generated and posted:[anchor|#_4c6bc25f-ba99-4b0c-b824-d23eb48eadac]
*COGS/Expense Account account, Dr, Tax Amount
*PO Accrual account, Cr, Tax Amount

==Known Limitations==
The following limitations are currently applicable to the inclusion of tax amounts in items’ costs:[anchor|#_8dfc045c-c712-4406-9de5-e015ef807559]
*The inclusion of taxes in items&rsquo; costs is applicable to use taxes, sales taxes of the ''Input'' tax group, and VAT with the '''Partially Deductible VAT''' check box selected on the [HelpRoot_FormReference\TX_20_50_00|Taxes] ([~/?ScreenId=TX205000|TX205000]) form.
*The accrual of tax amounts to inventory accounts is currently not possible for landed cost documents.
]]></column>
			<column name="PlainText"><![CDATA[Inventory and Order Management: Including Tax Amounts in the Cost of Purchased Items Some companies may need to include tax amounts in the cost of stock items. In  Acumatica ERP 2020 R1, a user can now configure taxes so that the applicable tax amounts will be posted to the         inventory accounts of the stock or non-stock items being purchased. Configuration of a Tax for Inclusion in the Items' Cost To include tax amounts in the costs of items in purchase orders, the following actions must         be completed in the system: A tax reason code of the  Adjustment  type must be defined on the   ([~/?ScreenId=CS211000|CS211000]) Reason Codes (CS211000) form, and specified as the              Tax Reason Code  on the   ([~/?ScreenId=PO101000|PO101000]) Purchase Orders Preferences (PO101000) form. In the tax settings, the  Use Tax Expense Account  check box must           be cleared on the  GL Accounts  tab on the   ([~/?ScreenId=TX205000|TX205000]) Taxes (TX205000) form. Inclusion of Tax Amounts in Costs for Stock Items For a stock item with the  Average ,  Specific , or  FIFO  valuation method,         on release of an AP bill prepared for a purchase order that includes the item, an inventory         adjustment transaction is automatically generated to post tax amounts to the item's         inventory account. The system shows the link to the generated inventory adjustment         transaction in the  Adjustment Nbr.  box on the  Financial           Details  tab on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000)         form for the AP bill. For stock items with the  Standard  valuation method, in the GL transaction generated         on AP bill release, the tax amount is posted directly to the account defined by the            Tax Reason Code .  If an accounts payable bill is processed for a purchase order before the purchase receipt         is created, the tax amounts are posted to the inventory account on release of the purchase         receipt. When the tax amount is posted to item's inventory account, the system generates the         following GL transactions: Inventory Account, Dr, Tax Amount PO Accrual account, Cr, Tax Amount For partially deductible VAT taxes, only the expense part is posted on the item's         inventory account. Taxes in Purchase Returns and on Bill Reversal On the reversal of an AP bill for which the inventory adjustment with included taxes has         been processed, the system generates a debit adjustment. On release of this debit         adjustment, the system also generates a reversing inventory adjustment transaction (that is,         an inventory adjustment for which the opposite GL batch is generated). When a purchase return for taxable stock items with taxes included in items' cost is released,         the system automatically generates a debit adjustment with the appropriate tax amounts to be         posted to the account specified in the tax reason code. The system calculates the tax         amounts to be subtracted from items' cost on return depending on the state of the            Process Return with Original Cost  check box in the purchase return         on the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000) form. Inclusion of Tax Amounts in Costs for Non-Stock Items For non-stock item with the  Require Receipt  check box selected on         the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form, the system calculates the         taxes and accrues them in the  COGS/Expense Account  specified in the         purchase receipt line on the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000)         form. The following GL transactions are generated and posted: COGS/Expense Account account, Dr, Tax Amount PO Accrual account, Cr, Tax Amount Known Limitations The following limitations are currently applicable to the inclusion of tax amounts in         items’ costs: The inclusion of taxes in items' costs is applicable to use taxes, sales taxes of the              Input  tax group, and VAT with the  Partially Deductible VAT            check box selected on the   ([~/?ScreenId=TX205000|TX205000]) Taxes (TX205000)           form. The accrual of tax amounts to inventory accounts is currently not possible for landed           cost documents. ]]></column>
		</row>
		<row PageID="3231ec27-a4c5-40b4-98fc-d7d774527fe1" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="7afd1287-26d2-b5ea-6a2a-6cc6b18cf872" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Previous versions of Acumatica ERP provided no ability to make changes to SO invoices that had already been released. SO invoices also could not be canceled. Acumatica ERP 2020 R1 introduces new actions that provide the ability to cancel and to correct existing SO invoices with the ''Open'' or ''Closed'' status.{br}{TOC}
==Cancellation of Invoices==
On the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Cancel Invoice''' action has been added, as shown in the following screenshot.[anchor|#_cd3b9336-625e-4706-8bc5-0cef000c97dc][anchor|#_3514e255-3073-4aaa-b8eb-ef56d633e7bd][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_CancelInvoice.png|popup|The Cancel Invoice action on the Invoices form|450px]
When a user clicks this action, the system creates an SO credit memo on the same form in the full amount of the invoice being canceled (see the following screenshot). In the created credit memo, the user can change the date, posting period, and description, all of which are copied from the original SO invoice. [anchor|#_992bf253-3ddd-4da6-bfbf-fa1a2e88cab4][anchor|#_815e5104-c28a-416b-a2d0-ad27a2e9dfb3][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_CM_Created.png|popup|The created credit memo for the canceled SO invoice|450px]
In the canceled invoice, on the '''Financial Details''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Correction Document''' box shows the reference number of the cancellation credit memo that was prepared for this invoice but have not yet been released. This reference number is a link a user can click to view the cancellation credit memo.{br}

On release of the cancellation credit memo, it is applied to the original invoice automatically; a user cannot apply this credit memo to any other invoice. The canceled SO invoice is assigned the ''Canceled'' status, and the cancellation credit memo is assigned the ''Closed'' status. The system removes the links between the lines of the canceled invoice and the related sales orders and shipments. The related shipments are assigned the ''Confirmed'' status; the user has to create a new invoice for these sales orders and shipments. The inventory issue transactions related to the canceled invoice are not affected by the invoice cancellation; they are still linked to the shipments. {br}

The application of the cancellation credit memo to the SO invoice cannot be reversed on the '''Application History''' tab of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form. If the cancellation credit memo is deleted before it is released, the original invoice is not canceled; it is retained with its previous status (''Open'' or ''Closed'').
==Correction of Invoices==
On the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Correct Invoice''' action has been added, as shown in the following screenshot.[anchor|#_1a3e62a1-eec9-4085-8a47-2e5776a3b91b][anchor|#_873b5cbd-77ec-4813-aa97-e6543f02f7fc][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_CorrectInvoice.png|popup|The Correct Invoice action on the Invoices form|450px]
If a user clicks this action, the system creates a correction invoice on the same form and copies all information from the original invoice to the correction invoice. (See the following screenshot.) In the created correction invoice, the user can correct information in the settings, but cannot add new lines or remove existing lines.[anchor|#_1b8f5611-1849-4acc-a823-ca1ccec665e7][anchor|#_a503ae8b-f9cc-4626-88dc-9300c7d30cbd][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_InvoiceCreated.png|popup|The created correction invoice |450px]
In the correction invoice, on the '''Financial Details''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Original Document''' box shows the reference number of the invoice being corrected. This reference number is a link a user can click to view the original invoice.{br}

On release of the correction invoice, the system automatically generates and releases a credit memo and applies it to the original invoice (see the following screenshot). The original invoice is assigned the ''Canceled'' status; the credit memo is assigned the ''Closed'' status. The correction invoice is assigned the ''Open'' status; in the related sales orders and shipments, the system replaces links to the original invoice with links to the correction invoice.[anchor|#_360c2278-83f4-444f-af60-64ff4786fadd][anchor|#_7c89c604-353b-4422-b6d6-338db8669736][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_CM.png|popup|The credit memo that is applied to the original invoice|450px]
In the original invoice, on the '''Financial Details''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Correction Document''' box shows the reference number of the correction invoice that was created for this invoice (see the following screenshot).This reference number is a link a user can click to view the correction invoice.[anchor|#_a1ad3e63-3c37-405b-ae2e-261c8d0af159][anchor|#_b8aabc3b-b7aa-41a7-a374-902f4d0c2104][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Invoice_Correction_CorrectedInvoice.png|popup|The link to the correction invoice in the original invoice|450px]
==Known Limitations==
Currently, the processes of correcting and canceling SO invoices have the following limitations:[anchor|#_61cb187b-310a-44d3-a50d-4018159eaf71]
*If a payment or credit memo has been applied to an SO invoice, the user must reverse the application before canceling or correcting the invoice.
*It is not possible to cancel or correct SO invoices with multiple-installment credit terms.
*It is not possible to cancel or correct SO invoices related to direct sales (that is, the invoices to which the stock items have been added directly without links to related shipments and sales orders).
*It is not possible to cancel or correct SO invoices that have been prepared for sales orders of the ''IN'' type.
]]></column>
			<column name="PlainText"><![CDATA[Inventory and Order Management: Correction of SO Invoices Previous versions of  Acumatica ERP provided no ability to make changes to SO invoices that had already been released. SO         invoices also could not be canceled.  Acumatica ERP 2020 R1 introduces new actions that provide the ability to cancel and to correct existing SO         invoices with the  Open  or  Closed  status. Cancellation of Invoices On the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the  Cancel           Invoice  action has been added, as shown in the following screenshot. The Cancel Invoice action on the Invoices form When a user clicks this action, the system creates an SO credit memo on the same form in the         full amount of the invoice being canceled (see the following screenshot). In the created         credit memo, the user can change the date, posting period, and description, all of which are         copied from the original SO invoice.  The created credit memo for the canceled SO invoice In the canceled invoice, on the  Financial Details  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the  Correction           Document  box shows the reference number of the cancellation credit memo that         was prepared for this invoice but have not yet been released. This reference number is a         link a user can click to view the cancellation credit memo. On release of the cancellation credit memo, it is applied to the original invoice         automatically; a user cannot apply this credit memo to any other invoice. The canceled SO         invoice is assigned the  Canceled  status, and the cancellation credit memo is assigned         the  Closed  status. The system removes the links between the lines of the canceled         invoice and the related sales orders and shipments. The related shipments are assigned the            Confirmed  status; the user has to create a new invoice for these sales orders and         shipments. The inventory issue transactions related to the canceled invoice are not affected         by the invoice cancellation; they are still linked to the shipments.  The application of the cancellation credit memo to the SO invoice cannot be reversed on the            Application History  tab of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AP302000) form. If the cancellation credit memo is         deleted before it is released, the original invoice is not canceled; it is retained with its         previous status ( Open  or  Closed ). Correction of Invoices On the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the  Correct           Invoice  action has been added, as shown in the following screenshot. The Correct Invoice action on the Invoices form If a user clicks this action, the system creates a correction invoice on the same form and         copies all information from the original invoice to the correction invoice. (See the         following screenshot.) In the created correction invoice, the user can correct information         in the settings, but cannot add new lines or remove existing lines. The created correction invoice  In the correction invoice, on the  Financial Details  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the  Original           Document  box shows the reference number of the invoice being corrected. This         reference number is a link a user can click to view the original invoice. On release of the correction invoice, the system automatically generates and releases a         credit memo and applies it to the original invoice (see the following screenshot). The         original invoice is assigned the  Canceled  status; the credit memo is assigned the            Closed  status. The correction invoice is assigned the  Open  status; in the         related sales orders and shipments, the system replaces links to the original invoice with         links to the correction invoice. The credit memo that is applied to the original invoice In the original invoice, on the  Financial Details  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the  Correction           Document  box shows the reference number of the correction invoice that was         created for this invoice (see the following screenshot).This reference number is a link a         user can click to view the correction invoice. The link to the correction invoice in the original invoice Known Limitations Currently, the processes of correcting and canceling SO invoices have the following         limitations: If a payment or credit memo has been applied to an SO invoice, the user must reverse the           application before canceling or correcting the invoice. It is not possible to cancel or correct SO invoices with multiple-installment credit           terms. It is not possible to cancel or correct SO invoices related to direct sales (that is, the           invoices to which the stock items have been added directly without links to related           shipments and sales orders). It is not possible to cancel or correct SO invoices that have been prepared for sales orders           of the  IN  type. ]]></column>
		</row>
		<row PageID="adcf2a07-f296-4c58-86e4-649bbc07cf18" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="b7991606-55a6-4d41-d5f0-2a7b6ec98d8b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, multiple enhancements to inventory and order management functionality have been introduced.{br}{TOC}
==Credit Hold Functionality Improvements==
The following changes has been made to enhance the functionality related to putting sales documents on credit hold:{br}


*On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) and [HelpRoot_FormReference\SO_30_30_00|Invoices] forms, the '''Credit Hold''' check box has been removed from the Summary area. Instead, the ''Credit Hold'' option has been added to the '''Status''' box in this area.
*On the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, the '''Put on Credit Hold''' menu command has been added to the '''Actions''' menu. This action is available for the documents that have the ''On Hold'', ''Balanced'', or ''Pending Print'' status. When the system places the document on credit hold, it changes the status of the document to ''Credit Hold''.
{br}

For a description of putting AR invoices on hold and releasing them from credit hold, see [HelpRoot_ReleaseNotes\RN_2020_R1_Finance_Release_from_Credit_Hold_for_AR_Invoices|Finance: Release from Credit Hold for AR Invoices].
==Shipping to a Specific Warehouse in Purchase Requests and Purchase Requisitions==
Now users can select the ''Warehouse'' option in the '''Shipping Destination Type''' box on the '''Shipping Instructions''' tab ('''Ship To''' section) of the [HelpRoot_FormReference\RQ_30_10_00|Requests] ([~/?ScreenId=RQ301000|RQ301000]) and [HelpRoot_FormReference\RQ_30_20_00|Requisitions] ([~/?ScreenId=RQ302000|RQ302000]) forms if the items of the particular purchase request or requisition must be shipped to a specific warehouse. If this option is selected as the shipping destination type for a purchase request on the [HelpRoot_FormReference\RQ_30_10_00|Requests] form (as is shown in the following screenshot), the warehouse specified in the same section of the form is copied to the '''Ship To''' section of the '''Shipping Instructions''' tab of the [HelpRoot_FormReference\RQ_30_20_00|Requisitions] form when a user creates a requisition with items from this purchase request.[anchor|#_ca17f59b-7cd9-4d8e-bc3e-c858369ee9c1][anchor|#_09bbb00a-1d16-4b98-bea8-6d6c4bf577c9][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Shipping_Destination_Type_Warehouse1.png|popup|The Shipping Instructions tab of the Requests form|450px]
If the ''Warehouse'' option is selected as the shipping destination type for a purchase requisition on the [HelpRoot_FormReference\RQ_30_20_00|Requisitions] form (as shown in the following screenshot), the warehouse specified in the '''Ship To''' section of the '''Shipping Instructions''' tab is automatically copied to the '''Warehouse''' column on the '''Document Details''' tab of the same form for each new row. When a user creates a purchase order based on this requisition, the warehouse is copied to the '''Ship To''' section of the '''Shipping Instructions''' tab on the [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form.[anchor|#_37e772aa-43a4-4d40-9288-ff83ca382f84][anchor|#_49751bce-e2dc-4edb-8765-617515dd854a][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Shipping_Destination_Type_Warehouse2.png|popup|The Shipping Instructions tab of the Requisitions form|450px]
==Enhanced Specification of UOMs for Carriers==
Multiple changes have been made on the [HelpRoot_FormReference\CS_10_15_00|Companies] ([~/?ScreenId=CS101500|CS101500]), [HelpRoot_FormReference\CS_20_76_00|Boxes] ([~/?ScreenId=CS207600|CS207600]), and [HelpRoot_FormReference\CS_20_77_00|Carriers] ([~/?ScreenId=CS207700|CS207700]) forms to enhance the specification of units of measure (UOMs).{br}

On the [HelpRoot_FormReference\CS_10_15_00|Companies] form, the '''Linear UOM''' box has been added (as shown in the following screenshot). In this box, an administrator can specify the UOM to be used to calculate the linear dimensions of packages that will be used in shipments of the company.[anchor|#_232dc4a9-b2d8-49b5-a529-b9397bb6aef8][anchor|#_dc344fe9-f819-4c5d-b9ea-5986d3c66741][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Carrier_UOMs1.png|popup|The Linear UOM box on the Companies form|450px]
On the [HelpRoot_FormReference\CS_20_76_00|Boxes] form, the '''Linear UOM''' column has been added (as shown in the following screenshot). In all rows of this column, the system inserts the UOM used for the linear dimensions, which it has copied from the '''Linear UOM''' box on the [HelpRoot_FormReference\CS_10_15_00|Companies] form. The UOM is unavailable for editing. This UOM applies to the values specified in the '''Length''', '''Width''', and '''Height''' boxes.[anchor|#_a95798cc-d29b-423f-82be-af3f93c17dd9][anchor|#_f83d1724-9d98-4878-955b-f435e2b8966d][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Carrier_UOMs2.png|popup|The Linear UOM column on the Boxes form|450px]
On the [HelpRoot_FormReference\CS_20_77_00|Carriers] form, the following changes have been made in the Summary area (see the screenshots below):[anchor|#_fcc9f374-5838-456d-a178-ea71cf4bbbb4]
*The '''Carrier Unit of Weight''' box has been renamed to '''Carrier Units'''.
*The options of the '''Carrier Units''' box have been changed as follows:
**''SI Units (Kilogram)'' to ''SI Units (Kilogram/Centimeter)''
** ''US Units (Pound)'' to ''US Units (Pound/Inch)''
*:A user selects the option that reflects the measuring system accepted by the carrier in the operational region of the company that uses Acumatica ERP.
*The '''UOM''' box has been replaced with two boxes whose names depend on the selected option in the '''Carrier Units '''box as follows:
**''SI Units (Kilogram/Centimeter)'': With this carrier unit option selected, the names of the boxes are '''Kilogram''' and '''Centimeter''' (see the following screenshot).[anchor|#_ce940ba8-c348-4472-abc7-b8c7546c6823][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Carrier_UOMs4.png|popup|The Carriers form with the Kilogram and Centimeter boxes displayed|450px]
**''US Units (Pound/Inch)'': With this carrier unit option selected, the names of the boxes are '''Pound''' and '''Inch''' (as shown in the following screenshot).[anchor|#_69441c69-c913-4e2a-a04c-c532bb10101f][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Carrier_UOMs3.png|popup|The Carriers form with the Pound and Inch boxes displayed|450px]
*:In these boxes, the administrator who configures integration with the particular carrier should select the UOMs defined in the system that correspond to these specific UOMs (kilogram, centimeter, pound, or inch). If the UOMs selected on this form differ from the weight and linear UOMs specified on the [HelpRoot_FormReference\CS_10_15_00|Companies] form, conversion rules between these UOMs must be added to the [HelpRoot_FormReference\CS_20_31_00|Units of Measure] form for correct calculation of shipping rates.

==Simplification of the Feature Structure on the Enable/Disable Features form==
On the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the structure of features under the '''Inventory and Order Management''' feature group has been changed: The '''Standard Inventory''' and '''Advanced Inventory''' subgroups have been removed, thus simplifying the structure of these features, as shown in the following screenshot.[anchor|#_c90cc4fd-c7f7-42e4-91c2-64d408a57407][anchor|#_fd895c73-c973-40d7-8cca-0236a9b026dc][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_New_Feature_Structure.png|popup|Enable/Disable Features form|350px]
==Changes to UI Elements==
The following UI elements have been renamed on the inventory and order management forms:[anchor|#_de79779d-6547-4489-9b5c-e85495d9fed1]
*On the '''Location Table''' tab of the [HelpRoot_FormReference\IN_20_40_00|Warehouses] ([~/?ScreenId=IN204000|IN204000]) form, the '''Pick by Locations Pick Priority''' check box has been renamed to '''Use Item Default Location for Picking'''. The logic of the check box has been changed according to the name. When the check box is selected, the system gives the highest priority to the location specified in the '''Default Issue From''' box on the '''General Settings''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]), if this location is specified. If the check box is cleared, the system does not consider the location specified for the item in the '''Default Issue From''' box. 
*:This check box is displayed only if the ''Multiple Warehouse Locations'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form. For details, see [https://help-2019r2.acumatica.com/Help?ScreenId=ShowWiki&pageid=63da932c-897d-4d2c-af04-c40ce3f71891|Warehouse Locations and Single-Step Transfers: General Information].
*On the '''Warehouse Management''' tab of the [HelpRoot_FormReference\IN_10_10_00|Inventory Preferences] ([~/?ScreenId=IN101000|IN101000]) form, the following changes have been made:
**The '''Use Default Auto-Generated Lot/Serial Nbr.''' and '''Use Default Expiration Date''' check boxes have been removed. These settings were not applied to the processing of items tracked by lot or serial number on the [HelpRoot_FormReference\IN_30_20_20|Scan and Issue] ([~/?ScreenId=IN302020|IN302020]), [HelpRoot_FormReference\IN_30_10_20|Scan and Receive] ([~/?ScreenId=IN301020|IN301020]), and [HelpRoot_FormReference\IN_30_40_20|Scan and Transfer] ([~/?ScreenId=IN304020|IN304020]) forms.
**Most of the settings have been grouped by the transaction or document type, as shown in the following screenshot.[anchor|#_57f6cd7c-8117-4eb5-bd8f-bee6e675f017][image:ReleaseNotes/Images/RN_2020_R1_InvMgmt_OtherEnhancements_InventoryPreferences.png|popup|The Warehouse Management tab of the Inventory Preferences form|300px]
*On the '''Storage''' tab of the [HelpRoot_FormReference\IN_40_90_20|Storage Lookup] ([~/?ScreenId=IN409020|IN409020]) form, the '''Description''' column, which contains information about the inventory item displayed in the '''Inventory ID''' column of the row, has been added to the table for users’ convenience. The '''Description''' box is also now displayed now on the corresponding screenin the mobile app.
*On the [HelpRoot_FormReference\PO_10_10_00|Purchase Orders Preferences] ([~/?ScreenId=PO101000|PO101000]) form, the '''Change Currency Rate on Receipt''' check box has been renamed to '''Allow Changing Currency Rate on Receipt'''.
*On the [HelpRoot_FormReference\PO_10_10_00|Purchase Orders Preferences] and [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) forms, the '''Return by Original Receipt Cost''' check box has been renamed to '''Process Return with Original Cost'''.
*On the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]), [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]), [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) and [HelpRoot_FormReference\AR_50_10_00|Release AR Documents] ([~/?ScreenId=AR501000|AR501000]) forms, the '''Customer Order''' box has been renamed to '''Customer Order Nbr.'''

Also, the following elements have been added to the order management forms:[anchor|#_9c8c7e26-a575-4b7c-9f40-200c335c3eb9]
*If the ''Multi-Currency Accounting'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the new '''Use Currency Rate from Sales Order''' check box is now available on the '''General Settings''' tab of the [HelpRoot_FormReference\SO_20_10_00|Order Types] ([~/?ScreenId=SO201000|SO201000]) form. If this check box is selected, the system copies the currency rate from sales orders of this type to the invoice created for this sales order. If the check box is cleared, in invoices prepared for the sales orders of this type, the system inserts the currency rate of the rate type that is specified in the sales order and is effective on the invoice date.
*On the [HelpRoot_FormReference\CS_20_40_00|Countries/States] ([~/?ScreenId=CS204000|CS204000]) form, the new '''Override Address Automatically''' check box has been added. If this check box is selected for a particular country, when a user validates addresses of this country on any Acumatica ERP form via the Avalara address validation functionality, the system will automatically replace the incorrect address or postal code (or both) with the correct address data returned by Avalara and mark the address as validated. 
*:If the check box is cleared on this form for a particular country and a user validates addresses of this country on an applicable form, the system will not replace the incorrect values; it will, however, show a warning with the correct address and postal code.
*The '''Entity Usage Type''' column has been added on the '''Document Details''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos], [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]), and [HelpRoot_FormReference\SO_30_30_00|Invoices] forms. In each line, the value in this column specifies the entity usage type of the customer location if sales to this location are tax-exempt. By default, in a newly added line, the system copies the document-level entity usage type that is specified on the '''Financial Settings''' tab of the respective form.
]]></column>
			<column name="PlainText"><![CDATA[Inventory and Order Management: Other Enhancements In  Acumatica ERP 2020 R1, multiple enhancements to inventory and order management functionality have been         introduced. Credit Hold Functionality Improvements The following changes has been made to enhance the functionality related to putting sales         documents on credit hold: On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) and   ([~/?ScreenId=SO303000|SO303000]) Invoices forms, the  Credit Hold              check box has been removed from the Summary area. Instead, the  Credit Hold  option             has been added to the  Status  box in this area. On the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, the                Put on Credit Hold  menu command has been added to the                Actions  menu. This action is available for the documents that             have the  On Hold ,  Balanced , or  Pending Print  status. When the             system places the document on credit hold, it changes the status of the document to                Credit Hold . For a description of putting AR invoices on hold and releasing them from credit hold, see            Finance: Release from Credit Hold for AR Invoices. Shipping to a Specific Warehouse in Purchase Requests and Purchase Requisitions Now users can select the  Warehouse  option in the  Shipping Destination           Type  box on the  Shipping Instructions  tab           ( Ship To  section) of the   ([~/?ScreenId=RQ301000|RQ301000]) Requests (RQ301000) and   ([~/?ScreenId=RQ302000|RQ302000]) Requisitions (RQ302000) forms if the items         of the particular purchase request or requisition must be shipped to a specific warehouse.         If this option is selected as the shipping destination type for a purchase request on the             ([~/?ScreenId=RQ301000|RQ301000]) Requests form (as is shown in the following         screenshot), the warehouse specified in the same section of the form is copied to the            Ship To  section of the  Shipping Instructions          tab of the   ([~/?ScreenId=RQ302000|RQ302000]) Requisitions form when a user creates a         requisition with items from this purchase request. The Shipping Instructions tab of the Requests form If the  Warehouse  option is selected as the shipping destination type for a purchase         requisition on the   ([~/?ScreenId=RQ302000|RQ302000]) Requisitions form (as shown in the         following screenshot), the warehouse specified in the  Ship To  section         of the  Shipping Instructions  tab is automatically copied to the            Warehouse  column on the  Document Details  tab         of the same form for each new row. When a user creates a purchase order based on this         requisition, the warehouse is copied to the  Ship To  section of the            Shipping Instructions  tab on the   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) form. The Shipping Instructions tab of the Requisitions form Enhanced Specification of UOMs for Carriers Multiple changes have been made on the   ([~/?ScreenId=CS101500|CS101500]) Companies         (CS101500),   ([~/?ScreenId=CS207600|CS207600]) Boxes (CS207600), and   ([~/?ScreenId=CS207700|CS207700]) Carriers (CS207700) forms to enhance the specification of         units of measure (UOMs). On the   ([~/?ScreenId=CS101500|CS101500]) Companies form, the  Linear           UOM  box has been added (as shown in the following screenshot). In this box, an         administrator can specify the UOM to be used to calculate the linear dimensions of packages         that will be used in shipments of the company. The Linear UOM box on the Companies form On the   ([~/?ScreenId=CS207600|CS207600]) Boxes form, the  Linear           UOM  column has been added (as shown in the following screenshot). In all rows         of this column, the system inserts the UOM used for the linear dimensions, which it has         copied from the  Linear UOM  box on the   ([~/?ScreenId=CS101500|CS101500]) Companies form. The UOM is unavailable for editing. This UOM         applies to the values specified in the  Length ,            Width , and  Height  boxes. The Linear UOM column on the Boxes form On the   ([~/?ScreenId=CS207700|CS207700]) Carriers form, the following changes have been         made in the Summary area (see the screenshots below): The  Carrier Unit of Weight  box has been renamed to              Carrier Units . The options of the  Carrier Units  box have been changed as             follows: SI Units (Kilogram)  to  SI Units (Kilogram/Centimeter) US Units (Pound)  to  US Units (Pound/Inch) A user selects the option that reflects the measuring system accepted by the             carrier in the operational region of the company that uses  Acumatica ERP. The  UOM  box has been replaced with two boxes whose names depend           on the selected option in the  Carrier Units  box as follows: SI Units (Kilogram/Centimeter) : With this carrier unit option selected, the               names of the boxes are  Kilogram  and                  Centimeter  (see the following screenshot). The Carriers form with the Kilogram and Centimeter boxes displayed US Units (Pound/Inch) : With this carrier unit option selected, the names of               the boxes are  Pound  and  Inch  (as shown               in the following screenshot). The Carriers form with the Pound and Inch boxes displayed In these boxes, the administrator who configures integration with the particular             carrier should select the UOMs defined in the system that correspond to these specific             UOMs (kilogram, centimeter, pound, or inch). If the UOMs selected on this form differ             from the weight and linear UOMs specified on the   ([~/?ScreenId=CS101500|CS101500]) Companies form, conversion rules between these UOMs must             be added to the   ([~/?ScreenId=CS203100|CS203100]) Units of Measure form for correct             calculation of shipping rates. Simplification of the Feature Structure on the Enable/Disable Features form On the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the structure of         features under the  Inventory and Order Management  feature group has         been changed: The  Standard Inventory  and  Advanced           Inventory  subgroups have been removed, thus simplifying the structure of these         features, as shown in the following screenshot. Enable/Disable Features form Changes to UI Elements The following UI elements have been renamed on the inventory and order management         forms: On the  Location Table  tab of the   ([~/?ScreenId=IN204000|IN204000]) Warehouses (IN204000) form, the  Pick by Locations             Pick Priority  check box has been renamed to  Use Item Default             Location for Picking . The logic of the check box has been changed according           to the name. When the check box is selected, the system gives the highest priority to the           location specified in the  Default Issue From  box on the              General Settings  tab of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500), if this location is specified. If the           check box is cleared, the system does not consider the location specified for the item in           the  Default Issue From  box.  This check box is displayed only if             the  Multiple Warehouse Locations  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. For details, see  Warehouse Locations and Single-Step Transfers: General               Information Warehouse Locations and Single-Step Transfers: General Information. On the  Warehouse Management  tab of the   ([~/?ScreenId=IN101000|IN101000]) Inventory Preferences (IN101000) form, the following changes have been             made: The  Use Default Auto-Generated Lot/Serial Nbr.  and                  Use Default Expiration Date  check boxes have been removed.               These settings were not applied to the processing of items tracked by lot or serial               number on the   ([~/?ScreenId=IN302020|IN302020]) Scan and Issue (IN302020),   ([~/?ScreenId=IN301020|IN301020]) Scan and Receive (IN301020), and   ([~/?ScreenId=IN304020|IN304020]) Scan and Transfer (IN304020) forms. Most of the settings have been grouped by the transaction or document type, as shown               in the following screenshot. The Warehouse Management tab of the Inventory Preferences form On the  Storage  tab of the   ([~/?ScreenId=IN409020|IN409020]) Storage Lookup (IN409020) form, the              Description  column, which contains information about the           inventory item displayed in the  Inventory ID  column of the row, has           been added to the table for users’ convenience. The  Description  box           is also now displayed now on the corresponding screenin the mobile app. On the   ([~/?ScreenId=PO101000|PO101000]) Purchase Orders Preferences (PO101000) form, the              Change Currency Rate on Receipt  check box has been renamed to              Allow Changing Currency Rate on Receipt . On the   ([~/?ScreenId=PO101000|PO101000]) Purchase Orders Preferences and   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000) forms, the  Return by             Original Receipt Cost  check box has been renamed to  Process             Return with Original Cost . On the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000),   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000),   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) and   ([~/?ScreenId=AR501000|AR501000]) Release AR Documents (AR501000) forms, the  Customer             Order  box has been renamed to  Customer Order           Nbr. Also, the following elements have been added to the order management forms: If the  Multi-Currency Accounting  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the new  Use Currency             Rate from Sales Order  check box is now available on the  General             Settings  tab of the   ([~/?ScreenId=SO201000|SO201000]) Order Types (SO201000)           form. If this check box is selected, the system copies the currency rate from sales orders           of this type to the invoice created for this sales order. If the check box is cleared, in           invoices prepared for the sales orders of this type, the system inserts the currency rate           of the rate type that is specified in the sales order and is effective on the invoice           date. On the   ([~/?ScreenId=CS204000|CS204000]) Countries/States (CS204000) form, the new              Override Address Automatically  check box has been added. If this           check box is selected for a particular country, when a user validates addresses of this           country on any  Acumatica ERP form via the Avalara address validation functionality, the system will automatically           replace the incorrect address or postal code (or both) with the correct address data           returned by Avalara and mark the address as validated.  If the check box is cleared on             this form for a particular country and a user validates addresses of this country on an             applicable form, the system will not replace the incorrect values; it will, however,             show a warning with the correct address and postal code. The  Entity Usage Type  column has been added on the              Document Details  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos,   ([~/?ScreenId=SO301000|SO301000]) Sales Orders           (SO301000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices forms. In each line, the           value in this column specifies the entity usage type of the customer location if sales to           this location are tax-exempt. By default, in a newly added line, the system copies the           document-level entity usage type that is specified on the  Financial             Settings  tab of the respective form. ]]></column>
		</row>
		<row PageID="3cbdcaa4-fe8e-4b9b-b9ec-a0c16da22d2d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f1f109de-cef6-09b0-e680-5d3f41e298dd" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Companies with large warehouses can significantly increase the efficiency of their warehouse operations by using advanced methods of picking items for shipping, such as wave picking and batch picking workflows. Acumatica ERP 2020 R1 introduces the ability to process shipments in a wave and in a batch. Using advanced workflows reduces the time needed for picking items for shipments and optimizes each picker&rsquo;s path through the warehouse.{br}

When the ''Advanced Picking'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, users can prepare picking worksheets that include multiple shipments to be processed in waves or in batches. {br}{TOC}
==User Interface Changes==
The following new forms and UI elements have been introduced to support this functionality:[anchor|#_5c8d2a73-e5c7-48a1-93e6-2df072072abd]
*The new '''Path''' column has been added on the '''Locations''' tab of the [HelpRoot_FormReference\IN_20_40_00|Warehouses] ([~/?ScreenId=IN204000|IN204000]) form (see the following screenshot). The value of this column indicates the position of each location in the warehouse. By specifying the location path for all locations in the warehouse, a user creates a linear map of the warehouse and defines the optimal path through the warehouse. The system uses this map to calculate the best path for each picker to use when picking items.[anchor|#_5392e64c-b331-4e82-b667-8d7269ece362][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_LocationPath.png|popup|Path specified for warehouse locations|450px]
*:Also, on the same form, the new '''Totes''' tab has been added, as shown in the following screenshot. This tab lists the totes that are available in the warehouse; the totes are used for wave picking of shipments.[anchor|#_ea4e3466-3541-47fd-9037-79cba304a72e][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Totes.png|popup|Totes defined for a warehouse|450px]
*The [HelpRoot_FormReference\SO_50_30_50|Create and Print Pick Lists] ([~/?ScreenId=SO503050|SO503050]) form has been added. On this form, a user can select the shipments to be processed in a batch or in a wave, and prepare a picking worksheet (see the following screenshot). When creating a worksheet, the user specifies the maximum number of pickers who are currently available to work with the wave or batch. Depending on the specified number of pickers, the system will automatically group shipments and items, calculate the best path for each picker, and split the wave or batch worksheet into separate pick lists for the included pickers.[anchor|#_2fcc1e06-055a-4ab4-bcf3-c9b9499049c6][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Create_Worksheet.png|popup|Creation of a picking worksheet|450px]
*On the new [HelpRoot_FormReference\SO_30_25_00|Picking Worksheets] ([~/?ScreenId=SO302500|SO302500]) form, a user can review the details of the prepared picking worksheet (see the screenshot below), which was created on the [HelpRoot_FormReference\SO_50_30_50|Create and Print Pick Lists] ([~/?ScreenId=SO503050|SO503050]) form. A picking worksheet for wave picking has the ''Wave'' type; a picking worksheet for batch picking has the ''Batch'' type.[anchor|#_793e3847-9e07-455d-acc3-ef7b5fb47cb3][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Worksheet.png|popup|Picking worksheet of the Wave type|450px]
*By using the new [HelpRoot_ReportReference\SO_64_40_06|Worksheet Pick List] ([~/?ScreenId=SO644006|SO644006]), [HelpRoot_ReportReference\SO_64_40_05|Batch Packing Slip] ([~/?ScreenId=SO644005|SO644005]), and [HelpRoot_ReportReference\SO_64_40_07|Wave Packing Slip] ([~/?ScreenId=SO644007|SO644007]) report forms, a user can create and print worksheet pick lists and packing slips.
*:Each wave or batch pick list is split for multiple pickers, so the number of the pick list for each picker ('''Pick List Nbr.''' on the reports) is specified in the ''Worksheet Nbr./Picker Nbr.'' format. For example, on the [HelpRoot_ReportReference\SO_64_40_06|Worksheet Pick List] report, the pick list numbers of ''000001/1'' and ''000001/2'' mean that the wave or batch will be picked by two pickers; the warehouse manager gives a part of the printed pick list to each picker.[anchor|#_ca311e24-0ff4-48aa-b8d5-f1e03a886bff][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Pick_List.png|popup|The ready-to-print Worksheet Pick List report|450px]

==Wave Picking of Shipments==
Wave picking is a workflow in which the system aggregates multiple shipments to a wave worksheet document, calculates the best path of picking for each picker, and split the shipments between multiple pickers accordingly. A picker receives a part of a wave pick list and starts picking the items in Pick mode on the [HelpRoot_FormReference\SO_30_20_20|Pick, Pack, and Ship] ([~/?ScreenId=SO302020|SO302020]) form, as shown in the following screenshot. To start picking items from a wave, the picker scans the pick list barcode and assigns an individual tote to each shipment included in the pick list. [anchor|#_fe6bb01f-2805-4430-a82d-c2adc84711a8][anchor|#_124269a7-ce63-4113-a711-b088e10313de][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_AssignTotes.png|popup|Totes assigned to shipments|450px]
When a picker picks an item from the warehouse location, the system guides the picker to put the item in the particular tote that is assigned to the shipment for which this item is being picked. The system then reflects which item has been added to which tote, as shown in the following screenshot. As a result, the picker simultaneously fulfills multiple shipments in one pass through the warehouse. [anchor|#_598e3208-26ce-4d68-84f1-51a35fe73571][anchor|#_9f913e30-8db4-4de6-af85-43623061b7b8][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Wave.png|popup|Wave picking in progress|450px]
When the picker finishes picking the items for a pick list, he or she confirms the picking of the shipments. After the shipment is confirmed as picked, it can be processed further by a packer in Pack mode on the [HelpRoot_FormReference\SO_30_20_20|Pick, Pack, and Ship] form. The packer scans the tote or the packing slip barcode, packs the items from the tote to the box, and makes sure that all items for the shipments are packed as specified in the packing slip. After the items are packed, the packer confirms each shipment.
==Batch Picking of Shipments ==
Batch picking is a workflow in which items of multiple shipments aggregated to a batch are split among multiple pickers to provide the optimal path for each picker. A picker receives a part of a batch pick list that includes items from different orders, goes through the warehouse, and picks the goods from the pick list in Pick mode on the [HelpRoot_FormReference\SO_30_20_20|Pick, Pack, and Ship] ([~/?ScreenId=SO302020|SO302020]) form. (See the following screenshot.) [anchor|#_aefcd1b0-70b0-44f4-be36-ee5df734d540][anchor|#_ed9dcbd6-a4c6-4b60-83e3-fc507d1d04e4][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Batch.png|popup|Batch picking in progress|450px]
To start picking items from a batch, the picker scans the pick list barcode and then picks the items using the standard picking workflow. When the picker finishes with picking items, he or she scans the sort location to which these items will be transferred, and confirms the picking of the pick list. The system automatically creates an inventory transfer to record the movement of goods to the sort location, and changes the original location in the shipment lines included in the batch to the sort location. {br}

A packer receives a packing slip for the shipments, picks goods from the sort location, sorts the picked items by shipments, and packs them into boxes. When the packer finishes the packaging of a particular shipment, he or she confirms it.
==Carts in Wave Picking==
If the '''Cart Tracking''' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, a user can assign totes to carts on the [HelpRoot_FormReference\IN_20_40_00|Warehouses] ([~/?ScreenId=IN204000|IN204000]) form (see the following screenshot, which shows some of the totes of the ''WHOLESALE'' warehouse assigned to the ''CART02'' cart).[anchor|#_492bd82b-3b18-4994-97b6-7ddc653c12ed][anchor|#_9b5a97d6-6b49-4005-ae1b-fd57732e3520][image:ReleaseNotes/Images/RN_2020_R1_OrderMgmt_Wave_Batch_Picking_Carts.png|popup|Totes assigned to a cart|450px]
With these settings specified, when a picker starts to pick a wave in the warehouse, instead of scanning totes one by one, the picker can scan the barcode of the ''CART02'' cart, so that the system will automatically assign the totes of this cart to the shipments being picked.
==Default Warehouse Operations for a User==
To provide a user with the ability to specify the default mode in which this user typically performs automated warehouse operations, on the '''General Info''' tab of the [HelpRoot_GettingStarted\SM_20_30_10|User Profile] ([~/?ScreenId=SM203010|SM203010]) form, the following UI elements have been added:[anchor|#_e932d96a-ce88-4484-bb0f-baf296b4398d]
*'''Pick, Pack, and Ship''' box: In this box, the user can specify the mode to be opened by default on the [HelpRoot_FormReference\SO_30_20_20|Pick, Pack, and Ship] ([~/?ScreenId=SO302020|SO302020]) form.
*'''Receive and Put Away''' box: In this box, the user can specify the mode to be opened by default on the [HelpRoot_FormReference\PO_30_20_20|Receive and Put Away] ([~/?ScreenId=PO302020|PO302020]) form: ''Receive'', ''Put Away'', or ''None''.
]]></column>
			<column name="PlainText"><![CDATA[Automated Warehouse Operations: Advanced Picking Workflows Companies with large warehouses can significantly increase the efficiency of their         warehouse operations by using advanced methods of picking items for shipping, such as wave         picking and batch picking workflows.  Acumatica ERP 2020 R1 introduces the ability to process shipments in a wave and in a batch. Using advanced         workflows reduces the time needed for picking items for shipments and optimizes each         picker's path through the warehouse. When the  Advanced Picking  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, users can prepare picking         worksheets that include multiple shipments to be processed in waves or in batches.  User Interface Changes The following new forms and UI elements have been introduced to support this         functionality: The new  Path  column has been added on the              Locations  tab of the   ([~/?ScreenId=IN204000|IN204000]) Warehouses(IN204000) form (see the following screenshot). The value of this column indicates the           position of each location in the warehouse. By specifying the location path for all           locations in the warehouse, a user creates a linear map of the warehouse and defines the           optimal path through the warehouse. The system uses this map to calculate the best path           for each picker to use when picking items. Path specified for warehouse locations Also, on the same form, the new  Totes  tab has been added,             as shown in the following screenshot. This tab lists the totes that are available in the             warehouse; the totes are used for wave picking of shipments. Totes defined for a warehouse The   ([~/?ScreenId=SO503050|SO503050]) Create and Print Pick Lists (SO503050) form has been added. On this           form, a user can select the shipments to be processed in a batch or in a wave, and prepare           a picking worksheet (see the following screenshot). When creating a worksheet, the user           specifies the maximum number of pickers who are currently available to work with the wave           or batch. Depending on the specified number of pickers, the system will automatically           group shipments and items, calculate the best path for each picker, and split the wave or           batch worksheet into separate pick lists for the included pickers. Creation of a picking worksheet On the new   ([~/?ScreenId=SO302500|SO302500]) Picking Worksheets (SO302050) form, a user can           review the details of the prepared picking worksheet (see the screenshot below), which was           created on the   ([~/?ScreenId=SO503050|SO503050]) Create and Print Pick Lists (SO503050) form. A picking           worksheet for wave picking has the  Wave  type; a picking worksheet for batch picking           has the  Batch  type. Picking worksheet of the Wave type By using the new   ([~/?ScreenId=SO644006|SO644006]) Worksheet Pick List (SO644006),   ([~/?ScreenId=SO644005|SO644005]) Batch Packing Slip (SO644005), and   ([~/?ScreenId=SO644007|SO644007]) Wave Packing Slip (SO644007) report forms, a user can create and           print worksheet pick lists and packing slips. Each wave or batch pick list is split for             multiple pickers, so the number of the pick list for each picker ( Pick List               Nbr.  on the reports) is specified in the  Worksheet Nbr./Picker Nbr.              format. For example, on the   ([~/?ScreenId=SO644006|SO644006]) Worksheet Pick List report, the             pick list numbers of  000001/1  and  000001/2  mean that the wave or batch             will be picked by two pickers; the warehouse manager gives a part of the printed pick             list to each picker. The ready-to-print Worksheet Pick List report Wave Picking of Shipments Wave picking is a workflow in which the system aggregates multiple shipments to a wave         worksheet document, calculates the best path of picking for each picker, and split the         shipments between multiple pickers accordingly. A picker receives a part of a wave pick list         and starts picking the items in Pick mode on the   ([~/?ScreenId=SO302020|SO302020]) Pick, Pack, and Ship (SO302020) form, as shown in the following screenshot. To start picking items from a         wave, the picker scans the pick list barcode and assigns an individual tote to each shipment         included in the pick list.  Totes assigned to shipments When a picker picks an item from the warehouse location, the system guides the picker to         put the item in the particular tote that is assigned to the shipment for which this item is         being picked. The system then reflects which item has been added to which tote, as shown in         the following screenshot. As a result, the picker simultaneously fulfills multiple shipments         in one pass through the warehouse.  Wave picking in progress When the picker finishes picking the items for a pick list, he or she confirms the picking         of the shipments. After the shipment is confirmed as picked, it can be processed further by         a packer in Pack mode on the   ([~/?ScreenId=SO302020|SO302020]) Pick, Pack, and Ship form. The packer         scans the tote or the packing slip barcode, packs the items from the tote to the box, and         makes sure that all items for the shipments are packed as specified in the packing slip.         After the items are packed, the packer confirms each shipment. Batch Picking of Shipments  Batch picking is a workflow in which items of multiple shipments aggregated to a batch are         split among multiple pickers to provide the optimal path for each picker. A picker receives         a part of a batch pick list that includes items from different orders, goes through the         warehouse, and picks the goods from the pick list in Pick mode on the   ([~/?ScreenId=SO302020|SO302020]) Pick, Pack, and Ship (SO302020) form. (See the following screenshot.)  Batch picking in progress To start picking items from a batch, the picker scans the pick list barcode and then picks         the items using the standard picking workflow. When the picker finishes with picking items,         he or she scans the sort location to which these items will be transferred, and confirms the         picking of the pick list. The system automatically creates an inventory transfer to record         the movement of goods to the sort location, and changes the original location in the         shipment lines included in the batch to the sort location.  A packer receives a packing slip for the shipments, picks goods from the sort location,         sorts the picked items by shipments, and packs them into boxes. When the packer finishes the         packaging of a particular shipment, he or she confirms it. Carts in Wave Picking If the  Cart Tracking  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, a user can assign totes to carts         on the   ([~/?ScreenId=IN204000|IN204000]) Warehouses (IN204000) form (see the following         screenshot, which shows some of the totes of the  WHOLESALE  warehouse assigned to the            CART02  cart). Totes assigned to a cart With these settings specified, when a picker starts to pick a wave in the warehouse,         instead of scanning totes one by one, the picker can scan the barcode of the  CART02          cart, so that the system will automatically assign the totes of this cart to the shipments         being picked. Default Warehouse Operations for a User To provide a user with the ability to specify the default mode in which this user typically         performs automated warehouse operations, on the  General Info  tab of         the   ([~/?ScreenId=SM203010|SM203010]) User Profile (SM203010) form, the following UI elements         have been added: Pick, Pack, and Ship  box: In this box, the user can specify the           mode to be opened by default on the   ([~/?ScreenId=SO302020|SO302020]) Pick, Pack, and Ship           (SO302020) form. Receive and Put Away  box: In this box, the user can specify the           mode to be opened by default on the   ([~/?ScreenId=PO302020|PO302020]) Receive and Put Away           (PO302020) form:  Receive ,  Put Away , or  None . ]]></column>
		</row>
		<row PageID="820a37ff-569a-4ee5-9497-ea9f1e1d709f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2e452386-4527-2acc-0c0d-f487e5264327" RecordSourceID="22377">
			<column name="Content"><![CDATA[
With Acumatica ERP, users can import files to the system and attach them to records, record details, documents, notification templates, and wiki articles. Starting in Acumatica ERP 2020 R1, users can use the Acumatica ERP web interface to initiate the capturing and upload of images with a registered mobile device.{br}{TOC}
==Registering a Mobile Device==
To be able to capture images with a mobile device and upload them to Acumatica ERP, a user should register the device first. To do this, the user should enable push notifications for the Acumatica ERP mobile app and sign in to the system at least once. After that, the user signs in to the Acumatica ERP web interface and can view the mobile device on the '''Devices''' tab of the [HelpRoot_GettingStarted\SM_20_30_10|User Profile] ([~/?ScreenId=SM203010|SM203010]) form. A user may have multiple registered mobile devices, as shown in the following screenshot.[anchor|#_cd789871-ffa1-45b6-b386-40054b478979][anchor|#_02bdfebc-676e-4cfb-9cb7-6c0a71fc75f5][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Registered_Devices.png|popup|Registered mobile devices of the currently logged in user|350px]
An administrator of the system can review the registered mobile devices of the users on the [HelpRoot_FormReference\SM_20_10_10|Users] ([~/?ScreenId=SM201010|SM201010]) form.
==Initiating Image Capturing and Upload==
In Acumatica ERP, the '''Files''' dialog box is usually used to import files and attach them to a record. {br}

To initiate the capturing of images with a mobile device, in Acumatica ERP, a user clicks '''Upload Using Mobile App''' on the table toolbar of the '''Files''' dialog box, as shown in the following screenshot.[anchor|#_38090333-b199-4c2b-8ad3-30749dd33899][anchor|#_209154b4-006d-46e0-9242-84f09585d674][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Capture_Upload_Images.png|popup|The Upload Using Mobile App button|350px]
When the user invokes this action, the system sends a push notification to the registered mobile device, as shown in the following screenshot.[anchor|#_5482eb31-9c79-4a79-9e2d-da0d8f6bf166][anchor|#_33d92e40-6d66-4dca-bb89-b7e0f05bed78][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Capture_PushNotification.png|popup|Push notification sent to the mobile device|150px]
The user taps the notification, and the system opens the '''Attachments''' screen on the mobile device (see the screenshot below). By using this screen, the user can take photos ('''Take Photo''') or attach files ('''Add File'''). [anchor|#_b86d886b-2bfd-4095-9a1c-414df7c82bde][anchor|#_801a118f-9123-44c1-bcf5-6e6d80e0a2c6][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Capture_Attachment.png|popup|The Attachments mobile screen|150px]
The system uploads the selected files to the system immediately. The user can view the list of uploaded files in the '''Files''' dialog box for the applicable Acumatica ERP form and record, as shown on the following screenshot.[anchor|#_4a789c52-d8f1-452b-8522-fd59c6f37215][anchor|#_eba417ba-bbeb-46a2-982b-8367a1b00c57][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Capture_FilesUploaded.png|popup|Uploaded files in the Files dialog box|350px]
A user can manage the list of uploaded files directly from the '''Attachments''' mobile screen by clicking the '''Edit''' button and removing unnecessary images from the list. After managing files on the mobile device, the user should refresh the list of uploaded files in the '''Files''' dialog box.]]></column>
			<column name="PlainText"><![CDATA[Mobile: Upload Images by Using a Mobile Device With  Acumatica ERP, users can import files to the system and attach them to records, record details,         documents, notification templates, and wiki articles. Starting in  Acumatica ERP 2020 R1, users can use the  Acumatica ERP web interface to initiate the capturing and upload of images with a registered mobile         device. Registering a Mobile Device To be able to capture images with a mobile device and upload them to  Acumatica ERP, a user should register the device first. To do this, the user should enable push         notifications for the  Acumatica ERP mobile app and sign in to the system at least once. After that, the user signs in to the            Acumatica ERP web interface and can view the mobile device on the  Devices  tab of         the   ([~/?ScreenId=SM203010|SM203010]) User Profile (SM203010) form. A user may have multiple         registered mobile devices, as shown in the following screenshot. Registered mobile devices of the currently logged in user An administrator of the system can review the registered mobile devices of the users on the             ([~/?ScreenId=SM201010|SM201010]) Users (SM201010) form. Initiating Image Capturing and Upload In  Acumatica ERP, the  Files  dialog box is usually used to import files and attach         them to a record.  To initiate the capturing of images with a mobile device, in  Acumatica ERP, a user clicks  Upload Using Mobile App  on the table toolbar of the            Files  dialog box, as shown in the following screenshot. The Upload Using Mobile App button When the user invokes this action, the system sends a push notification to the registered         mobile device, as shown in the following screenshot. Push notification sent to the mobile device The user taps the notification, and the system opens the  Attachments          screen on the mobile device (see the screenshot below). By using this screen, the user can         take photos ( Take Photo ) or attach files ( Add           File ).  The Attachments mobile screen The system uploads the selected files to the system immediately. The user can view the list         of uploaded files in the  Files  dialog box for the applicable  Acumatica ERP form and record, as shown on the following screenshot. Uploaded files in the Files dialog box A user can manage the list of uploaded files directly from the            Attachments  mobile screen by clicking the            Edit  button and removing unnecessary images from the list. After         managing files on the mobile device, the user should refresh the list of uploaded files in         the  Files  dialog box. ]]></column>
		</row>
		<row PageID="3f66e0a4-e9bd-4328-aa29-6f309ae1eace" Language="en-US" PageRevisionID="1" PlainText="Mobile: Deleting Attachments Starting in  Acumatica ERP 2020 R1, users can delete attached files by using the mobile application. To access the attachments to a record in the mobile application, a user clicks            Files  in the bottom left of the screen, as shown in the screenshot         below. Accessing the attachments of a record After the user clicks  Files , the system opens the            Attachments  screen, where a user can click            Edit  and then select the attachments to be deleted. To delete the         selected attachments, the user clicks  Delete . The following         screenshot demonstrates the selected attachment. Selecting an attachment to delete " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="72b669c0-bb2a-3473-5ca7-ccb373d468e2" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R1, users can delete attached files by using the mobile application.{br}

To access the attachments to a record in the mobile application, a user clicks '''Files''' in the bottom left of the screen, as shown in the screenshot below.[anchor|#_0dc4e389-40c3-45b7-b01c-2e825caa967e][anchor|#_6732de45-12b7-4e74-be34-64316a6050d7][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Manage_Attachements_Files.png|popup|Accessing the attachments of a record|150px]
After the user clicks '''Files''', the system opens the '''Attachments''' screen, where a user can click '''Edit''' and then select the attachments to be deleted. To delete the selected attachments, the user clicks '''Delete'''. The following screenshot demonstrates the selected attachment.[anchor|#_5ea0f8da-f052-4b6a-a77d-b537417fb029][anchor|#_e21d48a8-c0ed-4487-a8e6-9812b3d7133f][image:ReleaseNotes/Images/RN_2020_R1_Mobile_Manage_Attachements_Editing.png|popup|Selecting an attachment to delete|150px]{br}{TOC}]]></column>
		</row>
		<row PageID="dfa758d8-40c4-44e9-8a05-8d4458073204" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4d4d1a53-68c5-72db-650d-465ed78b5c5c" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, users can now scan expense receipts to simplify the process of creating records on the ''Expense Receipts'' screen. When a user takes a photo of a receipt from this screen, the system analyzes the photo, recognizes values on the photo, and maps them to fields on the ''Expense Receipts'' screen. If the system maps any of the fields to values in the photo incorrectly, the user can correct the mapping.{br}

For users to be able to use this functionality, both of the following conditions must be met:[anchor|#_b2507e3c-0fb6-4162-81a0-4200d6f955b2]
*A license that includes the ''Image Recognition Service'' feature and service keys has been obtained from Acumatica and applied in the system.
*The ''Image Recognition Service'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.

If a license that does not meet these conditions is applied or the ''Image Recognition Service'' feature is not enabled, users can still create an expense receipt from a photo. However, in this case, the recognition process is not performed, and the elements of the created expense receipt contain empty or default values instead of recognized and mapped values.{br}{TOC}
==Scanning an Expense Receipt==
To scan an expense receipt, a user should do the following:[anchor|#_76b6cd26-3cf5-4dce-9c76-2acf9504e453]
#Sign in to Acumatica mobile app.
#On the main menu, open the ''Expense Receipts'' screen.
#At the bottom right corner of the screen, tap '''+''' > '''Take Photo''', as shown in the following screenshot.[anchor|#_2848dea2-62bb-4ce0-94e6-6ff460e243d8][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_TakePhoto.png|popup|Tapping Take Photo|150px]
#:((({S:Warn}If the user taps '''+''' > '''Create New''' and tap the camera icon on the ''Expense Receipt'' screen, the image will be attached without the recognition process being performed.
)))
#In the camera screen that opens, take a photo of the receipt. An example is shown in the following screenshot.[anchor|#_f1ef926d-aadb-43a0-ad6d-2b00bd20d8e9][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Capture.png|popup|Taking a photo|150px]
#In the photo editor, which opens, tap the check mark, as shown in the following screenshot.[anchor|#_6c596ded-f2ea-407f-88b4-dbabf6b2254f][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Edit.png|popup|Tapping the check mark|150px]
#:The system analyzes the text of the photo. The process may take several seconds. A user can skip the recognition step by tapping '''Skip Recognition''' as shown in the following screenshot.[anchor|#_02714727-4521-4df8-af71-851d4a013cc2][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Analyze.png|popup|Analyzing the photo|150px]
#:The app displays the analyzed photo with the values and mapped fields highlighted, as shown in the following screenshot.[anchor|#_e380936a-91cc-45cc-be3a-839c29942494][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Confirm.png|popup|Highlighted values and mapped fields|150px]
#If the mapping was performed correctly, click the check mark.
#:The field values the system recognizes are filled in on the ''Expense Receipts'' screen, as shown in the following screenshot (in which the values from the photo are highlighted). The user can correct the values manually.[anchor|#_51d11443-d75b-43ef-aeb7-0874ac043a6a][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Save.png|popup|Filling in values|150px]
#:If the mapping was performed incorrectly, the user can correct the mapping.

==Correcting the Mapping==
To correct the mapping, if needed, the user should do the following:[anchor|#_2167adc2-e66d-4e0b-9318-c24e9e6cb2b5]
#On the screen with the values and mapped fields, click on the box to be corrected.
#:Suppose the user wants to correct the mapping of the '''Amount''' field, which is shown in the following screenshot.[anchor|#_20d4dc8d-06d4-4023-a8b5-926ebcfdb2a9][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_SelectMapping.png|popup|Viewing the mapping to be corrected|150px]
#In the dialog box that opens, click '''Unmap'''. An example for the '''Amount''' field is shown in the following screenshot.[anchor|#_b0d1595b-0145-4b16-80f0-d09e691215f6][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Unmap.png|popup|Unmapping the field and its value|150px]
#:Now when the field is unmapped from the text box, a user needs to map the field with the proper text box in the photo. The screen with the list of fields to map opens, as shown in the following screenshot.[anchor|#_9dc5a474-bc7b-40c0-b0b4-b5d5b87f0bc8][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_SelectField.png|popup|Selecting a field to map|150px]
#Tap the field to map. 
#:All recognized text is highlighted.
#In the photo, select the box to be mapped to the field.
#:To select multiple boxes, tap and hold the first box and continue tapping the other boxes. In the following screenshot, two boxes are selected for the '''Amount''' field.[anchor|#_92e4cb64-edde-49c6-b66d-3959fb038347][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_SelectText.png|popup|Selecting the boxes to map|150px]
#Tap '''Done'''.
#To confirm the mapping, tap the check mark.
#:The mapped values are populated in the corresponding boxes, and the user can correct the values in the boxes. The following screenshot shows an example with the filled-in values highlighted. [anchor|#_7190886e-81d7-4df6-bdb7-5221b727805f][image:ReleaseNotes/Images/RN_2020_R1_Mobile_ScanReceipt_Review.png|popup|Reviewing the filled-in values|150px]
]]></column>
			<column name="PlainText"><![CDATA[Mobile: Scanning Expense Receipts In  Acumatica ERP 2020 R1, users can now scan expense receipts to simplify the process of creating records on the            Expense Receipts  screen. When a user takes a photo of a receipt from this screen,         the system analyzes the photo, recognizes values on the photo, and maps them to fields on         the  Expense Receipts  screen. If the system maps any of the fields to values in the         photo incorrectly, the user can correct the mapping. For users to be able to use this functionality, both of the following conditions must be         met: A license that includes the  Image Recognition Service  feature and service keys           has been obtained from  Acumatica and applied in the system. The  Image Recognition Service  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. If a license that does not meet these conditions is applied or the  Image Recognition           Service  feature is not enabled, users can still create an expense receipt from a         photo. However, in this case, the recognition process is not performed, and the elements of         the created expense receipt contain empty or default values instead of recognized and mapped         values. Scanning an Expense Receipt To scan an expense receipt, a user should do the following: Sign in to  Acumatica mobile app. On the main menu, open the  Expense Receipts  screen. At the bottom right corner of the screen, tap  + Take Photo , as shown in the following screenshot. Tapping Take Photo If the user taps  + Create New  and tap the camera icon on the  Expense Receipt  screen, the image             will be attached without the recognition process being performed. In the camera screen that opens, take a photo of the receipt. An example is shown in the           following screenshot. Taking a photo In the photo editor, which opens, tap the check mark, as shown in the following             screenshot. Tapping the check mark The system analyzes the text of the photo. The process may take several seconds.             A user can skip the recognition step by tapping  Skip Recognition              as shown in the following screenshot. Analyzing the photo The app displays the analyzed photo with the values and mapped fields             highlighted, as shown in the following screenshot. Highlighted values and mapped fields If the mapping was performed correctly, click the check mark. The field values the system             recognizes are filled in on the  Expense Receipts  screen, as shown in the             following screenshot (in which the values from the photo are highlighted). The user can             correct the values manually. Filling in values If the mapping was performed incorrectly, the user can correct the           mapping. Correcting the Mapping To correct the mapping, if needed, the user should do the following: On the screen with the values and mapped fields, click on the box to be             corrected. Suppose the user wants to correct the mapping of the                Amount  field, which is shown in the following             screenshot. Viewing the mapping to be corrected In the dialog box that opens, click  Unmap . An example for the              Amount  field is shown in the following screenshot. Unmapping the field and its value Now when the field is unmapped from the text box, a user needs to map the field             with the proper text box in the photo. The screen with the list of fields to map opens,             as shown in the following screenshot. Selecting a field to map Tap the field to map.  All recognized text is highlighted. In the photo, select the box to be mapped to the field. To select multiple boxes, tap             and hold the first box and continue tapping the other boxes. In the following             screenshot, two boxes are selected for the  Amount  field. Selecting the boxes to map Tap  Done . To confirm the mapping, tap the check mark. The mapped values are populated in the             corresponding boxes, and the user can correct the values in the boxes. The following             screenshot shows an example with the filled-in values highlighted.  Reviewing the filled-in values ]]></column>
		</row>
		<row PageID="9519d9be-a4b4-41f4-a586-5ed5d5da3a56" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="9946f22f-b4c9-5ea1-69da-1099c7b1ef00" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Previously, the advanced authentication functionality was available by default for all Acumatica ERP users. System administrators can select one of the available types of authentication, depending on the company needs. {br}

Starting in Acumatica ERP 2020 R1, advanced authentication has been implemented as a separate feature. The ''Advanced Authentication'' group of features has been added on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and includes the following features:[anchor|#_54daaa66-68d5-41d5-be05-be168f60e951]
*''Two-Factor Authentication''
* ''Google and Microsoft SSO''
* ''Active Directory and Other External SSO''
{br}

If all three features above are disabled, a user will be able to sign in to the Acumatica ERP site with the built-in authorization functionality only. {br}{TOC}
==Forms Affected by the Features==
Because of the implementation of these features, some of the forms have been updated as follows:[anchor|#_df93c861-dcf4-453c-a5ae-cee341a537d7]
*On the [HelpRoot_FormReference\SM_20_10_60|Security Preferences] ([~/?ScreenId=SM201060|SM201060]) form:
**The '''Two-Factor Authentication Policy''' section is now available only if the ''Two-Factor Authentication'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
**In the '''Allowed External Identity Providers''' table, the ''Google'' and ''MicrosoftAccount'' providers are now available only if the ''Google and Microsoft SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form. Also, all providers added as part of a customization project are now available only if the ''Active Directory and Other External SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
*On the [HelpRoot_FormReference\SM_20_10_10|Users] ([~/?ScreenId=SM201010|SM201010]) form:
**The '''Two-Factor Authentication''' section and the '''Generate Access Codes''' button are now available only if the ''Two-Factor Authentication'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
**On the '''External Identities''' tab, the ''Google'' and ''MicrosoftAccount'' providers are now available only if the ''Google and Microsoft SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form. Also, all providers added as part of a customization project are now available only if the ''Active Directory and Other External SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
**The '''Add Active Directory User''' and '''Reload AD Users''' buttons are now available only if the ''Active Directory and Other External SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form and if your Acumatica ERP instance is integrated with AD for your company.
*On the [HelpRoot_GettingStarted\SM_20_30_10|User Profile] ([~/?ScreenId=SM203010|SM203010]) form:
**The '''Generate Access Codes''' button is now available only if the ''Two-Factor Authentication'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
**On the '''External Identities''' tab, the ''Google'' and ''MicrosoftAccount'' providers are now available only if the ''Google and Microsoft SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
**On the '''External Identities''' tab, all providers added by means of customization are now available only if the ''Active Directory and Other External SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
*On the [HelpRoot_FormReference\SM_20_10_05|User Roles] ([~/?ScreenId=SM201005|SM201005]) form, the '''Reload AD Groups''' button and the '''Claims''' and '''Active Directory''' tabs are now available only if the ''Active Directory and Other External SSO'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form and if your Acumatica ERP instance is integrated with AD for your company.
{br}

Also, if the ''Advanced Authentication'' group of features has been disabled, the icons of the external identity providers are unavailable on the Sign-In page of Acumatica ERP and the Acumatica mobile app.{br}

If the ''Two-Factor Authentication'' feature has been disabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, users for whom two-factor authentication was configured in the system will still be able to sign in to the system by using their username and password and bypassing the two-factor authentication.]]></column>
			<column name="PlainText"><![CDATA[Platform: Advanced Authentication Feature Switch Previously, the advanced authentication functionality was available by default for all  Acumatica ERP users. System administrators can select one of the available types of authentication,         depending on the company needs.  Starting in  Acumatica ERP 2020 R1, advanced authentication has been implemented as a separate feature. The  Advanced           Authentication  group of features has been added on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and includes the following           features: Two-Factor Authentication Google and Microsoft SSO Active Directory and Other External SSO If all three features above are disabled, a user will be able to sign in to the  Acumatica ERP site with the built-in authorization functionality only.  Forms Affected by the Features Because of the implementation of these features, some of the forms have been updated as           follows: On the   ([~/?ScreenId=SM201060|SM201060]) Security Preferences (SM201060) form: The  Two-Factor Authentication Policy  section is now                 available only if the  Two-Factor Authentication  feature is enabled on the                     ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. In the  Allowed External Identity Providers  table, the                    Google  and  MicrosoftAccount  providers are now available only if the                    Google and Microsoft SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Also, all providers added as part of                 a customization project are now available only if the  Active Directory and Other                   External SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. On the   ([~/?ScreenId=SM201010|SM201010]) Users (SM201010) form: The  Two-Factor Authentication  section and the                    Generate Access Codes  button are now available only if the                    Two-Factor Authentication  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. On the  External Identities  tab, the  Google  and                    MicrosoftAccount  providers are now available only if the  Google and                   Microsoft SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Also, all providers added as part of                 a customization project are now available only if the  Active Directory and Other                   External SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. The  Add Active Directory User  and  Reload AD                   Users  buttons are now available only if the  Active Directory and                   Other External SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form and if your  Acumatica ERP instance is integrated with AD for your company. On the   ([~/?ScreenId=SM203010|SM203010]) User Profile (SM203010) form: The  Generate Access Codes  button is now available only if                 the  Two-Factor Authentication  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. On the  External Identities  tab, the  Google  and                    MicrosoftAccount  providers are now available only if the  Google and                   Microsoft SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. On the  External Identities  tab, all providers added by                 means of customization are now available only if the  Active Directory and Other                   External SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. On the   ([~/?ScreenId=SM201005|SM201005]) User Roles (SM201005) form, the                Reload AD Groups  button and the  Claims              and  Active Directory  tabs are now available only if the  Active               Directory and Other External SSO  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form and if your  Acumatica ERP instance is integrated with AD for your company. Also, if the  Advanced Authentication  group of features has been disabled, the icons         of the external identity providers are unavailable on the Sign-In page of  Acumatica ERP and the  Acumatica         mobile app. If the  Two-Factor Authentication  feature has been disabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, users for whom two-factor authentication was         configured in the system will still be able to sign in to the system by using their username         and password and bypassing the two-factor authentication. ]]></column>
		</row>
		<row PageID="6526a3f6-468d-44c4-ad2b-b38a397a0026" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="0e5c5ff8-b46d-7c93-0419-749291dff4c6" RecordSourceID="22377">
			<column name="Content"><![CDATA[
When a dashboard with many widgets is refreshed or opened, it may take a lot of time to load data for all widgets. In Acumatica ERP 2020 R1, the caching of widget data and the ability to manage the interval to be used for refreshing data on widgets have been implemented, to reduce the time of loading data on widgets.{br}

Dashboard widgets can display information that is updated very frequently (such as every five minutes) or very rarely (such as once a week), which is why this functionality can be controlled at the widget level. Now a dashboard designer can specify the interval at which the system refreshes data or switch off caching by using the '''Refresh Data''' box of the '''Widget Properties''' dialog box (see the following screenshot) for any type of widget.[anchor|#_6b35e9af-4c85-487d-9768-5b67c0f35b16][anchor|#_ce5d1c58-d8fe-4c6b-bdc6-d392772a7f80][image:ReleaseNotes/Images/RN_2020_R1_Platform_Dashboards_Refresh_Data_Box.png|popup|The Refresh Data box in the Widget Properties dialog box|300px]
To switch off caching for a particular widget and make the system to update widget&rsquo;s data each time a dashboard is opened or refreshed, the dashboard designer should do the following:[anchor|#_5e73c1c5-3e57-4ef1-b29c-9693e0a4905c]
#Open the dashboard that contains the widget.
#On the dashboard title bar, click '''Design'''.
#On the toolbar of the appropriate widget, click '''Edit'''.
#In the '''Refresh Data''' box, select ''Always''.

By using the new functionality, the dashboard designer can specify the interval at which the system refreshes data. For example, to specify that the data of a widget must be cached and refreshed no more often than once a day, the dashboard designer should do the following:[anchor|#_30b95d7a-dc22-46c2-a5ef-a2fb92718996]
#Open the dashboard that contains the widget.
#On the dashboard title bar, click '''Design'''.
#On the widget toolbar, click '''Edit'''.
#In the '''Refresh Data''' box, select ''1 day''.

After a dashboard designer specifies the refresh interval for a widget, the system loads the widget data from the database and caches the data when a user opens the dashboard with the widget for the first time. When the dashboard is reopened or the dashboard page is refreshed, by the user, the system displays the data on the widget from the cache (that is, does not load the data from the database) if the data was updated a shorter time ago than the interval specified in the '''Refresh Data''' box.{br}

A user can view information about how much time has passed since the last update of a widget’s data in the pop-up pane that appears when the user points to the widget (as shown in the following screenshot). The user can manually update the widget data by clicking this pane.[anchor|#_69d8f00b-7239-454b-a27f-e81f71e0f4bd][anchor|#_33b4c683-7078-4bad-80a5-bff890553587][image:ReleaseNotes/Images/RN_2020_R1_Platform_Caching_Dashboard_Widgets_Last_Updated.png|popup|Date and time of the last update of the widget&rsquo;s data|300px]]]></column>
			<column name="PlainText"><![CDATA[Platform: Caching of Dashboard Widgets When a dashboard with many widgets is refreshed or opened, it may take a lot of time to load     data for all widgets. In  Acumatica ERP 2020 R1,     the caching of widget data and the ability to manage the interval to be used for refreshing data     on widgets have been implemented, to reduce the time of loading data on widgets. Dashboard widgets can display information that is updated very frequently (such as every five     minutes) or very rarely (such as once a week), which is why this functionality can be controlled     at the widget level. Now a dashboard designer can specify the interval at which the system     refreshes data or switch off caching by using the  Refresh Data  box of the       Widget Properties  dialog box (see the following screenshot) for any type     of widget. The Refresh Data box in the Widget Properties dialog box To switch off caching for a particular     widget  and make the system     to update widget's data each time a dashboard is opened or refreshed , the     dashboard designer should do the following: Open the dashboard that contains the widget. On the dashboard title bar, click  Design . On the toolbar of the appropriate widget, click  Edit . In the  Refresh Data  box, select  Always . By using the new functionality, the dashboard designer can specify the interval at which the     system refreshes data. For example, to specify that the data of a widget must be cached and     refreshed no more often than once a day, the dashboard designer should do the following: Open the dashboard that contains the widget. On the dashboard title bar, click  Design . On the widget toolbar, click  Edit . In the  Refresh Data  box, select  1 day . After a dashboard designer specifies the refresh interval for a widget, the system loads the     widget data from the database and caches the data      when a user opens the     dashboard with the widget for the first     time .     When the dashboard is reopened or the dashboard page is refreshed,      by the user,      the system displays the data on the widget from the cache (that is, does not     load the data from the database) if the data was updated a shorter time ago than the interval     specified in the  Refresh Data  box. A user can view information about how much time has passed since the last update of a widget’s     data in the pop-up pane that appears when the user points to the widget (as shown in the     following screenshot). The user can manually update the widget data by clicking this pane. Date and time of the last update of the widget's data ]]></column>
		</row>
		<row PageID="c7114817-2a31-4971-927e-e48fa8e3fef3" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a351c331-e678-a4ee-15c0-b91087b1caa2" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the new [HelpRoot_FormReference\SM_20_50_35|Automation Schedule History] ([~/?ScreenId=SM205035|SM205035]) form (shown in the following screenshot) has been implemented for managing the history of automation schedules. By using this form, system administrators can view records of the schedule executions, review any errors, and delete particular records.[anchor|#_c68d2bcb-27e9-44cd-8920-e2e8fdd8e212][anchor|#_f82edc62-ee22-464f-ab12-9d51aa93166f][image:ReleaseNotes/Images/RN_2020_R1_Platform_Automation_Schedule_History1.png|popup|The Automation Schedule History form|450px]
To reduce the number of records displayed in the table, in the Selection area of this form, a system administrator can specify settings to limit the displayed records to a particular form, schedule, and period of time.{br}

To view details about the records related to a schedule execution, a system administrator can click the link in the '''Total Records''' column of the particular row. The system opens the '''Processing Results''' dialog box with the detailed information about the schedule execution. An example of the Processing dialog box is shown in the following screenshot.[anchor|#_abe5d1b4-9895-4bba-8b77-9314566dd0e9][anchor|#_f743b42f-e39d-4a7c-ae6b-d058919ef573][image:ReleaseNotes/Images/RN_2020_R1_Platform_Automation_Schedule_History4.png|popup|The Processing Results dialog box|450px]
To delete particular records, the system administrator selects the check boxes in the Selected column of the table for the rows to be deleted and clicks '''Delete''' on the form toolbar. The system administrator can also delete all history by clicking '''Delete All''' on the form toolbar.{br}

The new '''View History''' button, which opens the Automation Schedule History (SM205035) form, has been added to the [HelpRoot_FormReference\SM_20_50_20|Automation Schedules] ([~/?ScreenId=SM205020|SM205020]) and [HelpRoot_FormReference\SM_20_50_30|Automation Schedule Statuses] ([~/?ScreenId=SM205030|SM205030]) forms (see the following screenshots).[anchor|#_462c8de8-1e69-4d0d-b1b1-40ff0f5ccb79][anchor|#_f470c2e2-5ff6-4d08-a53c-0fe4e798b786][image:ReleaseNotes/Images/RN_2020_R1_Platform_Automation_Schedule_History2.png|popup|The View History button on the Automation Schedules form|450px][anchor|#_53f3acb0-8e4e-4cd4-a64a-8e6c028eeb4e][anchor|#_94d9edb6-1a31-4867-9b4d-09fc2619c760][image:ReleaseNotes/Images/RN_2020_R1_Platform_Automation_Schedule_History3.png|popup|The View History button on the Automation Schedule Statuses form|450px]]]></column>
			<column name="PlainText"><![CDATA[Platform: Enhancements to the Management of the Automation Schedule History In  Acumatica ERP 2020 R1, the new   ([~/?ScreenId=SM205035|SM205035]) Automation Schedule History (SM205035) form (shown in the         following screenshot) has been implemented for managing the history of automation schedules.         By using this form, system administrators can view records of the schedule executions,         review any errors, and delete particular records. The Automation Schedule History form To reduce the number of records displayed in the table, in the Selection area of this form,         a system administrator can specify settings to limit the displayed records to a particular         form, schedule, and period of time. To view details about the records related to a schedule execution, a system administrator         can click the link in the  Total Records  column of the particular row.         The system opens the  Processing Results  dialog box with the detailed         information about the schedule execution. An example of the Processing dialog box is shown         in the following screenshot. The Processing Results dialog box To delete particular records, the system administrator selects the check boxes in the         Selected column of the table for the rows to be deleted and clicks            Delete  on the form toolbar. The system administrator can also         delete all history by clicking  Delete All  on the form toolbar. The new  View History  button, which opens the Automation Schedule         History (SM205035) form, has been added to the   ([~/?ScreenId=SM205020|SM205020]) Automation Schedules         (SM205020) and   ([~/?ScreenId=SM205030|SM205030]) Automation Schedule Statuses (SM205030) forms (see the         following screenshots). The View History button on the Automation Schedules form The View History button on the Automation Schedule Statuses form ]]></column>
		</row>
		<row PageID="e9504705-710b-4840-bba0-12b949cb581e" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="40cd3cfd-e3c3-7d22-6ca4-1c031eb29e75" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, multiple improvements have been made that affect the configuration and processing of import and export scenarios. These improvements are described in detail in the following sections.
==Parallel Processing of Import Scenarios==
In Acumatica ERP 2020 R1, data import by using an import scenario can be sped up if a user turns on parallel execution of the scenario. The parallel processing of an import scenario by the system could be especially useful for data migration during the initial implementation of the system.{br}

To turn on parallel processing of an import scenario, the user selects the '''Parallel Processing''' check box on the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] ([~/?ScreenId=SM206025|SM206025]) form, which is shown in the following screenshot.[anchor|#_7aabf189-2c0a-4109-bbdd-2d256c3d927e][anchor|#_280afefd-f2cf-4433-bbc8-796f8550827e][image:ReleaseNotes/Images/RN_2020_R1_Platform_Import_Export_Scenario_Improvements_3.png|popup|The Parallel Processing check box|450px]{br}

If parallel processing is turned on for an import scenario, during the execution of the scenario, the system divides the whole list of records to process into batches of multiple records. The lines of a particular document (that is, the records that have the same key fields specified) are always included in the same batch. The system executes the import scenario for these batches in parallel threads.((({S:Warn}The '''Break on Error''' and '''Break on Incorrect Target''' check boxes become unavailable if the '''Parallel Processing''' check box is selected.
))){br}

For details about how to speed the processing of import scenarios, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=b6f6300a-f1ea-488f-ba46-70db879f553a|Troubleshooting Performance in Import and Export Scenarios].
==Preprocessing of the Data Before Import or Export==
The data to be imported to Acumatica ERP or exported from Acumatica ERP can contain values that cannot be inserted into the database of Acumatica ERP or the external system as they are. These values may require a simple modification before they can be inserted into the respective database. For example, suppose that the data for import contains country codes that are different from the county codes registered in Acumatica ERP. The country codes in the data must be replaced with the country codes registered in Acumatica ERP before the data import.{br}

In Acumatica ERP 2020 R1, a user can modify the data before the import or export in either or both of the following ways:[anchor|#_fd00a2b1-012b-4473-a9fa-f01a02dbd4fb]
*By using substitution lists, which consist of pairs of source values and the corresponding substitution values, in the mappings of import or export scenarios. The user can define substitution lists during the creation of an integration scenario by clicking the '''Substitution Lists''' button on the table toolbar of the '''Mapping''' tab of the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] ([~/?ScreenId=SM206025|SM206025]) or [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] ([~/?ScreenId=SM207025|SM207025]) form, which opens the [HelpRoot_FormReference\SM_20_60_26|Substitution Lists] ([~/?ScreenId=SM206026|SM206026]) form. 
*:The user then can use the substitution lists specified on the [HelpRoot_FormReference\SM_20_60_26|Substitution Lists] form in formulas in the mappings of the import or export scenarios. The following special functions are available under ''Functions &gt; Others'' in the Formula Editor dialog box: [anchor|#_83b11e6a-9145-444a-97ff-3fccc32f1af9]
**{{SubstituteListed (sourceField, substitutionList)}}: The function replaces the values of the {{sourceField}} field with the values from the {{substitutionList}} substitution list if a substitution value is defined for a particular value of the field.
**{{SubstituteAll (sourceField, substitutionList)}}: The function replaces all values of the {{sourceField}} field with the values from the {{substitutionList}} substitution list. If no substitution value is defined for a particular value of the field, the system displays an error.
*:During the data import or the preparation of the data for export, the system searches for the source values from the substitution list and replaces them with the corresponding substitution values according to the formula. 
*:For details about how to define and use substitution lists, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=79ed2c1d-2988-4c19-b470-de226b5ea305|To Substitute Values During Data Import or Data Export].
*By replacing a particular field value in the data prepared for import on the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] form with another value. The user can click the '''Replace''' button on the toolbar of the '''Prepared Data''' tab and, in the dialog box that opens, specify the replacement value.
*:The system replaces the specified values in the prepared data.

==Detail Export Mode in Export Scenarios==
In previous versions of Acumatica ERP, detail records were exported through export scenarios as follows:[anchor|#_77903b0a-a1aa-4bbd-a88a-d857ba2ef5d6]
*The first exported detail record contained the data of each field specified in the scenario mapping for the detail object, summary object, and related objects.
*The other exported detail records contained the fields of the detail object and the summary object. The fields of the related objects were blank.
In Acumatica ERP 2020 R1, for an export scenario, a user can specify which fields should be exported for detail records. In the new '''Detail Export Mode''' box on the [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] ([~/?ScreenId=SM207025|SM207025]) form, which is shown in the following screenshot, a user can select one of the following options:[anchor|#_6339cdc5-4352-4798-b87a-657ad5f6a581]
*''Repeat Only Summary Fields'': This is the mode that reflects the system behavior in the previous versions of Acumatica ERP.
*''Repeat All Fields'': In this mode, each exported detail record contains the data of each field specified in the scenario mapping for the detail object, summary object, and related objects.
*''Do Not Repeat Fields'': In this mode, only the first exported detail record contains the data of each field specified in the scenario mapping for the detail object, summary object, and related objects. The other exported records contain the data of the fields of only the detail object.
[anchor|#_0d7ef09f-6bab-448b-95dd-4bfa95099efc][anchor|#_c04ede2c-dd7f-470e-8d04-dbff86c6e706][image:ReleaseNotes/Images/RN_2020_R1_Platform_Import_Export_Scenario_Improvements.png|popup|Detail Export Mode box|450px]
==Workflow Actions in Scenario Mapping==
In Acumatica ERP 2020 R1, the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]), [HelpRoot_FormReference\CR_30_60_00|Cases] ([~/?ScreenId=CR306000|CR306000]), and [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) forms support the new automation workflows instead of automation steps. Developers can also customize an Acumatica ERP form by defining an automation workflow in Customization Project Editor or in customization code. For details about automation workflows, see [HelpRoot_ReleaseNotes\RN_2019_R2_Developer_AutomationImprovements|Customization: Automation of Workflows in Customization Project                         Editor]. Users can use the workflow actions in mappings of import and export scenarios.((({S:Danger}While using import and export scenarios, users can no longer directly modify the statuses of the created or updated records on the [HelpRoot_FormReference\CR_30_40_00|Opportunities], [HelpRoot_FormReference\CR_30_60_00|Cases], and [HelpRoot_FormReference\CR_30_10_00|Leads] forms by specifying the value of the {{Status}} field in the mapping. Instead, users should modify the scenario mappings to use the workflow actions for modification of the statuses.
))){br}

To specify a workflow action in a mapping on the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] ([~/?ScreenId=SM206025|SM206025]) or [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] ([~/?ScreenId=SM207025|SM207025]) form, a user can choose from either of the following approaches:[anchor|#_04239e20-cd63-4c4d-ab88-b00839459e54]
*Select the summary object as the target object (in an import scenario) or the source object (in an export scenario), and specify the action name in the '''Field / Action Name''' column. This is the standard way to call actions in import and export scenarios. For details, see [https://help.acumatica.com/(W(45))/Help?ScreenId=ShowWiki&pageid=7a8cb982-bcf7-4260-9e3f-0bb934509a07|Actions in Import Scenarios].
*Select the summary object as the target object in an import scenario or the source object in an export scenario, select the {{<Action: Transition>}} action in the '''Field / Action Name''' column, and specify the type of transition that corresponds to the workflow action in the '''Source Field / Value''' column (for an import scenario) or the '''Target Field / Value''' column (for an export scenario). With this approach, the user can use formula to specify the type of transition.
{br}

If a workflow action displays a workflow dialog box with the parameters of the action, the user can specify these parameters by using the {{Transition Parameters}} object as the target object in an import scenario. The parameters must be specified before the workflow action. The {{Transition Parameters}} object cannot be used in export scenarios.((({S:Warn}Simplified import scenarios cannot use workflow actions. For details about simplified import scenarios, see [https://help.acumatica.com/(W(46))/Help?ScreenId=ShowWiki&pageid=2c494729-50a7-437a-bfb8-59e21123a1dd|Simplified Scenarios for Data Import].
))){br}

For more information about workflow actions in scenario mapping, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=8b9187b0-5d02-4f3b-8358-eb92f6ecf0c0|Workflow Actions in Import and Export Scenarios].
==Other Improvements to Import and Export Scenarios==
 Acumatica ERP 2020 R1 also includes the following changes to the user interface of the integration forms:[anchor|#_948290d7-9a16-42e4-ae2f-c5b58bc15926]
*On the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] ([~/?ScreenId=SM206025|SM206025]) and [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] ([~/?ScreenId=SM207025|SM207025]) forms, a group of UI elements (shown in the following screenshot) are available that affect the availability of the scenario in the user interface of Acumatica ERP. For an import or export scenario, if a user selects the '''Make Visible on the UI''' check box and makes needed specifications in the '''Site Map Title''', '''Workspace''', and '''Category''' boxes, the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] ([~/?ScreenId=SM206036|SM206036]) or [HelpRoot_FormReference\SM_20_70_36|Export by Scenario] ([~/?ScreenId=SM207036|SM207036]) form for the import or export scenario respectively becomes available under the specified location in the UI.
*:((({S:Warn}Similar UI elements that were available on the '''Details''' tab of the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] and [HelpRoot_FormReference\SM_20_70_36|Export by Scenario] forms in previous versions have now been removed.
)))[anchor|#_fdf18240-94ba-4a6e-a40f-a4a75671f843][image:ReleaseNotes/Images/RN_2020_R1_Platform_Import_Export_Scenario_Improvements_4.png|popup|The UI options|450px]
*The check boxes related to how the system deals with the errors occurred during processing of the scenario have been added to the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] and [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] forms. On the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] form, these check boxes are '''Break on Error''', '''Break on Incorrect Target''', and '''Discard Previous Result'''. On the [HelpRoot_FormReference\SM_20_70_25|Export Scenarios] form, the added check box is '''Discard Previous Result'''. The values of these options for an import or export scenario can be overridden for any execution on the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] or [HelpRoot_FormReference\SM_20_70_36|Export by Scenario] form, respectively.
*On the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] and [HelpRoot_FormReference\SM_20_70_36|Export by Scenario] forms, the '''Roll Back''' button on the toolbar of the '''History''' tab has been replaced with the '''Clear Data''' button, which has been moved to the form toolbar (see the screenshot below). 
*:If a user clicks this button when the '''History''' tab is not open (that is, while you are viewing another tab on the form), all records on the '''Prepared Data''' and '''History''' tabs are cleared. If the user clicks the button when the '''History''' tab is open and a record is selected on the tab, the system clears all records on the '''Prepared Data''' tab; on the '''History''' tab, the system also clears the selected record and all records that were created before the selected record was.[anchor|#_5d228972-417d-4d99-90be-514badb3b589][anchor|#_41eb4500-5e9c-4c26-bc99-9ec55aa89e77][image:ReleaseNotes/Images/RN_2020_R1_Platform_Import_Export_Scenario_Improvements_2.png|popup|The Clear Data button|450px]
*On the [HelpRoot_FormReference\SM_20_60_35|Process Import Scenarios] ([~/?ScreenId=SM206035|SM206035]) and [HelpRoot_FormReference\SM_20_70_35|Process Export Scenarios] ([~/?ScreenId=SM207035|SM207035]) forms, the ''Roll Back'' operation has been renamed to ''Clear Data''.
]]></column>
			<column name="PlainText"><![CDATA[Platform: Improvements to Import and Export Scenarios In  Acumatica ERP 2020 R1, multiple improvements have been made that affect the configuration and processing of         import and export scenarios. These improvements are described in detail in the following         sections. Parallel Processing of Import Scenarios In  Acumatica ERP 2020 R1, data import by using an import scenario can be sped up if a user turns on parallel         execution of the scenario. The parallel processing of an import scenario by the system could         be especially useful for data migration during the initial implementation of the system. To turn on parallel processing of an import scenario, the user selects the            Parallel Processing  check box on the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios (SM206025) form, which is shown in the following           screenshot. The Parallel Processing check box If parallel processing is turned on for an import scenario, during the execution of the         scenario, the system divides the whole list of records to process into batches of multiple         records. The lines of a particular document (that is, the records that have the same key         fields specified) are always included in the same batch. The system executes the import         scenario for these batches in parallel threads. The  Break on             Error  and  Break on Incorrect Target  check boxes           become unavailable if the  Parallel Processing  check box is           selected. For details about how to speed the processing of import scenarios, see  Troubleshooting Performance in Import and Export           Scenarios Troubleshooting Performance in Import and Export Scenarios. Preprocessing of the Data Before Import or Export The data to be imported to  Acumatica ERP or exported from  Acumatica ERP can contain values that cannot be inserted into the database of  Acumatica ERP or the external system as they are. These values may require a simple modification before         they can be inserted into the respective database. For example, suppose that the data for         import contains country codes that are different from the county codes registered in  Acumatica ERP. The country codes in the data must be replaced with the country codes registered in  Acumatica ERP before the data import. In  Acumatica ERP 2020 R1, a user can modify the data before the import or export in either or both of the         following ways: By using substitution lists, which consist of pairs of source values and the             corresponding substitution values, in the mappings of import or export scenarios. The             user can define substitution lists during the creation of an integration scenario by             clicking the  Substitution Lists  button on the table toolbar of             the  Mapping  tab of the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios (SM206025) or   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios (SM207025) form, which             opens the   ([~/?ScreenId=SM206026|SM206026]) Substitution Lists (SM206026) form.  The user then               can use the substitution lists specified on the   ([~/?ScreenId=SM206026|SM206026]) Substitution Lists form in formulas in the mappings of the               import or export scenarios. The following special functions are available under                  Functions > Others  in the Formula Editor dialog box:  SubstituteListed (sourceField, substitutionList) : The function                   replaces the values of the  sourceField  field with the values from                   the  substitutionList  substitution list if a substitution value is                   defined for a particular value of the field. SubstituteAll (sourceField, substitutionList) : The function                   replaces all values of the  sourceField  field with the values from                   the  substitutionList  substitution list. If no substitution value                   is defined for a particular value of the field, the system displays an error. During the data import or the preparation of the data for export, the               system searches for the source values from the substitution list and replaces them               with the corresponding substitution values according to the formula.  For               details about how to define and use substitution lists, see  To Substitute Values During Data Import or Data                 Export To Substitute Values During Data Import or Data Export. By replacing a particular field value in the data prepared for import on the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario form with another value. The user can click the                Replace  button on the toolbar of the  Prepared               Data  tab and, in the dialog box that opens, specify the replacement               value. The system replaces the specified values in the prepared data. Detail Export Mode in Export Scenarios In previous versions of  Acumatica ERP, detail records were exported through export scenarios as follows: The first exported detail record contained the data of each field specified in the             scenario mapping for the detail object, summary object, and related objects. The other exported detail records contained the fields of the detail object and the             summary object. The fields of the related objects were blank. In  Acumatica ERP 2020 R1, for an export scenario, a user can specify which fields should be exported for detail         records. In the new  Detail Export Mode  box on the   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios (SM207025) form, which is shown in the following         screenshot, a user can select one of the following options: Repeat Only Summary Fields : This is the mode that reflects the system behavior             in the previous versions of  Acumatica ERP. Repeat All Fields : In this mode, each exported detail record contains the data             of each field specified in the scenario mapping for the detail object, summary object,             and related objects. Do Not Repeat Fields : In this mode, only the first exported detail record             contains the data of each field specified in the scenario mapping for the detail object,             summary object, and related objects. The other exported records contain the data of the             fields of only the detail object. Detail Export Mode box Workflow Actions in Scenario Mapping In  Acumatica ERP 2020 R1, the   ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000),   ([~/?ScreenId=CR306000|CR306000]) Cases (CR306000), and   ([~/?ScreenId=CR301000|CR301000]) Leads Leads (CR301000) forms support the new         automation workflows instead of automation steps. Developers can also customize an  Acumatica ERP form by defining an automation workflow in  Customization Project Editor         or in customization code. For details about automation workflows, see  Customization: Automation of Workflows in Customization Project                         Editor. Users can use the workflow         actions in mappings of import and export scenarios. While using import           and export scenarios, users can no longer directly modify the statuses of the created or           updated records on the   ([~/?ScreenId=CR304000|CR304000]) Opportunities,   ([~/?ScreenId=CR306000|CR306000]) Cases, and   ([~/?ScreenId=CR301000|CR301000]) Leads Leads forms by specifying the value of the  Status  field in the           mapping. Instead, users should modify the scenario mappings to use the workflow actions           for modification of the statuses. To specify a workflow action in a mapping on the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios (SM206025) or   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios (SM207025) form, a user can         choose from either of the following approaches: Select the summary object as the target object (in an import scenario) or the source             object (in an export scenario), and specify the action name in the  Field /               Action Name  column. This is the standard way to call actions in import and             export scenarios. For details, see  Actions in Import Scenarios Actions in Import Scenarios. Select the summary object as the target object in an import scenario or the source             object in an export scenario, select the  <Action: Transition>  action             in the  Field / Action Name  column, and specify the type of             transition that corresponds to the workflow action in the  Source Field /               Value  column (for an import scenario) or the  Target Field /               Value  column (for an export scenario). With this approach, the user can             use formula to specify the type of transition. If a workflow action displays a workflow dialog box with the parameters of the action, the         user can specify these parameters by using the  Transition Parameters  object         as the target object in an import scenario. The parameters must be specified before the         workflow action. The  Transition Parameters  object cannot be used in export           scenarios. Simplified import scenarios cannot use workflow actions. For details about           simplified import scenarios, see  Simplified Scenarios for Data Import Simplified Scenarios for Data Import. For more information about workflow actions in scenario mapping, see  Workflow Actions in Import and Export Scenarios Workflow Actions in Import and Export Scenarios. Other Improvements to Import and Export Scenarios  Acumatica ERP 2020 R1 also includes the following changes to the user interface of the integration forms: On the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios (SM206025) and   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios (SM207025) forms, a group of UI elements (shown             in the following screenshot) are available that affect the availability of the scenario             in the user interface of  Acumatica ERP. For an import or export scenario, if a user selects the  Make Visible on               the UI  check box and makes needed specifications in the  Site               Map Title ,  Workspace , and                Category  boxes, the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario (SM206036) or   ([~/?ScreenId=SM207036|SM207036]) Export by Scenario (SM207036) form for the             import or export scenario respectively becomes available under the specified location in             the UI. Similar UI elements that were available on the                  Details  tab of the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario and   ([~/?ScreenId=SM207036|SM207036]) Export by Scenario forms in previous versions have               now been removed. The UI options The check boxes related to how the system deals with the errors occurred during             processing of the scenario have been added to the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios and   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios forms. On the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios form, these check boxes             are  Break on Error ,  Break on Incorrect               Target , and  Discard Previous Result . On the   ([~/?ScreenId=SM207025|SM207025]) Export Scenarios form, the added check box is  Discard               Previous Result . The values of these options for an import or export             scenario can be overridden for any execution on the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario or   ([~/?ScreenId=SM207036|SM207036]) Export by Scenario             form, respectively. On the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario and   ([~/?ScreenId=SM207036|SM207036]) Export by Scenario forms, the  Roll Back                button on the toolbar of the  History  tab has been replaced with               the  Clear Data  button, which has been moved to the form toolbar               (see the screenshot below).  If a user clicks this button when the  History  tab is not open               (that is, while you are viewing another tab on the form), all records on the                  Prepared Data  and  History  tabs are               cleared. If the user clicks the button when the  History  tab is               open and a record is selected on the tab, the system clears all records on the                  Prepared Data  tab; on the  History  tab,               the system also clears the selected record and all records that were created before               the selected record was. The Clear Data button On the   ([~/?ScreenId=SM206035|SM206035]) Process Import Scenarios (SM206035) and   ([~/?ScreenId=SM207035|SM207035]) Process Export Scenarios (SM207035) forms, the  Roll Back              operation has been renamed to  Clear Data . ]]></column>
		</row>
		<row PageID="ce1875eb-58b1-400c-9ae9-ca7bfcc37e62" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a861eb96-7e73-f40e-db99-8d7227645b34" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the capability to include deleted records in generic inquiry results has been added in response to requests from clients and partners.
==Inclusion of Deleted Records in Inquiry Results==
A user creating or modifying a generic inquiry can include deleted records in the inquiry results for any table. To achieve this, on the '''Results Grid''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form, the user adds a row for the needed table with the <tt>DeletedDatabaseRecords</tt> data field. Then the user selects the new '''Show Deleted Records''' check box in the Summary area of the form and saves these changes. {br}

With these settings, the system will display the deleted records in the table; it will also indicate the deleted records by selecting the check box in a new column it adds to the table. By default, the '''Is Deleted''' caption is used for this column, but the user developing the generic inquiry can change this caption in the '''Caption''' column of the '''Results Grid''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form. If the user adds deleted records for multiple tables, we recommend entering a descriptive caption for each of these columns.{br}

The following screenshot demonstrates rows added to the '''Results Grid''' tab to show deleted records of the <tt>Batch</tt> and <tt>Ledger</tt> tables. Notice that the'' Deleted Batch'' and ''Deleted Ledger'' column captions, respectively, have been specified for these tables.[anchor|#_eb5f6cfe-9db1-4cb7-9831-622b5f37edb5][anchor|#_d22c3330-35d7-4072-9b07-209c60d70189][image:ReleaseNotes/Images/RN_2020_R1_Platform_GI_DeletedRecords.png|popup|Rows added to show deleted records in the Journal Transaction inquiry|450px]
The following screenshot shows the ''Journal Transactions'' inquiry, for which the records of deleted batches and ledgers are now included. Newly added columns can be used for filtering records, as can other columns.[anchor|#_c364c871-f156-4541-b19d-bce6cd0c3556][anchor|#_114faacc-9fae-4503-a529-97a1d3d09574][image:ReleaseNotes/Images/RN_2020_R1_Platform_GI_DeletedRecords_Results.png|popup|Records of the Journal Transaction inquiry filtered by the deleted batches|450px]]]></column>
			<column name="PlainText"><![CDATA[Platform: Ability to Show Deleted Records in Inquiries In  Acumatica ERP 2020 R1,     the capability to include deleted records in generic inquiry results has been added in response     to requests from clients and partners. Inclusion of Deleted Records in Inquiry Results A user creating or modifying a generic inquiry can include deleted records in the inquiry     results for any table. To achieve this, on the  Results Grid  tab of the        ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form, the user adds a row for the     needed table with the  DeletedDatabaseRecords  data field. Then the user     selects the new  Show Deleted Records  check box in the Summary area of the     form and saves these changes.  With these settings, the system will display the deleted records in the table; it will also     indicate the deleted records by selecting the check box in a new column it adds to the table. By     default, the  Is Deleted  caption is used for this column, but the user     developing the generic inquiry can change this caption in the  Caption      column of the  Results Grid  tab of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form. If the user adds deleted records for multiple     tables, we recommend entering a descriptive caption for each of these columns. The following screenshot demonstrates rows added to the  Results Grid      tab to show deleted records of the  Batch  and  Ledger      tables. Notice that the  Deleted Batch  and  Deleted Ledger  column captions,     respectively, have been specified for these tables. Rows added to show deleted records in the Journal Transaction inquiry The following screenshot shows the  Journal Transactions  inquiry, for which the records     of deleted batches and ledgers are now included. Newly added columns can be used for filtering     records, as can other columns. Records of the Journal Transaction inquiry filtered by the deleted batches ]]></column>
		</row>
		<row PageID="68984200-8646-4f26-8f3a-320d04ee0dea" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="809d2425-5218-d3f0-77ef-8eff3c6b4fb9" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the ability to calculate the percentage of a row or column total has been added as well as count of unique values.{br}


==Percentage of Total in Pivot Tables==
The '''Show Values As''' drop-down box has been added to the Properties pane of the [HelpRoot_FormReference\SM_20_80_10|Pivot Tables] ([~/?ScreenId=SM208010|SM208010]) form. By using the options of the box, a user can specify how the system should display values. As the following screenshot shows, the following options are available: ''Number'', ''% of Grand Total'', ''% of Column Total'', and ''% of Row Total''.[anchor|#_9f1f10d4-eb99-4d26-9072-57b068f11d2c][anchor|#_c43d0d83-57b5-4cee-9fb0-a221c6b1de00][image:ReleaseNotes/Images/RN_2020_R1_Platform_Pivot.png|popup|The Show Value As options in the Properties pane|450px]
The following screenshot demonstrates the usage of the ''% of Grand Total'' option for the values in the '''% of Total Incidents''' column. The ''Activities by Type'' pivot table summarizes the number of different activity types by customer and displays the percentage of grand total number of activities for each type. For example, the grand total number of activities is 61, so the 3 work items completed for the USA Bartending customer is 5% of total number.[anchor|#_5e274c31-9f19-495f-a39b-4859ce250c5c][anchor|#_e374c783-4106-4bc3-8eed-ec0416c06a79][image:ReleaseNotes/Images/RN_2020_R1_Platform_Pivot_Result.png|popup|The Activities by Type pivot table|450px]
==Count of Unique Values==
The ''Count Distinct'' option has been added to the '''Aggregate''' drop-down list on the Properties pane of the [HelpRoot_FormReference\SM_20_80_10|Pivot Tables] ([~/?ScreenId=SM208010|SM208010]) form. This aggregate function returns the number of the unique field values. Also, the ''Count'' option has been renamed to ''Count All''.{br}

For example, suppose that you need to know how many customers you have invoiced this month. Your inquiry returns the list of recorded invoices with dates and customer names. If you use the ''Count All'' aggregate function to count number of invoiced customer in a month the system will count all records within a month. If you use the ''Count Distinct'' aggregate function the system will count only unique records within a month. ]]></column>
			<column name="PlainText"><![CDATA[Platform: Improvements to Pivot Tables In  Acumatica ERP 2020 R1,     the ability to calculate the percentage of a row or column total has been added as well as count     of unique values. Percentage of Total in Pivot Tables The  Show Values As  drop-down box has been added to the Properties pane     of the   ([~/?ScreenId=SM208010|SM208010]) Pivot Tables (SM208010) form. By using the options of the     box, a user can specify how the system should display values. As the following screenshot shows,     the following options are available:  Number ,  % of Grand Total ,  % of Column      Total , and  % of Row Total . The Show Value As options in the Properties pane The following screenshot demonstrates the usage of the  % of Grand Total  option for the     values in the  % of Total Incidents  column. The  Activities by Type      pivot table summarizes the number of different activity types by customer and displays the     percentage of grand total number of activities for each type. For example, the grand total     number of activities is 61, so the 3 work items completed for the USA Bartending customer is 5%     of total number. The Activities by Type pivot table Count of Unique Values The  Count Distinct  option has been added to the  Aggregate      drop-down list on the Properties pane of the   ([~/?ScreenId=SM208010|SM208010]) Pivot Tables     (SM208010) form. This aggregate function returns the number of the unique field values. Also,     the  Count  option has been renamed to  Count All . For example, suppose that you need to know how many customers you have invoiced this month.     Your inquiry returns the list of recorded invoices with dates and customer names. If you use the       Count All  aggregate function to count number of invoiced customer in a month the system     will count all records within a month. If you use the  Count Distinct  aggregate function     the system will count only unique records within a month.  ]]></column>
		</row>
		<row PageID="68984211-8646-4f26-8f3a-320d04ee0dea" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="7afe83a5-4cc8-11d7-81ac-a40281077016" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a number of changes have been made to improve the UI and usability of several processes, project accounting forms, and forms of related functional areas.{br}{TOC}
==New Names for Project Transactions Forms==
The '''Project Accounting''' workspace has three form links with the same name: ''Project Transactions''. This duplication may confuse users when they are searching for a particular form by its name. Thus, the form names have been changed as follows:[anchor|#_9783a0ad-7ab6-4566-a3c8-041da99872eb]
*The data entry form remains the same name [HelpRoot_FormReference\PM_30_40_00|Project Transactions] ([~/?ScreenId=PM304000|PM304000]).
*The inquiry has been renamed to [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000]).
*The report has been renamed to [HelpRoot_ReportReference\PM_63_30_00|Project Transaction Register] ([~/?ScreenId=PM633000|PM633000]).

==Changes to Project Transaction Details (PM401000) Form==
Multiple changes have been made to the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000]) form.{br}

The Selection area has been improved as follows:[anchor|#_935dba6d-eccf-4ffa-9dee-60b06b87a2ee]
*The following elements, which a user can fill in to select transactions for display in the table, have been added:
**'''Account''': The system lists the project transactions with the selected account in the '''Debit Account''' or '''Credit Account''' column.
**'''AR Doc. Type''': The system lists the project transactions associated with the AR document of the selected type and number. The document number is selected in the '''AR Doc. Nbr.''' box.
**'''AR Doc. Nbr.''': The system lists the project transactions associated with the AR document of the selected number and type. The document type is selected in the '''AR Doc. Type''' box.
**'''Tran. ID''': The system lists the project transaction with this identifier.
*Each of the following selection criteria define the list of transactions shown in the table even if other selection criteria are not specified: '''Project''', '''Account Group''', '''Account''', '''AR Doc. Type''' and '''AR Doc. Nbr.''', and '''Tran. ID'''.
*Selection criteria work with the ''AND'' logical operator. That is, transactions are listed in the table only if they meet all selected criteria.

The following columns have been added to the table:[anchor|#_b25c16ae-eb5b-4b0d-903f-4361b8c416f2]
*'''Project''': The identifier of the project associated with the transaction.
*'''Pro Forma Ref. Nbr.''': The reference number of the pro forma invoice generated when the transaction was used in billing.

The following columns have been added to the table but are hidden by default:[anchor|#_1a419986-5ac2-4579-8125-6c2e4af08aab]
*'''Tran. ID''': The identifier of the transaction.
*'''Old Orig. Doc. Nbr.''': The column that was previously called '''Orig. Doc. Nbr.'''. The system fills in the column as it did in earlier versions of Acumatica ERP.
*'''Excluded From Allocation''': A check box that indicates (if selected) that the transaction should not be allocated.
*'''Excluded From Balance''': A check box that indicates (if selected) that the transaction does not affect the project balance.
*'''Excluded From Billing''': A check box that indicates (if selected) that the transaction should not be billed.
*'''Excluded From Billing Reason''': The reason the project transaction has been excluded from billing, which can be one of the following options:
**''Written-Off with Credit Memo &lt;Nbr&gt;'': The transaction is offset by a credit memo.
**''Reversal of Tran. ID &lt;Nbr&gt;'': The transaction is a reversal of another transaction.
**''Result of Credit Memo &lt;Nbr&gt;'': The transaction is a result of the release of a credit memo.
**''Result of AR Invoice &lt;Nbr&gt;'': The transaction is a result of the release of an AR invoice.
**''Reversed'': The transaction has been reversed.
**''Billable with Case &lt;Nbr&gt;'': The transaction can be billed or has been already billed through the case billing procedure.
**''WIP Reversed '': The transaction is a WIP reversal transaction.

The following columns in the table have been altered:[anchor|#_f0c0785d-15aa-4719-aada-52c885a77213]
*'''Amount''': The amount of the transaction. This was previously called the '''Amount (Reversed)''' column and has been renamed. The column also shows the values of the '''Amount (Normal)''' column, which has been removed.
*'''GL Batch Nbr.''': The reference number of the corresponding GL batch of transactions. This was previously called the '''Batch Nbr.''' column and has been renamed.
*'''Orig. Doc. Nbr.''': The number of the document that spawned the transaction. That is, the transaction in this row has been generated during the release of a document with the number specified in this column.
*:Unlike the previous '''Orig. Doc. Nbr.''' column, the values of the '''Orig. Doc. Nbr.''' column are now links that users can click to open the original document on the corresponding data entry form. The system also supports for this column more document types than it did with the previous '''Orig. Doc. Nbr.''' column.
*'''Allocated''': A check box that indicates (if selected) that the transaction has been allocated.
*:In earlier versions of Acumatica ERP, the '''Allocated''' check box was used for two different scenarios. The system selected the check box for both transactions that should not be allocated and transactions that had been already allocated. Now for these different scenarios, the system uses the '''Allocated''' and '''Excluded From Allocation''' check boxes as the table below shows.
*:{| class="checklist" | width="100%" 
|- 
| 
| '''Allocated'''
|  '''Excluded From Allocation'''
|- 
| The transaction was allocated
| Selected
| Cleared
|- 
| The transaction should not be allocated
| Cleared
| Selected
|}
*'''Billed''': A check box that indicates (if selected) that billing transactions have been already generated for this transaction. 
*:In earlier versions of Acumatica ERP, the '''Billed''' check box was used for two different scenarios. The system selected the check box for both transactions that should not be billed and transactions that had been already billed. Now for these different scenarios, the system uses the '''Billed''' and '''Excluded From Billing''' check boxes as the table below shows.
*:{| class="checklist" | width="100%" 
|- 
| 
| '''Billed'''
|  '''Excluded From Billing'''
|- 
| The transaction was billed
| Selected
| Cleared
|- 
| The transaction should not be billed
| Cleared
| Selected
|}

==Navigation to Project Transaction Details (PM401000) Form from Other Forms==
To make it possible for users to easily find the project transactions that are related to an AR invoice, the '''Inquiries''' > '''View Project Transactions''' command has been added to the form toolbar of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form. When a user clicks this command, the system navigates to the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000]) form and shows all the project transactions related to the invoice.{br}

To make it possible for users to easily match GL and project transactions, the '''Project Tran. ID''' column, which shows the project transaction identifier, has been added to the tables of the [HelpRoot_FormReference\GL_40_40_00|Account Details] ([~/?ScreenId=GL404000|GL404000]) and [HelpRoot_FormReference\GL_30_10_00|Journal Transactions] ([~/?ScreenId=GL301000|GL301000]) forms. The column is hidden by default. When a user clicks the link in the column, the system navigates to the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] form with the project transaction selected.
==Changes to Projects (PM301000) Form==
The following changes have been made to the boxes showing totals in the Summary area of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form:[anchor|#_d848526e-f45f-4ada-87bc-dd53a4f32ac8]
*The '''Assets''' box has been removed. Users can review project assets on the '''Balances''' tab.
*The '''Liability''' box has been removed. Users can review project liabilities on the '''Balances''' tab.
*The '''Income''' box has been renamed to '''Actual Income'''.
*The '''Expenses''' box has been renamed to '''Actual Expenses'''.
*The '''Margin''' box has been added to the form; this value is calculated as the difference of the '''Actual Income''' and '''Actual Expenses'''.
*:The margin '''%''' is calculated with the following formula:
*:{{100*('''Actual Income''' - '''Actual Expenses''')/'''Actual Income''')}}
*:If the '''Actual Income''' is zero, the margin '''%''' is also zero.
*:If the '''Actual Expenses''' is greater than the '''Actual Income''', the margin '''%''' is calculated with the same formula and becomes negative.

==New Description for Allocation Transactions==
To make it easy for users to identify a batch of allocation transactions, the system assigns the following description to such a batch: ''Allocation for &lt;Project ID&gt;''.
==Changes to Project Transactions==
In some cases, the inconsistent logic of the creation of project transactions caused balance discrepancies. The following changes have been made to solve this issue:[anchor|#_48b187f9-20fd-41e9-b1fc-a53e243a2e81]
*If a pro forma invoice has a line with the ''Hold Remainder'' status on the '''Time and Material''' tab of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form, on the release of the corresponding AR invoice, the system creates an unbilled remainder transaction for such a line. The system also creates an unbilled remainder reversal transaction to eliminate the impact of the unbilled remainder transaction to the project balance.
*:The unbilled remainder transactions created before the upgrade do not affect the project balance. That is, these transactions have the '''Excluded From Balance''' check box selected on the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000]) form.
*On the [HelpRoot_FormReference\PM_20_75_00|Allocation Rules] ([~/?ScreenId=PM207500|PM207500]) form, the following options, which can be selected in the '''Reverse Allocation''' box on the '''Allocation Settings''' tab, have been renamed to make them less ambiguous:
**The ''On Project Billing'' option has been renamed to ''On AR Invoice Generation''.
**The ''On Invoice Release'' option has been renamed to ''On AR Invoice Release''.
*Allocation transactions are always reversed in the full amount.
*:The allocation transactions created with the ''On AR Invoice Generation'' reversal option are now reversed as follows:
**If the corresponding AR document is created with the ''Balanced'' status, the allocation reversal transaction is also created with the ''Balanced'' status.
**The allocation reversal transaction is automatically released when the corresponding AR document is released.
**The allocation reversal transaction is automatically deleted when the corresponding AR document is deleted.
*The inconsistent logic of the creation of reversal transactions has been corrected. In some cases, a reversal transaction copied the original transaction and reversed the sign of the amount. In other cases, the amount of a reversal transaction remained the same but the account groups in debit and credit sides were inverted (the flip logic). This difference resulted in inconsistency and made it hard to calculate and reconcile the project balance. Thus, the flip logic has been removed for reversal transactions.
*To give users the ability to easily identify WIP reversal transactions, the system now creates a separate batch of project transactions with the ''WIP Reversal'' option selected as the '''Orig. Doc. Type''' on the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] form.
[anchor|#_da8402da-5165-4261-9cda-d44978913f5c]
==Upgrade Notes==
Before the upgrade to Acumatica ERP 2020 R1, the administrator managing the upgrade should make sure that each active project satisfies the following conditions:[anchor|#_61d737ea-9bf1-422e-bae1-ea27b40d239b]
*The project has no unbilled reminders.
*The project has no related unreleased AR documents.

After the upgrade, the administrator should do the following:[anchor|#_22fb862a-2766-4f0e-ac64-c76306d885ee]
*On the [HelpRoot_FormReference\PM_50_40_00|Validate Project Balances] ([~/?ScreenId=PM504000|PM504000]) form, perform the validation for a random project.
*On the [HelpRoot_FormReference\PM_40_10_00|Project Transaction Details] ([~/?ScreenId=PM401000|PM401000]) form, make sure that unbilled remainders created before the upgrade have the '''Excluded from Balance''' check box selected.
]]></column>
			<column name="PlainText"><![CDATA[Project Accounting: Enhancements and Changes to UI In  Acumatica ERP 2020 R1, a number of changes have been made to improve the UI and usability of several processes,         project accounting forms, and forms of related functional areas. New Names for Project Transactions Forms The  Project Accounting  workspace has three form links with the same         name:  Project Transactions . This duplication may confuse users when they are         searching for a particular form by its name. Thus, the form names have been changed as         follows: The data entry form remains the same name   ([~/?ScreenId=PM304000|PM304000]) Project Transactions           (PM304000). The inquiry has been renamed to   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details           (PM401000). The report has been renamed to   ([~/?ScreenId=PM633000|PM633000]) Project Transaction Register (PM633000). Changes to Project Transaction Details (PM401000) Form Multiple changes have been made to the   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details (PM401000)     form. The Selection area has been improved as follows: The following elements, which a user can fill in to select transactions for display in           the table, have been added: Account : The system lists the project transactions with the               selected account in the  Debit Account  or  Credit                 Account  column. AR Doc. Type : The system lists the project transactions               associated with the AR document of the selected type and number. The document number               is selected in the  AR Doc. Nbr.  box. AR Doc. Nbr. : The system lists the project transactions               associated with the AR document of the selected number and type. The document type is               selected in the  AR Doc. Type  box. Tran. ID : The system lists the project transaction with this               identifier. Each of the following selection criteria define the list of transactions shown in the           table even if other selection criteria are not specified:  Project ,              Account Group ,  Account ,  AR Doc.             Type  and  AR Doc. Nbr. , and  Tran.             ID . Selection criteria work with the  AND  logical operator. That is, transactions are           listed in the table only if they meet all selected criteria. The following columns have been added to the table: Project : The identifier of the project associated with the           transaction. Pro Forma Ref. Nbr. : The reference number of the pro forma invoice      generated when the transaction was used in billing. The following columns have been added to the table but are hidden by default: Tran. ID : The identifier of the transaction. Old Orig. Doc. Nbr. : The column that was previously called              Orig. Doc. Nbr. . The system fills in the column as it did in           earlier versions of  Acumatica ERP. Excluded From Allocation : A check box that indicates (if selected)      that the transaction should not be allocated. Excluded From Balance : A check box that indicates (if selected) that      the transaction does not affect the project balance. Excluded From Billing : A check box that indicates (if selected) that      the transaction should not be billed. Excluded From Billing Reason : The reason the project transaction has           been excluded from billing, which can be one of the following options: Written-Off with Credit Memo <Nbr> : The transaction is offset by a credit               memo. Reversal of Tran. ID <Nbr> : The transaction is a reversal of another               transaction. Result of Credit Memo <Nbr> : The transaction is a result of the release of               a credit memo. Result of AR Invoice <Nbr> : The transaction is a result of the release of               an AR invoice. Reversed : The transaction has been reversed. Billable with Case <Nbr> : The transaction can be billed or has been               already billed through the case billing procedure. WIP Reversed  : The transaction is a WIP reversal transaction. The following columns in the table have been altered: Amount : The amount of the transaction. This was previously called the              Amount (Reversed)  column and has been renamed. The column also           shows the values of the  Amount (Normal)  column, which has been           removed. GL Batch Nbr. : The reference number of the corresponding GL batch of           transactions. This was previously called the  Batch Nbr.  column and           has been renamed. Orig. Doc. Nbr. : The number of the document that spawned the           transaction. That is, the transaction in this row has been generated during the release of           a document with the number specified in this column. Unlike the previous                Orig. Doc. Nbr.  column, the values of the  Orig. Doc.               Nbr.  column are now links that users can click to open the original             document on the corresponding data entry form. The system also supports for this column             more document types than it did with the previous  Orig. Doc. Nbr.              column. Allocated : A check box that indicates (if selected) that the           transaction has been allocated. In earlier versions of  Acumatica ERP, the  Allocated  check box was used for two different scenarios.             The system selected the check box for both transactions that should not be allocated and             transactions that had been already allocated. Now for these different scenarios, the             system uses the  Allocated  and  Excluded From               Allocation  check boxes as the table below shows. Allocated Excluded From Allocation The transaction was allocated Selected Cleared The transaction should not be allocated Cleared Selected Billed : A check box that indicates (if selected) that billing           transactions have been already generated for this transaction.  In earlier versions of                Acumatica ERP, the  Billed  check box was used for two different scenarios.             The system selected the check box for both transactions that should not be billed and             transactions that had been already billed. Now for these different scenarios, the system             uses the  Billed  and  Excluded From Billing              check boxes as the table below shows. Billed Excluded From Billing The transaction was billed Selected Cleared The transaction should not be billed Cleared Selected Navigation to Project Transaction Details (PM401000) Form from Other Forms To make it possible for users to easily find the project transactions that are related to an         AR invoice, the  Inquiries View Project Transactions  command has been added to the form toolbar of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. When a user clicks this command,         the system navigates to the   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details (PM401000) form and         shows all the project transactions related to the invoice. To make it possible for users to easily match GL and project  transactions, the            Project Tran. ID  column, which shows the project transaction         identifier, has been added to the tables of the   ([~/?ScreenId=GL404000|GL404000]) Account Details         (GL404000) and   ([~/?ScreenId=GL301000|GL301000]) Journal Transactions (GL301000) forms. The column is         hidden by default. When a user clicks the link in the column, the system navigates to the             ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details form with the project transaction         selected. Changes to Projects (PM301000) Form The following changes have been made to the boxes showing totals in the Summary area of the             ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form: The  Assets  box has been removed. Users can review project assets on           the  Balances  tab. The  Liability  box has been removed. Users can review project           liabilities on the  Balances  tab. The  Income  box has been renamed to  Actual             Income . The  Expenses  box has been renamed to  Actual             Expenses . The  Margin  box has been added to the form; this value is calculated           as the difference of the  Actual Income  and  Actual             Expenses . The margin  %  is calculated with the             following formula: 100*( Actual Income  -                  Actual Expenses )/ Actual               Income ) If the  Actual Income  is             zero, the margin  %  is also zero. If the  Actual               Expenses  is greater than the  Actual Income , the             margin  %  is calculated with the same formula and becomes             negative. New Description for Allocation Transactions To make it easy for users to identify a batch of allocation transactions, the system assigns         the following description to such a batch:  Allocation for <Project ID> . Changes to Project Transactions In some cases, the inconsistent logic of the creation of project transactions caused balance     discrepancies. The following changes have been made to solve this issue: If a pro forma invoice has a line with the  Hold Remainder  status on the              Time and Material  tab of the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form, on the release of the           corresponding AR invoice, the system creates an unbilled remainder transaction for such a           line. The system also creates an unbilled remainder reversal transaction to eliminate the           impact of the unbilled remainder transaction to the project balance. The unbilled             remainder transactions created before the upgrade do not affect the project balance.             That is, these transactions have the  Excluded From Balance  check             box selected on the   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details (PM401000)           form. On the   ([~/?ScreenId=PM207500|PM207500]) Allocation Rules (PM207500) form, the following options,           which can be selected in the  Reverse Allocation  box on the              Allocation Settings  tab, have been renamed to make them less             ambiguous: The  On Project Billing  option has been renamed to  On AR Invoice                 Generation . The  On Invoice Release  option has been renamed to  On AR Invoice                 Release . Allocation transactions are always reversed in the full amount. The allocation             transactions created with the  On AR Invoice Generation  reversal option are now             reversed as follows: If the corresponding AR document is created with the  Balanced  status, the               allocation reversal transaction is also created with the  Balanced  status. The allocation reversal transaction is automatically released when the corresponding               AR document is released. The allocation reversal transaction is automatically deleted when the corresponding               AR document is deleted. The inconsistent logic of the creation of reversal transactions has been corrected. In some           cases, a reversal transaction copied the original transaction and reversed the sign of the           amount. In other cases, the amount of a reversal transaction remained the same but the           account groups in debit and credit sides were inverted (the flip logic). This difference           resulted in inconsistency and made it hard to calculate and reconcile the project balance.           Thus, the flip logic has been removed for reversal transactions. To give users the ability to easily identify WIP reversal transactions, the system now           creates a separate batch of project transactions with the  WIP Reversal  option           selected as the  Orig. Doc. Type  on the   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details  form. Upgrade Notes Before the upgrade to  Acumatica ERP 2020 R1, the administrator managing the upgrade should make sure that each active project         satisfies the following conditions: The project has no unbilled reminders. The project has no related unreleased AR documents. After the upgrade, the administrator should do the following: On the   ([~/?ScreenId=PM504000|PM504000]) Validate Project Balances (PM504000) form, perform the validation      for a random project. On the   ([~/?ScreenId=PM401000|PM401000]) Project Transaction Details (PM401000) form, make sure that unbilled      remainders created before the upgrade have the  Excluded from Balance       check box selected. ]]></column>
		</row>
		<row PageID="6511b1b0-305a-4a98-bb56-87f160115f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d93f44a2-9bf6-41f1-da02-e88e9e807a6f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Now if the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, retainage can be calculated in one of the following ways:[anchor|#_c759ed05-c59b-4740-947c-707dcb8ee28d]
*As standard retainage: The standard processing of retainage that was used in previous versions of Acumatica ERP
*As standard retainage with steps: The standard processing of retainage that also allows users to specify a list of retainage percent values for the entire project to be applied in accordance with the project completion percent

If the ''Payment Application by Line'' feature is also enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, retainage can be calculated as follows:[anchor|#_24e770a5-3fad-41bb-b42c-bea5384a6e3e]
*As project cap retainage: The retainage percent and cap are specified at the project level. The retainage amount is allocated across the billed lines until the maximum value is reached.
*As project cap retainage with steps: This retainage works as project cap retainage does, but a list of retainage percent values can be specified for the entire project to be applied in accordance with the project completion percent.
*As project item cap retainage: The retainage percent and cap are specified at the line level, and the retainage amount and maximum cap are calculated individually for each line.

The sections below describe the corresponding retainage settings, their effect on the billing process, and any known limitations.{br}{TOC}
==Changes to the Project Templates (PM208000) form==
If the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the '''Retainage''' section is available on the '''Summary''' tab of the [HelpRoot_FormReference\PM_20_80_00|Project Templates] ([~/?ScreenId=PM208000|PM208000]) form (shown in the following screenshot), and retainage settings can be specified for each project template.[anchor|#_66c88766-407d-4eb8-9664-2b0accd77d8b][anchor|#_0e293594-df70-4639-96c9-017adffa310e][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_PrTempSettings.png|popup|Retainage settings on the Project Templates (PM208000) form|250px]
The following settings are included in this section:[anchor|#_52d928b6-8ec8-466e-9bb6-11d8b1e20aa7]
*'''Include CO''': A check box that indicates (if selected) that change order amounts are to be included in the calculation of the contract total for projects of the template.
*'''Retainage (%)''': The retainage percent to be used by default at the project level.
*'''Use Steps''': A check box that indicates (if selected) that the stepped processing of retainage is enabled. If this check box is selected, the '''Stepped Retainage''' table becomes available at the bottom of the '''Retainage''' section of settings (shown in the screenshot below).
[anchor|#_1ded51b6-6f3b-42f3-94ee-38483f88063f][anchor|#_50644eb2-e3cf-41f0-b747-4d678529589a][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_PrTempSettings_Stepped.png|popup|Stepped Retainage table|250px]
The '''Stepped Retainage''' table includes the following columns:[anchor|#_8e4a2c55-9c3e-4c3d-ba76-fcbb2281c6de]
*'''Threshold (%)''': The percent of project completion at which the value of the default retainage percent specified in the '''Retainage (%)''' box (see above) will automatically change to the value specified in the '''Retainage (%)''' column of this row.
*'''Retainage (%)''': The new retainage percent to be applied to the project revenue budget lines at the threshold of project completion specified in this row.

If the ''Payment Application by Line'' feature is also enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, the following boxes appear in the '''Retainage''' section (shown in the screenshot below):[anchor|#_e716d4ff-9e21-48a4-8d64-73be8c07e15f]
*'''Retainage Mode''': The mode that defines how retainage should be processed for the projects created based on the project template. (If needed, this setting can be later modified individually for a project.) The following options are available in this box:
**''Standard'': Retainage is processed as standard retainage.
**''Contract Cap'': Retainage is processed as contract cap retainage, with the retainage percent and cap specified at the project level. When the cap amount is reached, the total retained amount held for each project is reallocated across the invoice lines based on their weight and retainage capacity. If this mode is selected, the '''Cap (%)''' box appears in the section.
**''Contract Item Cap'': Retainage is processed as contract item cap retainage, with the retainage percent and cap specified at the project line level. This mode is used if a certain retainage amount for each revenue budget line shouldn&rsquo;t be exceeded. If this mode is selected, the '''Use Steps''' check box becomes unavailable.
*'''Cap (%)''': The cap of the project completion percent, which defines the maximum retainage amount held for each project. This value is used by default at the project level. This box appears in the section if the ''Contract Cap'' mode is selected in the '''Retainage Mode''' box.
[anchor|#_66bed168-23f4-4c1c-a5e9-72cb06fffd84][anchor|#_04b397c6-8db9-4d8c-b63b-d388e6277f84][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_PrTempSettings_Mode.png|popup|Retainage Mode and Cap (%) boxes in the Retainage section|250px]
==Changes to the Projects (PM301000) form==
If the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the following settings appear in the '''Retainage''' section of the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form (shown in the screenshot below):[anchor|#_3eb16757-7b3f-4369-b50d-281534ce8be7]
*'''Include CO''': A check box that indicates (if selected) that change order amounts are to be included in the calculation of the contract total for the project. The default value is inherited from the project template.
*'''Contract Total''': The sum of the original budgeted amounts of all project revenue budget lines if the '''Include CO''' check box is cleared, or the sum of the revised budgeted amounts of all project revenue budget lines if the '''Include CO''' check box is selected.
*'''Completed (%)''': The percent of project completion, which is calculated as follows:
*:{{'''Completed (%)''' = ('''Draft Invoice Amount''' total + '''Actual Amount''' total + '''Pending Invoice Amount''') total / '''Contract Total'''}}
*:The total amounts in this formula represent the sum of the values in the respective columns ('''Draft Invoice Amount''', '''Actual Amount''', and '''Pending Invoice Amount''') on the '''Revenue Budget''' tab.
*'''Total Retained Amount''': The total of the '''Total Retained Amount''' column on the '''Revenue Budget''' tab.
*'''Retainage (%)''': The retainage percent to be used by default for the project revenue budget lines. This setting can be modified, if needed.
*'''Use Steps''': A check box that indicates (if selected) that the stepped processing of retainage is enabled. If this check box is selected, the '''Stepped Retainage''' table becomes available at the bottom of the '''Retainage''' section of settings.
[anchor|#_13649f24-2ac6-4c49-a0bc-a84aeb20ac77][anchor|#_831ec6d2-17de-44f4-a470-e7b6fac1ba97][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_ProjectSettings.png|popup|Retainage settings on the Projects (PM301000) form|250px]
If the ''Payment Application by Line'' feature is also enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, the following elements appear in the '''Retainage''' section (shown in the following screenshot):[anchor|#_e19affb2-cc8a-461c-aaa3-e92c4e983faf]
*'''Retainage Mode''': The mode that defines how retainage is processed for the project. The default value is inherited from the project template, but the user can modify it if needed. The following options are available in this box:
**''Standard'': Retainage is processed as standard retainage.
**''Contract Cap'': Retainage is processed as contract cap retainage, with the retainage percent and cap specified at the project level. When the cap amount is reached, the total retained amount held for each project is reallocated across the invoice lines based on their weight and retainage capacity. If this mode is selected, the '''Cap (%)''' box appears in the section.
**''Contract Item Cap'': Retainage is processed as contract item cap retainage, with the retainage percent and cap specified at the project line level. This mode is used if a certain retainage amount for each revenue budget line shouldn&rsquo;t be exceeded. If this mode is selected, the '''Use Steps''' check box becomes unavailable.
*'''Cap (%)''': The cap of the project completion percent, which defines the maximum retainage amount held for each project. This box appears in the section only if the ''Contract Cap'' option is selected in the '''Retainage Mode''' box.
*:The cap amount is calculated as follows:
*:{{Cap Amount = '''Contract Total''' * '''Cap (%)''' * '''Retainage (%)'''}}
*:Once the '''Total Retainage Amount''' reaches the cap amount, no new retainage amount is calculated during the progress billing unless the cap amount is increased.
[anchor|#_42ce9b41-ee74-4ce6-98b1-ad4048a77d20][anchor|#_0c62cd1c-c47e-4719-9503-42cfab659fff][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_ProjectSettings_mode.png|popup|Retainage Mode and Cap (%) boxes on the Projects form|250px]
The following columns appear in the table on the '''Revenue Budget''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form (as shown in the screenshot below) if the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form:[anchor|#_87763219-a913-4cc6-a604-254c3f9e90e6]
*'''Retainage (%)''': The retainage percent specified in the '''Retainage (%)''' box on the '''Summary''' tab of the current form. This column is available only if the ''Standard'' or ''Contract Item Cap'' retainage mode is selected for the project and the '''Use Steps''' check box (in the '''Retainage''' section of the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form) is cleared. This setting can be modified for each line, if needed.
*'''Draft Retained Amount''': The total of retainage amounts for the lines of all pro forma invoices related to the revenue budget line that are on hold or open, plus the total of unreleased retainage for the lines of the unreleased AR invoices. This column is available if the ''Payment Application by Line'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
*'''Retained Amount''': Depending on whether the '''Pay by Line''' check box is selected in the Summary area of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form for the accounts receivable invoices related to the revenue budget line, the retained amount is calculated as follows:
**If the check box is selected, the retained amount is calculated as the sum of the '''Unreleased Retainage''' amount of the related AR invoice lines. The retained amount is automatically decreased when retainage is released—that is, when the '''Unreleased Retainage''' amount is decreased. Negative retainage amounts and retainage in credit memos are not considered in the calculation. For details, see the ''AC-152941'' known issue for Acumatica ERP2020 R1 on the [https://portal.acumatica.com/documentation/known-issues/|Acumatica Portal].
**If the check box is cleared, the retained amount is calculated as the sum of the '''Retainage Amount''' of the related AR invoice lines. The retained amount is not decreased because such AR invoices have no unreleased retainage balances. For details, see the ''AC-161988'' known issue for Acumatica ERP2020 R1 on the [https://portal.acumatica.com/documentation/known-issues/|Acumatica Portal].
*:The column is available if the ''Payment Application by Line'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
*'''Total Retained Amount''': The total retainage amount of all the lines of pro forma invoices with any status related to the revenue budget line. This column is available if the ''Payment Application by Line'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
[anchor|#_6db77212-d8ba-4bab-b19a-7da684774a8b][anchor|#_972afcca-f9e3-4622-bfd7-fac75ff880aa][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_Project_RevBudget.png|popup|Retainage columns on the Revenue Budget tab|450px]
Also, the following columns appear in the table on the '''Revenue Budget''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form if the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form and the ''Contract Item Cap'' retainage mode is selected in the '''Retainage Mode''' box in the '''Retainage''' section on the '''Summary''' tab of [HelpRoot_FormReference\PM_30_10_00|Projects] form:[anchor|#_608fa415-3dba-40c6-9c75-bf23731de616]
*'''Cap (%)''': The cap of the revenue budget line completion percent, which defines the maximum retainage amount held for each revenue budget line. By default is populated with the value of the '''Cap (%)''' box in the '''Retainage''' section of the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form. The value can be overridden.
*'''Retainage Cap Amount''': The cap amount of the revenue budget line, which is calculated as follows:
*:{{'''Retainage Cap Amount''' = Budgeted Amount * '''Cap (%)''' * '''Retainage (%)'''}}
*:The {{Budgeted Amount}} is the original budgeted amount of the revenue budget line if the '''Include CO''' check box is cleared in the '''Retainage''' section on the '''Summary''' tab of this form, or the revised budgeted amount of the revenue budget line if the '''Include CO''' check box is selected.
*:Once the '''Total Retainage Amount''' of the line reaches the '''Retainage Cap Amount''', no new retainage amount is calculated during the progress billing for the revenue budget line unless the '''Retainage Cap Amount''' is increased.

==Changes to the Pro Forma Invoices (PM307000) form==
On the '''Progress Billing''' tab of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form, the following columns appear in the table if the ''Retainage Support'' and ''Payment Application by Line'' features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form:[anchor|#_1fa3caf9-fe37-4e46-9499-4764141c1f50]
*'''Retainage (%)''': The retainage percent of the invoice line used for the calculation of the retainage amount held per line within the current invoice. This column is displayed on the form only if the ''Standard'' or ''Contract Item Cap'' retainage mode is selected for the project in the '''Retainage''' section of the '''Summary''' tab. (In the following screenshot, the column is not displayed because the ''Contract Cap'' retainage mode is selected in the example.)
*:If the stepped processing of retainage is configured for the project, the retainage percent is calculated based on the retainage steps used for the calculation of the retainage amount as follows: {{'''Retainage Total''' / '''Invoice Total''' * 100%}}.
*'''Retainage Amount''': The retainage amount calculated for the progress billing invoice line.
*'''Allocated Retained Amount''': The amount that indicates how the retained amount is allocated across the billed lines. This column is used for informational purposes and is displayed on the form only if the ''Contract Cap'' retainage mode is selected for the project in the '''Retainage''' section of the '''Summary''' tab.

The '''Retainage Total ''' in the Summary area of the form is the total of the '''Retainage Amount''' column on the '''Progress Billing''' tab. The following screenshot shows these new elements on the form.[anchor|#_06d319a0-deb3-45d8-9c38-4f84fe98c7ff][anchor|#_5db3e262-12e7-4998-acf5-2bac6dbd21fe][image:ReleaseNotes/Images/RN_2020_R1_Projects_Retainage_ProFormaSettings.png|popup|Retainage settings on the Progress Billing tab for the Contract Cap retainage mode|450px]
==Progress Billing==
The way retainage is processed during the progress billing depends on settings selected in the '''Retainage''' section of the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form: what retainage mode is selected for the project and whether the '''Use Steps''' check box is selected or cleared.{br}

For the ''Standard'' retainage mode with the '''Use Steps''' check box cleared for the project, the retainage percent specified on the [HelpRoot_FormReference\PM_30_10_00|Projects] form (also in the '''Retainage''' section of the '''Summary''' tab) is used by default for revenue budget lines and for the lines of AR invoices related to the project, which originate from the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form. The user can update the retainage percent at any time.{br}

This scenario is applicable if the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.{br}

For the ''Standard'' retainage mode with the '''Use Steps''' check box selected for the project, the user specifies a retainage percent for a particular project completion threshold in the '''Stepped Retainage''' table in the '''Retainage''' section of the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form. During the billing, the retainage percent that corresponds to the current project completion percent is used for revenue budget lines and for the lines of AR invoices related to the project, which originate from the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form{br}

This scenario is applicable if the ''Retainage Support'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.{br}

For the ''Contract Cap'' retainage mode with the '''Use Steps''' check box cleared for the project, the functionality works as follows:[anchor|#_1877bd15-ecea-4016-833f-ebbd3f9d908f]
#On the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form, the user specifies values in the '''Retainage (%)''' and '''Cap (%)''' boxes and selects or clears the '''Include CO''' check box depending on whether the contract total and project completion percent should be calculated based on the original revenue budget values or the revised ones.
#The system calculates the cap amount, which is the maximum retainage amount that can be held for the project.
#Progress billing with a pro forma invoice is performed for the project, the total retained amount held per project is validated for each pro forma invoice, and the retainage amount is calculated.
#Once the cap is reached and the total retained amount held per project is at its maximum, no new retainage amount is calculated, and reallocation of the allocated retained amount is performed based on the weight of the invoice lines.

On the [HelpRoot_FormReference\AR_51_00_00|Release AR Retainage] ([~/?ScreenId=AR510000|AR510000]) form, invoice lines can be filtered by various criteria, such as project, project task, account group, inventory ID, and cost code. On this form, the user can gradually release the retainage held to clear the unreleased retainage balance held on the AR invoice lines, thus decreasing the total retained amount held per project. Several retainage invoices may be generated during the processing because the lines are grouped by the parent AR invoice, and each retainage invoice can relate to only one AR invoice. In this case, the progress billing procedure follows the same rules so that the total retained amount would tend toward the cap amount once again. {br}

The scenario of releasing retainage by AR invoice lines and using the ''Contract Cap'' retainage mode is applicable if the ''Retainage Support'' and ''Payment Application by Line'' features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, the '''Create Pro Forma on Billing''' check box is selected for the project on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form, and the '''Pay by Line''' check box is selected for the AR invoice on the '''Financial Details''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.{br}

For the ''Contract Cap'' retainage mode with the '''Use Steps''' check box selected for the project, the scenario is similar to the previous one, but instead of a single retainage percent, the user can specify multiple retainage percent values that correspond to particular thresholds of project completion. If the project completion reaches a threshold and the retainage percent is changed, the system recalculates the cap amount, and the current and further billing iterations will be validated against the newly calculated cap figures.{br}

This scenario is applicable if the ''Retainage Support'' and ''Payment Application by Line'' features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form and the '''Create Pro Forma on Billing''' check box is selected for the project on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form.{br}

For the ''Contract Item Cap'' retainage mode, the scenario is similar to that for the ''Contract Cap'' retainage mode with the '''Use Steps''' check box cleared for the project, but it is performed for each line individually.{br}

This scenario is applicable if the ''Retainage Support'' and ''Payment Application by Line'' features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form and the '''Create Pro Forma on Billing''' check box is selected for the project on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form.((({S:Warn}For the ''Contract Cap'' and ''Contract Item Cap'' retainage modes, the '''Pay by Line''' check box is automatically selected and unavailable for editing on the '''Financial Details''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form for AR invoices that originate from pro forma invoices.
)))
==Time and Material Billing==
The time and material billing works only for the ''Standard'' retainage mode, as it worked in previous versions of Acumatica ERP, and the system always uses the retainage percent specified in the project settings. The time and material billing also supports the ''Standard'' retainage mode with the '''Use Steps''' check box selected in the retainage settings of the project on the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form.
==Limitations of the Retainage Processing==
The following limitations apply to the retainage processing.{br}

The ''Contract Cap'' and ''Contract Item Cap'' retainage modes are available for selection only if the ''Retainage Support'' and ''Payment Application by Line'' features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form. For these modes, the '''Pay by Line''' check box on the '''Financial Details''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form is selected and unavailable for editing for all AR invoices generated during the project billing.{br}

The ''Contract Cap'' retainage mode can be selected only if the '''Create Pro Forma on Billing''' check box is selected for the project on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form.{br}

Retainage with foreign currency documents is not supported. As a result, the base currency should be used as the billing currency. If a foreign currency is used as the project currency, the system will not be able to generate a pro forma invoice for the project.[anchor|#_1e952625-14fb-4ed6-9e90-183b7cc90da2]
==Known Issues==
After the upgrade to Acumatica ERP 2020 R1, users may encounter the issues listed in this section.{br}

'''Construction'''{br}

 '''AC-157710''': This issue may occur if before the upgrade to Acumatica ERP 2020 R1, the ''Construction'' feature was enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and subcontract preferences were not configured on the [HelpRoot_Construction\SC_10_10_00|Subcontracts Preferences] ([~/?ScreenId=SC101000|SC101000]) form. In this case, after the upgrade, if users attempt to approve documents, they will face an unexpected error about the missing configuration of the subcontract preferences.{br}

'''Workaround:''' An administrative user must open the [HelpRoot_Construction\SC_10_10_00|Subcontracts Preferences] form and click '''Save''' on the form toolbar.((({S:Warn}The administrative user does not need to make any changes to the subcontract preferences on the [HelpRoot_Construction\SC_10_10_00|Subcontracts Preferences] form. The '''Save''' button will be available on the form toolbar when the administrative user opens the form.
)))
'''AC-158331''': This issue may occur if before the upgrade to Acumatica ERP 2020 R1, the ''Construction'' feature was enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and compliance preferences were not configured on the [HelpRoot_Construction\CL_30_10_00|'''Compliance Preferences'''] ([~/?ScreenId=CL301000|CL301000]) form. In this case, after the upgrade, users will face an unhandled exception or an unexpected error about the missing configuration of the compliance preferences when they attempt to open any of the following forms:[anchor|#_f385d275-2ff1-471e-97c3-78c2fe583002]
*[HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000])
*[HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) 
*[HelpRoot_FormReference\PM_30_20_00|Project Tasks] ([~/?ScreenId=PM302000|PM302000])
*[HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000])
*[HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000])
*[HelpRoot_Construction\SC_30_10_00|Subcontracts] ([~/?ScreenId=SC301000|SC301000])
*[HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000])
*[HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000])
*[HelpRoot_FormReference\AP_30_20_00|Checks and Payments] ([~/?ScreenId=AP302000|AP302000])
*[HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000])
*[HelpRoot_FormReference\PM_30_80_00|Change Orders] ([~/?ScreenId=PM308000|PM308000])
*[HelpRoot_FormReference\PM_30_40_00|Project Transactions] ([~/?ScreenId=PM304000|PM304000])

'''Workaround:''' An administrative user must open the [HelpRoot_Construction\CL_30_10_00|'''Compliance Preferences'''] form and click '''Save''' on the form toolbar.((({S:Warn}The administrative user does not need to make any changes to the compliance preferences on the [HelpRoot_Construction\CL_30_10_00|'''Compliance Preferences'''] form. The '''Save''' button will be available on the form toolbar when the administrative user opens the form.
)))]]></column>
			<column name="PlainText"><![CDATA[Project Accounting: Enhancements to the Calculation of Retainage Now if the  Retainage Support  feature is enabled on the    ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, retainage can be calculated in one of     the following ways: As standard retainage: The standard processing of retainage that was used in previous           versions of  Acumatica ERPAs standard retainage with steps: The standard processing of retainage that also allows           users to specify a list of retainage percent values for the entire project to be applied           in accordance with the project completion percent If the  Payment Application by Line  feature is also enabled on the    ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, retainage can be calculated as follows: As project cap retainage: The retainage percent and cap are specified at the project level.           The retainage amount is allocated across the billed lines until the maximum value is           reached. As project cap retainage with steps: This retainage works as project cap retainage does, but           a list of retainage percent values can be specified for the entire project to be applied           in accordance with the project completion percent. As project item cap retainage: The retainage percent and cap are specified at the line           level, and the retainage amount and maximum cap are calculated individually for each           line. The sections below describe the corresponding retainage settings, their effect on the billing         process, and any known limitations. Changes to the Project Templates (PM208000) form If the  Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the            Retainage  section is available on the            Summary  tab of the   ([~/?ScreenId=PM208000|PM208000]) Project Templates         (PM208000) form (shown in the following screenshot), and retainage settings can be specified         for each project template. Retainage settings on the Project Templates (PM208000) form The following settings are included in this section: Include CO : A check box that indicates (if selected) that change           order amounts are to be included in the calculation of the contract total for projects of           the template. Retainage (%) : The retainage percent to be used by default at the      project level. Use Steps : A check box that indicates (if selected) that the stepped           processing of retainage is enabled. If this check box is selected, the  Stepped             Retainage  table becomes available at the bottom of the              Retainage  section of settings (shown in the screenshot           below). Stepped Retainage table The  Stepped Retainage  table includes the following columns: Threshold (%) : The percent of project completion at which the value           of the default retainage percent specified in the  Retainage (%)  box           (see above) will automatically change to the value specified in the  Retainage             (%)  column of this row. Retainage (%) : The new retainage percent to be applied to the project           revenue budget lines at the threshold of project completion specified in this row. If the  Payment Application by Line  feature is also enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, the following boxes appear in the            Retainage  section (shown in the screenshot below): Retainage Mode : The mode that defines how retainage should be           processed for the projects created based on the project template. (If needed, this setting           can be later modified individually for a project.) The following options are available in           this box: Standard : Retainage is processed as standard retainage. Contract Cap : Retainage is processed as                contract               cap retainage , with the retainage percent and cap specified at the               project level. When the cap amount is reached, the total retained amount held for each               project is reallocated across the invoice lines based on their weight and retainage               capacity. If this mode is selected, the  Cap (%)  box appears in               the section. Contract Item Cap : Retainage is processed as                contract               item cap retainage , with the retainage percent and cap specified at               the project line level. This mode is used if a certain retainage amount for each               revenue budget line shouldn't be exceeded. If this mode is selected, the                  Use Steps  check box becomes unavailable. Cap (%) : The cap of the project completion percent, which defines           the maximum retainage amount held for each project. This value is used by default at the           project level. This box appears in the section if the  Contract Cap  mode is selected           in the  Retainage Mode  box. Retainage Mode and Cap (%) boxes in the Retainage section Changes to the Projects (PM301000) form If the  Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the following settings appear in         the  Retainage  section of the  Summary  tab of         the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form (shown in the screenshot         below): Include CO : A check box that indicates (if selected) that change           order amounts are to be included in the calculation of the contract total for the project.           The default value is inherited from the project template. Contract Total : The sum of the original budgeted amounts of all           project revenue budget lines if the  Include CO  check box is           cleared, or the sum of the revised budgeted amounts of all project revenue budget lines if           the  Include CO  check box is selected. Completed (%) : The percent of project completion, which is calculated           as follows: Completed (%)  = ( Draft Invoice                 Amount  total +  Actual Amount  total +                  Pending Invoice Amount ) total /  Contract                 Total The total amounts in this formula represent the sum             of the values in the respective columns ( Draft Invoice Amount ,                Actual Amount , and  Pending Invoice               Amount ) on the  Revenue Budget  tab. Total Retained Amount : The total of the  Total Retained             Amount  column on the  Revenue Budget  tab. Retainage (%) : The retainage percent to be used by default for           the project revenue budget lines. This setting can be modified, if needed. Use Steps : A check box that indicates (if selected) that the           stepped processing of retainage is enabled. If this check box is selected, the              Stepped Retainage  table becomes available at the bottom of the              Retainage  section of settings. Retainage settings on the Projects (PM301000) form If the  Payment Application by Line  feature is also enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, the following elements appear in the       Retainage  section (shown in the following screenshot): Retainage Mode : The mode that defines how retainage is processed for           the project. The default value is inherited from the project template, but the user can           modify it if needed. The following options are available in this box: Standard : Retainage is processed as standard retainage. Contract Cap : Retainage is processed as contract cap retainage, with the               retainage percent and cap specified at the project level. When the cap amount is               reached, the total retained amount held for each project is reallocated across the               invoice lines based on their weight and retainage capacity. If this mode is selected,               the  Cap (%)  box appears in the section. Contract Item Cap : Retainage is processed as contract item cap retainage,               with the retainage percent and cap specified at the project line level. This mode is               used if a certain retainage amount for each revenue budget line shouldn't be exceeded.               If this mode is selected, the  Use Steps  check box becomes               unavailable. Cap (%) : The cap of the project completion percent, which defines the           maximum retainage amount held for each project. This box appears in the section only if           the  Contract Cap  option is selected in the  Retainage Mode              box. The cap amount is calculated as follows: Cap Amount =                  Contract Total  *  Cap (%)  *                  Retainage (%) Once the  Total               Retainage Amount  reaches the cap amount, no new retainage amount is             calculated during the progress billing unless the cap amount is increased. Retainage Mode and Cap (%) boxes on the Projects form The following columns appear in the table on the  Revenue Budget  tab of         the   ([~/?ScreenId=PM301000|PM301000]) Projects form (as shown in the screenshot below) if         the  Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form: Retainage (%) : The retainage percent specified in the              Retainage (%)  box on the  Summary  tab of           the current form. This column is available only if the  Standard  or  Contract Item             Cap  retainage mode is selected for the project and the  Use             Steps  check box (in the  Retainage  section of the              Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects           form) is cleared. This setting can be modified for each line, if needed. Draft Retained Amount : The total of retainage amounts for the lines           of all pro forma invoices related to the revenue budget line that are on hold or open,           plus the total of unreleased retainage for the lines of the unreleased AR invoices. This           column is available if the  Payment Application by Line  feature is enabled on the               ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Retained Amount : Depending on whether the  Pay by             Line  check box is selected in the Summary area of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form for the accounts receivable           invoices related to the revenue budget line, the retained amount is calculated as             follows: If the check box is selected, the retained amount is calculated as the sum of the                  Unreleased Retainage  amount of the related AR invoice lines.               The retained amount is automatically decreased when retainage is released—that is,               when the  Unreleased Retainage  amount is decreased. Negative               retainage amounts and retainage in credit memos are not considered in the calculation.               For details, see the  AC-152941  known issue for  Acumatica ERP2020 R1 on the  Acumatica Portal Acumatica Portal. If the check box is cleared, the retained amount is calculated as the sum of the                  Retainage Amount  of the related AR invoice lines. The               retained amount is not decreased because such AR invoices have no unreleased retainage               balances. For details, see the  AC-161988  known issue for  Acumatica ERP2020 R1 on the  Acumatica Portal Acumatica Portal. The column is available if the  Payment Application by Line  feature is             enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Total Retained Amount : The total retainage amount of all the lines of           pro forma invoices with any status related to the revenue budget line. This column is           available if the  Payment Application by Line  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Retainage columns on the Revenue Budget tab Also, the following columns appear in the table on the  Revenue           Budget  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form if the            Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form and the  Contract Item Cap  retainage         mode is selected in the  Retainage Mode  box in the            Retainage  section on the  Summary  tab of             ([~/?ScreenId=PM301000|PM301000]) Projects form: Cap (%) : The cap of the revenue budget line completion percent,           which defines the maximum retainage amount held for each revenue budget line. By default           is populated with the value of the  Cap (%)  box in the              Retainage  section of the  Summary  tab of           the   ([~/?ScreenId=PM301000|PM301000]) Projects form. The value can be overridden. Retainage Cap Amount : The cap amount of the revenue budget line,           which is calculated as follows: Retainage Cap Amount  =               Budgeted Amount *  Cap (%)  *  Retainage                 (%) The  Budgeted Amount  is the original             budgeted amount of the revenue budget line if the  Include CO              check box is cleared in the  Retainage  section on the                Summary  tab of this form, or the revised budgeted amount of the             revenue budget line if the  Include CO  check box is             selected. Once the  Total Retainage Amount  of the line             reaches the  Retainage Cap Amount , no new retainage amount is             calculated during the progress billing for the revenue budget line unless the                Retainage Cap Amount  is increased. Changes to the Pro Forma Invoices (PM307000) form On the  Progress Billing  tab of the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form, the following columns appear in         the table if the  Retainage Support  and  Payment Application by Line  features         are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form: Retainage (%) : The retainage percent of the invoice line used for           the calculation of the retainage amount held per line within the current invoice. This           column is displayed on the form only if the  Standard  or  Contract Item Cap            retainage mode is selected for the project in the  Retainage  section           of the  Summary  tab. (In the following screenshot, the column is not           displayed because the  Contract Cap  retainage mode is selected in the example.) If             the stepped processing of retainage is configured for the project, the retainage percent             is calculated based on the retainage steps used for the calculation of the retainage             amount as follows:  Retainage Total  /  Invoice                 Total  * 100% . Retainage Amount : The retainage amount calculated for the           progress billing invoice line. Allocated Retained Amount : The amount that indicates how the           retained amount is allocated across the billed lines. This column is used for           informational purposes and is displayed on the form only if the  Contract Cap            retainage mode is selected for the project in the  Retainage  section           of the  Summary  tab. The  Retainage Total   in the Summary area of the form is the total of         the  Retainage Amount  column on the  Progress           Billing  tab. The following screenshot shows these new elements on the         form. Retainage settings on the Progress Billing tab for the Contract Cap retainage           mode Progress Billing The way retainage is processed during the progress billing depends on settings selected in         the  Retainage  section of the  Summary  tab of         the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form: what retainage mode is         selected for the project and whether the  Use Steps  check box is         selected or cleared. For the  Standard  retainage mode with the  Use Steps  check box         cleared for the project, the retainage percent specified on the   ([~/?ScreenId=PM301000|PM301000]) Projects form (also in the  Retainage          section of the  Summary  tab) is used by default for revenue budget         lines and for the lines of AR invoices related to the project, which originate from the             ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. The user can update the         retainage percent at any time. This scenario is applicable if the  Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. For the  Standard  retainage mode with the  Use Steps  check box         selected for the project, the user specifies a retainage percent for a particular project         completion threshold in the  Stepped Retainage  table in the            Retainage  section of the  Summary  tab of the             ([~/?ScreenId=PM301000|PM301000]) Projects form. During the billing, the retainage         percent that corresponds to the current project completion percent is used for revenue         budget lines and for the lines of AR invoices related to the project, which originate from         the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form This scenario is applicable if the  Retainage Support  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. For the  Contract Cap  retainage mode with the  Use Steps  check         box cleared for the project, the functionality works as follows: On the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form, the user specifies values in the              Retainage (%)  and  Cap (%)  boxes and           selects or clears the  Include CO  check box depending on whether the           contract total and project completion percent should be calculated based on the original           revenue budget values or the revised ones. The system calculates the cap amount, which is the maximum retainage amount that can be           held for the project. Progress billing with a pro forma invoice is performed for the project, the total           retained amount held per project is validated for each pro forma invoice, and the           retainage amount is calculated. Once the cap is reached and the total retained amount held per project is at its           maximum, no new retainage amount is calculated, and reallocation of the allocated retained           amount is performed based on the weight of the invoice lines. On the   ([~/?ScreenId=AR510000|AR510000]) Release AR Retainage (AR510000) form, invoice lines can be         filtered by various criteria, such as project, project task, account group, inventory ID,         and cost code. On this form, the user can gradually release the retainage held to clear the         unreleased retainage balance held on the AR invoice lines, thus decreasing the total         retained amount held per project. Several retainage invoices may be generated during the         processing because the lines are grouped by the parent AR invoice, and each retainage         invoice can relate to only one AR invoice. In this case, the progress billing procedure         follows the same rules so that the total retained amount would tend toward the cap amount         once again.  The scenario of releasing retainage by AR invoice lines and using the  Contract Cap          retainage mode is applicable if the  Retainage Support  and  Payment Application by           Line  features are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form,         the  Create Pro Forma on Billing  check box is selected for the project         on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form, and the  Pay by Line  check box is selected for the AR invoice         on the  Financial Details  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. For the  Contract Cap  retainage mode with the  Use Steps  check         box selected for the project, the scenario is similar to the previous one, but instead of a         single retainage percent, the user can specify multiple retainage percent values that         correspond to particular thresholds of project completion. If the project completion reaches         a threshold and the retainage percent is changed, the system recalculates the cap amount,         and the current and further billing iterations will be validated against the newly         calculated cap figures. This scenario is applicable if the  Retainage Support  and  Payment Application by           Line  features are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form and         the  Create Pro Forma on Billing  check box is selected for the project         on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form. For the  Contract Item Cap  retainage mode, the scenario is similar to that for the            Contract Cap  retainage mode with the  Use Steps  check box         cleared for the project, but it is performed for each line individually. This scenario is applicable if the  Retainage Support  and  Payment Application by           Line  features are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form and         the  Create Pro Forma on Billing  check box is selected for the project         on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form. For the  Contract Cap  and  Contract Item Cap  retainage modes, the            Pay by Line  check box is automatically selected and unavailable for         editing on the  Financial Details  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form for AR invoices that originate from pro forma         invoices. Time and Material Billing The time and material billing works only for the  Standard  retainage mode, as it worked         in previous versions of  Acumatica ERP, and         the system always uses the retainage percent specified in the project settings. The time and         material billing also supports the  Standard  retainage mode with the  Use           Steps  check box selected in the retainage settings of the project on the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form. Limitations of the Retainage Processing The following limitations apply to the retainage processing. The  Contract Cap  and  Contract Item Cap  retainage modes are available for         selection only if the  Retainage Support  and  Payment Application by Line          features are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form.         For these modes, the  Pay by Line  check box on the            Financial Details  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form is selected and unavailable for         editing for all AR invoices generated during the project billing. The  Contract Cap  retainage mode can be selected only if the  Create Pro           Forma on Billing  check box is selected for the project on the            Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects         (PM301000) form. Retainage with foreign currency documents is not supported. As a result, the base currency         should be used as the billing currency. If a foreign currency is used as the project         currency, the system will not be able to generate a pro forma invoice for the project. Known Issues After the upgrade to  Acumatica ERP 2020 R1, users may encounter the issues listed in this section. Construction AC-157710 : This issue may occur if before the upgrade to  Acumatica ERP 2020 R1, the  Construction  feature was enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and subcontract preferences were         not configured on the   ([~/?ScreenId=SC101000|SC101000]) Subcontracts Preferences (SC101000) form. In this         case, after the upgrade, if users attempt to approve documents, they will face an unexpected         error about the missing configuration of the subcontract preferences. Workaround:  An administrative user must open the   ([~/?ScreenId=SC101000|SC101000]) Subcontracts Preferences form and click  Save  on the         form toolbar. The administrative user does not need to make any changes to the subcontract preferences         on the   ([~/?ScreenId=SC101000|SC101000]) Subcontracts Preferences form. The  Save          button will be available on the form toolbar when the administrative user opens the         form. AC-158331 : This issue may occur if before the upgrade to  Acumatica ERP 2020 R1, the  Construction  feature was enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and compliance preferences were not         configured on the   ([~/?ScreenId=CL301000|CL301000]) '''Compliance Preferences''' (CL301000) form. In this         case, after the upgrade, users will face an unhandled exception or an unexpected error about         the missing configuration of the compliance preferences when they attempt to open any of the         following forms:  ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000)  ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000)   ([~/?ScreenId=PM302000|PM302000]) Project Tasks (PM302000)  ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000)  ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000)  ([~/?ScreenId=SC301000|SC301000]) Subcontracts (SC301000)  ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000)  ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000)  ([~/?ScreenId=AP302000|AP302000]) Checks and Payments (AP302000)  ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000)  ([~/?ScreenId=PM308000|PM308000]) Change Orders (PM308000)  ([~/?ScreenId=PM304000|PM304000]) Project Transactions (PM304000) Workaround:  An administrative user must open the   ([~/?ScreenId=CL301000|CL301000]) '''Compliance Preferences''' form and click  Save  on the         form toolbar. The administrative user does not need to make any changes to the compliance preferences         on the   ([~/?ScreenId=CL301000|CL301000]) '''Compliance Preferences''' form. The  Save          button will be available on the form toolbar when the administrative user opens the         form. ]]></column>
		</row>
		<row PageID="afdbb095-8c42-4ad9-9c5f-c1013e5c539f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="57073c22-a549-e205-e0cc-3e8c7241a193" RecordSourceID="22377">
			<column name="Content"><![CDATA[
On several forms related to services, the '''Services''', '''Inventory Items''', and '''Pickup/Delivery Items''' tabs have been replaced with the new '''Details''' tab, as the following screenshot shows. This merged tab can be found on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]), [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]), [HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100]), and [HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600]) forms. On this tab, a user can now add services, inventory items, and items that have been picked up and delivered. The '''Line Type''' column indicates which of these items the particular line holds.[anchor|#_0740d967-2d43-48d5-ae74-a04682729ea5][anchor|#_bf4fb3e9-3b91-4f69-bea6-0044827c36d9][image:ReleaseNotes/Images/RN_2020R1_Services_Details_Tab.png|popup|The Details tab on the Appointments form|450px]
On [HelpRoot_FormReference\FS_30_57_00|Service Contracts] ([~/?ScreenId=FS305700|FS305700]) and [HelpRoot_FormReference\FS_30_08_00|Route Service Contracts] ([~/?ScreenId=FS300800|FS300800]) forms, the '''Service Prices''' and '''Inventory Item Prices''' tab have been replaced with the '''Prices''' tab, on which users can specify prices for services, non-stock, and stock items.{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Services: Merging of Tabs On several forms related to services, the  Services ,            Inventory Items , and  Pickup/Delivery Items          tabs have been replaced with the new  Details  tab, as the following         screenshot shows. This merged tab can be found on the   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100),   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200),   ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules (FS305100), and   ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules (FS305600) forms. On this tab, a user can now add         services, inventory items, and items that have been picked up and delivered. The            Line Type  column indicates which of these items the particular line         holds. The Details tab on the Appointments form On   ([~/?ScreenId=FS305700|FS305700]) Service Contracts (FS305700) and   ([~/?ScreenId=FS300800|FS300800]) Route Service Contracts (FS300800) forms, the  Service           Prices  and  Inventory Item Prices  tab have been replaced         with the  Prices  tab, on which users can specify prices for services,         non-stock, and stock items. ]]></column>
		</row>
		<row PageID="20cd06ca-5e83-4761-b71f-d346d4b0a70b" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="95251339-a97a-77ad-6399-8aec57a92cdc" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, new elements have been added to the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form that make it possible for users to track and log time by invoking starting and completion actions.{br}

This topic describes the most common scenarios, the new elements that have been added to the system, and the specific actions users can invoke on the UI.{br}{TOC}
==Most Common User Scenarios==
The following scenarios related to the tracking of time during appointments can be performed by using new elements on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form:[anchor|#_016eeee6-f58c-44fe-877d-7ca75a476d2c]
*Log the time spent on traveling for staff members that travel. The most common user scenario would be a staff member wanting to log time for travel without adding a travel item (that is, a non-stock item defined in the system as representing a particular travel service) to an appointment.
*Start and complete a travel item that is defined in the system as a service, and log time for the staff members that travel. In the most common user scenario, a staff member wants to log time for one travel item for trips that take place during an appointment (with a specific fee and billing rate) and for another travel item for a trip made to and from the appointment (with a different fee and billing rate).
*Start and complete a specific service, and log time for the staff members that perform it (if any staff members are assigned). In the most common user scenario, when a service manager creates and schedules an appointment, the manager adds services and assigns staff members to the appointment, but does not assign staff members to the services. During the appointment, each staff member selects the service that this employee is going to perform, starts it in the system, and then reflects its completion in the system. 
*Log time for multiple staff members by starting and completing the specific services to which they are assigned (if the staff members are assigned to any services). In the most common scenario, when a service manager creates and schedules an appointment, the manager adds services to the appointment and assigns staff members to the specific services. During the appointment, each staff member selects the service to perform, and starts it and completes it in the system.
*Start and complete multiple services, and log time for all the staff members that are assigned to perform these services (if any staff members are assigned to the services). There are two common user scenarios of this series of actions.
*:In the first user scenario, when a service manager creates and schedules an appointment, the manager adds services to the appointment and assigns individual staff members to the specific services. During the appointment, the team leader selects multiple services to be started and completed. The services are started and completed for all staff members assigned to the services.
*:In the second user scenario, when a service manager creates and schedules an appointment, the manager also adds services to the appointment, but in this case, the manager assigns only one staff member to the appointment. When the appointment is started, the staff member starts the logging of time for the whole appointment (that is, no service is assigned to the log line on the '''Log''' tab). During the appointment, the staff member selects services to start and complete. The services will be started and completed and the time will be tracked for them, but the labor for the staff member will not be registered for each particular service because the staff member’s time is registered for the whole appointment. When the appointment is completed, the staff members completes the logging of time for the whole appointment. 

==The Log Tab==
The new '''Log''' tab has been added to the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, as shown in the following screenshot, to provide users with a breakdown of the time that was tracked for an appointment.[anchor|#_0caf22ec-685d-4a64-a725-0712e62378e3][anchor|#_5d861101-e9d0-4164-a107-a7aa94d564b2][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_13.png|popup|The Log tab|450px]
When a user selects a line on the '''Details''' tab and clicks the '''Start''' button on the table toolbar, the system creates new log lines on the '''Log''' tab for the item selected in the selected line, which might be a service, a travel item, or a non-stock item. In the table on the '''Log''' tab, users can do the following:[anchor|#_6f6fd53a-199c-477d-9c96-bd845fe6aace]
*In the '''Log Line Status''' column, manually change the status of a particular log line.
*In the '''Travel''' column, select or clear the check box to specify that the time is logged for travel or a service.
*In the '''Detail Line Ref.''' column, select or modify the reference number that represents the service for which the time is logged. The numbers in this column correspond to the numbers in the '''Line Ref. '''column on the '''Details''' or '''Staff''' tab of the current form.
*In the '''Start Time''', '''End Time''', and '''Duration''' columns, modify the times or the duration of the log line.
*In the '''Add to Actual Duration''' column, select or clear the check box to make the system include or exclude, respectively, the duration of the log line in the duration of the related service line, which is recorded in the '''Actual Duration''' column of the '''Details''' tab.
*In the '''Track Time''' column, select or clear the check box to turn on or turn off, respectively, tracking time for the line in time activities of staff members.
*In the '''Earning Type''', '''Labor Item ID''', '''Project Task''', '''Cost Code''', '''Time Card Ref. Nbr.''', and '''Approved''' columns, select or modify other settings related to time activities and projects.

==New Buttons on the Details and Staff Tabs==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, a user can now start logging time for (on the '''Log''' tab), finish logging time for, or cancel any service item, non-stock item, or travel item listed on the '''Details''' tab. The user clicks the line with the item in the table and then clicks one of the following buttons, which have been added to the table toolbar of the tab, as the following screenshot shows:[anchor|#_cb6ad5ec-2094-4f65-9529-c69fff12ef0b]
*'''Start''': Opens the '''Perform Action''' dialog box with the ''Start'' action selected. In this dialog box, the user can modify the logging option and the start time (which has been filled in automatically); in the table of the dialog box, the user selects the unlabeled check boxes for the staff members and services for which the time will be tracked for the item. When the user clicks '''OK''' in the dialog box, the system closes the dialog box, creates the related log lines, begins logging time on the '''Log''' tab, and changes the status of the item and the log lines to ''In Process''.
*:This button is available for service lines only if the appointment has the ''In Process'' status and the selected line has the ''Not Started'' or ''In Process'' status. This button is available for travel lines only if the appointment has the ''Not Started'', ''In Process'', or ''Completed'' status and the line has the ''Not Started'' or ''In Process'' status.
*'''Complete''': Opens the '''Perform Action''' dialog box with the ''Complete'' action selected. In this dialog box, the user can modify the logging option and the end time (which has been filled in automatically); in the table of the dialog box, the user makes sure that the necessary unlabeled check boxes are selected in the table. When the user clicks '''OK''' in the dialog box, the system closes the dialog box, updates the line on the '''Log''' tab, and changes the status of the item and the related log lines to ''Completed''. 
*:This button is available for service lines only if the appointment has the ''In Process'' status and the selected line has the ''Not Started'' or ''In Process'' status. This button is available for travel lines only if the appointment has the ''Not Started'', ''In Process'', or ''Completed'' status and the line has the ''Not Started'' or ''In Process'' status.
*'''Cancel''': Changes the status of the selected line to ''Canceled''. 
*:This button is available for service lines only if the selected line has the ''Not Started'' status.
[anchor|#_8dd233f4-0536-44bc-915d-a926f5f85a04][anchor|#_9c62e0a2-f924-4f3a-accf-7758a986cc3e][image:ReleaseNotes/Images/RN_2020R1_Services_Line_Statuses_3.png|popup|New buttons on the table toolbar of the Details tab|400px]
The '''Start''' and '''Complete''' buttons have also been added to the table toolbar of the '''Staff''' tab, as the following screenshot shows. They work similarly to the buttons on the table toolbar of the '''Details''' tab.[anchor|#_a702d978-4fa1-429e-bca4-7dbebfb0a6a5][anchor|#_45d78d25-8a3c-4cd5-9cbe-85bd2e0dcde0][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_20.png|popup|New buttons on the table toolbar of the Staff tab|400px]
==Logging of Travel Time==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, users can now log time spent on traveling for the appointment as a whole. To make this possible, the '''Start Travel''' and '''Complete Travel''' menu commands have been added to the '''Actions''' menu on the form toolbar, as the following screenshot shows.[anchor|#_ee4b93fc-00f8-4886-a555-b7e297d14e90][anchor|#_30c1452d-0c4a-499c-8e2e-d33acd6dbfb4][image:ReleaseNotes/Images/RN_2020_R1_Service_Lod_Travel_Time.png|popup|The Start Travel and Complete Travel actions|400px]
When the travel is starting, a user clicks '''Actions''' > '''Start Travel''' on the form toolbar, and the system opens the new '''Perform Actions''' dialog box with the ''Start'' action and the ''Travel'' logging option selected, as the following screenshot shows. In this dialog box, the user can modify the start time of the travel (if necessary) and select the unlabeled check boxes in the table for the staff members for which the travel is started. By default, the currently signed-in user is selected.[anchor|#_3971ddb0-7236-4ca7-8305-ab3c356bd1f0][anchor|#_3340f6cb-3ed3-4f29-b1a3-7bf5164fe71d][image:ReleaseNotes/Images/RN_2020_R1_Service_Lod_Travel_Time_2.png|popup|The Perform Action dialog box|250px]
After specifying all the necessary settings, the user clicks '''OK''', and on the '''Log''' tab, the system creates log lines for each selected staff member for the travel.{br}

When the travel is complete, the user clicks '''Actions''' > '''Complete Travel''' on the form toolbar. The system opens the '''Perform Actions''' dialog box with the ''Complete'' action and the ''Travel'' logging option selected, as well as the end time filled in; the system selects the same staff members that were selected when the travel was started. The user can modify the completion time of the travel and select staff members for which the travel is completed. The user then clicks '''OK''', and on the '''Log''' tab, the system updates the log lines related to the travel with the appropriate '''End Time''' and '''Duration''' values, and changes the '''Log Line Status''' to ''Completed''. For the log lines related to travel, the check box in the '''Travel''' column is selected, as shown in the line in the following screenshot.[anchor|#_25ccf7dc-f570-49b6-949c-954e4058db3f][anchor|#_3b122f93-9238-4367-b285-0ff2e9d719b7][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_3.png|popup|Travel log line|450px]
==Starting and Completion of a Travel Item==
During service configuration, users can also create the needed travel items in the system—that is, service items that represent a particular type of travel, such as travel to or from the appointment or travel, to procure supplies during the appointment—so that the travel time of each item during an appointment can be tracked. When a travel item is created, on the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form, the user selects ''Service'' in the '''Type''' box and selects the '''Is a Travel Item''' check box on the '''General Settings''' tab, specifies other necessary settings for the item, as the following screenshot shows.[anchor|#_4513dd57-beab-4b85-8fe9-15f92ed102a2][anchor|#_0abdaa8d-8c4e-4591-a44e-e2aba123d601][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_5.png|popup|Required settings for a travel item|350px]
This travel item can be added to an appointment on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form. On this tab, a user can start tracking time for a travel item by clicking the line with the travel item in the table and clicking '''Start''' on the table toolbar. The system opens the '''Perform Actions''' dialog box with the ''Start'' action, the ''Travel'' logging option, the time, and the service line reference number filled in. In the dialog box, the user can modify the default settings as needed, and select the unlabeled check boxes in the table for the staff members who are involved in the travel. (See the following screenshot.) By default, the currently signed-in user is selected.[anchor|#_7ca1549e-787a-4961-8f19-912fabab92d5][anchor|#_3211f56a-af7a-4796-8ccb-6ab98823f66d][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_14.png|popup|The Perform Actions dialog box for starting a travel item for multiple staff members|250px]
When the user clicks '''OK''', on the '''Log''' tab, the system creates a log line for each selected staff member and fills in the start time. {br}

When the travel associated with this travel item is completed, one of the users can complete it in the system by clicking the travel line in the table on the '''Details''' tab and clicking '''Complete''' on the table toolbar. The system opens the '''Perform Actions''' dialog box with the ''Complete'' action and the ''Travel'' logging option. In the dialog box, the user can modify the end time, if needed, and make any needed changes (the system automatically selects the staff members that had been selected when the travel item was started), as shown in the following screenshot.[anchor|#_2c58a33d-ea37-4844-ae00-136ebe06f3ce][anchor|#_b1d21b52-50ee-4caf-8aa2-9c808bc93ba5][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_16.png|popup|The Perform Actions dialog box for completing travel for multiple staff members|250px]
When the user clicks '''OK''', on the '''Log''' tab, the system completes the log line (that is, changes the '''Log Line Status''' to ''Completed'') for each selected staff member and specifies the end time and duration. In the following screenshot, notice that the system has created and completed a log line for the selected staff member, specified the travel item (''APPTRAVEL'') for both lines, and selected the check box in the '''Travel''' column for the lines.[anchor|#_e18dfdae-42a7-42b2-88df-647e8adb0ce7][anchor|#_c5895146-f2db-488c-838d-eaf2ca01b8a1][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_18.png|popup|Travel item log line|450px]
Also, the user can start tracking time for a particular travel item by using the '''Start Travel''' action of the '''Actions''' menu on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form. To give users such an ability, during the system configuration, on the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form, in the '''Default Travel Item''' box of the '''Preferences''' tab (see the following screenshot), an administrative user selects the travel item that the system will specify in the '''Inventory ID''' column of the '''Log''' tab when the travel is started. If the travel item had not been assigned to the appointment before the travel had started, the system will add the travel item to the appointment.[anchor|#_6f2e5433-0446-4a8a-b6e4-b762c3074bc3][anchor|#_558041fe-00c8-4e34-9237-75f8f6c7cb6f][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_21.png|popup|The Default Travel Item box on the Service Order Types form|350px]
==Starting and Completion of a Specific Service==
An appointment may be defined in the system with the services defined and with the staff members assigned to the appointment, but staff members may not be assigned to services. During the appointment, a staff member selects the service that they are going to perform, starts it in the system (selecting any staff members that will also perform it), and then reflects its completion in the system. {br}

In this case, on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, a user can now start the logging of time for a specific service by clicking the service line in the table and then clicking '''Start''' on the table toolbar. The system opens the '''Perform Actions''' dialog box with the ''Start'' action and the ''Service'' logging option selected. The user can modify the start time (which the system has filled in) and the service line reference number, if needed; the user also selects the staff member or members who are starting work on the service. By default, the currently signed-in user is selected.[anchor|#_808c8e43-f387-4cec-a9cd-3c2905115bc9][anchor|#_20d0a669-65a7-4176-b196-031355f3808c][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_6.png|popup|The Perform Action dialog box for starting a specific service|250px]
When the user clicks '''OK''', the system creates a log line on the '''Log''' tab for each selected staff member and fills in the selected service and the start time. In the following screenshot, notice that the system has created one line to log the time for the selected staff member and specified service for the line. [anchor|#_26a7d5a9-3d57-4eb0-9916-3d3ef2ed6ccb][anchor|#_3973ccda-a53a-4d7a-9969-9790f90a8a22][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_19.png|popup|Service log line|450px]
When the service is finished, a user can complete it in the system by clicking the service line in the table and clicking '''Complete''' on the table toolbar. The system opens the '''Perform Actions''' dialog box with the ''Complete'' action and the ''Service'' logging option selected; if needed, the user can modify the end time and make changes to the staff members involved in performing the completed service.{br}

When the user clicks '''OK''', the system completes the log line for each selected staff member and specifies the end time and duration on the '''Log''' tab. 
==Logging of Time for Multiple Staff Members and Starting and Completion of Services to Which They Are Assigned==
Services and staff members may be assigned to an appointment when it is scheduled, but some staff members may not be assigned to specific services. During the appointment, staff members select the services they are going to perform, start them in the system at the appropriate time, and then reflect their completion in the system when they are finished. If the staff members have been not been assigned to any services, time can be logged for the staff members.{br}

In this case, to log staff member time and start services, the user selects the staff member on the '''Staff''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form and clicks '''Start''' on the table toolbar. The system opens the '''Perform Actions''' dialog box with the ''Start'' action and the ''Staff and Service (If Any)'' logging option selected and the start time filled in. The user modifies the start time if necessary, and makes sure that the necessary unlabeled check boxes are selected for the staff members (who may or may not have assigned services, as you can see with the staff members selected in the following screenshot) for which the work is starting.[anchor|#_d2d315bd-f532-4053-9fca-1be35413c7e4][anchor|#_bdeaaf82-1944-4267-b572-a0407e673326][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_7.png|popup|The Perform Action dialog box for starting logging time for multiple staff members|250px]
When the user clicks '''OK''', the system creates a log line for each selected staff member–assigned service pair and specifies the start time on the '''Log''' tab; the system also changes the status of the assigned services to ''In Process'' on the '''Details''' tab. In the following screenshot, you can see that the system created one line to log time for a staff member without a service assigned and two lines to log time for the staff member that started the specific services.[anchor|#_509458d8-e0d0-429c-86d1-55700cd9f782][anchor|#_584944ca-b2b1-4895-aec0-98fa5bf7f43c][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_8.png|popup|Created log lines|450px]
When the work is complete, the user can finish logging the time and services in the system by clicking '''Complete''' on the table toolbar of the '''Staff''' tab. The system opens the '''Perform Actions''' dialog box, in which the system has selected the ''Complete'' action and filled in the time. In this dialog box, the user makes sure the ''Service'' logging option is selected, modifies the end time (if necessary), and makes any needed changes to the staff members for whom the service and logging time are being completed, as the following screenshot shows.[anchor|#_42203fae-290f-45c8-9286-f37f38302ef7][anchor|#_5e5d0f2e-c042-4a0f-b81b-86535521468d][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_9.png|popup|The Perform Action dialog box for completing logging time for multiple staff members |250px]
When the user clicks '''OK''', the system completes the log line for each selected staff member–assigned service pair: It fills in the end time and duration on the '''Log''' tab and changes the status of the assigned services to ''Completed'' on the '''Details''' tab. 
==Starting and Completion of Multiple Services and Logging of Time for All Assigned Staff Members==
In some cases, multiple services have been added to the appointment, and staff members may or may not have been assigned to the services. During the appointment, the services need to be started and completed, and time is logged for the services and all staff members that are assigned to it. If no staff members have been assigned to services, time is logged for only services.{br}

To start a service or multiple services and log the time spent performing them, a user clicks '''Start''' on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form. The system opens the '''Perform Actions''' dialog box, in which the user selects the ''Services and Assigned Staff (If Any)'' logging option, modifies the start time if necessary, and selects the unlabeled check boxes in the lines of the services being started (see the following screenshot).[anchor|#_3f3dd2ba-569d-4874-9817-be00f67b20dd][anchor|#_3115da48-371a-43e6-897e-f0118b829a90][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_10.png|popup|The Perform Action dialog box for starting multiple services|250px]
When the user clicks '''OK''', for each selected service, the system creates a log line for the assigned staff member (if multiple staff members are assigned to a service, a line will be added for each of them) and specifies the start time on the '''Log''' tab; the system also changes the status of the services to ''In Process'' on the '''Details''' tab. In the following screenshot, you can see that the system has created three lines on the '''Log''' tab: two lines for services and their assigned staff members, and one line for a service without assigned staff members.[anchor|#_46fbebfe-9aab-4ffd-9863-f3eafe2ca177][anchor|#_d430f02f-de57-49e2-9e77-db4bbce5170b][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_11.png|popup|Created log lines|450px]
When the work is complete, the user completes services and the logging of time in the system by clicking '''Complete''' on the table toolbar of the '''Details''' or '''Staff''' tab. The system opens the '''Perform Actions''' dialog box, in which the system has selected the ''Complete'' action and the end time. The user selects the ''Service'' logging option, modifies the end time if necessary, and selects the services that are being completed, as the following screenshot shows.[anchor|#_1cdee8a5-aa13-4a98-b455-8a0adbb2acc8][anchor|#_dbb9a780-5c61-4062-915a-e084dc60cf3f][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_12.png|popup|The Perform Action dialog box for completing multiple services|250px]
When the user clicks '''OK''', the system completes the log line for each selected service and specifies the end time and duration on the '''Log''' tab; it also changes the status of the assigned services to ''Completed'' on the '''Details''' tab. 
==New Settings on the Service Order Types Form==
On the '''Time Behavior''' tab of the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form, '''Start Appointment Action Behavior''' section has been renamed to '''Appointment Starting Settings'''. The section now contains the following check boxes (see the screenshot below):[anchor|#_6b670df7-ac79-4ba7-b788-113fae7f088d]
*'''Set Start Time in Appointment''': A check box that indicates (if selected) that when a user starts an appointment of the selected service order type, the current business time is inserted in the '''Actual Start Time''' box in the '''Actual Date and Time''' section on the '''Settings''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form. In the previous versions of Acumatica ERP, users achieved this functionality by selecting the '''Set Actual Start Time in Header''' option button.
*'''Set Not Started Items as In Process''': A check box that indicates (if selected) that when a user starts an appointment of the selected service order type, on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system changes the status of the lines with the ''Not Started'' status to ''In Process''.
*'''Start Logging for Unassigned Staff''': A check box that indicates (if selected) that when a user starts an appointment of the selected service order type, on the '''Log''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system creates log lines for staff members that are assigned to the appointment but are not assigned to any service.
*'''Start Logging for Services and Assigned Staff (If Any)''': A check box that indicates (if selected) that when a user starts an appointment of the selected service order type, on the '''Log''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system starts services and creates log lines for the services and for any assigned staff members.

Also on the '''Time Behavior''' tab of the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] form, the'''Complete Appointment Action Behavior''' section has been renamed to '''Appointment Completion Settings'''. The section now has the following check boxes (see the screenshot below):[anchor|#_972f192e-1ae9-4115-add7-2a542e5438e2]
*'''Set End Time in Appointment''': A check box that indicates (if selected) that when a user completes an appointment of the selected service order type, the current business time is inserted in the '''Actual End Time''' box in the '''Actual Date and Time''' section on the '''Settings''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form. In the previous versions of Acumatica ERP, users achieved this functionality by selecting the '''Set Actual End Time in Header''' option button.
*'''Status to Set for In Process Items''': A check box that is described in the [HelpRoot_ReleaseNotes\RN_2020_R1_Service_Line_Statuses|Services: Improvements to Line Statuses of Service Orders and Appointments] topic.
*'''Status to Set for Not Started Items''': A check box that is described in the [HelpRoot_ReleaseNotes\RN_2020_R1_Service_Line_Statuses|Services: Improvements to Line Statuses of Service Orders and Appointments] topic.
((({S:Warn}When a user completes an appointment, the system will set the time of appointment completion to the '''End Time''' column of the '''Log''' tab on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form for lines that are affected by the '''Status to Set for In Process Items''' and '''Status to Set for Not Started Items''' settings.
)))
Finally, the '''Other Settings''' section has been added to the '''Time Behavior''' tab with the following check boxes (see the screenshot below):[anchor|#_0c22d9b0-fd16-439f-8d14-a5448b13ed8c]
*'''Update Log Start Time When Appointment Start Time is Updated''': A check box that indicates (if selected) that for an appointment of the selected service order type, when a user modifies the value in the '''Actual Start Time''' box in the '''Actual Date and Time''' section on the '''Settings''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system updates the '''Start Time''' on the '''Log''' tab for all log lines.
*'''Update Log End Time When Appointment End Time is Updated''': A check box that indicates (if selected) that for an appointment of the selected service order type, when a user modifies the value in the '''Actual End Time''' box in the '''Actual Date and Time''' section on the '''Settings''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system updates the '''End Time''' on the '''Log''' tab for all log lines.
*'''Manually Manage Time''': A check box that (if selected) makes the '''Manage Time Manually''' column available for an appointment of the selected service order type on the '''Log''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form. In previous versions of Acumatica ERP, users achieved this functionality by selecting the '''Allow Manually Handle Time per Service Line''' check box on this tab.
*'''Update Appointment Time Based on Logged Time''': A check box that indicates (if selected) that for an appointment of the service order type, the system updates the value in the '''Actual Start Time''' box on the '''Settings''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form with the earliest time specified in the '''Start Time''' column on the '''Log''' tab. Also, the system updates the value in the '''Actual End Time''' box on the '''Settings''' tab with the latest time specified in the '''End Time''' column on the '''Log''' tab. The check box works as described if the '''Handle Manually''' check box is cleared on the '''Settings''' tab for the appointment.
*'''Require Service Logs on Appointment Completion''': A check box that indicates (if selected) that a user can complete an appointment of the selected service order type only if at least one log line has been created on the '''Log''' tab for each service that has been added on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form.
[anchor|#_90ae8627-dc7b-4cb4-a9ef-4bacede072dd][anchor|#_60f1d7a8-3eda-444e-8b59-58a59b0ec924][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_17.png|popup|The Time Behavior tab of the Service Order Types form|450px]
The following option buttons have been removed from the '''Time Behavior''' tab: '''Set Actual Start Time in Header''', '''Set Actual Start Time in Header and Service Lines''', '''Sets Nothing''', '''Set Actual End Time in Header''', '''Set Actual End Time in Header and Service Lines''', '''Update Actual Start Time in Service Lines When Updating Actual Start Time in Header''',''' Update End Time in Service Lines When Updating Actual Start Time in Header''', '''Allow Manually Handle Time per Service Line''', '''Update Actual Start/End Time of Header Based on Minimum/Maximum Service Line''', and '''Require Actual Start/End Time of Service Lines to Complete the Appointment'''.
==Other Changes to the UI==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the following columns, which were formerly on the '''Details''' and '''Staff''' tabs, can now be found on the '''Log''' tab:[anchor|#_97649ae6-edfd-46ad-a073-9cd17510c107]
*'''Start Time''' (named '''Actual Start Time''' in previous releases)
*'''End Time''' (previously named '''Actual End Time''')
*'''Manage Time Manually''' (previously named '''Manually Handle Time''' on the '''Details''' tab; hidden by default)
*'''Service Order Type''' (hidden by default)
*'''Appointment Nbr.''' (hidden by default)
*'''Detail Line Ref. '''(previously named '''Service Line Ref.''')
*'''Duration''' (previously named '''Actual Duration''' and located on the '''Staff''' tab)
*'''Notes''' (previously named '''Comment''')
*'''Approved''' (previously named '''Approved Time''')
*'''Time Card Ref. Nbr.'''

Also, on the '''Staff''' tab, the '''Driver''' and '''Type''' columns have been renamed to '''Primary Driver''' and '''Staff Type''', respectively. {br}

On the [HelpRoot_FormReference\EP_30_50_00|Employee Time Card] ([~/?ScreenId=EP305000|EP305000]) and [HelpRoot_FormReference\EP_30_70_00|Employee Time Activities] ([~/?ScreenId=EP307000|EP307000]) forms, the '''Employee Line Ref.''' column has been renamed to '''Log Line Ref.'''{br}

On the [HelpRoot_FormReference\FS_40_40_50|Customer Location Central] ([~/?ScreenId=FS404050|FS404050]) form, the following columns have been removed from the '''Services''' tab:[anchor|#_59e756d6-2b74-4ec7-bff6-69745f60fd35]
*'''Actual Start Time'''
* '''Actual End Time'''

==Enhancements to the Mobile App==
In the Acumatica mobile app, it is now also possible to perform the actions that have been implemented in the current web version of Acumatica ERP. The '''Start Travel''' and '''Complete Travel''' actions have been added to the menu of the ''Appointments'' screen, as the following screenshot shows.[anchor|#_5915c259-0ddb-4298-a370-86f20af4425f][anchor|#_a0a99da5-6ec0-4abf-8e1d-f29fe45a77ed][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_22.jpg|popup|The Start Travel and Complete Travel actions|100px]
To perform an action for any number of services, non-stock items, stock items, or staff members, on the needed tab, a user selects the necessary line or lines by tapping them and then selects the action in the menu (see the following screenshot).[anchor|#_fae3fecd-5424-4850-8727-c59925f241fe][anchor|#_95af4ae1-3148-419a-866a-75d100c20978][image:ReleaseNotes/Images/RN_2020_R1_Service_Log_Travel_Time_23.jpg|popup|The Actions menu for the selected item|100px]
When the user invokes the action, a related action screen appears, on which the user can change default values and specify additional values that are necessary to perform the action. After the necessary data has been entered, the user processes the action by selecting the '''Process''' action in the menu.]]></column>
			<column name="PlainText"><![CDATA[Services: Ability to Add Travel Time to Appointments; Improvements to Logging Time In  Acumatica ERP 2020 R1, new elements have been added to the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form that make it possible for users to track and log time by invoking starting and         completion actions. This topic describes the most common scenarios, the new elements that have been added to         the system, and the specific actions users can invoke on the UI. Most Common User Scenarios The following scenarios related to the tracking of time during appointments can be         performed by using new elements on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form: Log the time spent on traveling for staff members that travel. The most common user           scenario would be a staff member wanting to log time for travel without adding a travel           item (that is, a non-stock item defined in the system as representing a particular travel           service) to an appointment. Start and complete a travel item that is defined in the system as a service, and log           time for the staff members that travel. In the most common user scenario, a staff member           wants to log time for one travel item for trips that take place during an appointment           (with a specific fee and billing rate) and for another travel item for a trip made to and           from the appointment (with a different fee and billing rate). Start and complete a specific service, and log time for the staff members that perform           it (if any staff members are assigned). In the most common user scenario, when a service           manager creates and schedules an appointment, the manager adds services and assigns staff           members to the appointment, but does not assign staff members to the services. During the           appointment, each staff member selects the service that this employee is going to perform,           starts it in the system, and then reflects its completion in the system.  Log time for multiple staff members by starting and completing the specific services to           which they are assigned (if the staff members are assigned to any services). In the most           common scenario, when a service manager creates and schedules an appointment, the manager           adds services to the appointment and assigns staff members to the specific services.           During the appointment, each staff member selects the service to perform, and starts it           and completes it in the system. Start and complete multiple services, and log time for all the staff members that are           assigned to perform these services (if any staff members are assigned to the services).           There are two common user scenarios of this series of actions. In the first user             scenario, when a service manager creates and schedules an appointment, the manager adds             services to the appointment and assigns individual staff members to the specific             services. During the appointment, the team leader selects multiple services to be             started and completed. The services are started and completed for all staff members             assigned to the services. In the second user scenario, when a service manager             creates and schedules an appointment, the manager also adds services to the appointment,             but in this case, the manager assigns only one staff member to the appointment. When the             appointment is started, the staff member starts the logging of time for the whole             appointment (that is, no service is assigned to the log line on the                Log  tab). During the appointment, the staff member selects             services to start and complete. The services will be started and completed and the time             will be tracked for them, but the labor for the staff member will not be registered for             each particular service because the staff member’s time is registered for the whole             appointment. When the appointment is completed, the staff members completes the logging             of time for the whole appointment.  The Log Tab The new  Log  tab has been added to the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form, as shown in the following screenshot, to provide users with a breakdown of the time         that was tracked for an appointment. The Log tab When a user selects a line on the  Details  tab and clicks the            Start  button on the table toolbar, the system creates new log lines         on the  Log  tab for the item selected in the selected line, which         might be a service, a travel item, or a non-stock item. In the table on the            Log  tab, users can do the following: In the  Log Line Status  column, manually change the status of a           particular log line. In the  Travel  column, select or clear the check box to specify           that the time is logged for travel or a service. In the  Detail Line Ref.  column, select or modify the reference           number that represents the service for which the time is logged. The numbers in this           column correspond to the numbers in the  Line Ref.  column on the              Details  or  Staff  tab of the current           form. In the  Start Time ,  End Time , and              Duration  columns, modify the times or the duration of the log           line. In the  Add to Actual Duration  column, select or clear the check           box to make the system include or exclude, respectively, the duration of the log line in           the duration of the related service line, which is recorded in the  Actual             Duration  column of the  Details  tab. In the  Track Time  column, select or clear the check box to turn           on or turn off, respectively, tracking time for the line in time activities of staff           members. In the  Earning Type ,  Labor Item ID ,              Project Task ,  Cost Code ,  Time             Card Ref. Nbr. , and  Approved  columns, select or           modify other settings related to time activities and projects. New Buttons on the Details and Staff Tabs On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, a user can now start logging time for (on the  Log          tab), finish logging time for, or cancel any service item, non-stock item, or travel item         listed on the  Details  tab. The user clicks the line with the item in         the table and then clicks one of the following buttons, which have been added to the table         toolbar of the tab, as the following screenshot shows: Start : Opens the  Perform Action  dialog box           with the  Start  action selected. In this dialog box, the user can modify the logging           option and the start time (which has been filled in automatically); in the table of the           dialog box, the user selects the unlabeled check boxes for the staff members and services           for which the time will be tracked for the item. When the user clicks              OK  in the dialog box, the system closes the dialog box, creates           the related log lines, begins logging time on the  Log  tab, and           changes the status of the item and the log lines to  In Process . This button is             available for service lines only if the appointment has the  In Process  status and             the selected line has the  Not Started  or  In Process  status. This button is             available for travel lines only if the appointment has the  Not Started ,  In               Process , or  Completed  status and the line has the  Not Started  or                In Process  status. Complete : Opens the  Perform Action  dialog           box with the  Complete  action selected. In this dialog box, the user can modify the           logging option and the end time (which has been filled in automatically); in the table of           the dialog box, the user makes sure that the necessary unlabeled check boxes are selected           in the table. When the user clicks  OK  in the dialog box, the system           closes the dialog box, updates the line on the  Log  tab, and changes           the status of the item and the related log lines to  Completed .  This button is             available for service lines only if the appointment has the  In Process  status and             the selected line has the  Not Started  or  In Process  status. This button is             available for travel lines only if the appointment has the  Not Started ,  In               Process , or  Completed  status and the line has the  Not Started  or                In Process  status. Cancel : Changes the status of the selected line to              Canceled .  This button is available for service lines only if the selected line             has the  Not Started  status. New buttons on the table toolbar of the Details tab The  Start  and  Complete  buttons have also been         added to the table toolbar of the  Staff  tab, as the following         screenshot shows. They work similarly to the buttons on the table toolbar of the            Details  tab. New buttons on the table toolbar of the Staff tab Logging of Travel Time On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, users can now log time spent on traveling for the appointment as a whole.         To make this possible, the  Start Travel  and  Complete           Travel  menu commands have been added to the  Actions          menu on the form toolbar, as the following screenshot shows. The Start Travel and Complete Travel actions When the travel is starting, a user clicks  Actions Start Travel  on the form toolbar, and the system opens the new  Perform           Actions  dialog box with the  Start  action and the  Travel  logging         option selected, as the following screenshot shows. In this dialog box, the user can modify         the start time of the travel (if necessary) and select the unlabeled check boxes in the         table for the staff members for which the travel is started. By default, the currently         signed-in user is selected. The Perform Action dialog box After specifying all the necessary settings, the user clicks  OK , and         on the  Log  tab, the system creates log lines for each selected staff         member for the travel. When the travel is complete, the user clicks  Actions Complete Travel  on the form toolbar. The system opens the  Perform           Actions  dialog box with the  Complete  action and the  Travel          logging option selected, as well as the end time filled in; the system selects the same         staff members that were selected when the travel was started. The user can modify the         completion time of the travel and select staff members for which the travel is completed.         The user then clicks  OK , and on the  Log  tab,         the system updates the log lines related to the travel with the appropriate  End           Time  and  Duration  values, and changes the            Log Line Status  to  Completed . For the log lines related to         travel, the check box in the  Travel  column is selected, as shown in         the line in the following screenshot. Travel log line Starting and Completion of a Travel Item During service configuration, users can also create the needed travel items in the         system—that is, service items that represent a particular type of travel, such as         travel to or from the appointment or travel, to procure supplies during the         appointment—so that the travel time of each item during an appointment can be tracked.         When a travel item is created, on the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000)         form, the user selects  Service  in the  Type  box and selects the            Is a Travel Item  check box on the  General           Settings  tab, specifies other necessary settings for the item, as the         following screenshot shows. Required settings for a travel item This travel item can be added to an appointment on the  Details  tab         of the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form. On this tab, a user can start tracking time for a travel item by clicking         the line with the travel item in the table and clicking  Start  on the         table toolbar. The system opens the  Perform Actions  dialog box with         the  Start  action, the  Travel  logging option, the time, and the service line         reference number filled in. In the dialog box, the user can modify the default settings as         needed, and select the unlabeled check boxes in the table for the staff members who are         involved in the travel. (See the following screenshot.) By default, the currently signed-in         user is selected. The Perform Actions dialog box for starting a travel item for multiple staff           members When the user clicks  OK , on the  Log  tab, the         system creates a log line for each selected staff member and fills in the start time.  When the travel associated with this travel item is completed, one of the users can         complete it in the system by clicking the travel line in the table on the            Details  tab and clicking  Complete  on the         table toolbar. The system opens the  Perform Actions  dialog box with         the  Complete  action and the  Travel  logging option. In the dialog box, the user         can modify the end time, if needed, and make any needed changes (the system automatically         selects the staff members that had been selected when the travel item was started), as shown         in the following screenshot. The Perform Actions dialog box for completing travel for multiple staff           members When the user clicks  OK , on the  Log  tab, the         system completes the log line (that is, changes the  Log Line Status          to  Completed ) for each selected staff member and specifies the end time and duration.         In the following screenshot, notice that the system has created and completed a log line for         the selected staff member, specified the travel item ( APPTRAVEL ) for both lines, and         selected the check box in the  Travel  column for the lines. Travel item log line Also, the user can start tracking time for a particular travel item by using the            Start Travel  action of the  Actions  menu on         the   ([~/?ScreenId=FS300200|FS300200]) Appointments form.         To give users such an ability, during the system configuration, on the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300)         form, in the  Default Travel Item  box of the            Preferences  tab (see the following screenshot), an administrative         user selects the travel item that the system will specify in the  Inventory           ID  column of the  Log  tab when the travel is started. If         the travel item had not been assigned to the appointment before the travel had started, the         system will add the travel item to the appointment. The Default Travel Item box on the Service Order Types form Starting and Completion of a Specific Service An appointment may be defined in the system with the services defined and with the staff         members assigned to the appointment, but staff members may not be assigned to services.         During the appointment, a staff member selects the service that they are going to perform,         starts it in the system (selecting any staff members that will also perform it), and then         reflects its completion in the system.  In this case, on the  Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form, a user can now start the logging of time for a specific service by clicking the         service line in the table and then clicking  Start  on the table         toolbar. The system opens the  Perform Actions  dialog box with the            Start  action and the  Service  logging option selected. The user can modify         the start time (which the system has filled in) and the service line reference number, if         needed; the user also selects the staff member or members who are starting work on the         service. By default, the currently signed-in user is selected. The Perform Action dialog box for starting a specific service When the user clicks  OK , the system creates a log line on the            Log  tab for each selected staff member and fills in the selected         service and the start time. In the following screenshot, notice that the system has created         one line to log the time for the selected staff member and specified service for the line.  Service log line When the service is finished, a user can complete it in the system by clicking the service         line in the table and clicking  Complete  on the table toolbar. The         system opens the  Perform Actions  dialog box with the  Complete          action and the  Service  logging option selected; if needed, the user can modify the         end time and make changes to the staff members involved in performing the completed         service. When the user clicks  OK , the system completes the log line for each         selected staff member and specifies the end time and duration on the            Log  tab.  Logging of Time for Multiple Staff Members and Starting and Completion of Services to         Which They Are Assigned Services and staff members may be assigned to an appointment when it is scheduled, but some         staff members may not be assigned to specific services. During the appointment, staff         members select the services they are going to perform, start them in the system at the         appropriate time, and then reflect their completion in the system when they are finished. If         the staff members have been not been assigned to any services, time can be logged for the         staff members. In this case, to log staff member time and start services, the user selects the staff         member on the  Staff  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form and clicks  Start  on the table toolbar. The system opens the            Perform Actions  dialog box with the  Start  action and the            Staff and Service (If Any)  logging option selected and the start time filled in.         The user modifies the start time if necessary, and makes sure that the necessary unlabeled         check boxes are selected for the staff members (who may or may not have assigned services,         as you can see with the staff members selected in the following screenshot) for which the         work is starting. The Perform Action dialog box for starting logging time for multiple staff           members When the user clicks  OK , the system creates a log line for each         selected staff member–assigned service pair and specifies the start time on the            Log  tab; the system also changes the status of the assigned         services to  In Process  on the  Details  tab. In the following         screenshot, you can see that the system created one line to log time for a staff member         without a service assigned and two lines to log time for the staff member that started the         specific services. Created log lines When the work is complete, the user can finish logging the time and services in the system         by clicking  Complete  on the table toolbar of the            Staff  tab. The system opens the  Perform           Actions  dialog box, in which the system has selected the  Complete          action and filled in the time. In this dialog box, the user makes sure the  Service          logging option is selected, modifies the end time (if necessary), and makes any needed         changes to the staff members for whom the service and logging time are being completed, as         the following screenshot shows. The Perform Action dialog box for completing logging time for multiple staff members  When the user clicks  OK , the system completes the log line for each         selected staff member–assigned service pair: It fills in the end time and duration on         the  Log  tab and changes the status of the assigned services to            Completed  on the  Details  tab.  Starting and Completion of Multiple Services and Logging of Time for All Assigned Staff         Members In some cases, multiple services have been added to the appointment, and staff members may         or may not have been assigned to the services. During the appointment, the services need to         be started and completed, and time is logged for the services and all staff members that are         assigned to it. If no staff members have been assigned to services, time is logged for only         services. To start a service or multiple services and log the time spent performing them, a user         clicks  Start  on the  Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form. The system opens the  Perform Actions  dialog box, in which the         user selects the  Services and Assigned Staff (If Any)  logging option, modifies the         start time if necessary, and selects the unlabeled check boxes in the lines of the services         being started (see the following screenshot). The Perform Action dialog box for starting multiple services When the user clicks  OK , for each selected service, the system         creates a log line for the assigned staff member (if multiple staff members are assigned to         a service, a line will be added for each of them) and specifies the start time on the            Log  tab; the system also changes the status of the services to            In Process  on the  Details  tab. In the following screenshot,         you can see that the system has created three lines on the  Log  tab:         two lines for services and their assigned staff members, and one line for a service without         assigned staff members. Created log lines When the work is complete, the user completes services and the logging of time in the         system by clicking  Complete  on the table toolbar of the            Details  or  Staff  tab. The system opens the            Perform Actions  dialog box, in which the system has selected the            Complete  action and the end time. The user selects the  Service  logging         option, modifies the end time if necessary, and selects the services that are being         completed, as the following screenshot shows. The Perform Action dialog box for completing multiple services When the user clicks  OK , the system completes the log line for each         selected service and specifies the end time and duration on the  Log          tab; it also changes the status of the assigned services to  Completed  on the            Details  tab.  New Settings on the Service Order Types Form On the  Time Behavior  tab of the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300)         form,  Start Appointment Action Behavior  section has been renamed to            Appointment Starting Settings . The section now contains the         following check boxes (see the screenshot below): Set Start Time in Appointment : A check box that indicates (if           selected) that when a user starts an appointment of the selected service order type, the           current business time is inserted in the  Actual Start Time  box in           the  Actual Date and Time  section on the              Settings  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)           form. In the previous versions of  Acumatica ERP, users achieved this functionality by selecting the  Set Actual Start Time in             Header  option button. Set Not Started Items as In Process : A check box that indicates           (if selected) that when a user starts an appointment of the selected service order type,           on the  Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system changes the status of the lines with the  Not Started  status to  In             Process . Start Logging for Unassigned Staff : A check box that indicates           (if selected) that when a user starts an appointment of the selected service order type,           on the  Log  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system creates log lines for staff members that are assigned to the appointment but are           not assigned to any service. Start Logging for Services and Assigned Staff (If Any) : A check           box that indicates (if selected) that when a user starts an appointment of the selected           service order type, on the  Log  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system starts services and creates log lines for the services and for any assigned staff           members. Also on the  Time Behavior  tab of the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types form,           the Complete Appointment Action Behavior  section has been renamed to            Appointment Completion Settings . The section now has the following         check boxes (see the screenshot below): Set End Time in Appointment : A check box that indicates (if           selected) that when a user completes an appointment of the selected service order type,           the current business time is inserted in the  Actual End Time  box in           the  Actual Date and Time  section on the              Settings  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)           form. In the previous versions of  Acumatica ERP, users achieved this functionality by selecting the  Set Actual End Time in             Header  option button. Status to Set for In Process Items : A check box that is described           in the  Services: Improvements to Line Statuses of Service Orders and Appointments topic. Status to Set for Not Started Items : A check box that is           described in the  Services: Improvements to Line Statuses of Service Orders and Appointments topic. When a user completes an appointment, the system will set the time of appointment         completion to the  End Time  column of the  Log          tab on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form for lines that are affected by the  Status to Set for In Process           Items  and  Status to Set for Not Started Items          settings. Finally, the  Other Settings  section has been added to the            Time Behavior  tab with the following check boxes (see the         screenshot below): Update Log Start Time When Appointment Start Time is Updated : A           check box that indicates (if selected) that for an appointment of the selected service           order type, when a user modifies the value in the  Actual Start Time            box in the  Actual Date and Time  section on the              Settings  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system updates the  Start Time  on the  Log  tab           for all log lines. Update Log End Time When Appointment End Time is Updated : A check           box that indicates (if selected) that for an appointment of the selected service order           type, when a user modifies the value in the  Actual End Time  box in           the  Actual Date and Time  section on the              Settings  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system updates the  End Time  on the  Log  tab           for all log lines. Manually Manage Time : A check box that (if selected) makes the              Manage Time Manually  column available for an appointment of the           selected service order type on the  Log  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form. In           previous versions of  Acumatica ERP, users achieved this functionality by selecting the  Allow Manually Handle             Time per Service Line  check box on this tab. Update Appointment Time Based on Logged Time : A check box that           indicates (if selected) that for an appointment of the service order type, the system           updates the value in the  Actual Start Time  box on the              Settings  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form with           the earliest time specified in the  Start Time  column on the              Log  tab. Also, the system updates the value in the              Actual End Time  box on the  Settings  tab           with the latest time specified in the  End Time  column on the              Log  tab. The check box works as described if the              Handle Manually  check box is cleared on the              Settings  tab for the appointment. Require Service Logs on Appointment Completion : A check box that           indicates (if selected) that a user can complete an appointment of the selected service           order type only if at least one log line has been created on the              Log  tab for each service that has been added on the              Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)           form. The Time Behavior tab of the Service Order Types form The following option buttons have been removed from the  Time           Behavior  tab:  Set Actual Start Time in Header ,            Set Actual Start Time in Header and Service Lines ,  Sets           Nothing ,  Set Actual End Time in Header ,  Set           Actual End Time in Header and Service Lines ,  Update Actual Start           Time in Service Lines When Updating Actual Start Time in Header ,            Update End Time in Service Lines When Updating Actual Start Time in Header ,            Allow Manually Handle Time per Service Line ,  Update           Actual Start/End Time of Header Based on Minimum/Maximum Service Line , and            Require Actual Start/End Time of Service Lines to Complete the           Appointment . Other Changes to the UI On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, the following columns, which were formerly on the            Details  and  Staff  tabs, can now be found on         the  Log  tab: Start Time  (named  Actual Start Time  in           previous releases) End Time  (previously named  Actual End           Time ) Manage Time Manually  (previously named  Manually Handle             Time  on the  Details  tab; hidden by default) Service Order Type  (hidden by default) Appointment Nbr.  (hidden by default) Detail Line Ref.  (previously named  Service Line             Ref. ) Duration  (previously named  Actual Duration            and located on the  Staff  tab) Notes  (previously named  Comment ) Approved  (previously named  Approved           Time ) Time Card Ref. Nbr. Also, on the  Staff  tab, the  Driver  and            Type  columns have been renamed to  Primary           Driver  and  Staff Type , respectively.  On the   ([~/?ScreenId=EP305000|EP305000]) Employee Time Card         (EP305000) and   ([~/?ScreenId=EP307000|EP307000]) Employee Time Activities (EP307000)         forms, the  Employee Line Ref.  column has been renamed to            Log Line Ref. On the   ([~/?ScreenId=FS404050|FS404050]) Customer Location Central         (FS404050) form, the following columns have been removed from the            Services  tab: Actual Start Time Actual End Time Enhancements to the Mobile App In the Acumatica mobile app, it is now also possible to perform the actions that have been         implemented in the current web version of  Acumatica ERP. The  Start Travel  and  Complete Travel          actions have been added to the menu of the  Appointments  screen, as the following         screenshot shows. The Start Travel and Complete Travel actions To perform an action for any number of services, non-stock items, stock items, or staff         members, on the needed tab, a user selects the necessary line or lines by tapping them and         then selects the action in the menu (see the following screenshot). The Actions menu for the selected item When the user invokes the action, a related action screen appears, on which the user can         change default values and specify additional values that are necessary to perform the         action. After the necessary data has been entered, the user processes the action by         selecting the  Process  action in the menu. ]]></column>
		</row>
		<row PageID="cc723deb-8ffd-4578-bf56-2115429c546d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="9be75cce-566c-0e28-8e54-991af4031d28" RecordSourceID="22377">
			<column name="Content"><![CDATA[To improve the usability of line statuses in service orders and appointments, the changes described below have been made in Acumatica ERP 2020 R1.
==New Line Statuses on the Service Orders Form==
On the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form, the following statuses have been added to the '''Line Status''' column of the '''Details''' tab (see the screenshot below):[anchor|#_e24c0f09-9111-4f57-a480-c56f21dd3a18]
*''Requiring Scheduling'': The item has not yet been added to any appointment of the service order, or the entire quantity of the item specified in the service order has not yet been added to the related appointments.
*:This is the initial status of an item added to the '''Details''' tab.
*''Scheduled'': The item has been added to an appointment of the service order. The system assigns this status to a line when the related item is added to the appointment. 

Also, the ''Open'' and ''In Process'' statuses have been removed. The ''Canceled'' and ''Completed'' statuses remain available for selection.[anchor|#_d4eab37c-9918-43a3-8877-4a6b02e5db7c][anchor|#_5fe42968-e04b-402d-aee1-a8b6f40b999a][image:ReleaseNotes/Images/RN_2020R1_Services_Line_Statuses_2.png|popup|Line statuses on the Service Orders form|450px]
The system changes the ''Requiring Scheduling'' status to ''Scheduled'' when the entire quantity of the item specified in the service order has been added to the related appointments. When a user schedules a new appointment, only the remaining quantity is now scheduled (instead of the estimated quantity as it was in previous versions of Acumatica ERP).{br}

If in an appointment, the ''Not Finished'' status has been set for the item, the system changes the ''Scheduled'' status to ''Requiring Scheduling'' for the related line in the service order and selects the '''Appointment Needed''' check box on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] form.{br}

The system also changes the status of a line on this form to ''Completed ''or ''Canceled'' if the related line in an appointment of the service order was completed or canceled, respectively.{br}

The statuses can be changed manually, the statuses of the related appointment lines will be changed, respectively. The statuses will also change to ''Completed'' or ''Canceled'' when the user invokes the '''Complete Order''' or '''Cancel Order''' action on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] form, respectively.
==New Line Statuses on the Appointments form==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the following statuses have been added to the '''Line Status''' column of the '''Details''' tab (see the screenshot below):[anchor|#_5311fb41-73df-4971-a437-9ce9f8155ca3]
*''Not Started'': The item has not yet been started for the appointment. This is the initial status of the line.
*''Not Finished'': The item has not been completed fully during the appointment. If the appointment contains lines with this status, the user has to make sure that the '''Finished''' check box is cleared on the '''Settings''' tab.
*''Not Performed'': The item has not been performed (if it is a service) or used (if it is an inventory item) during the appointment. If the appointment contains lines with this status, the user has to make sure that the '''Finished''' check box is cleared on the '''Settings''' tab.

Also, the ''Open'' line status has been removed. The ''In Processed'', ''Canceled'', and ''Completed'' statuses are still available for selection.[anchor|#_75982eb6-8853-4b76-9d09-71b5f6e7497c][anchor|#_2cfcfe17-68da-4062-b9ec-785ca947285c][image:ReleaseNotes/Images/RN_2020_R1_Service_Line_Satuses.png|popup|Line statuses on the Appointments form|450px]
The statuses can be changed manually, or users can use the buttons on the table toolbar, as described in the [HelpRoot_ReleaseNotes\RN_2020_R1_Service_Log_Travel_Time|Services: Ability to Add Travel Time to Appointments; Improvements to Logging Time].
==Line Status Update on Changing of the Appointment Status==
When the user cancels an appointment on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the system changes the statuses of all the lines to ''Canceled''. When the user attempts to complete the appointment, the system will not allow the user to complete the appointment unless the lines have one of the following statuses: ''Completed'', ''Not Finished'', ''Not Performed'', or ''Canceled''. That is, if any line has the ''In Process'' or ''Not Started'' status, the appointment cannot be completed.{br}

Users can, however, configure each service order type so that for an appointment of the type, the ''In Process'' or ''Not Started'' line status (or both line statuses) will be changed automatically for the applicable lines when the '''Complete''' action is invoked, and the appointment can be completed. On the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form (in the '''Appointment Completion Settings''' section of the '''Time Behavior''' tab), the following boxes have been added (see the following screenshot):[anchor|#_cb22e26c-1a64-489e-b2bd-b83d7b9f6192]
*'''Status to Set for In Process Items''', which has the following options:
**''Not Finished'': When a user completes an appointment and any line has the ''In Process'' status, the system changes it to ''Not Finished''. 
**''Completed'' (default): When a user completes an appointment and any line has the ''In Process'' status, the system changes it to ''Completed''. 
**''In Process'': When a user completes an appointment and any line has the ''In Process'' status, the system does not change the status. The user has to change the status of the line to complete the appointment.
*'''Status to Set for Not Started Items''', which has the following options:
**''Not Performed'': When a user completes an appointment and any line has the ''Not Started'' status, the system changes it to ''Not Performed''. 
**''Completed'' (default): When a user completes an appointment and any line has the ''Not Started'' status, the system changes it to ''Completed''. 
**''Not Started'': When a user completes an appointment and any line has the ''Not Started'' status, the system does not change the status. The user has to change the status to complete the appointment.
((({S:Warn}When a user completes an appointment, the system will set the time of appointment completion to the '''End Time''' column of the '''Log''' tab on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form for lines that are affected by these settings.
)))[anchor|#_7228f6fd-7879-4f8f-a9b5-877121de2560][anchor|#_88bd814b-0f09-458f-a42c-c33846c1be9a][image:ReleaseNotes/Images/RN_2020R1_Services_Line_Statuses_4.png|popup|New boxes on the Service Order Types form|450px]]]></column>
			<column name="PlainText"><![CDATA[Services: Improvements to Line Statuses of Service Orders and Appointments To improve the usability of line statuses in service orders and appointments, the changes    described below have been made in  Acumatica ERP 2020 R1. New Line Statuses on the Service Orders Form On the   ([~/?ScreenId=FS300100|FS300100]) Service Orders         (FS300100) form, the following statuses have been added to the  Line           Status  column of the  Details  tab (see the screenshot         below): Requiring Scheduling : The item has not yet been added to any appointment of the           service order, or the entire quantity of the item specified in the service order has not           yet been added to the related appointments. This is the initial status of an item added             to the  Details  tab. Scheduled : The item has been added to an appointment of the service order. The           system assigns this status to a line when the related item is added to the appointment.          Also, the  Open  and  In Process  statuses have been removed. The  Canceled          and  Completed  statuses remain available for selection. Line statuses on the Service Orders form The system changes the  Requiring Scheduling  status to  Scheduled  when the         entire quantity of the item specified in the service order has been added to the related         appointments. When a user schedules a new appointment, only the remaining quantity is now         scheduled (instead of the estimated quantity as it was in previous versions of  Acumatica ERP). If in an appointment, the  Not Finished  status has been set for the item, the system         changes the  Scheduled  status to  Requiring Scheduling  for the related line in         the service order and selects the  Appointment Needed  check box on the             ([~/?ScreenId=FS300100|FS300100]) Service Orders         form. The system also changes the status of a line on this form to  Completed  or            Canceled  if the related line in an appointment of the service order was completed         or canceled, respectively. The statuses can be changed manually, the statuses of the related appointment lines will be         changed, respectively. The statuses will also change to  Completed  or  Canceled          when the user invokes the  Complete Order  or  Cancel           Order  action on the   ([~/?ScreenId=FS300100|FS300100]) Service Orders form,         respectively. New Line Statuses on the Appointments form On the   ([~/?ScreenId=FS300200|FS300200]) Appointments     (FS300200) form, the  following statuses have been added to the  Line      Status  column of the  Details  tab (see the screenshot     below): Not Started : The item has not yet been started for the appointment. This is the           initial status of the line. Not Finished : The item has not been completed fully during the appointment. If the      appointment contains lines with this status, the user has to make sure that the        Finished  check box is cleared on the  Settings       tab. Not Performed : The item has not been performed (if it is a service) or used (if it is      an inventory item) during the appointment. If the appointment contains lines with this status,      the user has to make sure that the  Finished  check box is cleared on the        Settings  tab. Also, the  Open  line status has been removed. The  In Processed ,  Canceled ,     and  Completed  statuses are still available for selection. Line statuses on the Appointments form The statuses can be changed manually, or users can use the buttons on the table toolbar, as         described in the  Services: Ability to Add Travel Time to Appointments; Improvements to Logging Time. Line Status Update on Changing of the Appointment Status When the user cancels an appointment on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form,     the system changes the statuses of all the lines to  Canceled . When the user attempts to     complete the appointment, the system will not allow the user to complete the appointment unless     the lines have one of the following statuses:  Completed ,  Not Finished ,  Not      Performed , or  Canceled . That is, if any line has the  In Process  or  Not      Started  status, the appointment cannot be completed. Users can, however, configure each service order type so that for an appointment of the type,         the  In Process  or  Not Started  line status (or both line statuses) will be         changed automatically for the applicable lines when the  Complete          action is invoked, and the appointment can be completed. On the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300)         form (in the  Appointment Completion Settings  section of the            Time Behavior  tab), the following boxes have been added (see the         following screenshot): Status to Set for In Process Items , which has the following       options: Not Finished : When a user completes an appointment and any line has the  In         Process  status, the system changes it to  Not Finished .  Completed  (default): When a user completes an appointment and any line has the          In Process  status, the system changes it to  Completed .  In Process : When a user completes an appointment and any line has the  In         Process  status, the system does not change the status. The user has to change the status        of the line to complete the appointment. Status to Set for Not Started Items , which has the following             options: Not Performed : When a user completes an appointment and any line has the                  Not Started  status, the system changes it to  Not Performed .  Completed  (default): When a user completes an appointment and any line has               the  Not Started  status, the system changes it to  Completed .  Not Started : When a user completes an appointment and any line has the  Not                 Started  status, the system does not change the status. The user has to change               the status to complete the appointment. When a user completes an appointment, the system will set the time of appointment         completion to the  End Time  column of the  Log          tab on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form for lines that are affected by these settings. New boxes on the Service Order Types form ]]></column>
		</row>
		<row PageID="bf75ec2a-b47f-4d37-bb97-111930aecc56" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2ff16d29-ac2d-b641-dd3e-55b616fa12a1" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, if an appointment or service order was related to projects, it was not possible to perform project billing. In Acumatica ERP 2020 R1, the following documents can now be generated for an appointment or service order: [anchor|#_a8b62207-34e6-45e5-ac9f-56653c515c1a]
*A batch of project transactions: This document contains project transactions related to the appointment or service order.
*An issue: This document is generated if stock items are used in the appointment or service order, to reflect that the stock items were removed from a warehouse. 

For each appointment or service order, one project transaction batch and one issue (if the appointment or service order contains stock items) will be created, even if the '''Customer Order''', '''External Reference''', or '''Time Frame''' option button has been selected under '''Group Billing Documents By''' on the [HelpRoot_FormReference\FS_20_60_00|Billing Cycles] ([~/?ScreenId=FS206000|FS206000]) form.{br}

This topic describes the changes made in the system to implement integration between field service functionality and project billing.{br}{TOC}
==Settings of Project Billing for Field Service Documents==
On the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form, to give users the ability to set the system to generate project transactions and issues for appointments and service orders of the service order type, the ''Project Transactions'' option has been added to the '''Generated Billing Document''' box in the '''Billing Settings''' section of the '''Preferences''' tab (see the screenshot below). ((({S:Warn}This option is available only if the ''Projects'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and the ''Regular'' option is selected in the '''Behavior''' box of the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] form for the service order type.
))){br}

When a user selects the ''Project Transactions'' option, the '''Account Group''' and '''Reason Code''' boxes appear in the '''Billing Settings''' section, as the screenshot below shows. In the '''Account Group''' box, the user has to select the account group that will be assigned by default to project transactions generated from an appointment or service order. In the '''Reason Code''' box, the user has to select the reason code that will be used by default in issues generated for inventory items from appointment or service order. ((({S:Warn}The '''Reason Code''' box is available only if the ''Inventory'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form.
)))
Also, the '''Automatically Release Project Transactions''' and '''Automatically Release Issues''' check boxes have been added to the '''Billing Settings''' section. If the '''Automatically Release Project Transactions''' check box is selected, the system will release the project transaction batch when the batch is created. If this check box is cleared, the batch will be created with the ''Balanced'' status. If the '''Automatically Release Issues''' check box is selected, the system will release the issue when it is created. If this check box is cleared, the issue will be created with the ''Balanced'' status. {br}

Additionally, the '''Billing Type''' box has been added to the '''Billing Settings''' section of the '''Preferences''' tab with the following options: [anchor|#_ad2a20d4-7010-4deb-8ee7-ffc6c950ed8a]
*''Cost as Cost'' (default): The items will be billed based on the unit cost specified in the document. If this option is selected, the '''Automatically Release Issues''' check box is selected and not available for editing.
*''Revenue as Cost'': The items will be billed based on the unit price specified in the document. 
[anchor|#_9f6fd6fd-219c-426d-8870-534354d76155][anchor|#_36d334e0-1c8d-4695-b47b-4f1715193415][image:ReleaseNotes/Images/RN_2020_R1_Service_Improvements_Projects.png|popup|New elements on the Service Order Types form|450px]
The '''Salesperson ID''' box and the '''Commissionable''' check box are not displayed in the '''Default Settings''' section of the '''Preferences''' tab if the ''Project Transactions'' option is selected in the '''Generated Billing Document''' box.
==Restrictions on Field Service Documents with Project Billing==
If a service order type for which project transactions are generated is assigned to an appointment or service order, the following restrictions will apply to the appointment or service order:[anchor|#_5fae0801-2d08-4f9f-a3ea-49019e48638f]
*The system will not calculate taxes. 
*Users cannot apply prepayments. 
*Users cannot select accounts and subaccounts. 
*Users cannot assign a salesperson to the appointment or service order and make it commissionable.

==Improvements on the Appointments and Service Orders Forms==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms, on the '''Other Information''' tab, you can find the reference numbers of the generated billing documents in the '''Billing Info''' section. In the '''Reference Nbr.''' box, the reference number of the project transaction batch is displayed, as the following screenshot shows. In the '''Issue Reference Nbr.''' box, the reference number of the created issue (if any) is shown. In these boxes, a user can click the link to open a document on the appropriate form.[anchor|#_68954d12-7710-4ee7-b9dd-56e8c2a36e67][anchor|#_730344c2-d2b4-40dd-950b-ed6746a8468f][image:ReleaseNotes/Images/RN_2020_R1_Service_Improvements_Projects_3.png|popup|Reference numbers of the generated billing documents|450px]
==Changes on the Run Billing Forms==
On the [HelpRoot_FormReference\FS_50_06_00|Run Service Order Billing] ([~/?ScreenId=FS500600|FS500600]) and [HelpRoot_FormReference\FS_50_01_00|Run Appointment Billing] ([~/?ScreenId=FS500100|FS500100]) forms, the ''Project Transactions'' option has been added to the '''Generated Billing Document''' box (see the following screenshot).[anchor|#_9fb48a52-c420-4d46-9009-42d1a5de13a8][anchor|#_9e7bab11-a687-4e0c-bec6-23c0f493cbf8][image:ReleaseNotes/Images/RN_2020_R1_Service_Improvements_Projects_2.png|popup|The projects option on the Run Appointment Billing form|450px]
If the ''Project Transactions'' option is selected, the system hides the '''Ignore the Time Frame''' check box.]]></column>
			<column name="PlainText"><![CDATA[Services: Improvements to Billing for Projects In previous versions of  Acumatica ERP,     if an appointment or service order was related to projects, it was not possible to perform     project billing. In  Acumatica ERP 2020 R1,     the following documents can now be generated for an appointment or service order:  A batch of project transactions: This document contains project transactions related to the      appointment or service order. An issue: This document is generated if stock items are used in the appointment or service      order, to reflect that the stock items were removed from a warehouse.  For each appointment or service order, one project transaction batch and one issue (if the     appointment or service order contains stock items) will be created, even if the       Customer Order ,  External Reference , or       Time Frame  option button has been selected under  Group      Billing Documents By  on the   ([~/?ScreenId=FS206000|FS206000]) Billing Cycles (FS206000)     form. This topic describes the changes made in the system to implement integration between field     service functionality and project billing. Settings of Project Billing for Field Service Documents On the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types     (FS202300) form, to give users the ability to set the system to generate project transactions     and issues for appointments and service orders of the service order type, the  Project      Transactions  option has been added to the  Generated Billing Document      box in the  Billing Settings  section of the       Preferences  tab (see the screenshot below).  This option is      available only if the  Projects  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form      and the  Regular  option is selected in the  Behavior  box of the         ([~/?ScreenId=FS202300|FS202300]) Service Order Types form for      the service order type. When a user selects the  Project Transactions  option, the  Account      Group  and  Reason Code  boxes appear in the  Billing      Settings  section, as the screenshot below shows. In the  Account      Group  box, the user has to select the account group that will be assigned by     default to project transactions generated from an appointment or service order. In the       Reason Code  box, the user has to select the reason code that will be     used by default in issues generated for inventory items from appointment or service order.  The  Reason Code  box is available only if the  Inventory      feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. Also, the  Automatically Release Project Transactions  and       Automatically Release Issues  check boxes have been added to the       Billing Settings  section. If the  Automatically Release      Project Transactions  check box is selected, the system will release the project     transaction batch when the batch is created. If this check box is cleared, the batch will be     created with the  Balanced  status. If the  Automatically Release      Issues  check box is selected, the system will release the issue when it is created.     If this check box is cleared, the issue will be created with the  Balanced  status.  Additionally, the  Billing Type  box has been added to the       Billing Settings  section of the  Preferences  tab     with the following options:  Cost as Cost  (default): The items will be billed based on the unit cost specified in      the document. If this option is selected, the  Automatically Release       Issues  check box is selected and not available for editing. Revenue as Cost : The items will be billed based on the unit price specified in the      document.  New elements on the Service Order Types form The  Salesperson ID  box and the  Commissionable      check box are not displayed in the  Default Settings  section of the       Preferences  tab if the  Project Transactions  option is selected in     the  Generated Billing Document  box. Restrictions on Field Service Documents with Project Billing If a service order type for which project transactions are generated is assigned to an     appointment or service order, the following restrictions will apply to the appointment or     service order: The system will not calculate taxes.  Users cannot apply prepayments.  Users cannot select accounts and subaccounts.       Users cannot assign a salesperson to the appointment or service order and make it      commissionable. Improvements on the Appointments and Service Orders Forms On the   ([~/?ScreenId=FS300200|FS300200]) Appointments     (FS300200) and   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) forms, on the  Other Information  tab, you can find the     reference numbers of the generated billing documents in the  Billing Info      section. In the  Reference Nbr.  box, the reference number of the project     transaction batch is displayed, as the following screenshot shows. In the  Issue      Reference Nbr.  box, the reference number of the created issue (if any) is shown. In     these boxes, a user can click the link to open a document on the appropriate form. Reference numbers of the generated billing documents Changes on the Run Billing Forms On the   ([~/?ScreenId=FS500600|FS500600]) Run Service Order Billing     (FS500600) and   ([~/?ScreenId=FS500100|FS500100]) Run Appointment Billing (FS500100) forms, the  Project Transactions  option has been added to the       Generated Billing Document  box (see the following screenshot). The projects option on the Run Appointment Billing form If the  Project Transactions  option is selected, the system hides the  Ignore      the Time Frame  check box. ]]></column>
		</row>
		<row PageID="7818645b-f367-4c21-8fbb-125b315de8f7" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d25a30e8-eaee-83aa-8d7d-de45240005cb" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the profitability is now calculated for services, and users can manually specify the billable labor. This topic describes the changes made in the system.
==Profitability of Services==
On the '''Profitability''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the system now shows the costs of services whose unit cost is not zero, as the following screenshot shows. The '''Cost Total''' and '''Profit (%)''' boxes in the Summary area now include service costs.[anchor|#_4ab9417a-a14b-4b04-8644-20b29cd9d9fb][anchor|#_f98415f0-2130-4484-8b6e-20b4190470c6][image:ReleaseNotes/Images/RN_2020_R1_Service_Labor_Billing.png|popup|The service and labor lines on the Profitability tab|450px]
For details on tracking item costs in appointments, see [HelpRoot_FieldServices\FS__CON_Item_Cocts_and_Profitability|Tracking the Costs of Items].
==Labor Billing==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, to give users the ability to manually specify that the labor is going to be billed and specify the time that will be billed, the following columns have been added to the '''Log''' tab (for details on this tab, see [HelpRoot_ReleaseNotes\RN_2020_R1_Service_Log_Travel_Time|Services: Ability to Add Travel Time to Appointments; Improvements to Logging Time]), as shown in the screenshot below:[anchor|#_2a5ff7da-67b9-49ed-b7d6-ffef5415a552]
*'''Billable Labor''': A check box that indicates (if selected) that the customer will be billed for labor performed by a staff member during an appointment. If the '''Track Time''' check box is selected for a line, the '''Billable''' check box is selected by default, but it can be cleared. If the '''Track Time''' check box is cleared for a line, the '''Billable''' check box is cleared and read-only.
*'''Billable Time''': The time in hours and minutes for which the customer will be billed.
*'''Billable Amount''': The amount to be billed, which is calculated as '''Billable Time''' multiplied by the '''Unit Cost''' of the '''Profitability''' tab. The column is read-only.
((({S:Danger}These UI elements are displayed on the form only if the following conditions are met on the '''Preferences''' tab of the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form for the service order type of the appointment:[anchor|#_c289830e-5204-4b10-bcfc-e4a54cc9ace5]
*The ''Project Transactions'' option is selected in the '''Generated Billing Documents''' box of the '''Billing Settings''' section.
*The ''Cost as Cost'' option is selected in the '''Billing Type''' box of the '''Billing Settings''' section.
*The '''Automatically Create Time Activities from Appointments''' check box is selected in the '''Integrating with Time & Expenses''' section.
)))[anchor|#_deba6cc8-e4da-4d6e-81d4-f792a301f8f3][anchor|#_2635d467-dee7-44f2-8837-9021fe7bff0e][image:ReleaseNotes/Images/RN_2020_R1_Service_Labor_Billing_2.png|popup|Columns related to labor billing on the Log tab|450px]
On the '''Totals''' tab, the '''Billable Labor Total''' box has been added, which shows the total billable amount of the labor lines on the '''Log''' tab (see the following screenshot). The '''Appointment Total''' and '''Appointment Billable Total''' values now include the total amounts of the labor lines on the '''Log''' tab.[anchor|#_fb3b857a-96d6-46b8-929c-28cf439783b4][anchor|#_e1681726-3a16-40da-9ab9-91e2b9d55290][image:ReleaseNotes/Images/RN_2020_R1_Service_Labor_Billing_3.png|popup|The Billable Labor Total box on the Totals tab|450px]
On the '''Profitability''' tab, the system now calculates the values for labor items as follows:[anchor|#_d1f60784-94e8-4346-83bd-0a9475cfe341]
*If the '''Billable''' check box is selected on the '''Log''' tab, the value in the '''Billable Quantity''' column is equivalent to the value in the '''Billable Duration''' column but is expressed as a decimal. For example, if ''2h 30m'' is specified in the '''Billable Duration''' column, ''2.50'' is specified in the '''Billable Quantity''' column.
*If the '''Billable''' check box is selected on the '''Log''' tab, '''Billable Amount''' is equivalent to '''Billable Quantity''' multiplied by '''Unit Cost'''.
]]></column>
			<column name="PlainText"><![CDATA[Services: Ability to Bill for Labor In  Acumatica ERP 2020 R1, the profitability is now calculated for services, and users can manually specify the         billable labor. This topic describes the changes made in the system. Profitability of Services On the  Profitability  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form, the system now shows the costs of services whose unit cost is not zero, as the         following screenshot shows. The  Cost Total  and  Profit           (%)  boxes in the Summary area now include service costs. The service and labor lines on the Profitability tab For details on tracking item costs in appointments, see  Tracking the Costs of Items. Labor Billing On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, to give users the ability to manually specify that the labor is going to be         billed and specify the time that will be billed, the following columns have been added to         the  Log  tab (for details on this tab, see  Services: Ability to Add Travel Time to Appointments; Improvements to Logging Time), as shown in the screenshot below: Billable Labor : A check box that indicates (if selected) that the           customer will be billed for labor performed by a staff member during an appointment. If           the  Track Time  check box is selected for a line, the              Billable  check box is selected by default, but it can be cleared.           If the  Track Time  check box is cleared for a line, the              Billable  check box is cleared and read-only. Billable Time : The time in hours and minutes for which the           customer will be billed. Billable Amount : The amount to be billed, which is calculated as              Billable Time  multiplied by the  Unit Cost            of the  Profitability  tab. The column is read-only. These UI elements are displayed on the form only if the following         conditions are met on the  Preferences  tab of the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300)         form for the service order type of the appointment: The  Project Transactions  option is selected in the  Generated Billing               Documents  box of the  Billing Settings  section. The  Cost as Cost  option is selected in the  Billing Type              box of the  Billing Settings  section. The  Automatically Create Time Activities from Appointments              check box is selected in the  Integrating with Time & Expenses              section. Columns related to labor billing on the Log tab On the  Totals  tab, the  Billable Labor Total          box has been added, which shows the total billable amount of the labor lines on the            Log  tab (see the following screenshot). The  Appointment           Total  and  Appointment Billable Total  values now include         the total amounts of the labor lines on the  Log  tab. The Billable Labor Total box on the Totals tab On the  Profitability  tab, the system now calculates the values for         labor items as follows: If the  Billable  check box is selected on the              Log  tab, the value in the  Billable             Quantity  column is equivalent to the value in the  Billable             Duration  column but is expressed as a decimal. For example, if  2h 30m            is specified in the  Billable Duration  column,  2.50  is           specified in the  Billable Quantity  column. If the  Billable  check box is selected on the              Log  tab,  Billable Amount  is equivalent to              Billable Quantity  multiplied by  Unit           Cost . ]]></column>
		</row>
		<row PageID="ac01acd6-d50a-4474-a7f3-45a688416460" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f82e8ec8-e12d-c44f-c2da-ae491b7e1768" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the WorkWave optimizer has been integrated so that it is now possible to automatically optimize the schedule of appointments. This topics describes the necessary configuration, the optimization process, and the UI element where the user can review the results of the optimization.
==Configuration for Optimization with WorkWave==
To give users the ability to optimize appointment schedules, the new ''WorkWave Route Optimization'' feature has been added in the ''Third Party Integrations'' group of features on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form (see the following screenshot). [anchor|#_c9d319fe-f017-46a2-ac27-b9c82dfd5125][anchor|#_254cc8a9-e1e8-4b07-9c97-c3ca72af6b09][image:ReleaseNotes/Images/RN_2020_R1_Service_WorkWave_Integration.png|popup|The Route WorkWave Optimization feature|200px]
After this feature has been enabled, the administrator needs to specify the URL of the WorkWave API used for the integration and the related license key in the '''WorkWave API URL''' and '''License Key''' boxes of the [HelpRoot_FormReference\FS_10_01_00|Service Management Preferences] ([~/?ScreenId=FS100100|FS100100]) form. {br}

Because the optimizer takes into consideration the employees’ lunch break when it optimizes the schedule, the following settings have to be specified in the same section:[anchor|#_f907d76c-4d4f-491c-86ee-020dab6d76e5]
*'''Lunch Break Duration''': The duration of the lunch break in hours and minutes.
*'''Lunch Break Start Time''': The earliest time when the lunch break can be started in hours and minutes.
*'''Lunch Break End Time''': The latest time when the lunch break can be finished in hours and minutes.

==Schedule Optimization Process==
To optimize the appointment schedules, the new [HelpRoot_FormReference\FS_50_14_00|Optimize Appointment Scheduling] ([~/?ScreenId=FS501400|FS501400]) form has been added (see the following screenshot). On this form, for the specified date, branch, and branch location, a user can do the following:[anchor|#_05394862-1676-411d-9e67-f7574ec88a8e]
*Optimize the schedule of appointments assigned to specific staff members
*Schedule appointments that have not been assigned to any staff member and assign these appointments to staff members
[anchor|#_57b813f1-43b2-431f-a186-b86efdeda29b][anchor|#_d5e7025b-dd57-4d2b-9757-321fbc8cf8d0][image:ReleaseNotes/Images/RN_2020_R1_Service_WorkWave_Integration_2.png|popup|The Optimize Appointment Scheduling form|450px]
To optimize the schedule of appointments that have been assigned to specific staff members, the user selects the ''Assigned Appointments'' option in the '''Type''' box of the form (Summary area). In the Staff Member pane (right pane), the user then selects the staff member or multiple staff members for which appointment schedule optimization should be performed (by selecting the unlabeled check boxes in the applicable rows). When the user clicks '''Process''' on the form toolbar, the system calculates the optimal schedule for each selected staff member for the selected date by updating the scheduled start times of the assigned appointments. The system does not reassign the appointments to other staff members.{br}

To schedule and assign unassigned appointments for a particular date, the user selects the ''Unassigned Appointments'' option in the '''Type''' box. In the Appointments pane (left pane), the user selects the appointments to be scheduled and assigned; then the user selects the staff members to whom appointments will be assigned in the Staff Member pane and clicks '''Process''' on the form toolbar. The system assigns the selected appointments to the selected staff members. The system does not reassign appointments that have already been scheduled for the staff members to another staff members; it only changes the appointments’ scheduled time.
==Optimization Rules==
System optimization of the appointment schedule is based on the following rules:[anchor|#_60d6d4f2-cd25-40d3-a2cd-5c8ddae23213]
*All the appointments for a particular staff member and particular day are assumed to have the same branch location and the same start and end locations. 
*If the type of the particular staff member, which can be viewed on the [HelpRoot_FormReference\FS_20_55_00|Staff] ([~/?ScreenId=FS205500|FS205500]) form, is ''Employee'', the system optimizes the staff member’s appointments according to the working hours specified in the calendar that is assigned to each employee in the '''Calendar''' box of the [HelpRoot_FormReference\EP_20_30_00|Employees] ([~/?ScreenId=EP203000|EP203000]) form. That is, the system does not assign an appointment if the start time of travel from the applicable start location to the appointment is earlier than he start of the staff member's working time. The system does not also assign an appointment if the appointment end time plus the traveling time (from the appointment to the end location) is later than the end of the staff member's working time.
*For each staff member of the ''Vendor'' type, the system optimizes the staff member’s appointments according to the working hours specified in the calendar that is assigned in the '''Work Calendar''' box on the '''Calendars and Maps''' tab of the [HelpRoot_FormReference\FS_10_01_00|Service Management Preferences] ([~/?ScreenId=FS100100|FS100100]) form.
*The system does not change the scheduled start time of the appointments for which the '''Confirmed''' check box has been selected on the '''Settings''' tab ('''Scheduled Date and Time''' section) [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form.
*The system does not change the scheduled start time of appointments with the ''In Process'', ''Completed'', or ''Closed'' status.
*If the lunch break duration is specified on the [HelpRoot_FormReference\FS_10_01_00|Service Management Preferences] form, the system allocates the time for the lunch break between appointments with the start and end time of the lunch break being considered. For example, if the lunch break duration is 60 minutes and the lunch break start and end times are 12:00 PM and 02:00 PM, respectively, then the lunch break can be from 12:10 PM to 01:10 PM or from 01:00 PM to 02:00 PM or any of other period in the 12:00 PM to 02:00 PM range.
*If it is not possible to schedule the lunch break between appointments, then no lunch break will be scheduled. For example, if the appointment lasts six hours, it is assumed that the staff member will have the lunch break during the appointment, but the system does not update the end time of the appointment to add one hour for the lunch break.

==Optimization Results==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the user can view the results of the optimization for a particular appointment in the '''Optimization Result''' box in the '''Scheduled Date and Time''' section of the '''Settings''' tab, as the following screenshot shows. This read-only box contains one of the following options:[anchor|#_804dd06a-5c40-4416-bd1b-9bfcee4c40d7]
*''Has Been Optimized'': The appointment was successfully scheduled during the schedule optimization process.
*''Has Not Been Optimized'': The optimization process has never been launched for the appointment, or after the appointment was optimized, the appointment date, time, or address has been manually changed or the appointment has been manually reassigned to another staff member.
*''Could Not Be Optimized'': The appointment could not be optimized because of lack of time or staff member resources. The scheduler will need to reassign this appointment to another staff member or move it to another day. 
*''Encountered Address Error'': The appointment could not be optimized because the appointment address is not correct.
[anchor|#_02245318-601d-4f16-b162-2dc668c5b96c][anchor|#_45c946d3-d3ac-4da3-9127-c4f40fa2101f][image:ReleaseNotes/Images/RN_2020_R1_Service_WorkWave_Integration_3.png|popup|The Optimization Result box|450px]]]></column>
			<column name="PlainText"><![CDATA[Services: Integration with the WorkWave Optimizer In  Acumatica ERP 2020 R1,     the WorkWave optimizer has been integrated so that it is now possible to automatically optimize     the schedule of appointments. This topics describes the necessary configuration, the     optimization process, and the UI element where the user can review the results of the     optimization. Configuration for Optimization with WorkWave To give users the ability to optimize appointment schedules, the new  WorkWave Route      Optimization  feature has been added in the  Third Party Integrations  group of     features on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form (see the following screenshot).  The Route WorkWave Optimization feature After this feature has been enabled, the administrator needs to specify the URL of the     WorkWave API used for the integration and the related license key in the  WorkWave API      URL  and  License Key  boxes of the   ([~/?ScreenId=FS100100|FS100100]) Service Management Preferences (FS100100)     form .  Because the optimizer takes into consideration the employees’ lunch break when it optimizes     the schedule, the following settings have to be specified in the same section: Lunch Break Duration : The duration of the lunch break in hours and      minutes. Lunch Break Start Time : The earliest time when the lunch break can be      started in hours and minutes. Lunch Break End Time : The latest time when the lunch break can be      finished in hours and minutes. Schedule Optimization Process To optimize the appointment schedules, the new   ([~/?ScreenId=FS501400|FS501400]) Optimize Appointment Scheduling         (FS501400) form has been added (see the following screenshot). On this form, for the         specified date, branch, and branch location, a user can do the following: Optimize the schedule of appointments assigned to specific staff members Schedule appointments that have not been assigned to any staff member and assign these      appointments to staff members The Optimize Appointment Scheduling form To optimize the schedule of appointments that have been assigned to specific staff members,     the user selects the  Assigned Appointments  option in the  Type  box     of the form (Summary area). In the Staff Member pane (right pane), the user then selects the     staff member or multiple staff members for which appointment schedule optimization should be     performed (by selecting the unlabeled check boxes in the applicable rows). When the user clicks       Process  on the form toolbar, the system calculates the optimal schedule     for each selected staff member for the selected date by updating the scheduled start times of     the assigned appointments. The system does not reassign the appointments to other staff     members. To schedule and assign unassigned appointments for a particular date, the user selects the       Unassigned Appointments  option in the  Type  box. In the     Appointments pane (left pane), the user selects the appointments to be scheduled and assigned;     then the user selects the staff members to whom appointments will be assigned in the Staff     Member pane and clicks  Process  on the form toolbar. The system assigns     the selected appointments to the selected staff members. The system does not reassign     appointments that have already been scheduled for the staff members to another staff members; it     only changes the appointments’ scheduled time. Optimization Rules System optimization of the appointment schedule is based on the following rules: All the appointments for a particular staff member and particular day are assumed to have      the same branch location and the same start and end locations.  If the type of the particular staff member, which can be viewed on the   ([~/?ScreenId=FS205500|FS205500]) Staff (FS205500) form,      is  Employee , the system optimizes the staff member’s appointments according to the      working hours specified in the calendar that is assigned to each employee in the        Calendar  box of the   ([~/?ScreenId=EP203000|EP203000]) Employees (EP203000) form.      That is, the system does not assign an appointment if the start time of travel from the      applicable start location to the appointment is earlier than he start of the staff member's      working time. The system does not also assign an appointment if the appointment end time plus      the traveling time (from the appointment to the end location) is later than the end of the      staff member's working time. For each staff member of the  Vendor  type, the system optimizes the staff member’s      appointments according to the working hours specified in the calendar that is assigned in the        Work Calendar  box on the  Calendars and Maps  tab      of the   ([~/?ScreenId=FS100100|FS100100]) Service Management Preferences      (FS100100) form. The system does not change the scheduled start time of the appointments for which the        Confirmed  check box has been selected on the        Settings  tab ( Scheduled Date and Time  section)         ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)      form. The system does not change the scheduled start time of appointments with the  In       Process ,  Completed , or  Closed  status. If the lunch break duration is specified on the   ([~/?ScreenId=FS100100|FS100100]) Service Management Preferences form, the system      allocates the time for the lunch break between appointments with the start and end time of the      lunch break being considered. For example, if the lunch break duration is 60 minutes and the      lunch break start and end times are 12:00 PM and 02:00 PM, respectively, then the lunch break      can be from 12:10 PM to 01:10 PM or from 01:00 PM to 02:00 PM or any of other period in the      12:00 PM to 02:00 PM range. If it is not possible to schedule the lunch break between appointments, then no lunch break      will be scheduled. For example, if the appointment lasts six hours, it is assumed that the      staff member will have the lunch break during the appointment, but the system does not update      the end time of the appointment to add one hour for the lunch break. Optimization Results On the   ([~/?ScreenId=FS300200|FS300200]) Appointments     (FS300200) form, the user can view the results of the optimization for a particular appointment     in the  Optimization Result  box in the  Scheduled Date and      Time  section of the  Settings  tab, as the following     screenshot shows. This read-only box contains one of the following options: Has Been Optimized : The appointment was successfully scheduled during the schedule      optimization process. Has Not Been Optimized : The optimization process has never been launched for the      appointment, or after the appointment was optimized, the appointment date, time, or address has      been manually changed or the appointment has been manually reassigned to another staff      member. Could Not Be Optimized : The appointment could not be optimized because of lack of      time or staff member resources. The scheduler will need to reassign this appointment to another      staff member or move it to another day.  Encountered Address Error : The appointment could not be optimized because the      appointment address is not correct. The Optimization Result box ]]></column>
		</row>
		<row PageID="0b067773-0bf9-4d1a-910b-b0b982d627dd" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f58e5983-9999-8f3a-93f1-8b7d68177e2d" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, multiple enhancements have been introduced to the DeviceHub application, which is used for connecting hardware devices to Acumatica ERP. System administrators now can configure various options that improve application performance, such as multi-thread processing of print jobs and connection timeout parameters. DeviceHub also can now log additional system information for investigating the DeviceHub behavior and debugging issues.{br}{TOC}
==Enhanced Methods of Receiving Print Jobs==
On the '''General''' tab of the '''Configuration''' window of the DeviceHub application, the '''Methods of retrieving print jobs''' section has been added (see the screenshot below). The section consists of the following elements:[anchor|#_817090a7-a8ed-4f88-ba54-9929ea01dea8]
*'''Use push notifications''': A check box that indicates, if selected, that DeviceHub receives new and modified print jobs when a user clicks the '''Print''' or '''Reprint''' button on any applicable Acumatica ERP form.
*'''Poll on start or reconnection''': A check box that, if selected, causes DeviceHub to receive print jobs each time it runs or restarts.
*'''Poll regularly''': A check box that, if selected, enables the system administrator to configure the automatic polling of print jobs pending processing.
*'''Do not poll last''' ''x'' '''sec''': The timeout period in seconds during which the application does not receive print jobs.
*'''Poll every''' ''x'' '''sec''': The period of time in seconds in which the application receives print jobs.
[anchor|#_4df23acd-fef6-430e-a310-c804694096a0][anchor|#_41ca02bd-88bf-48dc-a741-199683f793ef][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_General.png|popup|New settings on the General tab of the Configuration window|350px]
==Connection Parameters==
On the '''Connection''' tab of the '''Configuration''' window, the '''Connection timeout''' section has been added (see the screenshot below). The section consists of the following elements:[anchor|#_d868e1cb-a85d-4186-a730-3b0560245a4f]
*'''Send for''' ''x'' '''sec''': The amount of time during which the application is sending the connection request.
*'''Receive for''' ''x'' '''sec''': The amount of time during which the application is waiting for the connection response.
[anchor|#_6fbe5be4-9581-4018-a15d-2da74eccd256][anchor|#_5d007c41-ac99-4440-a3d4-93d4ef04926c][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Connection.png|popup|Connection timeout settings|350px]
==Enhanced Document Processing==
 DeviceHub now includes settings that allow it to receive multiple documents to be printed into a combined PDF, which speeds the process of receiving documents for printing. Also, DeviceHub can now be configured to process print jobs in multiple threads, which also reduces the time required for processing print jobs. {br}

In the '''Configuration''' window, the '''Processing''' tab has been added (see the screenshot below). The tab consists of the following elements:[anchor|#_6044da13-9fb8-43d0-88a2-2d5cffdc3812]
*'''Combine every''' ''x'' '''documents on printing''': A check box that specifies, if selected, that the application will combine the specified number of documents of the same type (that is, the same reports printed on the same printer) into a single PDF file to be printed. 
*'''Use parallel processing''': A check box that indicates, if selected, that parallel processing is used for print jobs. If the check box is cleared, all print jobs are processed in a global queue.
*'''Max loading threads''': The maximum number of threads used for loading print jobs.
*'''Max printing threads''': The maximum number of threads used for printing.
*'''Create print task every''' ''x'' '''documents or every''' ''y'' '''sec''': The number of documents kept in the buffer before the applications processes them; the timeout duration (in seconds) after the documents are processed regardless of the number of the documents in the buffer.
[anchor|#_51ae17e9-98ae-421b-8e33-f41c513b7e19][anchor|#_80c55cc1-cd01-4b0c-9042-1badeb3aa7b4][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Advanced.png|popup|New Processing tab of the Configuration window|350px]
==Extended Information for Diagnostics==
On the '''Log''' tab of the '''Configuration''' window, the new '''Collect diagnostics''' check box has been added, as the following screenshot shows.[anchor|#_984165f9-5d82-47ea-aa4e-51263331d156][anchor|#_f01bf450-32cf-4ceb-8d8c-9a9d9f7a2166][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Log.png|popup|New check box that enables the collection of diagnostic information|350px]
If the check box is selected, the '''Diagnostics''' and '''Resources''' tabs appear in the application main window, as shown in the following screenshots. The '''Diagnostics''' tab shows the log with extended diagnostic information. The '''Resources''' tab shows the current statuses of file loading and printing threads. [anchor|#_200d5df6-a3cc-4a03-832f-7f8ae2425ef7][anchor|#_782393a9-48fe-46fc-9182-e3df72bbb7af][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Diagnostics.png|popup|Log with diagnostic information|350px][anchor|#_a23a3c77-9af3-400d-bf51-f55d4bb3f97b][anchor|#_0cb4aa15-98c2-4dc0-82c0-80e88c0d7914][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Resources.png|popup|Information about threads on the Resources tab|350px]
==Parallel Processing Configuration for a Particular Printer==
On the '''Printers''' tab of the '''Configuration''' window, a new group of UI elements has been added (see the screenshot below) that allow users to configure parallel processing of print jobs for a particular printer. The group includes the following elements:[anchor|#_d172ea18-14b2-4d61-9f7e-64b244c2e1db]
*'''Parallel processing''': A check box that indicates, if selected, that parallel processing is used for print jobs. If the check box is cleared, all print jobs for this particular printer are processed in a global queue.
*'''Max loading threads''': The maximum number of threads used for loading print jobs.
*'''Max printing threads''': The maximum number of threads used for printing.
[anchor|#_d385dbdd-c339-47ab-97c9-74790d5fdf7e][anchor|#_85da9cd4-2c55-4106-a420-e30a3290e1c8][image:ReleaseNotes/Images/RN_2020_R1_SysAdmin_DeviceHub_Enhancements_Printers.png|popup|Parallel processing settings for a printer|350px]
==Other UI Changes==
On the '''General''' tab of the '''Configuration''' window, the '''Enable scales support''' check box has been renamed to the '''Enable scale support'''.{br}

On the '''Log''' tab of the '''Configuration''' window, the '''Log debug information''' check box has been removed.{br}

On the [HelpRoot_FormReference\SM_20_65_00|Print Jobs] ([~/?ScreenId=SM206500|SM206500]) form, the '''End Date''' box in the Summary area of the form is now empty by default.]]></column>
			<column name="PlainText"><![CDATA[System Administration:  DeviceHub   Enhancements In  Acumatica ERP 2020 R1, multiple enhancements have been introduced to the  DeviceHub         application, which is used for connecting hardware devices to  Acumatica ERP. System administrators now can configure various options that improve application         performance, such as multi-thread processing of print jobs and connection timeout         parameters.  DeviceHub         also can now log additional system information for investigating the  DeviceHub         behavior and debugging issues. Enhanced Methods of Receiving Print Jobs On the  General  tab of the  Configuration  window         of the  DeviceHub         application, the  Methods of retrieving print jobs  section has been         added (see the screenshot below). The section consists of the following elements: Use push notifications : A check box that indicates, if selected, that              DeviceHub           receives new and modified print jobs when a user clicks the  Print            or  Reprint  button on any applicable  Acumatica ERP form. Poll on start or reconnection : A check box that, if selected, causes              DeviceHub           to receive print jobs each time it runs or restarts. Poll regularly : A check box that, if selected, enables the system           administrator to configure the automatic polling of print jobs pending processing. Do not poll last x sec : The timeout period in seconds during which the application           does not receive print jobs. Poll every x sec : The period of time in seconds in which the application           receives print jobs. New settings on the General tab of the Configuration window Connection Parameters On the  Connection  tab of the  Configuration          window, the  Connection timeout  section has been added (see the         screenshot below). The section consists of the following elements: Send for x sec : The amount of time during which the application is sending the           connection request. Receive for x sec : The amount of time during which the application is waiting for           the connection response. Connection timeout settings Enhanced Document Processing  DeviceHub         now includes settings that allow it to receive multiple documents to be printed into a         combined PDF, which speeds the process of receiving documents for printing. Also,  DeviceHub         can now be configured to process print jobs in multiple threads, which also reduces the time         required for processing print jobs.  In the  Configuration  window, the  Processing  tab         has been added (see the screenshot below). The tab consists of the following elements: Combine every x documents on printing : A check box that specifies, if selected,           that the application will combine the specified number of documents of the same type (that           is, the same reports printed on the same printer) into a single PDF file to be printed.  Use parallel processing : A check box that indicates, if selected,           that parallel processing is used for print jobs. If the check box is cleared, all print           jobs are processed in a global queue. Max loading threads : The maximum number of threads used for loading      print jobs. Max printing threads : The maximum number of threads used for      printing. Create print task every x documents or every y sec : The number of documents kept in the buffer before the           applications processes them; the timeout duration (in seconds) after the documents are           processed regardless of the number of the documents in the buffer. New Processing tab of the Configuration window Extended Information for Diagnostics On the  Log  tab of the  Configuration  window, the         new  Collect diagnostics  check box has been added, as the following         screenshot shows. New check box that enables the collection of diagnostic information If the check box is selected, the  Diagnostics  and       Resources  tabs appear in the application main window, as shown in the     following screenshots. The  Diagnostics  tab shows the log with extended     diagnostic information. The  Resources  tab shows the current statuses of     file loading and printing threads.  Log with diagnostic information Information about threads on the Resources tab Parallel Processing Configuration for a Particular Printer On the  Printers  tab of the  Configuration  window,     a new group of UI elements has been added (see the screenshot below) that allow users to     configure parallel processing of print jobs for a particular printer. The group includes the     following elements: Parallel processing : A check box that indicates, if selected, that      parallel processing is used for print jobs. If the check box is cleared, all print jobs for      this particular printer are processed in a global queue. Max loading threads : The maximum number of threads used for loading      print jobs. Max printing threads : The maximum number of threads used for      printing. Parallel processing settings for a printer Other UI Changes On the  General  tab of the  Configuration          window, the  Enable scales support  check box has been renamed to the            Enable scale support . On the  Log  tab of the  Configuration  window,         the  Log debug information  check box has been removed. On the   ([~/?ScreenId=SM206500|SM206500]) Print Jobs (SM206500) form, the  End           Date  box in the Summary area of the form is now empty by default. ]]></column>
		</row>
		<row PageID="01d8f697-81f0-4ce2-871f-73c22306d070" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="b25358bf-0af3-17fa-351f-726f3d36d20e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP, the business date is displayed in the info area. The business date is the date that the system will insert by default into the records that you add to the system. {br}

By default, the current date is set as the business date. If the ''Secure Business Date'' feature is disabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, all users can change the business date by clicking the Business Date menu button in the info area. If the ''Secure Business Date'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, users can change the business date only if the ''BusinessDateOverride'' role is assigned to them.
==Incrementing of the Business Date==
Starting with Acumatica ERP 2020 R1, the system handles the incrementing of the business date at midnight individually for each user session: The date is automatically incremented at midnight only if the particular user has not modified the business date in any way during the user session. {br}

That is, if a user does not change the business date during the user session and the session is active at midnight, the system increments the date. If the user has modified the business date somehow, the system will keep the changed date as long as the user session is active.]]></column>
			<column name="PlainText"><![CDATA[System Administration: Changes to the Incrementing of the Business Date  In  Acumatica ERP, the business date is displayed in the info area. The business date is the date that the         system will insert by default into the records that you add to the system.  By default, the current date is set as the business date. If the  Secure Business           Date  feature is disabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, all         users can change the business date by clicking the Business Date menu button in the info         area. If the  Secure Business Date  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, users can change the business date only if the            BusinessDateOverride  role is assigned to them. Incrementing of the Business Date Starting with  Acumatica ERP 2020 R1, the system handles the incrementing of the business date at midnight individually for         each user session: The date is automatically incremented at midnight only if the particular         user has not modified the business date in any way during the user session.  That is, if a user does not change the business date during the user session and the         session is active at midnight, the system increments the date. If the user has modified the         business date somehow, the system will keep the changed date as long as the user session is         active. ]]></column>
		</row>
		<row PageID="90747d43-836d-4bf5-865f-ec251cedb586" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c64d0abd-6e9c-ed57-f32f-cc88fd727225" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP, to navigate among the various forms, the entities created on a particular form, and the elements on a particular form, users can use mouse or accessibility tools, such as keyboard shortcuts. To move to the next column of a table, users can select the Tab key. {br}

Previously, if a table contained many columns, and a user wanted to navigate to the cell of the last column in the row, the user had to select Tab as many times as there were columns prior to the needed one. With Acumatica ERP 2020 R1, a user can specify which columns in the table must be accessible for keyboard actions and which ones must be skipped by the system.{br}

By default, changes in the column configuration are applied to the current user account. However, a user with administrative access to the system can configure the column accessibility and share its configuration with specific users in the system or make it the default configuration for all users. To share the configuration or make it the default configuration for other users, a user with administrative access rights needs to click '''Tools''' > '''Share Column Configuration''' on the form title bar. The system opens the Share Column Configuration dialog box, which can be used to set the current table layout on the particular form as the default layout and to share the settings with multiple users.
==Setting the Accessibility of the Table Columns==
For each table of an entry or processing form, a user can identify the accessibility of the column cells by using the '''Column Configuration''' dialog box. In the '''Selected Columns''' list of this dialog box, the system displays the columns that are visible on the table. These table columns may look like those in the following screenshot.[anchor|#_85705d7b-7dc8-4460-936f-f178fcb9b779][anchor|#_1fa0ca0d-b1c0-461f-ad25-2d5a43903b55][image:ReleaseNotes/Images/RN_2020_R1_UI_Tab_Buttons_Visibility.png|Accessibility of the column cells][anchor|#_06efe302-62eb-4f53-bbc4-aa76dee5982a]
*[image:ReleaseNotes/Images/RN_2020_R1_UI_Tab_Button.png|Accessibility of the column cells|28px]: Indicates that the column is accessible through a keyboard. This button is not visible by default and appears only when a user points at the column name. 
*[image:ReleaseNotes/Images/RN_2020_R1_UI_Tab_Button_Strikethrough.png|Accessibility of the column cells|28px]: Indicates that the columns is not accessible through a keyboard. If accessibility for a column has been turned off, this button is visible by default and stays visible when a user points at the column name. The system skips this column when the user selects the Tab key on the keyboard.

To change the state of the accessibility of a column, in the '''Selected Columns''' list of the dialog box, the user needs to point at the column name and click the '''Tab''' or [anchor|#_07f387e7-33df-4e29-9906-c634573bfebe][image:ReleaseNotes/Images/RN_2020_R1_UI_Tab_Button_Strikethrough.png|Accessibility of the column cells|28px]button, which appears.]]></column>
			<column name="PlainText"><![CDATA[User Interface: Enhancements in the Use of the Tab Key In  Acumatica ERP, to navigate among the various forms, the entities created on a particular form, and the         elements on a particular form, users can use mouse or accessibility tools, such as keyboard         shortcuts. To move to the next column of a table, users can select the Tab key.  Previously, if a table contained many columns, and a user wanted to navigate to the cell of         the last column in the row, the user had to select Tab as many times as there were columns         prior to the needed one. With  Acumatica ERP 2020 R1, a user can specify which columns in the table must be accessible for keyboard actions         and which ones must be skipped by the system. By default, changes in the column configuration are applied to the current user account.         However, a user with administrative access to the system can configure the column         accessibility and share its configuration with specific users in the system or make it the         default configuration for all users. To share the configuration or make it the default         configuration for other users, a user with administrative access rights needs to click  Tools Share Column Configuration  on the form title bar. The system opens the Share Column Configuration dialog         box, which can be used to set the current table layout on the particular form as the default         layout and to share the settings with multiple users. Setting the Accessibility of the Table Columns For each table of an entry or processing form, a user can identify the accessibility of the         column cells by using the  Column Configuration  dialog box. In the            Selected Columns  list of this dialog box, the system displays the         columns that are visible on the table. These table columns may look like those in the         following screenshot. Accessibility of the column cells : Indicates that the column is           accessible through a keyboard. This button is not visible by default and appears only when           a user points at the column name.  : Indicates that the columns is           not accessible through a keyboard. If accessibility for a column has been turned off, this           button is visible by default and stays visible when a user points at the column name. The           system skips this column when the user selects the Tab key on the keyboard. To change the state of the accessibility of a column, in the  Selected           Columns  list of the dialog box, the user needs to point at the column name and         click the  Tab  or  button, which appears. ]]></column>
		</row>
		<row PageID="a11aa71b-5f18-4c8f-9c69-350f2c7a89f4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="06a7ae24-a5fb-bda1-3508-141b084eccaf" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP, you can view data on inquiries that have been created on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form. An inquiry may include related forms that are displayed as tabs on the side panel. A side panel is a navigation option that could be previously enabled for a generic inquiry only. It displays the details of entities related to the record that is currently selected on the inquiry. Starting from Acumatica ERP 2020 R1, users can enable the functionality of side panels not only on inquiries but on other forms as well. Side panels for inquiries are added on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form. To add side panels for forms that are not generic inquiries, a user defined as a customizer can create a customization project in the Customization Project Editor.{br}

As the side panel, the customizer can select an inquiry, report, or dashboard. Depending on the information users need to be displayed, the customizer can set up parameters. {br}

In the screenshot below, for the side panel of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form, the [HelpRoot_FormReference\CR_30_60_00|Cases] (CR3060PL) form has been selected. So users can open any customer record and view in the side panel the cases associated with the customer whose record is being viewed.[anchor|#_fe0383cd-884b-42d6-a5a2-866a92d556c2][anchor|#_3645e4ff-5775-4a4b-84fc-84b3442c47e9][image:ReleaseNotes/Images/RN_2020_R1_UI_Side_Panels_Profile.png|popup|Example of a side panel on the Customers form|450px]{br}{TOC}
==Adding a Side Panel to the Data Entry Form==
A customizer can add multiple side panel navigation paths to a data entry form. To add a side panel, the customizer navigates to the [HelpRoot_FormReference\SM_20_45_05|Customization Projects] ([~/?ScreenId=SM204505|SM204505]) form and creates a new project. In the Customization Project Editor, the customizer selects the screen for which the side panel is planned to be added. On the '''Screens''' > '''Form ID''' > '''Actions''', the customizer adds an action of the ''Navigation: Side panel'' type (1), specifies general settings (2), adds destination screen (3), and specifies parameters (4), if needed (for instance, in the screenshot below, ''Business Account'' was selected as a parameter so that the side panel displayed the cases of the specific customer selected on the data entry form). [anchor|#_7a0de781-34ad-451e-968c-6155b81efffb][image:ReleaseNotes/Images/RN_2020_R1_UI_Side_Panels_Profile_Settings.png|popup|Example of a side panel on the Customers form|450px]{br}

To apply the changes, the customizer must publish the created customization project.]]></column>
			<column name="PlainText"><![CDATA[User Interface: Side Panels for Data Entry Forms In  Acumatica ERP,     you can view data on inquiries that have been created on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form. An inquiry may include related forms     that are displayed as tabs on the side panel. A side panel is a navigation option that could be     previously enabled for a generic inquiry only. It displays the details of entities related to     the record that is currently selected on the inquiry. Starting from  Acumatica ERP 2020 R1,     users can enable the functionality of side panels not only on inquiries but on other forms as     well. Side panels for inquiries are added on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry     (SM208000) form. To add side panels for forms that are not generic inquiries, a user defined as     a customizer can create a customization project in the  Customization Project Editor. As the side panel, the customizer can select an inquiry, report, or dashboard. Depending on     the information users need to be displayed, the customizer can set up parameters.  In the screenshot below, for the side panel of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form, the   ([~/?ScreenId=CR306000|CR306000]) Cases (CR3060PL) form has been     selected. So users can open any customer record and view in the side panel the cases associated     with the customer whose record is being viewed. Example of a side panel on the Customers form Adding a Side Panel to the Data Entry Form A customizer can add multiple side panel navigation paths to a data entry form. To add a side     panel, the customizer navigates to the   ([~/?ScreenId=SM204505|SM204505]) Customization Projects (SM204505)     form and creates a new project. In the  Customization Project Editor, the     customizer selects the screen for which the side panel is planned to be added. On the  Screens Form ID Actions , the customizer adds an action of the  Navigation: Side panel  type (1),     specifies general settings (2), adds destination screen (3), and specifies parameters (4), if     needed (for instance, in the screenshot below,  Business Account  was selected as a     parameter so that the side panel displayed the cases of the specific customer selected on the     data entry form).  To apply the changes, the customizer must publish the created customization project. ]]></column>
		</row>
		<row PageID="2cba95fc-674d-4e45-a236-f7958b9b994a" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="027fa9a4-b9b0-204e-a76b-ae38a78316c7" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting from Acumatica ERP 2020 R1, users have the ability to open an entry form directly from the workspace where the substitute form is included. To provide this ability, a '''+ NEW''' button has been introduced. The '''+ NEW''' button appears for substitute forms for data entry forms (on which you can initiate a new record) and is not available for reports, inquiry forms, or processing forms. 
==Differences in Opening the Entry Form==
A substitute form has a list of records related to the form for which it is being substituted. Previously, if a user needed to open an entry form from a workspace, the user had to first perform several steps. For example, when a user opened the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] substitute form from a workspace, the system opened the list of vendor documents—including landed cost bills, adjustments, and prepayments. To enter a bill on the data entry form, the user clicked the '''New Record''' button on the form toolbar. {br}

With the newly introduced button, the user can open the entry form directly from the workspace with just one click. This user needs to point at the name of the form and click the '''+ NEW''' button, which appears. [anchor|#_dd4e52ec-11db-485c-aa2a-cc81975bbccb][anchor|#_337e5b91-c122-4d2e-8284-c2ef5d1b8787][image:ReleaseNotes/Images/RN_2020_R1_UI_New_Button_Interface.png|popup|Appearance of the +New button|350px]
==Steps to Open an Entry Form from a Workspace==
To open an entry form from a workspace, do the following:[anchor|#_d771143c-712d-4b4d-99f1-a9078c4cbd6e]
#Open any workspace, for example, '''Finance'''.
#Hover over the substitute form, and click the '''+ NEW''' button when it appears. The entry form opens, and you can create a new entity on the form.
]]></column>
			<column name="PlainText"><![CDATA[User Interface: Quick Opening of an Entry    Form Starting from  Acumatica ERP 2020 R1,     users have the ability to open an entry form directly from the workspace where the substitute     form is included. To provide this ability, a  + NEW  button has been     introduced. The  + NEW  button appears for substitute forms for data entry     forms (on which you can initiate a new record) and is not available for reports, inquiry forms,     or processing forms.  Differences in Opening the Entry Form A substitute form has a list of records related to the form for which it is being substituted.     Previously, if a user needed to open an entry form from a workspace, the user had to first     perform several steps. For example, when a user opened the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments substitute form from a workspace, the system opened the     list of vendor documents—including landed cost bills, adjustments, and prepayments. To     enter a bill on the data entry form, the user clicked the  New Record      button on the form toolbar.  With the newly introduced button, the user can open the entry form directly from the workspace     with just one click. This user needs to point at the name of the form and click the  +      NEW  button, which appears.  Appearance of the +New button Steps to Open an Entry Form from a Workspace To open an entry form from a workspace, do the following: Open any workspace, for example,  Finance . Hover over the substitute form, and click the  + NEW  button when it      appears. The entry form opens, and you can create a new entity on the form. ]]></column>
		</row>
		<row PageID="b587e26a-a2cc-4f2f-bcd3-6eb6a7f16055" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="62f1ca38-6e6c-c77c-6923-b0fa33851537" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, the functionality of user-defined fields has been expanded. A user can now add to a data entry form a lookup box in which users select a value from a list of values of a data field selected from a data access class.{br}{TOC}
==Creating an Attribute for User-Defined Lookup Box==
A user creates new attributes in the system on the [HelpRoot_FormReference\CS_20_50_00|Attributes] ([~/?ScreenId=CS205000|CS205000]) form. On this form, the new ''Selector'' option has been added for the '''Control Type''' box. When the option is selected for the newly created attribute, the system hides the '''Entry Mask''' and '''Reg. Exp.''' boxes and instead displays the '''Schema Object''' and '''Schema Field''' boxes. {br}

In the '''Schema Object''' box, the user selects the data access class (DAC) that contains the field whose values the system will use as attribute values. Then in the '''Schema Field''' box, the user selects the field whose values the system will use as attribute values.{br}

The following screenshot demonstrates the '''Order Type''' attribute with the ''Selector'' control type. The system will use the <tt>OrderType</tt> field from the <tt>PX.Objects.SO.SOOrder</tt> data access class to retrieve the values for the lookup box.[anchor|#_908a27a2-64b8-43dc-b108-90e8dc1bedc8][anchor|#_a796d756-71fb-4ea6-9732-558ba9cf6859][image:ReleaseNotes/Images/RN_2020_R1_UI_UDF_Lookup_Example.png|popup|The Order Type attribute with the Selector control type|350px]
==Adding a User-Defined Field to a Form==
After the attribute has been created, a user can add it as a user-defined field to a data entry form by using the '''Customization''' menu on the from title bar.((({S:Warn}Only users with the ''Customizer'' user role can add user-defined fields. Adding user-defined fields is available to a limited number of forms.
)))
On the form for which a user added user-defined fields, the original information of the record is displayed on the '''Document''' tab. The added user-defined field is displayed on the '''User-Defined Fields''' tab, as the following screenshot demonstrates.[anchor|#_cd789871-ffa1-45b6-b386-40054b478979][anchor|#_02bdfebc-676e-4cfb-9cb7-6c0a71fc75f5][image:ReleaseNotes/Images/RN_2020_R1_UI_UDF_Lookup_Added.png|popup|The user-defined Order Type lookup box|350px]]]></column>
			<column name="PlainText"><![CDATA[User Interface: User-Defined Lookup Boxes In  Acumatica ERP 2020 R1,     the functionality of user-defined fields has been expanded. A user can now add to a data entry     form a lookup box in which users select a value from a list of values of a data field selected     from a data access class. Creating an Attribute for User-Defined Lookup Box A user creates new attributes in the system on the   ([~/?ScreenId=CS205000|CS205000]) Attributes (CS205000) form. On this form, the new  Selector  option has been added for the       Control Type  box. When the option is selected for the newly created     attribute, the system hides the  Entry Mask  and  Reg.      Exp.  boxes and instead displays the  Schema Object  and       Schema Field  boxes.  In the  Schema Object  box, the user selects the data access class (DAC)     that contains the field whose values the system will use as attribute values. Then in the       Schema Field  box, the user selects the field whose values the system     will use as attribute values. The following screenshot demonstrates the  Order Type  attribute with the       Selector  control type. The system will use the  OrderType  field from     the  PX.Objects.SO.SOOrder  data access class to retrieve the values for the     lookup box. The Order Type attribute with the Selector control type Adding a User-Defined Field to a Form After the attribute has been created, a user can add it as a user-defined field to a data     entry form by using the  Customization  menu on the from title bar. Only users with the  Customizer  user role can add user-defined     fields. Adding user-defined fields is available to a limited number of forms. On the form for which a user added user-defined fields, the original information of the record     is displayed on the  Document  tab. The added user-defined field is     displayed on the  User-Defined Fields  tab, as the following screenshot     demonstrates. The user-defined Order Type lookup box ]]></column>
		</row>
		<row PageID="630f8e29-e238-4aa8-83a1-db2d6a4cde14" Language="en-US" PageRevisionID="1" Content="&#xA;In Acumatica ERP 2020 R1, a new visual style for printed forms generated on the report forms has been introduced. New look and feel was designed and implemented for printed forms used in financial, inventory and order management, project accounting, customer management, field services, and construction.{br}&#xA;&#xA;The following screenshot illustrates an invoice printed by running the [HelpRoot_ReportReference\AR_64_10_00|Invoice/Memo] report.[anchor|#_54093dd9-4167-4fb2-a8e0-6d3b43cd3a04][anchor|#_3f6df76d-a213-4d26-9ed4-0d9585573794][image:ReleaseNotes/Images/RN_2020_R1_Finance_Invoice_Memo_Printed_Form.png|popup|Invoice/Memo printed form|400px]" PlainText="User Interface: New Visual Style of Printed Forms In  Acumatica ERP 2020 R1, a new visual style for printed forms generated on the report forms has been introduced.         New look and feel was designed and implemented for printed forms used in financial,         inventory and order management, project accounting, customer management, field services, and         construction. The following screenshot illustrates an invoice printed by running the   ([~/?ScreenId=AR641000|AR641000]) Invoice/Memo report. Invoice/Memo printed form " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="26711dde-a043-b09c-80e1-f95a8fdcbc8a" RecordSourceID="22377" />
		<row PageID="29bf93da-8809-435f-9850-6ce29a65a6fc" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2c51a8ea-8ae3-f6d6-c3e8-36462352f06b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, multiple improvements have been made to the structure of the guides that make up the documentation. Many of the existing topics, with the highest priority placed on end-user documentation, have been updated to follow the new topic structure that was introduced in Acumatica ERP 2019 R2. Topics have been reorganized to relate to a particular process in the system and are grouped by the process: implementation, configuration, or processing of documents. The topics are organized as training lessons that users can perform independently of other lessons by using the ''U100'' dataset.{br}

For ease of navigation, some of the new and existing content has been regrouped into new guides. The following screenshot shows the new end-user guides available in '''Educational Resources''' starting from 2020 R1.[anchor|#_814a8f14-1edc-4ecf-9ea3-c5157ea3e009][anchor|#_6f464129-28ed-48e1-a4c0-e808dded622d][image:ReleaseNotes/Images/RN_2020_R1_Documentation_End-User_Guides.png|popup|New end-user guides|450px]
The following sections outline the changes introduced in the end-user guides in Acumatica ERP 2020 R1.{br}{TOC}
==Financial Management==
The information related to credit policy management, previously available in ''Accounts Receivable'', is now available under ''Credit Policy Management'' in the ''Financial Management'' guide, which makes it easier for users to access this guide through the Help dashboard. This guide includes topics about configuring credit terms, statement cycles, write-off methods, and dunning letters. It explains how to work with customers and documents on credit hold, generate customer statements, and create write-offs.{br}

The ''Accounts Payable'' and ''Accounts Receivable'' guides have been improved and now contain more topics of the new type. Both guides now have a similar structure, which users can navigate more easily.{br}

Topics on contract management, which were previously available in the ''Financial Management'' guide under ''Accounts Receivable'', have been moved to a separate ''Contract Management'' guide.{br}

Topics on tax management have been restructured and now include more topics of the new type. Additionally, the ''Taxes'' guide now includes topics describing how to process various types of taxable documents in the system and illustrating how multiple tax calculation methods are applied to the documents that a user creates.
==Payroll==
A new ''Payroll'' guide has been introduced in 2020 R1. It describes the configuration of payroll processes and the main payroll processes performed in Acumatica ERP, and also includes payroll-specific form reference topics.
==Prices and Discounts==
The topics on prices and discounts, which were previously available in the ''Accounts Payable'' and ''Accounts Receivable'' guides, have been moved to a separate ''Prices and Discounts'' guide. This guide includes all topics about customer and vendor prices and discounts, and explains how to set them up and how to process various documents with prices and discounts in the system. Most of the topics of this guide have been reworked into topics of the new type.
==Automated Warehouse Operations==
Topics that described automated warehouse operations have been significantly extended and moved from the ''Order Management'' guide to a separate ''Automated Warehouse Operations'' guide. The topics of the guide are now grouped by automated processes and provide detailed information about each process, including workflow diagrams and implementation guidelines.]]></column>
			<column name="PlainText"><![CDATA[Documentation: Improvements in the Structure of Guides In  Acumatica ERP 2020 R1, multiple improvements have been made to the structure of the guides that make up the         documentation. Many of the existing topics, with the highest priority placed on end-user         documentation, have been updated to follow the new topic structure that was introduced in            Acumatica ERP 2019 R2. Topics have been reorganized to relate to a particular process in the system and         are grouped by the process: implementation, configuration, or processing of documents. The         topics are organized as training lessons that users can perform independently of other         lessons by using the  U100  dataset. For ease of navigation, some of the new and existing content has been regrouped into new         guides. The following screenshot shows the new end-user guides available in            Educational Resources  starting from  2020 R1. New end-user guides The following sections outline the changes introduced in the end-user guides in  Acumatica ERP 2020 R1. Financial Management The information related to credit policy management, previously available in  Accounts           Receivable , is now available under  Credit Policy Management  in the  Financial           Management  guide, which makes it easier for users to access this guide through the         Help dashboard. This guide includes topics about configuring credit terms, statement cycles,         write-off methods, and dunning letters. It explains how to work with customers and documents         on credit hold, generate customer statements, and create write-offs. The  Accounts Payable  and  Accounts Receivable  guides have been improved and         now contain more topics of the new type. Both guides now have a similar structure, which         users can navigate more easily. Topics on contract management, which were previously available in the  Financial           Management  guide under  Accounts Receivable , have been moved to a separate            Contract Management  guide. Topics on tax management have been restructured and now include more topics of the new         type. Additionally, the  Taxes  guide now includes topics describing how to process         various types of taxable documents in the system and illustrating how multiple tax         calculation methods are applied to the documents that a user creates. Payroll A new  Payroll  guide has been introduced in  2020 R1. It describes the configuration of payroll processes and the main payroll processes         performed in  Acumatica ERP, and also includes payroll-specific form reference topics. Prices and Discounts The topics on prices and discounts, which were previously available in the  Accounts           Payable  and  Accounts Receivable  guides, have been moved to a separate  Prices           and Discounts  guide. This guide includes all topics about customer and vendor prices         and discounts, and explains how to set them up and how to process various documents with         prices and discounts in the system. Most of the topics of this guide have been reworked into         topics of the new type. Automated Warehouse Operations Topics that described automated warehouse operations have been significantly extended and         moved from the  Order Management  guide to a separate  Automated Warehouse           Operations  guide. The topics of the guide are now grouped by automated processes and         provide detailed information about each process, including workflow diagrams and         implementation guidelines. ]]></column>
		</row>
		<row PageID="c25bf08e-2e1d-4cb6-bbcf-ea2e9aa99032" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="0eae5806-f3bf-284e-cec6-b404b2225338" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting from Acumatica ERP 2020 R1, to improve the user experience, new types of notes have been introduced in the documentation.{br}{TOC}
==Tip Notes==
This type of note, illustrated in the following screenshot, provides users with information about an easier way to do something or advises them on the best practices for working in the system.[anchor|#_396dc547-6ef3-4774-862c-a1283daa8a5a][anchor|#_b5627075-8f3f-46a5-b9af-658c31348b6a][image:ReleaseNotes/Images/RN_2020_R1_Documentation_Notes_Tip.png|popup|A note of the Tip type|450px]
==Attention Notes==
This type of note replaces the notes used in the previous version of Acumatica ERP and draws extra attention to the information included in it; see an Attention note in the following screenshot. A note of this type can be used, for example, to point out that some functionality in Acumatica ERP is available only if a particular feature is enabled.[anchor|#_49ff123c-bd2c-4761-bd02-7e09e346e92c][anchor|#_8c895598-d35a-4e83-8c27-56ca5c28e38c][image:ReleaseNotes/Images/RN_2020_R1_Documentation_Notes_Attention.png|popup|A note of the Attention type|450px]
==Important Notes==
This type of note, illustrated in the following screenshot, indicates important information to which users should pay special attention. This type of note is used if ignoring the information can lead to consequences such as data loss or inconsistency, for example, when a user tries to disable a feature that has been in use.[anchor|#_5923d61b-06ac-459c-b6b6-449a31c79c7f][anchor|#_8f466250-1e99-4fab-b0cb-e3897b42790b][image:ReleaseNotes/Images/RN_2020_R1_Documentation_Notes_Important.png|popup|A note of the Important type|450px]]]></column>
			<column name="PlainText"><![CDATA[Documentation: New Types of Notes Starting from  Acumatica ERP 2020 R1, to improve the user experience, new types of notes have been introduced in the         documentation. Tip Notes This type of note, illustrated in the following screenshot, provides users with information         about an easier way to do something or advises them on the best practices for working in the         system. A note of the Tip type Attention Notes This type of note replaces the notes used in the previous version of  Acumatica ERP and draws extra attention to the information included in it; see an Attention note in the         following screenshot. A note of this type can be used, for example, to point out that some         functionality in  Acumatica ERP is available only if a particular feature is enabled. A note of the Attention type Important Notes This type of note, illustrated in the following screenshot, indicates important information to         which users should pay special attention. This type of note is used if ignoring the         information can lead to consequences such as data loss or inconsistency, for example, when a         user tries to disable a feature that has been in use. A note of the Important type ]]></column>
		</row>
		<row PageID="cd57f6c3-4b8e-4ac3-8e96-1e2fb308e02e" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="96d31ffa-cef0-3bcb-fb9c-d1f778889e64" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a developer can customize a form by defining a ''workflow'' in the Customization Project Editor. A workflow is a process of changing the state of an entity as a result of a user performing an action. For example, the status of an opportunity can be changed based on the actions a user has performed on the opportunity.{br}

The process of defining a workflow does not require coding. To give developers the ability to define workflows, new pages have been introduced to the '''Screens''' section of Customization Project Editor, as shown in the following screenshot: the Workflows page (selected in the screenshot) and the Dialog Boxes page. To configure workflows, developers can also use the new Field Editor and Action Editor. For details, see [HelpRoot_ReleaseNotes\RN_2020_R1_Developer_FieldsActionsEditor|Customization: Extended Editors for Fields and Actions].[anchor|#_0ecf8f5f-58ab-4c3c-a721-b2a732927b23][anchor|#_b1cc04b8-a283-4acd-a995-64df514e9521][image:ReleaseNotes/Images/RN_2020_R1_Developer_Workflows_Nav.png|popup|Links to the Workflows and Dialog Boxes pages of the Screen Editor|450px]((({S:Warn}The automation step functionality and the workflow functionality cannot be used simultaneously for a single form. So if a developer wants to define workflows for a form, the developer should deactivate any automation steps for this form first.
))){br}{TOC}
==Defining of Workflows==
A developer can define a single workflow for a whole form or multiple workflows for the entities created on the form that have a specific field value. For example, a developer can set up a workflow for any opportunity or for only opportunities of a particular opportunity class.{br}

A developer defines a workflow as follows: First, the developer determines all the possible states of an entity that is created and worked with on a form. (For example, with an opportunity, the developer determines all possible statuses of the opportunity.) Then for each state, the developer adds all the actions that can be performed with an entity in this state and all transitions—that is, all the ways the values of an entity&rsquo;s properties and state should be changed when each specific action is performed. If a user has to provide additional information to the system during a workflow, a developer can define dialog boxes to facilitate this.{br}

For each state of the workflow, the developer can specify which UI elements and actions on the applicable form are shown, which are enabled, and which are required. Also, the developer can add new values for the field (for example, {{Status}}) that determines the state of an entity.{br}

The following screenshot shows an example of a fully defined workflow for an opportunity.[anchor|#_8b20282b-7028-4781-af86-f1d5ed3fb2a2][anchor|#_5d059080-cdca-4e61-a7cb-9439a873fdaf][image:ReleaseNotes/Images/RN_2019_R2_Workflows_Page.png|popup|The Default workflow of an opportunity|450px]
In the navigation pane of the screenshot above, you can see that a workflow is defined for the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form (Item 1 in the screenshot). ''Default workflow'' is shown on the Workflows page (as you can see in the page name). On the '''States and Transitions''' pane (Item 2), all possible states of an opportunity (which in this example are values of the {{Status}} field on the [HelpRoot_FormReference\CR_30_40_00|Opportunities] form) are shown. The '''State Properties''' tab displays the fields of the [HelpRoot_FormReference\CR_30_40_00|Opportunities] form that should have particular settings when the status of an opportunity is ''New'' (Item 3 in the screenshot). The '''Actions''' tab displays the list of actions that are available in the selected state.{br}

For each state, any number of ''transitions'' can be defined on the '''Transition Properties''' tab of the Workflows page. Each transition defines how the entity&rsquo;s properties and the entity&rsquo;s state should be changed when a specific action (indicated in the '''Action Name''' box) is performed. The following screenshot illustrates an example of the properties of the ''Open'' transition. These properties indicate that the system should change the state (that is, the status) of an opportunity from ''New'' to ''Open'' when the ''Open (Open)'' action is performed.[anchor|#_46efbdf4-bc4f-42bd-9612-876dcba443a7][anchor|#_2204c8f9-68c4-4948-9bb1-4f3a8e7db722][image:ReleaseNotes/Images/RN_2019_R2_Workflows_Transition.png|popup|Transition properties|450px]
==Workflow Inheritance==
Some Acumatica ERP forms (see [[#_fbc70aa2-1815-43af-91f9-3d79d69bc0c9|CRM Workflows]) have predefined workflows. Developers can define custom workflows from scratch or workflows based on the predefined workflow. {br}

A custom workflow based on the predefined workflow inherits all modifications of the predefined workflow. A developer can view the difference between a predefined workflow and a custom workflow, and cause the custom workflow to revert to the predefined workflow.((({S:Warn} If a predefined workflow is changed in a later update, the custom workflows based on the predefined workflow will inherit the changes. If a developer publishes a customization project that contains a customized predefined workflow, and there is a newer version of the predefined workflow in the system, a developer can upgrade the customized predefined workflow with the latest changes from the system.
)))
==Workflow Types==
A workflow type defines the set of entities to which the workflow is applied.{br}

To apply a workflow to all entities regardless of their property values, a developer can set the workflow type to ''DEFAULT''. To apply a custom workflow to entities with a specific property value, the developer can select the '''Workflow-Identifying Field''' on the Workflows page and click '''Add Workflow''' on the page toolbar; in the '''Add Workflow''' dialog box, which opens, the developer needs to specify a type other than ''DEFAULT''. For example, to apply a workflow with a specific opportunity class, on the Workflows page, a developer should select ''Class ID'' in the '''Workflow Identifying Field''' box and click '''Add Workflow '''on the page toolbar. Then in the '''Add Workflow''' dialog box, the developer should select a type other than ''DEFAULT'', as shown in the following screenshot.[anchor|#_1a4aa2fa-94a6-4e27-9c84-dbf23118f8df][anchor|#_02821106-2fd3-4255-93b9-66255cddffe6][image:ReleaseNotes/Images/RN_2020_R1_Developer_Workflow_Types.png|popup|Workflow types|300px][anchor|#_0e631f96-d250-43de-882f-036e698b9350]
==Workflow Dialog Boxes==
A developer can configure a ''workflow dialog box'': a dialog box that, as part of the workflow, is shown to a user who clicks a particular action button or menu command. This might be helpful if the developer wants the user to provide additional values.{br}

Again using the example of opportunities, suppose that to open an opportunity, a user should provide a value for the {{Reason}} and {{Stage}} fields. The following screenshot shows the Dialog Boxes page with a configuration of a dialog box in which the user will provide these values.[anchor|#_11ab6f79-098c-4baa-a8ba-c7ae9803a109][anchor|#_50be5987-c388-4912-82f6-4502d3052fdd][image:ReleaseNotes/Images/RN_2019_R2_Workflows_Forms.png|popup|The configuration of the FormOpen dialog box|450px]
After the dialog box has been created and configured, the developer can define an action in the Action Editor so that this dialog box is shown when a user clicks this action. The following screenshot shows the {{Open}} action configured to bring up the ''FormOpen'' dialog box.[anchor|#_0940a653-80b9-4bdc-a50b-25356f46f272][anchor|#_90048dd0-3804-4d61-8ce1-2cc268f52b56][image:ReleaseNotes/Images/RN_2020_R1_Developer_Workflows_Action.png|popup|The Open action|450px]
==Workflow Actions==
For each state of an entity, a developer can define which actions are enabled and create new ''workflow actions''. A workflow action is a simplified type of an action that is not associated with a graph method. A workflow action can be used only to change the state of an entity, display a dialog box (see [[#_0e631f96-d250-43de-882f-036e698b9350|Workflow Dialog Boxes]), or change the specified field values.{br}

A developer can view the workflow action properties, add an action defined in Acumatica ERP, and create an action for a state on the '''Actions''' tab of the Workflows page, as shown in the following screenshot. Configuring of action properties is performed in the Action Editor. For details, see [HelpRoot_ReleaseNotes\RN_2020_R1_Developer_FieldsActionsEditor|Customization: Extended Editors for Fields and Actions].[anchor|#_6fc30b62-1d42-4da5-9ecc-4e350737d2cf][anchor|#_e3078a68-be29-435b-b6e7-6089fbd5f78c][image:ReleaseNotes/Images/RN_2020_R1_Developer_Workflow_StateAction.png|popup|Actions tab of the Workflows page|450px]
The screenshot above shows a list of actions (Item 1 in the screenshot) configured for the ''New'' state of an opportunity. The developer can click the '''Create Action''' button on the toolbar (Item 2 in the screenshot) to create a new workflow action.
==Development of Workflows in an Extension Library==
Developers can develop and customize workflows in the Customization Project Editor as well as in Visual Studio by using an extension library. To develop workflows, developers should use the new classes that have been introduced in the {{PX.Data.WorkflowAPI}} namespace.{br}

To customize a workflow from code, a developer needs to perform the following steps:[anchor|#_80ae9330-d3ee-496e-8834-ecc100ce719d]
#Create an extension of a graph where the workflow is defined.
#:For example, a graph extension for a workflow defined for the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form looks as shown in the following code.{{{{using PX.Data.WorkflowAPI;
using PX.Objects.CR.Workflows;

namespace PX.Objects.CR
{
  using static PX.Data.WorkflowAPI.BoundedTo&lt;OpportunityMaint, CROpportunity&gt;;
    public class OpportunityWorkflowExt : PX.Data.PXGraphExtension&lt;OpportunityWorkflow, 
                                                                   OpportunityMaint&gt;
      { }
}
}}}}
#In the graph extension, override the <tt>void Configure(PXScreenConfiguration config)</tt> method.
#In the overridding method, get the context value of the workflow by calling the <tt>config.GetScreenConfigurationContext</tt> method as shown in the following code.{{{{public override void Configure(PXScreenConfiguration config)
{
  var context = config.GetScreenConfigurationContext&lt;OpportunityMaint, CROpportunity&gt;();
}
}}}}
#In the overridding method, declare the new entities you want to add to the workflow, such as dialog boxes, actions, and states.
#:Suppose that in this example, the developer needs to add a new action named '''Assign''' which changes the status of an opportunity to ''Assigned''. When a user selects the action, the user should provide the owner of the opportunity in a dialog box. This action should be defined as shown in the following code.{{{{// String constants
var _reasonAssign = "NA";
var _fieldOwnerID = "OwnerID";
var _actionAssign = "Assign";

// The dialog box
var _formAssign = "FormAssign";
var formAssign = context.Forms.Create(_formAssign, form =&gt; form
	.Prompt("Details")
	.WithFields(fields =&gt;
	{
		filler.Add(_fieldOwnerID, field =&gt; field
			.WithSchemaOf&lt;CROpportunity.ownerID&gt;()
			.DefaultValueFromSchemaField()
			.IsRequired()
			.Prompt("Owner"));
	}));

// The Assign action
var actionAssign = context.ActionDefinitions.CreateNew(_actionAssign, action =&gt; action
	.WithFieldAssignments(fields =&gt;
	{
		fields.Add&lt;CROpportunity.resolution&gt;(f =&gt; f.SetFromValue(_reasonAssign));
		fields.Add&lt;CROpportunity.ownerID&gt;(f =&gt; f.SetFromFormField(formAssign, 
                                                                        _fieldOwnerID));
	})
	.DisplayName("Assign")
	.WithForm(formAssign)                        
	.InFolder(FolderType.ActionsFolder, "Lost")
	.MassProcessingScreen&lt;UpdateOpportunityMassProcess&gt;());
}}}}
#:In the code above, the dialog box and the action are defined. The action is placed in the '''Actions''' menu after the <tt>Lost</tt> action and on the mass processing form. When the action is performed, the <tt>CROpportunity.resolution</tt> field value is changed to NA, and the user is prompted to provide a value for the <tt>CROpportunity.ownerID</tt> field in a dialog box.
#Apply the customization by calling the <tt>context.UpdateScreenConfigurationFor</tt> method. In the method&rsquo;s lambda expression, the developer applies workflow methods to workflow entities. In this example, the developer would add the entities declared in Instruction 4.
#:To add the <tt>Assign</tt> action, the code should look as follows.{{{{context.UpdateScreenConfigurationFor(screen =&gt;
{
	return screen
              .UpdateDefaultFlow(config1 =&gt; config1
		    .WithTransitions(transitions =&gt;
		    {
		    	transitions.Add(transition =&gt; transition
		    		.From(States.New)
		    		.To(States.Assigned)
		    		.IsTriggeredOn(actionAssign));
		    })
	       })
		.WithActions(actions =&gt;
		{
			actions.Add(actionAssign);
		})
		.WithForms(forms =&gt;
		{
			forms.Add(formAssign);
		});
});
}}}}
#:In the code above, first a transition from the ''New'' to ''Assigned'' state is added, and then an action and a dialog box are added.
#Build the project, and publish the customization project.
[anchor|#_fbc70aa2-1815-43af-91f9-3d79d69bc0c9]
==CRM Workflows==
The processing of opportunities, cases, and leads has been redesigned to use the new workflow engine. For details, see [HelpRoot_ReleaseNotes\RN_2020_R1_CRM_New_Workflow|CRM: New Workflow in Opportunities and Cases] and [HelpRoot_ReleaseNotes\RN_2020_R1_CRM_New_Lead_Qualification_Workflow|CRM: New Lead Qualification Workflow].{br}

Developers can customize workflows or create new workflows for the [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]), [HelpRoot_FormReference\CR_30_60_00|Cases ] ([~/?ScreenId=CR306000|CR306000]), and [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) forms. Developers can customize existing workflows in Customization Project Editor or by extending graphs and workflows in the {{PX.Objects.CR.Workflows}} namespace. An example of a workflow extension is shown in the following code.{{{{public class OpportunityWorkflowExt 
  : PX.Data.PXGraphExtension&lt;OpportunityWorkflow, OpportunityMaint&gt;
}}}}
The automation steps for these forms are no longer available.]]></column>
			<column name="PlainText"><![CDATA[Customization: Automation of Workflows in  Customization Project EditorIn  Acumatica ERP 2020 R1, a developer can customize a form by defining a  workflow  in the  Customization Project Editor. A workflow is a process of changing the state of an entity as a result of a user         performing an action. For example, the status of an opportunity can be changed based on the         actions a user has performed on the opportunity. The process of defining a workflow does not require coding. To give developers the ability         to define workflows, new pages have been introduced to the  Screens          section of  Customization Project Editor, as shown in the following screenshot: the Workflows page (selected in the screenshot)         and the Dialog Boxes page. To configure workflows, developers can also use the new Field         Editor and Action Editor. For details, see  Customization: Extended Editors for Fields and Actions. Links to the Workflows and Dialog Boxes pages of the Screen Editor The automation step functionality and the workflow functionality cannot be used         simultaneously for a single form. So if a developer wants to define workflows for a form,         the developer should deactivate any automation steps for this form first. Defining of Workflows A developer can define a single workflow for a whole form or multiple workflows for the         entities created on the form that have a specific field value. For example, a developer can         set up a workflow for any opportunity or for only opportunities of a particular opportunity         class. A developer defines a workflow as follows: First, the developer determines all the possible         states of an entity that is created and worked with on a form. (For example, with an         opportunity, the developer determines all possible statuses of the opportunity.) Then for         each state, the developer adds all the actions that can be performed with an entity in this         state and all transitions—that is, all the ways the values of an entity's properties         and state should be changed when each specific action is performed. If a user has to provide         additional information to the system during a workflow, a developer can define dialog boxes         to facilitate this. For each state of the workflow, the developer can specify which UI elements and actions on         the applicable form are shown, which are enabled, and which are required. Also, the         developer can add new values for the field (for example,  Status ) that         determines the state of an entity. The following screenshot shows an example of a fully defined workflow for an         opportunity. The Default workflow of an opportunity In the navigation pane of the screenshot above, you can see that a workflow is defined for         the   ([~/?ScreenId=CR304000|CR304000]) Opportunities Opportunities (CR304000) form (Item 1         in the screenshot).  Default workflow  is shown on the Workflows page (as you can see         in the page name). On the  States and Transitions  pane (Item 2), all         possible states of an opportunity (which in this example are values of the            Status  field on the   ([~/?ScreenId=CR304000|CR304000]) Opportunities Opportunities form) are shown. The  State Properties  tab         displays the fields of the   ([~/?ScreenId=CR304000|CR304000]) Opportunities Opportunities         form that should have particular settings when the status of an opportunity is  New          (Item 3 in the screenshot). The  Actions  tab displays the list of         actions that are available in the selected state. For each state, any number of  transitions  can be defined on the            Transition Properties  tab of the Workflows page. Each transition         defines how the entity's properties and the entity's state should be changed when a specific         action (indicated in the  Action Name  box) is performed. The following         screenshot illustrates an example of the properties of the  Open  transition. These         properties indicate that the system should change the state (that is, the status) of an         opportunity from  New  to  Open  when the  Open (Open)  action is         performed. Transition properties Workflow Inheritance Some  Acumatica ERP forms (see  CRM Workflows CRM Workflows) have predefined workflows. Developers can define custom workflows from         scratch or workflows based on the predefined workflow.  A custom workflow based on the predefined workflow inherits all modifications of the         predefined workflow. A developer can view the difference between a predefined workflow and a         custom workflow, and cause the custom workflow to revert to the predefined workflow.  If a predefined workflow is changed in a later update, the custom workflows based on         the predefined workflow will inherit the changes. If a developer publishes a customization         project that contains a customized predefined workflow, and there is a newer version of the         predefined workflow in the system, a developer can upgrade the customized predefined         workflow with the latest changes from the system. Workflow Types A workflow type defines the set of entities to which the workflow is applied. To apply a workflow to all entities regardless of their property values, a developer can         set the workflow type to  DEFAULT . To apply a custom workflow to entities with a         specific property value, the developer can select the  Workflow-Identifying           Field  on the Workflows page and click  Add Workflow  on         the page toolbar; in the  Add Workflow  dialog box, which opens, the         developer needs to specify a type other than  DEFAULT . For example, to apply a         workflow with a specific opportunity class, on the Workflows page, a developer should select            Class ID  in the  Workflow Identifying Field  box and click            Add Workflow  on the page toolbar. Then in the  Add           Workflow  dialog box, the developer should select a type other than            DEFAULT , as shown in the following screenshot. Workflow types Workflow Dialog Boxes A developer can configure a  workflow dialog box : a dialog box that, as part of the         workflow, is shown to a user who clicks a particular action button or menu command. This         might be helpful if the developer wants the user to provide additional values. Again using the example of opportunities, suppose that to open an opportunity, a user         should provide a value for the  Reason  and  Stage  fields.         The following screenshot shows the Dialog Boxes page with a configuration of a dialog box in         which the user will provide these values. The configuration of the FormOpen dialog box After the dialog box has been created and configured, the developer can define an action in         the Action Editor so that this dialog box is shown when a user clicks this action. The         following screenshot shows the  Open  action configured to bring up the            FormOpen  dialog box. The Open action Workflow Actions For each state of an entity, a developer can define which actions are enabled and create         new  workflow actions . A workflow action is a simplified type of an action that is not         associated with a graph method. A workflow action can be used only to change the state of an         entity, display a dialog box (see  Workflow Dialog Boxes Workflow Dialog Boxes), or change the specified field values. A developer can view the workflow action properties, add an action defined in  Acumatica ERP, and create an action for a state on the  Actions  tab of the         Workflows page, as shown in the following screenshot. Configuring of action properties is         performed in the Action Editor. For details, see  Customization: Extended Editors for Fields and Actions. Actions tab of the Workflows page The screenshot above shows a list of actions (Item 1 in the screenshot) configured for the            New  state of an opportunity. The developer can click the  Create           Action  button on the toolbar (Item 2 in the screenshot) to create a new         workflow action. Development of Workflows in an Extension Library Developers can develop and customize workflows in the  Customization Project Editor         as well as in Visual Studio by using an extension library. To develop workflows, developers         should use the new classes that have been introduced in the            PX.Data.WorkflowAPI  namespace. To customize a workflow from code, a developer needs to perform the following steps: Create an extension of a graph where the workflow is defined. For example, a graph             extension for a workflow defined for the   ([~/?ScreenId=CR304000|CR304000]) Opportunities Opportunities (CR304000) form looks as shown in the following           code. using PX.Data.WorkflowAPI;
using PX.Objects.CR.Workflows;

namespace PX.Objects.CR
{
  using static PX.Data.WorkflowAPI.BoundedTo<OpportunityMaint, CROpportunity>;
    public class OpportunityWorkflowExt : PX.Data.PXGraphExtension<OpportunityWorkflow, 
                                                                   OpportunityMaint>
      { }
} In the graph extension, override the  void Configure(PXScreenConfiguration             config)  method. In the overridding method, get the context value of the workflow by calling the              config.GetScreenConfigurationContext  method as shown in the following           code. public override void Configure(PXScreenConfiguration config)
{
  var context = config.GetScreenConfigurationContext<OpportunityMaint, CROpportunity>();
} In the overridding method, declare the new entities you want to add to the workflow,           such as dialog boxes, actions, and states. Suppose that in this example, the developer             needs to add a new action named  Assign  which changes the status             of an opportunity to  Assigned . When a user selects the action, the user should             provide the owner of the opportunity in a dialog box. This action should be defined as             shown in the following             code. // String constants
var _reasonAssign = "NA";
var _fieldOwnerID = "OwnerID";
var _actionAssign = "Assign";

// The dialog box
var _formAssign = "FormAssign";
var formAssign = context.Forms.Create(_formAssign, form => form
	.Prompt("Details")
	.WithFields(fields =>
	{
		filler.Add(_fieldOwnerID, field => field
			.WithSchemaOf<CROpportunity.ownerID>()
			.DefaultValueFromSchemaField()
			.IsRequired()
			.Prompt("Owner"));
	}));

// The Assign action
var actionAssign = context.ActionDefinitions.CreateNew(_actionAssign, action => action
	.WithFieldAssignments(fields =>
	{
		fields.Add<CROpportunity.resolution>(f => f.SetFromValue(_reasonAssign));
		fields.Add<CROpportunity.ownerID>(f => f.SetFromFormField(formAssign, 
                                                                        _fieldOwnerID));
	})
	.DisplayName("Assign")
	.WithForm(formAssign)                        
	.InFolder(FolderType.ActionsFolder, "Lost")
	.MassProcessingScreen<UpdateOpportunityMassProcess>()); In             the code above, the dialog box and the action are defined. The action is placed in the                Actions  menu after the  Lost  action and on             the mass processing form. When the action is performed, the                CROpportunity.resolution  field value is changed to NA, and the user             is prompted to provide a value for the  CROpportunity.ownerID  field in             a dialog box. Apply the customization by calling the              context.UpdateScreenConfigurationFor  method. In the method's lambda           expression, the developer applies workflow methods to workflow entities. In this example,           the developer would add the entities declared in Instruction 4. To add the                Assign  action, the code should look as             follows. context.UpdateScreenConfigurationFor(screen =>
{
	return screen
              .UpdateDefaultFlow(config1 => config1
		    .WithTransitions(transitions =>
		    {
		    	transitions.Add(transition => transition
		    		.From(States.New)
		    		.To(States.Assigned)
		    		.IsTriggeredOn(actionAssign));
		    })
	       })
		.WithActions(actions =>
		{
			actions.Add(actionAssign);
		})
		.WithForms(forms =>
		{
			forms.Add(formAssign);
		});
}); In             the code above, first a transition from the  New  to  Assigned  state is             added, and then an action and a dialog box are added. Build the project, and publish the customization project. CRM Workflows The processing of opportunities, cases, and leads has been redesigned to use the new         workflow engine. For details, see  CRM: New Workflow in Opportunities and Cases and  CRM: New Lead Qualification Workflow. Developers can customize workflows or create new workflows for the   ([~/?ScreenId=CR304000|CR304000]) Opportunities Opportunities (CR304000),   ([~/?ScreenId=CR306000|CR306000]) Cases  Cases (CR306000), and   ([~/?ScreenId=CR301000|CR301000]) Leads Leads (CR301000) forms. Developers can         customize existing workflows in  Customization Project Editor         or by extending graphs and workflows in the  PX.Objects.CR.Workflows          namespace. An example of a workflow extension is shown in the following code. public class OpportunityWorkflowExt 
  : PX.Data.PXGraphExtension<OpportunityWorkflow, OpportunityMaint> The automation steps for these forms are no longer available. ]]></column>
		</row>
		<row PageID="8c5aa513-cf32-44a9-99d1-0bc92ad5ca14" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="1f1854f9-283b-f225-0c4a-5b78209082ea" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, a developer can configure fields and add new actions or customize exiting actions by using the Field Editor and Action Editor of the Customization Project Editor. The editors can be accessed in the Screens node of the navigation pane. {br}{TOC}
==Action Editor==
In the Action Editor, a developer can add a new action, modify an action in a predefined workflow, or modify an action defined in a graph. Actions added in the predefined workflow are automatically displayed in the editor.{br}

The following functions of the editor were previously available in the Screen Editor:[anchor|#_f70b90bb-3e74-44ec-857c-ee6fe2ab6544]
*Creation of an action
*Modification of an action properties
{br}

A developer can configure the properties of an action, specify the dialog box that should be displayed when the action is invoked, and specify a processing form where the action is displayed. For details about dialog boxes, see the ''Workflow Dialog Boxes'' section in [HelpRoot_ReleaseNotes\RN_2019_R2_Developer_AutomationImprovements|Customization: Automation of Workflows in Customization Project                         Editor]. The Action Editor page is shown in the following screenshot.[anchor|#_90d3b6e2-c726-4a64-b9ee-1e562f191c5c][anchor|#_92d11469-2784-4965-bdc9-9fe3547af2da][image:ReleaseNotes/Images/RN_2020_R1_Developer_Actions_Editor.png|popup|The Action Editor page|450px]
The adding of a new action is performed in the editor by using the '''Action Properties''' dialog box, which is shown in the screenshot below. A user can add a new action, modify an action in a predefined workflow, or modify an action defined in a graph. For details about defining workflow actions, see the ''Workflow Actions'' section in [HelpRoot_ReleaseNotes\RN_2019_R2_Developer_AutomationImprovements|Customization: Automation of Workflows in Customization Project                         Editor].[anchor|#_410de94e-0254-4423-9bed-5feee07c3202][anchor|#_9bad1ba7-971c-4e6f-9cac-578ade2938ce][image:ReleaseNotes/Images/RN_2020_R1_Developer_Actions_Properties.png|popup|The Action Properties dialog box|450px]
==Field Editor==
In the Field Editor, a developer can modify the properties of a specified field. Fields modified in the predefined workflow are automatically displayed in the editor.((({S:Warn}Modification of the Disabled, Hidden, and Required properties was previously available on the '''Main Properties''' tab of the Screen Editor. The '''Main Properties''' tab of the Screen Editor has been removed.
)))
The Field Editor page is shown in the following screenshot.[anchor|#_0ee5d10d-576b-4c06-86e9-3206706d319f][anchor|#_ec1ff204-784b-4aea-bff3-3095a42c0c21][image:ReleaseNotes/Images/RN_2020_R1_Developer_Fields_Editor.png|popup|The Field Editor page|450px]
A developer can add only existing fields to the editor. The adding of a field is performed in the editor by using the '''Add Field''' dialog box, which is shown in the screenshot below.[anchor|#_eec474d5-ecc6-4beb-8aba-b9e8e95176cc][anchor|#_63876834-e0f2-46c3-ab61-aa56e599daa6][image:ReleaseNotes/Images/RN_2020_R1_Developer_Fields_AddField.png|popup|The Add Field dialog box|450px]]]></column>
			<column name="PlainText"><![CDATA[Customization: Extended Editors for Fields and Actions In  Acumatica ERP 2020 R1, a developer can configure fields and add new actions or customize exiting actions by         using the Field Editor and Action Editor of the  Customization Project Editor. The editors can be accessed in the Screens node of the navigation pane.  Action Editor In the Action Editor, a developer can add a new action, modify an action in a predefined         workflow, or modify an action defined in a graph. Actions added in the predefined workflow         are automatically displayed in the editor. The following functions of the editor were previously available in the Screen Editor: Creation of an action Modification of an action properties A developer can configure the properties of an action, specify the dialog box that should         be displayed when the action is invoked, and specify a processing form where the action is         displayed. For details about dialog boxes, see the  Workflow Dialog Boxes  section in            Customization: Automation of Workflows in Customization Project                         Editor. The Action Editor page is         shown in the following screenshot. The Action Editor page The adding of a new action is performed in the editor by using the  Action           Properties  dialog box, which is shown in the screenshot below. A user can add         a new action, modify an action in a predefined workflow, or modify an action defined in a         graph. For details about defining workflow actions, see the  Workflow Actions  section         in  Customization: Automation of Workflows in Customization Project                         Editor. The Action Properties dialog box Field Editor In the Field Editor, a developer can modify the properties of a specified field. Fields         modified in the predefined workflow are automatically displayed in the editor. Modification of the Disabled, Hidden, and Required properties was previously available         on the  Main Properties  tab of the Screen Editor. The  Main           Properties  tab of the Screen Editor has been removed. The Field Editor page is shown in the following screenshot. The Field Editor page A developer can add only existing fields to the editor. The adding of a field is performed         in the editor by using the  Add Field  dialog box, which is shown in         the screenshot below. The Add Field dialog box ]]></column>
		</row>
		<row PageID="a3e290c2-205f-4191-8cdd-3e5cb6b09f88" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d9aac37c-50f8-23b7-f4fe-a3bd2d54636f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, a developer could override a protected member of a graph in a graph extension but could not call this member in a graph extension. In Acumatica ERP 2020 R1, the new <tt>PXProtectedAccess</tt> attribute is introduced (in the <tt>PX.Data</tt> namespace), which developers can use to make a protected member of a graph available to be called in a graph extension. If the developer annotates a member in a graph extension with the <tt>PXProtectedAccess</tt> attribute and this member has the same signature as the corresponding member in the graph or lower-level graph extension, the framework replaces the body of the member annotated with <tt>PXProtectedAccess</tt> with the body of the corresponding member in the graph or lower-level graph extension.{br}

The following sections show examples of <tt>PXProtectedAccess</tt> usage.
==Calling Protected Members of a Graph==
Suppose that the code of Acumatica ERP includes the following graph.<source lang="csharp">public class MyGraph : PXGraph&lt;MyGraph&gt;
{
    protected void Foo(int param1, string param2) { ... }
    protected static void Foo2() { }
    protected int Bar(MyDac dac) =&gt; dac.IntValue;
    protected decimal Prop { get; set; }
    protected double Field;
}</source>{br}

The developer can use the members in an extension of the graph, as shown in the following example.<source lang="csharp">public abstract class MyExt : PXGraphExtension&lt;MyGraph&gt;
{
      [PXProtectedAccess]
      protected abstract void Foo(int param1, string param2)
      [PXProtectedAccess]
      protected abstract void Foo2();
      [PXProtectedAccess]
      protected abstract int Bar(MyDac dac);
      [PXProtectedAccess]
      protected abstract decimal Prop { get; set; }
      [PXProtectedAccess]
      protected abstract double Field { get; set; }
      private void Test()
      {
             Foo(42, "23");
             int bar = Bar(new MyDac());
             decimal prop = Prop;
             Prop = prop + 12;
             double field = Field;
             Field = field + 15;
      }
}</source>
==Calling Protected Members of a Graph Extension==
Suppose that the code of Acumatica ERP includes the following graph.<source lang="csharp">public class MyGraph : PXGraph&lt;MyGraph&gt;
{
    protected void Bar() { }
}</source>{br}

Suppose also that custom code includes the following extension of this graph.<source lang="csharp">public class MyExt : PXGraphExtension&lt;MyGraph&gt;
{
    protected void Foo() { }
}</source>{br}

The developer can use the protected member of the graph extension by specifying the parameter of the attribute, as shown in the following example.<source lang="csharp">public abstract class MySecondLevelExt : PXGraphExtension&lt;MyExt, MyGraph&gt;
{
    [PXProtectedAccess]
    protected abstract void Bar();

    [PXProtectedAccess(typeof(MyExt))]
    protected abstract void Foo();
}</source>]]></column>
			<column name="PlainText"><![CDATA[Platform API: Ability to Call Protected Members in Graph Extensions In previous versions of  Acumatica ERP, a developer could override a protected member of a graph in a graph extension                 but could not call this member in a graph extension. In  Acumatica ERP 2020 R1, the new  PXProtectedAccess  attribute is introduced (in the                      PX.Data  namespace), which developers can use to make a                 protected member of a graph available to be called in a graph extension. If the                 developer annotates a member in a graph extension with the                      PXProtectedAccess  attribute and this member has the same                 signature as the corresponding member in the graph or lower-level graph extension,                 the framework replaces the body of the member annotated with                      PXProtectedAccess  with the body of the corresponding member                 in the graph or lower-level graph extension. The following sections show examples of  PXProtectedAccess  usage. Calling Protected Members of a Graph Suppose that the code of  Acumatica ERP     includes the following     graph. public class MyGraph : PXGraph<MyGraph>
{
    protected void Foo(int param1, string param2) { ... }
    protected static void Foo2() { }
    protected int Bar(MyDac dac) => dac.IntValue;
    protected decimal Prop { get; set; }
    protected double Field;
} The developer can use the members in an extension of the graph, as shown in the following                 example. public abstract class MyExt : PXGraphExtension<MyGraph>
{
      [PXProtectedAccess]
      protected abstract void Foo(int param1, string param2)
      [PXProtectedAccess]
      protected abstract void Foo2();
      [PXProtectedAccess]
      protected abstract int Bar(MyDac dac);
      [PXProtectedAccess]
      protected abstract decimal Prop { get; set; }
      [PXProtectedAccess]
      protected abstract double Field { get; set; }
      private void Test()
      {
             Foo(42, "23");
             int bar = Bar(new MyDac());
             decimal prop = Prop;
             Prop = prop + 12;
             double field = Field;
             Field = field + 15;
      }
} Calling Protected Members of a Graph Extension Suppose that the code of  Acumatica ERP     includes the following     graph. public class MyGraph : PXGraph<MyGraph>
{
    protected void Bar() { }
} Suppose also that custom code includes the following extension of this     graph. public class MyExt : PXGraphExtension<MyGraph>
{
    protected void Foo() { }
} The developer can use the protected member of the graph extension by specifying the parameter                 of the attribute, as shown in the following                 example. public abstract class MySecondLevelExt : PXGraphExtension<MyExt, MyGraph>
{
    [PXProtectedAccess]
    protected abstract void Bar();

    [PXProtectedAccess(typeof(MyExt))]
    protected abstract void Foo();
} ]]></column>
		</row>
		<row PageID="5a16a7cb-04b5-461a-b2a2-27cfd24faa9c" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="5d553a67-d060-cbfa-ca7f-9605ba335b6c" RecordSourceID="22377">
			<column name="Content"><![CDATA[
 Acumatica ERP 2020 R1 supports the logging mechanism provided by the <tt>Microsoft.Extensions.Logging.Abstractions</tt> NuGet package. A developer can use this mechanism in custom code to write to the trace log.{br}

To use this mechanism, a developer should do the following:[anchor|#_549873e5-27fa-40b8-981a-aa9848bedec4]
#Install the <tt>Microsoft.Extensions.Logging.Abstractions</tt> NuGet package to the Visual Studio project that contains custom code.
#Add the following {{using}} directive to the code file that contains the logic for which a developer needs to write to the log.<source lang="csharp">using Microsoft.Extensions.Logging;</source>
#In the graph that executes the logic, add a property of the <tt>ILogger&lt;T&gt;</tt> type, and assign the <tt>InjectDependency</tt> attribute to the property, as shown in the following example. Use the graph as the type parameter.
#:((({S:Hint}For details about the <tt>InjectDependency</tt> attribute, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=67164f06-37ff-40c1-9f33-55e6aa43b44e|Dependency Injection] in the documentation.
))){{{{public class RSSVWorkOrderEntry : PXGraph&lt;RSSVWorkOrderEntry, RSSVWorkOrder&gt;
{
    //Other code of the graph

    //The logger
    [InjectDependency]
    private ILogger&lt;RSSVWorkOrderEntry&gt; MyLogger { get; set; }
}
}}}}
#In the code for which the developer needs to write to the log, such as in an action of the graph, call the methods of the <tt>ILogger&lt;T&gt;</tt> interface to write to the trace log. For details about the methods of the interface, see [https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1?view=dotnet-plat-ext-3.1|ILogger&lt;TCategoryName&gt; Interface] in the Microsoft documentation. The following example shows the call of the <tt>LogInformation</tt> method.<source lang="csharp">public class RSSVWorkOrderEntry : PXGraph&lt;RSSVWorkOrderEntry, RSSVWorkOrder&gt;
{
    //Other code of the graph

    //The logger
    [InjectDependency]
    private ILogger&lt;RSSVWorkOrderEntry&gt; MyLogger { get; set; }

    //A method in the graph
    public void AssignOrder(RSSVWorkOrder order)
    {
        //Implementation of the method
        
        //Writing to the log
        MyLogger.LogInformation(
            "The {OrderNbr} work order has been assigned.", order.OrderNbr);
    }
}</source>
#:((({S:Warn}Do not use string formatting inside the log messages, as is shown in the following code example.<source lang="csharp">MyLogger.LogInformation(
    string.Format("The {0} work order has been assigned.", order.OrderNbr));
MyLogger.LogInformation(
    $"The {order.OrderNbr} work order has been assigned."));</source>
)))
{br}

A user can see the log message in the trace log (shown in the following screenshot) if the user clicks '''Tools''' > '''Trace''' on the form title bar after the corresponding logic has been executed.[anchor|#_9cbb47d3-04fb-4b9c-a0e4-f1021f2268c7][image:ReleaseNotes/Images/RN_2020_R1_Developer_Logging_Improvements.png|popup|450px]{br}

For more information about writing to the trace log in custom code, see [https://help.acumatica.com/Help?ScreenId=ShowWiki&pageid=02895968-0545-41ca-8b2b-0c1b39256bce|To Write to the Trace Log from the Code].]]></column>
			<column name="PlainText"><![CDATA[Platform API: Logging Improvements  Acumatica ERP 2020 R1 supports the logging mechanism provided by the            Microsoft.Extensions.Logging.Abstractions  NuGet package. A developer         can use this mechanism in custom code to write to the trace log. To use this mechanism, a developer should do the following: Install the  Microsoft.Extensions.Logging.Abstractions  NuGet             package to the Visual Studio project that contains custom code. Add the following  using  directive to the code file that contains the             logic for which a developer needs to write to the             log. using Microsoft.Extensions.Logging; In the graph that executes the logic, add a property of the                ILogger<T>  type, and assign the                InjectDependency  attribute to the property, as shown in the             following example. Use the graph as the type parameter. For details               about the  InjectDependency  attribute, see  Dependency Injection Dependency Injection in the               documentation. public class RSSVWorkOrderEntry : PXGraph<RSSVWorkOrderEntry, RSSVWorkOrder>
{
    //Other code of the graph

    //The logger
    [InjectDependency]
    private ILogger<RSSVWorkOrderEntry> MyLogger { get; set; }
} In the code for which the developer needs to write to the log, such as in an action of             the graph, call the methods of the  ILogger<T>  interface to write             to the trace log. For details about the methods of the interface, see  ILogger<TCategoryName> Interface ILogger&lt;TCategoryName&gt; Interface in the             Microsoft documentation. The following example shows the call of the                LogInformation                method. public class RSSVWorkOrderEntry : PXGraph<RSSVWorkOrderEntry, RSSVWorkOrder>
{
    //Other code of the graph

    //The logger
    [InjectDependency]
    private ILogger<RSSVWorkOrderEntry> MyLogger { get; set; }

    //A method in the graph
    public void AssignOrder(RSSVWorkOrder order)
    {
        //Implementation of the method
        
        //Writing to the log
        MyLogger.LogInformation(
            "The {OrderNbr} work order has been assigned.", order.OrderNbr);
    }
} Do               not use string formatting inside the log messages, as is shown in the following code               example. MyLogger.LogInformation(
    string.Format("The {0} work order has been assigned.", order.OrderNbr));
MyLogger.LogInformation(
    $"The {order.OrderNbr} work order has been assigned.")); A user can see the log message in the trace log (shown in the following screenshot) if the         user clicks  Tools Trace  on the form title bar after the corresponding logic has been executed. For more information about writing to the trace log in custom code, see  To Write to the Trace Log from the Code To Write to the Trace Log from the Code. ]]></column>
		</row>
		<row PageID="fc29ba75-09a5-4615-880d-e2c0fba2f0db" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="bf553dc7-31d9-b889-7d47-daf6dc401531" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In the code of Acumatica Framework-based applications, developers can use dependency injection to encapsulate particular logic as a service, which they can then use anywhere in their application. In previous versions of the platform, this technique could be used only in graphs. In Version 2020 R1, developers can also use dependency injection in attributes and custom action classes, as described below.((({S:Danger}Dependency injection in Acumatica Framework-based applications requires the use of the {{Autofac.Module}} class, which is provided by the external {{Autofac}} library. Acumatica does not guarantee the backward compatibility of this library. For details about the {{Autofac}} library, see [https://autofac.readthedocs.io/en/latest/].
))){br}

For the examples shown in the following sections, suppose that dependency injection is defined as follows.<source lang="csharp">using System;
using Autofac;
using PX.Data;
namespace MyNamespace
{
    //An interface for the service
    public interface IMyService
    {
        void ProvideServiceFunctions();
    }
    //A class that implements the logic to be used for dependency injection
    public class MyService : IMyService
    {
        public void ProvideServiceFunctions()
        {
            //An implementation
        }
    }
    //A class that registers the implementation class with Autofac
    public class MyServiceRegistrarion : Module
    {
        protected override void Load(ContainerBuilder builder)
        {
            builder.RegisterType&lt;MyService&gt;().As&lt;IMyService&gt;();
        }
    }
}</source>{br}

For more information about the definition of the service for dependency injection, the registration of the service, and the use of dependency injection in graphs, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=67164f06-37ff-40c1-9f33-55e6aa43b44e|Dependency Injection] in the documentation.{br}{TOC}
==Dependency Injection in Attributes==
For an attribute derived from <tt>PXEventSubscriberAttribute</tt>, developers can use dependency injection in the following way:[anchor|#_fd8b6eea-db30-4b7b-a355-be9f0267e593]
#Define an attribute class and assign to its property the <tt>InjectDependency</tt> attribute, as shown in the following code example.<source lang="csharp">using System;
using PX.Data;

namespace MyNamespace
{
    public class CustomAttribute : PXEventSubscriberAttribute
    {
        [InjectDependency]
        public IMyService Service { get; set; }
    }
}</source>
#To support dependency injection in a constructor of the implementation class of the service, pass <tt>PXEventSubscriberAttribute</tt>, <tt>PXCache</tt>, or <tt>PXGraph</tt> (or any combination of these objects in the constructor), as shown in the following code example.<source lang="csharp">public class MyService : IMyService
{
    //A constructor with PXEventSubscriberAttribute
    <b>public MyService(PXEventSubscriberAttribute parent) <b>
    { 
        //Code of the constructor
    }

    //A constructor with PXCache
    <b>public MyService(PXCache cache)<b>
    { 
        //Code of the constructor
    }

    //A constructor with PXGraph
    <b>public MyService(PXGraph graph)<b>
    { 
        //Code of the constructor
    }

    //A constructor with PXEventSubscriberAttribute and PXGraph
    <b>public MyService(PXEventSubscriberAttribute parent, PXGraph graph)<b>
    { 
        //Code of the constructor
    }

    //Other code of the implementation class
}</source>

==Dependency Injection in Custom Action Classes==
For a custom action class derived from the <tt>PXAction</tt> class or its descendants, developers can use dependency injection as follows:[anchor|#_da9d1f0f-1baa-4399-a142-29b3ebea9d28]
#Define a custom action class as shown in the following code example.<source lang="csharp">using System;
using PX.Data;

namespace MyNamespace
{
    public class CustomCancel&lt;T&gt; : PXCancel&lt;T&gt; 
        where T: class, IBqlTable, new()
    {
        [InjectDependency]
        public IMyService Service { get; set; }

        //Other code of the custom action class
    }
}</source>
#To support dependency injection, in the implementation class of the service, add a constructor with <tt>PXAction</tt> or with both <tt>PXAction</tt> and <tt>PXGraph</tt> as parameters, as shown in the following code example.<source lang="csharp">public class MyService : IMyService
{
    <b>public MyService(PXAction parent) <b>
    { 
        //Code of the constructor
    }

    <b>public MyService(PXAction parent, PXGraph graph) <b>
    { 
        //Code of the constructor
    }

    //Other code of the implementation class
}</source>
]]></column>
			<column name="PlainText"><![CDATA[Platform API: Enhancements in Dependency Injection In the code of  Acumatica Framework-based applications, developers can use dependency injection to encapsulate                 particular logic as a service, which they can then use anywhere in their                 application. In previous versions of the platform, this technique could be used only                 in graphs. In Version  2020 R1, developers can also use dependency injection in attributes and custom action                 classes, as described below. Dependency injection in  Acumatica Framework-based applications requires the use of the  Autofac.Module                      class, which is provided by the external  Autofac  library.  Acumatica does not guarantee the backward compatibility of this library. For details                     about the  Autofac  library, see  . For the examples shown in the following sections, suppose that dependency injection is defined                 as                 follows. using System;
using Autofac;
using PX.Data;
namespace MyNamespace
{
    //An interface for the service
    public interface IMyService
    {
        void ProvideServiceFunctions();
    }
    //A class that implements the logic to be used for dependency injection
    public class MyService : IMyService
    {
        public void ProvideServiceFunctions()
        {
            //An implementation
        }
    }
    //A class that registers the implementation class with Autofac
    public class MyServiceRegistrarion : Module
    {
        protected override void Load(ContainerBuilder builder)
        {
            builder.RegisterType<MyService>().As<IMyService>();
        }
    }
} For more information about the definition of the service for dependency injection,                 the registration of the service, and the use of dependency injection in graphs, see                      Dependency Injection Dependency Injection in the                 documentation. Dependency Injection in Attributes For an attribute derived from  PXEventSubscriberAttribute , developers can                 use dependency injection in the following way: Define an attribute class and assign to its property the                              InjectDependency  attribute, as shown in the following                         code                         example. using System;
using PX.Data;

namespace MyNamespace
{
    public class CustomAttribute : PXEventSubscriberAttribute
    {
        [InjectDependency]
        public IMyService Service { get; set; }
    }
} To support dependency injection in a constructor of the implementation class                         of the service, pass  PXEventSubscriberAttribute ,                              PXCache , or  PXGraph  (or any                         combination of these objects in the constructor), as shown in the following                         code                         example. public class MyService : IMyService
{
    //A constructor with PXEventSubscriberAttribute
     public MyService(PXEventSubscriberAttribute parent)  
    { 
        //Code of the constructor
    }

    //A constructor with PXCache
     public MyService(PXCache cache) 
    { 
        //Code of the constructor
    }

    //A constructor with PXGraph
     public MyService(PXGraph graph) 
    { 
        //Code of the constructor
    }

    //A constructor with PXEventSubscriberAttribute and PXGraph
     public MyService(PXEventSubscriberAttribute parent, PXGraph graph) 
    { 
        //Code of the constructor
    }

    //Other code of the implementation class
} Dependency Injection in Custom Action Classes For a custom action class derived from the  PXAction  class or its     descendants, developers can use dependency injection as follows: Define a custom action class as shown in the following code       example. using System;
using PX.Data;

namespace MyNamespace
{
    public class CustomCancel<T> : PXCancel<T> 
        where T: class, IBqlTable, new()
    {
        [InjectDependency]
        public IMyService Service { get; set; }

        //Other code of the custom action class
    }
} To support dependency injection, in the implementation class of the service, add a                         constructor with  PXAction  or with both                              PXAction  and  PXGraph  as                         parameters, as shown in the following code                         example. public class MyService : IMyService
{
     public MyService(PXAction parent)  
    { 
        //Code of the constructor
    }

     public MyService(PXAction parent, PXGraph graph)  
    { 
        //Code of the constructor
    }

    //Other code of the implementation class
} ]]></column>
		</row>
		<row PageID="e8d1eff3-fea4-46e1-a118-180396539c56" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="e249d0dd-8e9d-40c6-9881-fbf9659579ce" RecordSourceID="22377">
			<column name="Content"><![CDATA[
 Acumatica ERP 2020 R1 provides webhooks as a new way to integrate external applications that provide data in their own format and need to submit this data to Acumatica ERP. For example, HubSpot collects data about email clicks and can export this data in a specific format to a particular URL. With the new webhooks, a developer can configure Acumatica ERP to process the data submitted to a particular URL and save the data in Acumatica ERP.{br}

To process data from an external application in Acumatica ERP with webhooks, a developer needs to perform the following general steps, which are described in greater detail below:[anchor|#_301676a6-1374-47c0-80a0-fd4a1784d8c5]
#The developer creates an implementation class that will process the requests from an external application.
#The developer registers the implementation class on the ''Webhooks (SM304000) ''form of Acumatica ERP.
#The developer copies the URL that is generated during the registration of the implementation class, and then specifies this URL in the external application so that it sends requests to this URL.
#The developer tests the processing of the requests.
#If the webhook must be used on multiple Acumatica ERP instances, the developer includes the webhook in a customization project and publishes this project to the needed Acumatica ERP instances.
{br}

For more information about configuring webhooks, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=40deeeee-fb24-4331-8f59-793fb5c08fb7|Configuring Webhooks] in the Integration Development Guide. 
==1. Creation of an Implementation Class==
An implementation class is a custom class that processes the requests passed to a particular URL. This class must implement the <tt>IWebhookHandler</tt> interface. For more convenient implementation, we recommend that the developer implement this interface in a graph (that is, a class of the <tt>PXGraph</tt> type). {br}

The <tt>IWebhookHandler</tt> interface has one method with the following signature. This method should be implemented as an async method.<source lang="csharp">Task&lt;IHttpActionResult&gt; ProcessRequestAsync(
    HttpRequestMessage request, CancellationToken cancellationToken);</source>
In this method, the developer needs to process a request from an external application, including the following:[anchor|#_98e1b1a2-f86f-49cb-a873-fd891bd78bcf]
*Process authentication information in the request
*Transform the data in external format to the data that can be saved in Acumatica ERP
*Invoke graph methods that save the data in Acumatica ERP
{br}

The developer needs to place a DLL file with the implementation class in the <tt>Bin</tt> folder of the Acumatica ERP instance.
==2. Registration of the Implementation Class in Acumatica ERP==
On the new ''Webhooks (SM304000)'' form, which is shown in the following screenshot, the developer needs to register the implementation class. When the developer saves the webhook for the implementation class on the form, the system inserts into the '''URL''' box the URL that can be used by an external application to send data to Acumatica ERP. The developer should copy this URL for use in the next step.[anchor|#_a2e0378d-65a6-43a4-85a7-a769b658dddc][anchor|#_14a4662f-8e3d-45e4-b052-754e0ec83795][image:ReleaseNotes/Images/RN_2020_R1_Developer_Webhooks.png|popup|The Webhooks form|450px]
==3. Configuration of the External Application==
In the external application, the developer should specify the URL that has been generated on the ''Webhooks (SM304000) ''form for the webhook, so that the external application sends requests to this URL. {br}

A request sent to Acumatica ERP must satisfy the following requirements:[anchor|#_afd35769-4a1b-4d5f-b966-48f77e58066c]
*The request type must be {{POST}} or {{GET}}.
*The body must contain only the data that can be transferred with the HTTP protocol.
*The body of the request must be no longer than the value specified by the {{webhook:maxrequestsize}} key of the <tt>web.config</tt> file of the Acumatica ERP instance. By default, this value is 1 MB. The developer can change the default value by specifying a different value in the key of <tt>web.config</tt>.

==4. Testing of the Requests==
The developer can use the '''Request History''' tab of the ''Webhooks (SM304000)'' form to specify which requests should be saved in the log and to check the statuses of the processing of requests. By clicking the '''Show Request Details''' button (shown in the following screenshot) on the table toolbar of the tab, the developer can open the dialog box, which contains the details of the request, the response, and any errors.[anchor|#_7f2ae687-6829-4c8b-a5d6-e3f6333a21b7][anchor|#_a4241dba-26f2-406a-b725-e4498fa261c8][image:ReleaseNotes/Images/RN_2020_R1_Developer_Webhooks_2.png|popup|The Request Details dialog box|450px]{br}

The developer can limit the length of the body of the request that is stored in the history by using the {{webhook:maxbodysizetolog}} key of the <tt>web.config</tt> file of the Acumatica ERP instance. By default, the length is 10 KB. In the request details stored in the history, the system trims the rest of the body that exceeds the specified length.
==5. Inclusion in a Customization Project==
The developer can include the webhook in a customization project by using the Customization Project Editor, which contains a new Webhooks page (shown in the following screenshot). For a webhook listed on this page, the developer can select the '''Predefined''' check box, which (if selected) makes the implementation class of the webhook unavailable for editing in the instance where the customization project is published. (In this instance, an administrative user can still make the webhook inactive and modify the request history settings.)((({S:Warn}A developer must also include the DLL file with the implementation class in the customization project as a ''File'' item.
)))[anchor|#_c8682e3c-47be-439c-9ec4-5768e4d960a0][anchor|#_1bcc7cc2-21ac-4756-9506-ac6a0935042d][image:ReleaseNotes/Images/RN_2020_R1_Developer_Webhooks_3.png|popup|The Webhooks page|450px]
For more information about including a webhook in a customization project, see [https://help.acumatica.com/(W(11))/Help?ScreenId=ShowWiki&pageid=1f6d085c-7968-4a4f-8b77-f37773911fea|Webhooks] in the Acumatica Customization Guide.]]></column>
			<column name="PlainText"><![CDATA[Integration: Webhooks for Integration  Acumatica ERP 2020 R1 provides webhooks as a new way to integrate external applications that provide                 data in their own format and need to submit this data to  Acumatica ERP. For example, HubSpot collects data about email clicks and can export this data                 in a specific format to a particular URL. With the new webhooks, a developer can                 configure  Acumatica ERP to process the data submitted to a particular URL and save the data in  Acumatica ERP. To process data from an external application in  Acumatica ERP with webhooks, a developer needs to perform the following general steps, which                 are described in greater detail below: The developer creates an implementation class that will process the requests                         from an external application. The developer registers the implementation class on the  Webhooks                             (SM304000)  form of  Acumatica ERP. The developer copies the URL that is generated during the registration of                         the implementation class, and then specifies this URL in the external                         application so that it sends requests to this URL. The developer tests the processing of the requests. If the webhook must be used on multiple  Acumatica ERP instances, the developer includes the webhook in a customization project                         and publishes this project to the needed  Acumatica ERP instances. For more information about configuring webhooks, see  Configuring Webhooks Configuring Webhooks in the Integration                 Development Guide.  1. Creation of an Implementation Class An implementation class is a custom class that processes the requests passed to a                 particular URL. This class must implement the  IWebhookHandler                  interface. For more convenient implementation, we recommend that the developer                 implement this interface in a graph (that is, a class of the                      PXGraph  type).  The  IWebhookHandler  interface has one method with the following                 signature. This method should be implemented as an async method. Task<IHttpActionResult> ProcessRequestAsync(
    HttpRequestMessage request, CancellationToken cancellationToken); In this method, the developer needs to process a request from an external                 application, including the following: Process authentication information in the request Transform the data in external format to the data that can be saved in  Acumatica ERPInvoke graph methods that save the data in  Acumatica ERPThe developer needs to place a DLL file with the implementation class in the                      Bin  folder of the  Acumatica ERP instance. 2. Registration of the Implementation Class in  Acumatica ERPOn the new  Webhooks (SM304000)  form, which is shown in the following                 screenshot, the developer needs to register the implementation class. When the                 developer saves the webhook for the implementation class on the form, the system                 inserts into the  URL  box the URL that can be used by an                 external application to send data to  Acumatica ERP. The developer should copy this URL for use in the next step. The Webhooks form 3. Configuration of the External Application In the external application, the developer should specify the URL that has been                 generated on the  Webhooks (SM304000)  form for the webhook, so that the                 external application sends requests to this URL.  A request sent to  Acumatica ERP must satisfy the following requirements: The request type must be  POST  or  GET . The body must contain only the data that can be transferred with the HTTP                         protocol. The body of the request must be no longer than the value specified by the                              webhook:maxrequestsize  key of the                              web.config  file of the  Acumatica ERP instance. By default, this value is 1 MB. The developer can change the                         default value by specifying a different value in the key of                              web.config . 4. Testing of the Requests The developer can use the  Request History  tab of the                      Webhooks (SM304000)  form to specify which requests should be saved in the                 log and to check the statuses of the processing of requests. By clicking the                      Show Request Details  button (shown in the following                 screenshot) on the table toolbar of the tab, the developer can open the dialog box,                 which contains the details of the request, the response, and any errors. The Request Details dialog box The developer can limit the length of the body of the request that is stored in the                 history by using the  webhook:maxbodysizetolog  key of the                      web.config  file of the  Acumatica ERP instance. By default, the length is 10 KB. In the request details stored in the                 history, the system trims the rest of the body that exceeds the specified                 length. 5. Inclusion in a Customization Project The developer can include the webhook in a customization project by using the  Customization Project Editor, which contains a new Webhooks page (shown in the following screenshot). For a                 webhook listed on this page, the developer can select the                      Predefined  check box, which (if selected) makes the                 implementation class of the webhook unavailable for editing in the instance where                 the customization project is published. (In this instance, an administrative user                 can still make the webhook inactive and modify the request history settings.) A                     developer must also include the DLL file with the implementation class in the                     customization project as a  File  item. The Webhooks page For more information about including a webhook in a customization project, see  Webhooks Webhooks in the Acumatica Customization                 Guide. ]]></column>
		</row>
		<row PageID="47be6e41-47ca-46a4-aac2-d0ab6802baf2" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4e2de951-e145-e3d2-05b3-ac74b0c26a6a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R1, developers can customize Acumatica ERP forms by defining automation workflows in Customization Project Editor and customization code. For details about automation workflows, see [HelpRoot_ReleaseNotes\RN_2019_R2_Developer_AutomationImprovements|Customization: Automation of Workflows in Customization Project                         Editor]. {br}

A developer can use custom workflow actions though the contract-based APIs if the developer creates a custom endpoint or endpoint extension with these workflow actions—more specifically, if the developer does the following:[anchor|#_f79a7235-c9ea-4023-95ed-e1645ea98a9b]
#On the [HelpRoot_FormReference\SM_20_70_60|Web Service Endpoints] ([~/?ScreenId=SM207060|SM207060]) form, creates a custom endpoint or endpoint extension, as described in [https://help.acumatica.com/(W(45))/Help?ScreenId=ShowWiki&pageid=709351cc-566a-47b3-b153-3a9fdd690ce0|To Create a Custom Endpoint] or [https://help.acumatica.com/(W(45))/Help?ScreenId=ShowWiki&pageid=c450492e-06fe-4563-95c3-efa76975415b|To Extend an Existing Endpoint].
#Adds the custom workflow action to the custom endpoint or endpoint extension.
#If the custom workflow action can display a workflow dialog box with parameters of the action, maps the parameters of the action in the endpoint to these parameters by using the {{Transition Parameters}} object, as shown in the following screenshot.[anchor|#_c637d25d-f9c8-4ea3-82c9-a125c1ba98db][image:ReleaseNotes/Images/RN_2020_R1_Developer_Workflows_in_Web_Services.png|popup|Parameters of the action|450px]
]]></column>
			<column name="PlainText"><![CDATA[Web Services: Automation Workflows in the Contract-Based APIs In  Acumatica ERP 2020 R1, developers can customize  Acumatica ERP forms by defining automation workflows in  Customization Project Editor         and customization code. For details about automation workflows, see  Customization: Automation of Workflows in Customization Project                         Editor.  A developer can use custom workflow actions though the contract-based APIs if the developer         creates a custom endpoint or endpoint extension with these workflow actions—more         specifically, if the developer does the following: On the   ([~/?ScreenId=SM207060|SM207060]) Web Service Endpoints (SM207060) form, creates a custom             endpoint or endpoint extension, as described in  To Create a Custom Endpoint To Create a Custom Endpoint or  To Extend an Existing Endpoint To Extend an Existing Endpoint. Adds the custom workflow action to the custom endpoint or endpoint extension. If the custom workflow action can display a workflow dialog box with parameters of the             action, maps the parameters of the action in the endpoint to these parameters by using             the  Transition Parameters  object, as shown in the following               screenshot. Parameters of the action ]]></column>
		</row>
	</rows>
</data>