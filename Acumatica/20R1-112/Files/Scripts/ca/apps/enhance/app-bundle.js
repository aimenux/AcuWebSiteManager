define("apps/enhance/controls/control-config",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true})}));define("apps/enhance/controls/index",["require","exports","./qp-calendar","./qp-hyper-icon","./qp-datetime-edit","./qp-check-box","./qp-drop-down","./qp-options"],(function(e,t,i,n,r,a,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function l(e){e.globalResources([i.QpCalendarCustomElement,n.QpHyperIconCustomElement,r.QpDatetimeEditCustomElement,a.QpCheckBoxCustomElement,s.QpDropDownCustomElement,o.QpOptionsCustomElement])}t.configure=l}));define("apps/enhance/controls/qp-calendar",["require","exports","tslib","aurelia-framework","../services/control-helper","aurelia-logging"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpCalendarCustomElement=t.StringToIntValueConverter=void 0;var s=a.getLogger("qp-calendar");var o=function(){function e(){}e.prototype.toView=function(e){return e==null?"":e.toString()};e.prototype.fromView=function(e){return parseInt(e)};return e}();t.StringToIntValueConverter=o;var l=7;var u=12;var c=864e5;var h=4;var f=6;var d=function(){function e(e){this.elem=e;this.required=false;this.year=NaN;this.month=NaN;this.monthNames=[];this.shortMonthNames=[];this.shortDayNames=[];this.yearFix=0;this.firstDayOfWeek=0;this.locale="en-US";this.enableMonthChange=true;this.allowClicks=false;this.formats={showDOWHeader:true,showOtherMonthDays:true,showWeekNumber:true,nextPrevFormat:0};if(r.dateFormatInfo){this.monthNames=r.dateFormatInfo.monthNames.split(",");this.shortMonthNames=r.dateFormatInfo.abbrMonthNames.split(",");this.shortDayNames=r.dateFormatInfo.abbrDayNames.split(",");this.yearFix=r.dateFormatInfo.yearFix?r.dateFormatInfo.yearFix:0}else{this.monthNames=t._MN;this.shortMonthNames=t._SMN;this.shortDayNames=t._SDN}this.todayDate=new Date;this.todayString=this.todayDateToString()}t=e;Object.defineProperty(e.prototype,"monthPanel",{get:function(){return x(new Date(this.year,this.month,1),this.firstDayOfWeek)},enumerable:false,configurable:true});e.prototype.selectTheDate=function(e,t){this.value=e;this.syncMonthYear();this.monthPaneEle&&this.monthPaneEle.focus();this.commitSelection(this.value);t&&t.stopPropagation();return false};e.prototype.selectCustomItem=function(e,t){this.value=e;this.commitSelection(this.value);t&&t.stopPropagation();return false};e.prototype.syncMonthYear=function(){if(this.value instanceof Date){this.month=this.value.getMonth();this.year=this.value.getFullYear()}else{this.month=this.todayDate.getMonth();this.year=this.todayDate.getFullYear()}};e.prototype.commitSelection=function(e){var t=new CustomEvent("valuechanged",{bubbles:true,detail:{value:this.value}});this.elem.dispatchEvent(t)};e.prototype.ignoreClicks=function(e){e.stopImmediatePropagation();return true};e.prototype.monthChanged=function(e){this.renderHintsToPrevNextMonths(e)};e.prototype.attached=function(){s.info("attached() of ",this.config&&this.config.id);this.syncMonthYear();this.renderHintsToPrevNextMonths(this.month);this.monthPaneEle&&this.monthPaneEle.focus()};e.prototype.configChanged=function(e,t){s.info("configChanged() of ",e,t);if(this.config){if(this.config.todayDate)this.todayDate=this.config.todayDate;if(this.config.todayString)this.todayString=this.config.todayString;if(this.config.firstDayOfWeek!=null)this.firstDayOfWeek=this.config.firstDayOfWeek}this.syncMonthYear()};e.prototype.keyDown=function(e){s.info(e.key+" pressed");var t=true;switch(e.key){case"Down":case"ArrowDown":this.advanceDate(0,0,l);break;case"Up":case"ArrowUp":this.advanceDate(0,0,-l);break;case"Right":case"ArrowRight":this.advanceDate(0,0,1);break;case"Left":case"ArrowLeft":this.advanceDate(0,0,-1);break;case"PageUp":this.advanceDate(0,-1,0);break;case"PageDown":this.advanceDate(0,1,0);break;case"Home":this.advanceDate(-1,0,0);break;case"End":this.advanceDate(1,0,0);break;case"Space":this.value=this.todayDate;this.syncMonthYear();break;case"Enter":this.commitSelection(this.value);break;case"Esc":case"Escape":this.commitSelection(undefined);break;default:t=false}if(t){e.stopPropagation();return false}return true};e.prototype.advanceDate=function(e,t,i){if(this.value instanceof Date){this.value=new Date(this.value.getFullYear()+e,this.value.getMonth()+t,this.value.getDate()+i);this.syncMonthYear()}};e.prototype.todayDateToString=function(){if(r.dateFormatInfo&&r.dateFormatInfo.shortDate){return r.formatDate(this.todayDate,r.dateFormatInfo.shortDate,r.dateFormatInfo)}else return Intl.DateTimeFormat(this.locale).format(this.todayDate)};e.prototype.renderHintsToPrevNextMonths=function(e){var t=(u+e-1)%u;var i=(u+e+1)%u;if(this.prevMonthEle){px.setTitle(this.prevMonthEle,this.monthNames[t])}if(this.nextMonthEle){px.setTitle(this.nextMonthEle,this.monthNames[i])}};e.prototype.handleMonthChange=function(e,t){this.month+=e;if(this.month<0){this.month=u-1;this.year--}else if(this.month>=u){this.month=0;this.year++}this.ignoreClicks(t);return false};e.prototype.isTheSame=function(e,t){if(e instanceof Date&&t instanceof Date&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()){return true}return false};e.prototype.isWeekend=function(e){var t=e.getDay();if(t===0||t===l-1){return true}return false};e.prototype.getWeekNumber=function(e){if(e===undefined||e.length<l){return 0}var t=e[h].date;if(t===undefined){return 0}var i=new Date(t.getFullYear(),t.getMonth(),t.getDate());var n=i.getDay();i.setDate(i.getDate()-(n+l-1)%l+h-1);var r=i.valueOf();i.setMonth(0);i.setDate(h);return Math.round((r-i.valueOf())/(l*c))+1};var t;e._nextPrevShortMonth=1;e._nextPrevFullMonth=2;e._daysInWeek=7;e._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];e._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e._selectMode=0;e._addSelectionMode=1;e._rangeSelectionMode=2;i.__decorate([n.computedFrom("year","month"),i.__metadata("design:type",Array),i.__metadata("design:paramtypes",[])],e.prototype,"monthPanel",null);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);i.__decorate([n.observable,i.__metadata("design:type",Number)],e.prototype,"month",void 0);e=t=i.__decorate([n.autoinject,n.customElement("qp-calendar"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpCalendarCustomElement=d;function p(e){return new Date(e.getFullYear(),e.getMonth())}function g(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function v(e){return new Date(e.getFullYear(),e.getMonth(),0)}function m(e,t){var i=[];var n=p(e);var r=n.getDay();var a=(r-t+l)%l;var s=v(n);var o=s.getDate();for(var u=o-a+1;u<=o;++u){i.push({dayOfMonth:u,leadingDay:true,date:new Date(s.getFullYear(),s.getMonth(),u)})}return i}function b(e,t){var i=[];var n=(t+l-1)%l;var r=g(e);var a=r.getDay();var s=(n-a+l)%l;for(var o=1;o<=s;++o){i.push({dayOfMonth:o,trailingDay:true,date:new Date(r.getFullYear(),r.getMonth()+1,o)})}return i}function y(e,t){var i=[];var n=(t+l-1)%l;var r=g(e);var a=r.getDay();var s=(n-a+l)%l;for(var o=s+1;o<=s+l;++o){i.push({dayOfMonth:o,trailingDay:true,date:new Date(r.getFullYear(),r.getMonth()+1,o)})}return i}function x(e,t){var i=[];var n=g(e).getDate();var r=m(e,t);for(var a=1;a<=n;++a){r.push({dayOfMonth:a,inCurrentMonth:true,date:new Date(e.getFullYear(),e.getMonth(),a)});if(r.length===l){i.push(r);r=[]}}r=r.concat(b(e,t));if(r.length>0){i.push(r)}if(i.length<f){i.push(y(e,t))}return i}}));define("text!apps/enhance/controls/qp-calendar.html",[],(function(){return'<template><require from="./qp-calendar"></require><table class="calendar" cellpadding="0" cellspacing="0" style="z-index:11000" click.delegate="$event.stopPropagation()" mousedown.trigger="ignoreClicks($event)"><tbody><tr><td class="calendarMT"><table cellpadding="0" cellspacing="0" border="0" style="height:100%;width:100%"><tbody><tr><td class="calendarNP" click.capture="handleMonthChange(-1, $event)" ref="prevMonthEle"><div class="sprite-icon control-icon" icon="PrevMonth"><div class="control-icon-img control-PrevMonth"></div></div></td><td style="text-align:Center"><select ref="monthSelEle" value.bind="month | stringToInt"><option repeat.for="i of 12" value.one-time="i">${monthNames[i]}</option></select> <select ref="yearSelEle" value.bind="year | stringToInt"><option repeat.for="i of 11" value="${year+i-5}">${year+i-5}</option></select></td><td class="calendarNP" click.capture="handleMonthChange(1, $event)" ref="nextMonthEle"><div class="sprite-icon control-icon" icon="NextMonth"><div class="control-icon-img control-NextMonth"></div></div></td></tr></tbody></table></td><td if.bind="config.customItems.length > 0" rowspan="3" style="vertical-align:Top"><table id="${id}_customItems"><tbody><tr repeat.for="item of config.customItems" click.capture="selectCustomItem(item, $event)"><td class="calendarD">${item}</td></tr></tbody></table></td></tr><tr><td><table cellspacing="0" align="Center" border="0" style="width:100%" ref="monthPaneEle" keydown.capture="keyDown($event)" tabindex="0"><colgroup><col repeat.for="i of 8" style="width:12%"></colgroup><tbody><tr><td class="calendarDH">#</td><td class="calendarDH" repeat.for="i of 7">${shortDayNames[(i+firstDayOfWeek)%7]}</td></tr><tr repeat.for="week of monthPanel"><td class="calendarWN calendarD">${getWeekNumber(week)}</td><td repeat.for="day of week" class="calendarD ${isTheSame(day.date, todayDate) ? \'calendarTD\' : \'\'} ${day.trailingDay || day.leadingDay ? \'calendarOMD\' : \'\'} ${isWeekend(day.date) ? \'calendarWE\':\'\'} ${isTheSame(day.date, value) ? \'calendarSD\':\'\'}" click.capture="selectTheDate(day.date, $event)">${day.dayOfMonth}</td></tr></tbody></table></td></tr><tr><td ref="todayCellEle" class="calendarF" style="cursor:pointer" click.capture="selectTheDate(todayDate, $event)"> ${todayString} </td></tr></tbody></table></template>'}));define("apps/enhance/controls/qp-check-box",["require","exports","tslib","aurelia-framework","aurelia-logging","../services/control-helper"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpCheckBoxCustomElement=t.IntToBoolValueConverter=void 0;var s=r.getLogger("check-box");var o=function(){function e(){}e.prototype.toView=function(e,t){return e!=0};e.prototype.fromView=function(e,t){return e===true?1:0};return e}();t.IntToBoolValueConverter=o;var l=function(){function e(e){this.element=e}t=e;e.prototype.configChanged=function(e,i){if(i===undefined){a.applyDefaultValues(e,t.defaultConfig)}};e.prototype.toggleValue=function(e){if(e.target===this.element){return true}this.value=!this.value;e.stopPropagation();return false};var t;e.defaultConfig={enabled:true,required:false,trueValue:"true",falseValue:"false"};i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);e=t=i.__decorate([n.customElement("qp-check-box"),n.autoinject,i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpCheckBoxCustomElement=l}));define("text!apps/enhance/controls/qp-check-box.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'block\'};" id="${config.id}" enabled.bind="!!config.enabled & attr"><require from="./qp-check-box"></require><span if.bind="config.renderStyle!==\'button\'" class="${config.class}" click.delegate="config.enabled===true && toggleValue($event)"><label if.bind="config.textAlign===\'left\'" for="${config.id}_text" class="left ${config.labelWidth ? \'fld-l\'+config.labelWidth : \'\'}">${config.label}</label> <input id="${config.id}_text" name="${config.name}" ref="element" type="checkbox" tabindex="${config.tabIndex}" disabled.bind="!config.enabled" checked.two-way="value | intToBool"><label if.bind="config.textAlign!==\'left\'" for="${config.id}_text">${config.label}</label></span><div if.bind="config.renderStyle===\'button\'" class="${config.class}"><qp-hyper-icon id="${config.id}_pic" if.bind="config.renderStyle == \'button\' && value" images.bind="config.checkImages" disabled.bind="!config.enabled" click.delegate="config.enabled===true && toggleValue($event)"></qp-hyper-icon><qp-hyper-icon id="${config.id}_pic" if.bind="config.renderStyle == \'button\' && !value" images.bind="config.uncheckImages" disabled.bind="!config.enabled" click.delegate="config.enabled===true && toggleValue($event)"></qp-hyper-icon><label if.bind="config.renderStyle == \'button\' && config.label && config.label.length" for="${config.id}_pic">${config.label}</label></div></template>'}));define("apps/enhance/controls/qp-datetime-edit",["require","exports","tslib","aurelia-framework","../services/control-helper","aurelia-logging"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TextRange=t.QpDatetimeEditCustomElement=t.MAX_DAYS_IN_MONTH=t.MONTHS_IN_YEAR=t.MAX_YEAR=t.MIN_YEAR=void 0;var s=a.getLogger("qp-datetime-edit");var o=29;t.MIN_YEAR=1900;t.MAX_YEAR=9999;t.MONTHS_IN_YEAR=12;t.MAX_DAYS_IN_MONTH=31;var l=127;var u="0".charCodeAt(0);var c="9".charCodeAt(0);var h=0;var f=1;var d=2;var p=function(){function e(e,t,i,n){this.element=e;this.bindingEngine=i;this.taskQueue=n;this.value=null;this.oldValue=null;this.focused=false;this.todayDate=new Date;this.durationMode=false;this.fullDOW=false;this.fullMonth=false;this.selectOnFocus=false;this.allowStrings=false;this.roundUpTime=false;this.required=false;this.hideEnterKey=false;this.promptChar="_";this.emptyChar=" ";this.valueMode=0;this.validateExp="";this.asciiCharSet=false;this.dropDownOpen=false;this.inlineEditor=false;this.outerClickSubscription=undefined;this.allowRepaintText=true;this.hasFocus=false;this.lockMouseUp=false;this.mouseClicked=false;this.trackSelection=true;this.trackPosition=false;this.selStart=0;this.selEnd=0;this.field0ID=new Array;this.field1ID=new Array;this.mask=undefined;this.maskExclude=undefined;this.maskInclude=undefined;this.emptyText=undefined;this.AM="AM";this.PM="PM";this.lengthAmPm=this.AM.length>this.PM.length?this.AM.length:this.PM.length;this.yearFix=0;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December",""];this.dowNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.validateEdit=true;this.allowMouseDownFlag=false;this.eventManager=t;this.value=null}a=e;e.createDate=function(e,t,i){var n=new Date(e,t,i);n.setFullYear(e,t,i);return n};e._trimEnd=function(e){return e.replace(/\s+$/,"")};e._filter=function(e,t,i,n,r,a){if(i>=t.length)return n;var s=t.charCodeAt(i);var o=t.charAt(i);if(s<21||r&&r.indexOf(o)!==-1)return n;if(a&&a.indexOf(o)!==-1)return o;var l=Math.floor((e-1)/6);switch(l){case 0:break;case 1:if(s>=u&&s<=c)return o;case 2:if(s>255||o.toUpperCase()!==o.toLowerCase())break;return n;case 3:return s>=u&&s<=c?o:n}e=Math.floor((e-1)/2)%3;if(e===0)return o;o=e===2?o.toLowerCase():o.toUpperCase();if(r&&r.indexOf(o)!==-1)return n;return o};e.format=function(e,t,i,n){if(n==null)n=0;if(t==null)t="";var r="";var s;var o=0;var l=a.split(e);var u=l[0];var c=l[1];var h=l[2];for(var f=0;f<u.length;f++){s=u.charCodeAt(f);if(s<21){var d=void 0;if(o<t.length){d=a._filter(s,t,o,"",c,h);o++}r+=d?d:i}else{r+=u.charAt(f);if(n>0)o++}}return r};e.encode=function(e){var t;var i;var n=0;var r="";var s=a.split(e);var o=s[0];var l=s[1];var u=s[2];for(var c=0;c<o.length;c++){i=o.charAt(c);t=a._flag(i,n);if(t!==0){if(t<0){n=n===-t?0:-t;continue}r+=String.fromCharCode(t)}else if(i==="\\"&&c+1<o.length){i=o.charAt(c+1);if(a._flag(i,0)!==0){r+=i;c++}}else r+=i}if(l)r+="|"+l;if(u){if(!l)r+="|";r+="|"+u}return r};e.split=function(e){var t=e.split("|");if(t.length===1)t[f]="";if(t.length===2)t[d]="";return t};e._flag=function(e,t){var i=0;switch(e){case">":return-1;case"<":return-2;case"&":i=1;break;case"C":i=2;break;case"A":i=7;break;case"a":i=8;break;case"L":i=13;break;case"?":i=14;break;case"#":case"0":return 19;case"9":return 20;default:return 0}return i+t*2};Object.defineProperty(e.prototype,"isEditLink",{get:function(){return false},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ROMode",{get:function(){return this.config&&(this.config.readOnly||!this.config.enabled)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"textValue",{get:function(){return this.elemText?this.elemText.value:""},set:function(e){this._textValue=e;if(this.elemText)this.elemText.value=e},enumerable:false,configurable:true});e.prototype.destructor=function(){if(this.editMaskObserver)this.editMaskObserver.dispose();if(this.displayMaskObserver)this.displayMaskObserver.dispose()};e.prototype.acceptDateFromCalendar=function(e){var t=this;s.info("acceptDateFromCalendar");var i=e.detail&&e.detail.value;if(i)this.setValue(i);this.hideDropDown();e.preventDefault();e.stopPropagation();this.fireEvent("valuechanged");setTimeout((function(){t.elemText.focus()}),0)};e.prototype.configChanged=function(e,t){var i=this;s.info("configChanged() of ",e,t);if(t===undefined){r.applyDefaultValues(e,a.defaultConfig);if(!this.editMaskObserver){this.editMaskObserver=this.bindingEngine.propertyObserver(this.config,"editMask").subscribe((function(e,t){return i.initEditMask()}))}if(!this.displayMaskObserver){this.displayMaskObserver=this.bindingEngine.propertyObserver(this.config,"displayMask").subscribe((function(e,t){return i.initDisplayMask()}))}}this.AM=r.dateFormatInfo.am||"AM";this.PM=r.dateFormatInfo.pm||"PM";this.lengthAmPm=Math.max(this.AM.length,this.PM.length);this.yearFix=r.dateFormatInfo.yearFix||0;this.monthNames=this.config.fullMonth?r.dateFormatInfo.monthNames.split(","):r.dateFormatInfo.abbrMonthNames.split(",");this.dowNames=this.config.fullDOW?r.dateFormatInfo.dayNames.split(","):r.dateFormatInfo.abbrDayNames.split(",");this._initializeMask();if(t===undefined){this.taskQueue.queueMicroTask((function(){if(i.config.value)i.value=new Date(i.config.value)}))}};e.prototype.attached=function(){this.trange=new m(this.elemText)};e.prototype.getValue=function(e){if(e===void 0){e=false}if(this.value===null||e){var t=this._getTypedValue(this.textValue,true);if(this.allowStrings||t==null||t instanceof Date&&!isNaN(t.getTime())&&!r.equals(this.value,t)){this.value=t}}return this.value};e.prototype.getValueOrToday=function(){var e=this.getValue(true);if(e==null)e=new Date;return e};e.prototype.setValue=function(e){var t=this._parseInvariant(e);if(this.allowStrings||t instanceof Date&&!isNaN(t.getTime())&&r.equals(this._checkLimits(t),t)){this.value=t;this.oldValue=t;if(this.hasFocus){this.textValue=this.getEditText(this.value);if(r.isVisible(this.elemText))this.select(this.selStart)}else this.textValue=this.getDisplayText(this.value)}};e.prototype.valueChanged=function(e,t){if(!this.config)return;if(this.config.allowCustomItems&&e!=null)this._setAllowStrings(e);if(this.hasFocus){this.textValue=this.getEditText(this.value);if(r.isVisible(this.elemText)){this.trange&&this.trange.refreshSelection()}}else if(e==null)this.textValue=this.getDisplayText(null);else this.textValue=this.getDisplayText(this.value)};e.prototype.updateValue=function(e){var t=e===undefined?this.getValue(true):e;if(!r.equals(t,this.oldValue)){var i=this.fireEvent("valuechanging");if(i){this.setValue(this.oldValue);return false}var n=new Object;var a=this.oldValue;e!==undefined?this.setValue(t):this.repaintText(t);this.oldValue=t;this.fireEvent("valuechanged");return true}};e.prototype.getReadOnly=function(){return this.config.readOnly};e.prototype.getEnabled=function(){return this.elemText.getAttribute==null||!this.elemText.getAttribute("enabled")};e.prototype.getDisabled=function(){return!this.getEnabled()||this.getReadOnly()};e.prototype.doTrackSelection=function(){if(this.elemText.tagName==="INPUT"&&this.trackSelection||this.trackPosition){this.getSelectedText()}};e.prototype.selectContent=function(e){var t=this;if(e===void 0){e=true}if(!r.isVisible(this.elemText))return;if((this.selectOnFocus||this.getDisabled())&&this.elemText.select){this.select();this.lockMouseUp=true;if(this.mouseClicked&&r.browser.isEdge)setTimeout((function(){t.select()}),0)}else if(this.elemText.tagName==="INPUT"||this.trackPosition){var i=e?this.selStart:0;var n=e?this.selEnd:0;if(r.browser.isIE)this.select(i,n);else setTimeout((function(){t.select(i,n)}),0)}};e.prototype.processFocus=function(e){this.hasFocus=true;this.oldValue=this.getValue();if(!this.getDisabled()&&this.allowRepaintText&&!this.isEditLink){var t=this.getEditText(this.getValue());if(this.textValue!==t)this.textValue=t}this.selectContent(this.trackPosition);this.getSelectedText();if(this.allowRepaintText)this.fireEvent("activated")};e.prototype.processBlur=function(e){this.hasFocus=false;this.onBlur(e);if(this.allowRepaintText&&!this.isEditLink){this.updateValue();var t=this.getDisplayText(this.getValue());if(t!==this.textValue)this.textValue=t}};e.prototype.onBlur=function(e){if(this.allowStrings||this.getDisabled()||!this.focused)return;var t=this.textValue;var i=this._fields1(t,true);var n=this.separate(t);if(this.emptyText!==t&&i.some((function(e){return!e}))){var r=new Date;if(this.roundUpTime){r.setHours(23);r.setMinutes(59);r.setSeconds(59);r.setMilliseconds(999)}else{r.setHours(0);r.setMinutes(0);r.setSeconds(0);r.setMilliseconds(0)}for(var s=0;s<i.length;s++){var o=i[s];if(this._isDatePart(s)&&!o){i[s]=this._fieldValue(this.field0ID[s],r,true,"0")}else if(a.between(10,this.field0ID[s],13)&&!o&&!this.isZeroTime(i,n,s)){i[s]=r.getHours()}else if(a.between(16,this.field0ID[s],17)&&!o&&!this.isZeroTime(i,n,s)){i[s]=r.getMinutes()}}var l=function(e,t,i){return e.some((function(e){return e>=t&&e<=i}))};var u=this.getMergedDateTime(i.slice());if(u!==undefined){if(!l(this.field0ID,10,13))u.setHours(r.getHours());if(!l(this.field0ID,16,17))u.setMinutes(r.getMinutes());if(!l(this.field0ID,18,19))u.setSeconds(r.getSeconds());if(!l(this.field0ID,22,28))u.setMilliseconds(r.getMilliseconds());this.textValue=this.getEditText(u)}}};e.prototype.processKeyDown=function(e){this.doTrackSelection();switch(e.key){case"Backspace":if(this.getReadOnly()){e.preventDefault();e.stopPropagation()}break;case"Esc":case"Escape":e.preventDefault();break;case"Enter":if(!e.shiftKey){if(this.hideEnterKey){e.preventDefault();e.stopPropagation()}if(this.allowRepaintText){this.updateValue()}}break}if(!this.onKeyDown(e)){e.preventDefault();e.stopPropagation();return false}switch(e.key){case"Backspace":case"Delete":case"Del":if(this.getDisabled()){e.preventDefault();e.stopPropagation();break}if(r.browser.isAnyIE||r.browser.isSafari||r.browser.isFirefoxFrom65){if(!this.onKeyPress(e)){e.preventDefault();e.stopPropagation()}}break}return true};e.prototype.onButtonClick=function(e){if(this.dropDownOpen){this.hideDropDown();this.focus()}else this.showDropDown()};e.prototype.onKeyDown=function(e){var t=!(e.ctrlKey||e.metaKey||e.altKey);switch(e.key){case"Down":case"ArrowDown":case"-":case"F3":if(!this.config.timeMode&&(e.key==="F3"||e.altKey)){this.onButtonClick();return false}if(e.key!=="F3"&&!e.shiftKey&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(-1);return false}break;case"Up":case"ArrowUp":case"+":if(t&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(1);return false}break;case"Right":case"ArrowRight":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()+1);return false}break;case"Left":case"ArrowLeft":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()-1);return false}break;case".":case"/":if(t&&!this.allowStrings){if(e.shiftKey){this.selectActivePart(this.getActivePartIndex()-1)}else{this.selectActivePart(this.getActivePartIndex()+1)}return false}break}return true};e.prototype.processKeyPress=function(e){this.doTrackSelection();if(this.getDisabled()){if(!e.ctrlKey){e.preventDefault();e.stopPropagation();return false}}return this.onKeyPress(e)};e.prototype.onKeyPress=function(e){if(!this.mask||!this.validateEdit)return true;var t=this.textValue;var i=t.length;var n=this.selStart;var r=this.selEnd;var a=this.emptyChar.charCodeAt(0);if(n!==r){while(--r>=n){var s=this.promptChar;if(this.mask.charCodeAt(r)>=21)s=this.mask.charAt(r);t=t.substring(0,r)+s+t.substring(r+1)}r++}else{switch(e.key){case"Del":case"Delete":case"Space":while(r<i&&this.mask.charCodeAt(r)>=21)r++;if(r>=i)return false;t=t.substring(0,r)+this.promptChar+t.substring(r+1);r++;break;case"Backspace":while(r>0&&this.mask.charCodeAt(r-1)>=21)r--;if(r--<1)return false;t=t.substring(0,r)+this.promptChar+t.substring(r+1)}}if(e.key.length===1&&e.key!==" "&&r<i){var o=e.key.toUpperCase();var l=[t];n=this.insertCharAt(l,o,r);t=l[0];if(n<0)return false;r=this.locatePromptPos(n)}this.textValue=t;this.select(r);this.fireEvent("usertyping");return false};e.prototype.processBeforePaste=function(e){e.returnValue=false};e.prototype.processSelectStart=function(e){if(!this.selectOnFocus){e.preventDefault();e.stopPropagation()}};e.prototype.processInput=function(e){if(this.allowStrings)this.textValue=this.elemText.value;if(r.isVisible(this.elemText))this.fireEvent("usertyping")};e.prototype.processPaste=function(e){if(this.getDisabled()){e.preventDefault();e.stopPropagation();return false}var t=e.clipboardData;if(t!=null){var i=t.getData("Text");var n=this.text;var r=this.processPasteValue(i);if(i&&(!r||n!==this.text))this.fireEvent("usertyping");if(r){e.preventDefault();e.stopPropagation()}}else this.fireEvent("usertyping");return true};e.prototype.initInlineEditor=function(e){this.config=e.config;this._initializeMask()};e.prototype.repaintText=function(e){var t=this.hasFocus?this.getEditText(e):this.getDisplayText(e);if(t!==this.text)this.text=t};e.prototype.getDisplayText=function(e){if(this.config.allowNull&&e==null)return this.config.nullText;return this._getFormattedText(e,false)};e.prototype.getEditText=function(e){return this._getFormattedText(e,true)};e.prototype.getVisible=function(){return this.elemText.style.display!=="none"};e.prototype.select=function(e,t){if(this.getVisible()&&this.trange){this.trange.select(e,t);this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd}};e.prototype.getSelectedText=function(){if(!this.trange)return"";var e=this.trange.getSelectedText();this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd;return e};e.prototype.fireEvent=function(e,t){var i={};switch(e){case"keydown":case"keypress":case"keyup":var n=t;if(n&&n.key)i.key=n.key;break;case"valuechanging":i.oldValue=this.oldValue;i.value=this.getValue();break;case"valuechanged":i.value=this.getValue();break}var r=new CustomEvent(e,{bubbles:true,detail:i});this.elemText.dispatchEvent(r);if(r.detail.cancel===true)return true;return false};e.prototype._getFormattedText=function(e,t){if(this.allowStrings&&!(e instanceof Date)){return e!=null?e.toString():""}if(e==null||e===""||typeof e==="string")return this.getDisplayValue("",1);var i="";var n=t?this.mask||"":this.mask1;var r=t?this.field0ID:this.field1ID;var a;var s;var o=-1;var l=0;while(++o<n.length){a=n.charAt(o);s=n.charCodeAt(o);if(s<21){i+=this._fieldValue(r[l++],e,t,a);if(t){while(o+1<n.length){if(n.charCodeAt(o+1)===s)o++;else break}}}else i+=a}return t?this.getDisplayValue(i,1):i};e.prototype.focus=function(){try{this.elemText.focus()}catch(e){}};e.prototype.validateValue=function(e){if(this.isNullValue(e)){e=this.config.allowNull?null:""}else if(this.validateExp){var t=new RegExp(this.validateExp);var i=t.exec(e||"");if(i!=null)e=i[0];else e=this.config.allowNull?null:""}if(this.asciiCharSet&&e){var n=e;e="";for(var r=0;r<n.length;r++){if(n.charCodeAt(r)<l)e+=n.charAt(r)}}return e};e.prototype.initEditMask=function(){this.mask0=this._dateMask(this.config.editMask,false);this._initEmptyText();this.setInputMask(this.mask0)};e.prototype.initDisplayMask=function(){this.mask1=this._dateMask(this.config.displayMask,true)};e.prototype._initializeMask=function(){this.initEditMask();this.initDisplayMask()};e.prototype._initEmptyText=function(){this.emptyText=this.mask0.replace(/[#LC]/g,this.promptChar)};e.prototype._setAllowStrings=function(e){this.allowStrings=e==null||e.constructor.name!=="Date";this.validateEdit=!this.allowStrings};e.prototype._dateMask=function(e,t){if(t){if(this.field1ID==null)this.field1ID=new Array;this.field1ID.length=0}else{if(this.field0ID==null)this.field0ID=new Array;this.field0ID.length=0}if(e==null)e="";var i;var n;var r=0;var a=-1;var s="";for(n=0;n<e.length;n++){i=e.charCodeAt(n);if(i<u||i>c){var o=e.charAt(n);if(t&&o==="\\"&&n+1<e.length){i=i=e.charAt(++n);if(i==="\\")continue;if("0"===i||"9"===i)s+=o;s+=i}else s+=o;continue}a=(i-u)*10+e.charCodeAt(++n)-u;if(t){this.field1ID[r++]=a;s+=""}else{this.field0ID[r++]=a;switch(a){case 14:s+="L";break;case 15:s+=Array(this.lengthAmPm+1).join("C");break;case 22:s+="#";break;default:s+="##";if(a===3)s+="##";while(a-- >23)s+="#"}}}return s};e.prototype.setInputMask=function(e){if(e==null)e="";if(this.rawMask===e)return;var t=this.mask?this.calculateValue(this.textValue,0,1):undefined;this.maskFull=a.encode(e);var i=a.split(this.maskFull);this.mask=i[h];this.maskExclude=i[f];this.maskInclude=i[d];if(t!=null){var n=this.getDisplayValue(t,0);this.textValue=n?a._trimEnd(n):"";this.value=null}this.rawMask=e};e.prototype.calculateValue=function(e,t,i){if(this.isNullValue(e))return this.config.allowNull?undefined:"";if(!this.mask)return e;var n=new RegExp("\\"+this.promptChar,"g");e=e.toString().replace(n,String.fromCharCode(0));var r=0;var s;var o;var l=true;var u="";for(var c=0;c<this.mask.length;c++){o=this.mask.charCodeAt(c);if(o<21){s=undefined;if(r<e.length){s=a._filter(o,e,r,"",this.maskExclude,this.maskInclude);r++}u+=s?s:this.emptyChar;if(s)l=false}else{if(i>0&&r<e.length){if(this.mask.charAt(c)!==e.charAt(r))return undefined;r++}if(t>0)u+=this.mask.charAt(c)}}return l?this.config.allowNull?undefined:"":a._trimEnd(u)};e.prototype.isNullValue=function(e){var t=String(e);if(e==null||t==="")return true;if(this.config.allowNull&&t===this.config.nullText)return true;return false};e.prototype.getDisplayValue=function(e,t,i){if(this.mask){if(i===undefined)i=this.promptChar;return a.format(this.maskFull,e,i,t)}return e!=null?e:""};e.prototype._fieldValue=function(e,t,i,n){var r;var a=(e&1)*2;if(e<4){r=t.getFullYear()+this.yearFix;if(e===3)a=4;else{r%=100;a=e===2?2:0}}else if(e<8){r=t.getMonth()+1;if(e>5){var s=this.monthNames[r-1];if(s.length>0)return s}}else if(e<10){r=t.getDate()}else if(e<16){r=t.getHours();if(e>13){var o=r<12?this.AM:this.PM;e-=13;a=o.length;if(e===a)return o;if(a<e)o+=" ";return e===1?o.substring(0,e):o}if(e<12){r%=12;if(r===0)r=12}}else if(e<18)r=t.getMinutes();else if(e<20)r=t.getSeconds();else if(e<22)return this.dowNames[t.getDay()];else{r=t.getMilliseconds();var l=a=e-21;while(l-- >3)r*=10;while(l++<2)r=Math.floor(r/10)}var u=r.toString();if(e<20){e=u.length;if(i){if(a===0)a=2;else i=false}if(a>0){if(a<e)u=u.substring(0,a);else while(e++<a)u=(i?n:"0")+u}}return u};e.prototype._checkLimits=function(e){if(!this.config.timeMode&&!this.allowStrings&&e!=null&&!isNaN(e.getTime())){var t=e.getTime();var i=void 0;var n=void 0;if(this.config.minValue!=null)i=this.config.minValue.getTime();if(this.config.maxValue!=null)n=this.config.maxValue.getTime();if(i!==undefined&&t<i){e=new Date(i)}if(n!==undefined&&t>n){e=new Date(n)}}return e};e.prototype._parseInvariant=function(e){var i=null;if(e==null||this.isNullValue(e)){if(this.config.allowNull)return null;i=new Date}else{if(e instanceof Date)i=e;else{if(this.config.timeMode||e.indexOf(":")>0){var n=Date.parse(e);if(!isNaN(n))i=new Date(n)}else{var r=e.split("/");if(r.length>=3){var s=parseInt(r[2]);var o=parseInt(r[0]);var l=parseInt(r[1]);if(!isNaN(s)&&!isNaN(o)&&!isNaN(l))i=a.createDate(s,o-1,l)}}}}if(this.config.timeMode&&i instanceof Date&&!isNaN(i.getTime())){i.setFullYear(t.MIN_YEAR);i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(i);if(this.allowStrings&&(i==null||isNaN(i.getTime())))return e;return i};e.prototype._getTypedValue=function(e,t){var i;if(this.isNullValue(e)||e===this.emptyText){if(this.config.allowNull)return null;i=new Date}else{if(e instanceof Date)i=e;else{i=this._parseText(e,this.hasFocus,t);if(i==null)i=this._parseText(e,!this.hasFocus,t)}}if(this.config.timeMode&&i!=null){i.setFullYear(1900);i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(i);if(this.allowStrings&&i==null)return e;if(i==null)return null;return t?this._checkLimits(i):i};e.prototype._parseText=function(e,t,i){var n=this._fields1(e,t);var r=0;var a=n.length;var s=-1;var l=-1;var u=-1;var c=-1;var h=-1;var f=-1;var d=-1;var p=-1;var g=-1;while(++g<a){var v=n[g];var m=t?this.field0ID[g]:this.field1ID[g];if(m<4){if(v>100&&v>this.yearFix)v-=this.yearFix;if(v<0)r++;else{s=v;var b=o;if(v<100){if(m<3&&b<0)b=29;if(b>=0)s+=v>b?1900:2e3}}}else if(m<8){if(v<1||v>12)r++;else l=v}else if(m<10){if(v<1||v>31)r++;else u=v}else if(m<14){if(v===24)v=0;if(m>11)p=-4;else{if(v===12)v=0;if(v>12)r++}if(v>23)r++;else c=v}else if(m<16){if(v>0)p++;continue}else if(m<18){if(v>59)r++;else h=v}else if(m<20){if(v>59)r++;else f=v}else if(m<22){continue}else{while(m++<24)v*=10;while(m-- >25)v=Math.floor(v/10);d=v}}if(p===0&&c>=0&&c<12)c+=12;var y=null;if(r===0){if(s>0&&l>0){y=new Date(s,l-1);y.setFullYear(s,l-1)}else y=new Date;if(y!=null){if(l>0)y.setMonth(l-1);if(u>0)y.setDate(u);y.setHours(c>=0?c:0);y.setMinutes(h>=0?h:0);y.setSeconds(f>=0?f:0);y.setMilliseconds(d>=0?d:0);if(s>0&&l>0&&u>0)y.setFullYear(s,l-1,u)}if(i)y=this._checkLimits(y)}return y};e.prototype._fields1=function(e,t){var i=t&&!this.getDisabled()?this.field0ID:this.field1ID;var n=i.length;var r=-1;var a=0;var s=0;var o=new Array(n);while(++r<n)o[r]=-1;if(e==null)return o;e=e.toUpperCase();r=-1;while(++r<e.length&&s<n){var l=e.charCodeAt(r)-48;var u=i[s];if(e.charAt(r)===this.promptChar)continue;if(20===u||21===u){u=i[++s]}if(14===u||15===u){if(l>=0&&l<=9){a=-1;s++;r--;continue}if(this.PM.charAt(0).toUpperCase()===e.charAt(r)){o[s++]=1;a=-1}}else if(u===6||u===7){a=-1;while(a-- >-3){for(l=0;l<12;l++){var c=this.monthNames[l].toUpperCase();u=c.length;if(u<1)continue;if(a===-3){if(u<4)continue;c=c.substring(0,3)}u=e.indexOf(c)-1;if(u>-2){if(u<0||e.charAt(u).toLowerCase()===e.charAt(u))break}}if(l<12){o[s]=l+1;break}}s++}else{if(l>=0&&l<=9){if(a<=0)a=l;else a=a*10+l}else if(a>=0){o[s++]=a;a=0}}}if(s<n)o[s]=a;return o};e.between=function(e,t,i){return e<=t&&i>=t};e.prototype.getMergedDateTime=function(e){var t=function(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()};var i=-1;var n=-1;var r=-1;var s=0;var o=0;var l=0;var u=0;var c=-1;for(var h=0;h<e.length;h++){var f=e[h];var d=f;var p=f;if(p==null)p=parseInt(d,10);var g=this.field0ID[h];switch(g){case 1:case 2:case 3:i=p;break;case 4:case 5:n=p;break;case 6:case 7:n=this.monthNames.indexOf(t(d));break;case 8:case 9:r=p;break;case 10:case 11:case 12:case 13:s=p;break;case 14:case 15:c=d===this.PM?1:0;break;case 16:case 17:o=p;break;case 18:case 19:l=p;break;case 22:case 23:case 24:case 25:case 26:case 27:case 28:u=p;break}}if(c===0){if(s===12)s=0}else if(c===1){if(s>12)s+=12}var v=function(e){if(e%4)return false;if(e%100)return true;if(e%400)return false;return true};var m=1582;var b=275760;var y=false;if(a.between(m,i,b)&&a.between(1,n,12)){var x=31;switch(n){case 2:x=v(i)?29:28;break;case 4:case 6:case 9:case 11:x=30}if(a.between(1,r,x)){y=true}}var _=a.between(0,s,23)&&a.between(0,o,60)&&a.between(0,l,60)&&a.between(0,u,9999);if(y&&_)return new Date(i,n-1,r,s,o,l,u)};e.prototype._isDatePart=function(e){return this.field0ID[e]<10};e.prototype.isZeroTime=function(e,t,i){var n=e[i];if(n===0){var r=this.field0ID[i];var s=a.between(10,r,13)||a.between(16,r,28);if(s){var o=Array.prototype.slice.call(t[i]);while(o.length&&o[0]===this.promptChar)o.shift();o.reverse();while(o.length&&o[0]===this.promptChar)o.shift();o.reverse();return 0===parseInt(o.join(),10)}}return false};e.prototype.processPasteValue=function(e){if(!this.mask)return false;this.getSelectedText();var t=this.selStart;var i=this.selEnd;var n=this.textValue;n=this.clearMaskedContent(n,t,i);var r=[n];var a=t;for(var s=0;s<e.length;s++){if(this.mask.charCodeAt(a)<=20&&e.charAt(s)===this.promptChar){a++;continue}a=this.insertCharAt(r,e.charAt(s),a);if(a<0||a>=this.mask.length)break}this.textValue=r[0];this.select(i>0?i:t);return true};e.prototype.clearMaskedContent=function(e,t,i){if(!this.mask)return e;if(t==null||t<0)t=0;if(i==null||i>this.mask.length)i=this.mask.length;if(t>i){var n=i;i=t;t=n}if(t!==i){while(--i>=t){var r=this.promptChar;if(this.mask.charCodeAt(i)>=21)r=this.mask.charAt(i);e=e.substring(0,i)+r+e.substring(i+1)}i++}return e};e.prototype.separate=function(e){var t=function(e){return"\\/.:- ".indexOf(e)>-1};var i=function(e){var i=[];for(var n=0;n<e.length;n++){if(t(e[n]))i.push(n)}return i};var n=function(e,t,i,n){for(var r=0,a=n;r<a.length;r++){var s=a[r];var o=e.substr(t-s,i.length);if(o===i)return true}return false};var r=i(this.AM);var a=i(this.PM);var s=new Array;var o="";for(var l=0;l<e.length;l++){var u=e[l];if(t(u)&&!(n(e,l,this.AM,r)||n(e,l,this.PM,a))){s.push(o);o=""}else o+=u}if(o!=="")s.push(o);return s};e.prototype.getPartCount=function(e){return this.separate(e).length};e.prototype.getActivePartIndex=function(){var e=this.trange&&this.trange.selEnd;var t=this.textValue.substring(0,e);return this.getPartCount(t)-1};e.prototype.getPartLen=function(e){return this.separate(this.config.editMask)[e].length};e.prototype.selectActivePart=function(e){if(this.getDisabled())return;var t=function(e){return e.reduce((function(e,t){return e+t.length+1}),0)};var i=this.textValue;var n=this.getPartCount(i);if(e>=0&&e<n){var r=this.separate(i);var a=t(r.slice(0,e));var s=t(r.slice(0,e+1));if(s>0)s--;this.trange&&this.trange.select(a,s)}};e.prototype.incrementActivePart=function(e){if(this.getDisabled()||!this.trange)return;var t=this.trange.selStart;var i=this.trange.selEnd;var n=this.getActivePartIndex();if(!this.field0ID)return;var r=this.field0ID[this.getActivePartIndex()];var a=this._getTypedValue(this.textValue,true);if(!a)a=new Date;switch(r){case 1:case 2:case 3:a.setFullYear(a.getFullYear()+e);break;case 4:case 5:case 6:case 7:a.setMonth(a.getMonth()+e);break;case 8:case 9:a.setDate(a.getDate()+e);break;case 10:case 11:case 12:case 13:a.setHours(a.getHours()+e);break;case 16:case 17:a.setMinutes(a.getMinutes()+e);break;case 18:case 19:a.setSeconds(a.getSeconds()+e);break}this.textValue=this.getEditText(a);this.fireEvent("usertyping");this.trange.select(t,i)};e.prototype.locatePromptPos=function(e,t){if(t===void 0){t=false}var i=this.mask?this.mask.length:0;while(e>=0&&e<i&&this.mask&&this.mask.charCodeAt(e)>=21){if(t)e--;else e++}return e};e.prototype.insertCharAt=function(e,t,i){if(!this.mask)return-1;var n=this.mask.length;var r=i;var s=e[0];if(i<n){if(this.__checkField){var o=new v;o.txt=s;r=this.__checkField(t.charCodeAt(0),t,s,i,o);if(r>=0){s=o.txt;e[0]=s;return r}else return-1}else{if(this.mask.charCodeAt(r)>=21&&this.mask.charAt(r)===t)return++r;while(this.mask.charCodeAt(r)>=21)if(++r>=n)return-1;var l=a._filter(this.mask.charCodeAt(r),t,0,undefined,this.maskExclude,this.maskInclude);if(l===undefined){return-1}t=l;s=s.substring(0,r)+t+s.substring(r+1);e[0]=s;r++;return r}}return-1};e.prototype.__checkField=function(e,t,i,n,r){var a=i.length;var s=new g;var o=0;var l=this._curField(n,s);if(!this.mask)return-1;if(t===this.mask.charAt(n))return++n;if(n>=s.n1){n--;if(i.charAt(n)!==this.promptChar){return this.__checkField(e,t,i,n+2,r)}}if(l<0)return-1;if(l===5){if(n<s.n1){var u=this.PM;if(u.charAt(0).toUpperCase()!==t.toUpperCase())u=this.AM;if(s.n1===s.n0+1)u=u.charAt(0);else{a=u.length;if(a<this.lengthAmPm)u+=" ";else if(a>this.lengthAmPm)u=u.substring(0,this.lengthAmPm)}r.txt=i.substring(0,s.n0)+u+i.substring(s.n1)}return s.n1}if(e<48||e>57){if(e===46||e===58){n=s.n1;while(++n<a)if(this.mask.charCodeAt(n)<21)break;return n}return-1}e-=48;if(s.n0===n){var u=i.charAt(n+1)===this.promptChar?0:i.charCodeAt(n+1)-48;switch(l){case 4:e--;u-=2;case 3:case 1:if(e>1)o=1;else if(e===1&&u>2)o=2;break;case 2:if(e>3)o=1;else if(e===3&&u>1)o=2;break;case 6:case 7:if(e>5)o=1;break}}if(s.n0+1===n){var u=i.charAt(n-1)===this.promptChar?0:i.charCodeAt(n-1)-48;switch(l){case 4:u--;e-=2;case 3:case 1:if(u>1||u===1&&e>2)o=3;break;case 2:if(u>3||u===3&&e>1)o=3;break;case 6:case 7:if(u>6||u===6&&e>0)o=3;break}}if(o===1){i=i.substring(0,n)+this.promptChar+i.substring(n+1);n++}if(o===2){i=i.substring(0,n+1)+this.promptChar+i.substring(n+2)}if(o===3){while(++n<a)if(this.mask.charCodeAt(n)<21)break;if(n>=a)return-1;return this.__checkField(e+48,t,i,n,r)}r.txt=i.substring(0,n)+t+i.substring(n+1);return++n};e.prototype._curField=function(e,t){if(!this.mask)return-1;var i;var n=22;var r=t.n0=t.n1=-1;var a=0;for(;a<this.mask.length;a++){i=this.mask.charCodeAt(a);if(i>21===n>21){continue}if(i>21){if(a>=e)break}else{t.n0=a;r++}n=i}if(t.n0>=0)t.n1=a;r=this.field0ID[r];if(r==null)return-1;if(r<8)return r<4?0:1;if(r<20)return Math.floor((r-4)/2);return r>21?8:-1};e.prototype.toggleCalendar=function(e){this.dropDownOpen?this.hideDropDown():this.showDropDown();return false};e.prototype.showDropDown=function(){if(this.config.timeMode&&!this.dropDownOpen){this.createTimeItems();this.focus()}this.dropDownOpen=true};e.prototype.createTimeItems=function(){this.timeItems={allowMultiSelect:false,options:[]};var e=this.durationMode?15:30;for(var t=0;t<24;t++){for(var i=0;i<60;i+=e){var n=new Date(1900,0,1,t,i,0);var r={value:n,text:this.getDisplayText(n),selected:false};this.timeItems.options.push(r)}}};e.prototype.hideDropDown=function(){if(this.outerClickSubscription)this.outerClickSubscription.dispose();this.outerClickSubscription=undefined;if(!this.dropDownOpen)return;this.dropDownOpen=false};e.prototype.handleOuterClick=function(e){if(!e)return true;if(this.allowMouseDownFlag){this.allowMouseDownFlag=false;return true}e.stopPropagation();this.hideDropDown();return true};e.prototype.handleInnerClick=function(e){this.allowMouseDownFlag=true;return true};var a;e.defaultConfig={nullText:"",allowNull:true,allowCustomItems:false,minValue:new Date(t.MIN_YEAR,0,1),maxValue:new Date(t.MAX_YEAR,t.MONTHS_IN_YEAR-1,t.MAX_DAYS_IN_MONTH),timeMode:false,enabled:true,firstDayOfWeek:0};i.__decorate([n.computedFrom("enabled","config.readOnly","linkCommand.command"),i.__metadata("design:type",Boolean),i.__metadata("design:paramtypes",[])],e.prototype,"isEditLink",null);i.__decorate([n.computedFrom("config.enabled","config.readOnly"),i.__metadata("design:type",Boolean),i.__metadata("design:paramtypes",[])],e.prototype,"ROMode",null);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable({defaultBindingMode:n.bindingMode.twoWay}),i.__metadata("design:type",Object)],e.prototype,"value",void 0);e=a=i.__decorate([n.autoinject,n.customElement("qp-datetime-edit"),i.__metadata("design:paramtypes",[Element,n.EventManager,n.BindingEngine,n.TaskQueue])],e);return e}();t.QpDatetimeEditCustomElement=p;var g=function(){function e(){this.n0=-1;this.n1=-1}return e}();var v=function(){function e(){}return e}();var m=function(){function e(e){this.element=e;this.selStart=0;this.selEnd=0}e.prototype.refreshSelection=function(){var e=this.element;e.selectionStart=this.selStart;e.selectionEnd=this.selEnd};e.prototype.select=function(e,t){var i=this.element;var n=i.value.length;if(e===undefined||e<0){e=0;t=n}else if(t===undefined){t=e}if(t>=n)t=n;else if(t<e)t=e;if(e>t)e=t;this.selStart=e;this.selEnd=t;if(i.selectionStart!=null){if(e===0&&t===n)i.select();else{i.selectionStart=e;i.selectionEnd=t}}else i.select()};e.prototype.getSelectedText=function(){var e="";var t=this.element;this.selStart=this.selEnd=0;if(t.selectionStart!=null&&t.selectionEnd!=null){this.selStart=t.selectionStart;this.selEnd=t.selectionEnd;if(this.selStart<this.selEnd){e=t.value.substring(this.selStart,this.selEnd)}}return e};return e}();t.TextRange=m}));define("text!apps/enhance/controls/qp-datetime-edit.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'block\'};" id="${config.id}" class="${config.class} dropDown ${hasFocus ? \'focus\' : \'\'} ${ROMode ? \'ReadOnly\' : \'\'}" buttons.bind="ROMode ? \'0\' : \'\' & attr"><div class="editorCont"><div class="editorWrap"><input id="${config.id}_text" ref="elemText" name="${config.name}$text" type="text" tabindex="${config.tabIndex}" class="editor ${ROMode ? \'ReadOnly\' : \'\'}" keydown.capture="processKeyDown($event)" keypress.capture="processKeyPress($event)" focus.capture="processFocus($event)" blur.capture="processBlur($event)" beforepaste.delegate="processBeforePaste($event)" paste.delegate="processPaste($event)" selectstart.delegate="processSelectStart($event)" input.delegate="processInput($event)" value.to-view="textValue" focus.bind="focused"></div></div><div class="buttonsCont" mousedown.capture="toggleCalendar($event)"><span class="center"></span><div class="sprite-icon control-icon" icon="DropDownN" type="sel" css="${ROMode ? \'display: none;\' : \'\'}"><div class="control-icon-img control-DropDownN"></div></div></div><div if.bind="dropDownOpen" style="position:fixed;width:100vw;height:100vh;top:0;left:0;z-index:1000" mousedown.trigger="handleOuterClick($event)"><div glue-to.bind="elemText" style="background-color:#fff;z-index:1000;max-width:412px;max-height:269px" mousedown.trigger="handleInnerClick($event)"><qp-options if.bind="config.timeMode" config.bind="timeItems" value.to-view="[getValueOrToday()]" options-for.bind="element" valuechanged.delegate="acceptDateFromCalendar($event)"></qp-options><qp-calendar else config.to-view="{\'customItems\': config.customItems, \'firstDayOfWeek\': config.firstDayOfWeek}" value.to-view="getValueOrToday()" valuechanged.delegate="acceptDateFromCalendar($event)"></qp-calendar></div></div></template>'}));define("apps/enhance/controls/qp-drop-down",["require","exports","tslib","aurelia-framework","aurelia-logging","../services/control-helper"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpDropDownCustomElement=void 0;var s=r.getLogger("drop-down");var o=1e3;var l=function(){function e(e){this.element=e;this.value=null;this.valueArray=new Array;this.searchString="";this.searchTimeout=undefined;this.prepareHighlightIdx=undefined;this.showOptions=false;this.hasFocus=false;this.valueText="";this.highlightedIndex=undefined}t=e;e.prototype.configChanged=function(e,i){if(i===undefined){a.applyDefaultValues(e,t.defaultConfig)}};e.prototype.valueChanged=function(){var e=this;if(typeof this.value==="string")this.valueArray=this.value.split(",");else this.valueArray=[];this.valueText="";this.config&&this.config.options&&this.config.options.forEach((function(e){return e.selected=false}));this.valueArray.forEach((function(t){var i=e.config.options.find((function(e,i){if(e.value===t){e.selected=true;return true}return false}));if(i){if(e.valueText)e.valueText+=", ";e.valueText+=i.text}}))};e.prototype.enterHighlight=function(e){this.prepareHighlightIdx=e};e.prototype.commitHighlight=function(e){if(this.prepareHighlightIdx===e){this.highlight(e);this.prepareHighlightIdx=undefined}};e.prototype.highlight=function(e){if(this.showOptions)this.highlightedIndex=e};e.prototype.select=function(e,t){this.appendValue(e.value);if(!this.config.allowMultiSelect)this.hide()};e.prototype.toggleSelector=function(e){if(this.config.readOnly)return true;e.preventDefault();e.stopImmediatePropagation();this.inputElement.focus();if(this.showOptions){this.hide()}else{this.show()}return false};e.prototype.show=function(){this.showOptions=true;var e=function(e){var i=t.config.options[e];var n=t.valueArray.find((function(e){return e===i.value}));if(n){t.highlight(e);return"break"}};var t=this;for(var i=0;i<this.config.options.length;++i){var n=e(i);if(n==="break")break}};e.prototype.hide=function(){this.showOptions=false;this.highlightedIndex=undefined};e.prototype.advanceSelection=function(e){this.highlightedIndex=this.highlightedIndex||0;this.highlightedIndex+=e;if(this.highlightedIndex<0)this.highlightedIndex=0;else if(this.highlightedIndex>=this.config.options.length)this.highlightedIndex=this.config.options.length-1;if(this.optionsPane){if("scrollBehavior"in document.documentElement.style){this.optionsPane.children[this.highlightedIndex].scrollIntoView({block:"nearest"})}else{this.optionsPane.children[this.highlightedIndex].scrollIntoView(e<0)}}};e.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.onBlur=function(){this.hide();this.hasFocus=false;return true};e.prototype.onFocus=function(){this.hasFocus=true;return true};e.prototype.onKeyPress=function(e){var t=this;this.searchString=this.searchString+e.key;if(this.searchTimeout!==undefined)clearTimeout(this.searchTimeout);this.search(this.searchString);this.searchTimeout=setTimeout((function(){t.searchString="";t.searchTimeout=undefined}),o);return false};e.prototype.onKeyDown=function(e){s.debug(e.key+" downed");var t=true;switch(e.key){case"Down":case"ArrowDown":if(!this.showOptions)this.show();else this.advanceSelection(1);break;case"Up":case"ArrowUp":if(!this.showOptions)this.show();else this.advanceSelection(-1);break;case"Enter":if(this.highlightedIndex!==undefined)this.select(this.config.options[this.highlightedIndex]);t=false;break;case" ":if(this.highlightedIndex!==undefined){this.select(this.config.options[this.highlightedIndex]);t=true}break;case"Backspace":if(this.config.allowMultiSelect)this.value="";break;case"Esc":case"Escape":this.hide();break;default:t=false}if(t){e.stopPropagation();if(this.searchTimeout!==undefined)clearTimeout(this.searchTimeout);return false}return true};e.prototype.search=function(e){var t=this;e=e.toLocaleLowerCase();this.config.options.find((function(i,n){if(i.text.toLocaleLowerCase().indexOf(e)===0){t.highlight(n);t.select(i);return true}return false}))};e.prototype.appendValue=function(e){var t=this.valueArray.indexOf(e);if(this.config.allowMultiSelect){if(t===-1){this.valueArray.push(e)}else{this.valueArray.splice(t,1)}this.value=this.valueArray.join(",")}else{this.value=e}};var t;e.defaultConfig={enabled:true,required:false};i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);e=t=i.__decorate([n.customElement("qp-drop-down"),n.autoinject,i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpDropDownCustomElement=l;var u=function(){function e(){this.selected=false}return e}()}));define("text!apps/enhance/controls/qp-drop-down.css",[],(function(){return".qp-drop-down,\n.qp-drop-down * {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\nqp-drop-down {\n\tdisplay: block;\n\tborder: 0;\n}\n\nqp-drop-down.GridCellEditor div.drop-down__editor {\n\theight: 100%;\n\t-webkit-box-sizing: content-box;\n\t        box-sizing: content-box;\n\twidth: 100%;\n}\n\n.drop-down__display-text {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right:26px;  \n  height: 100%;\n  pointer-events: none;\n\n  margin: 0;\n  border: 0;\n  padding: 0 4px 0 6px;\n  line-height: 24px;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.drop-down__options-pane {\n  max-height: 210px;\n  overflow-y: auto;\n  position: absolute;\n  z-index: 1000;\n  height: initial;\n  display: block;\n\n  border: #D2D4D7 1px Solid;\n  background-color: White;\n  box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\n  -webkit-box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.64);\n  -moz-box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.64);\n}\n\n.drop-down__option {\n  display: block;\n  height: 18px;\n  padding: 4px 6px;\n  font-size: 13px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  cursor: pointer;\n}\n"}));define("text!apps/enhance/controls/qp-drop-down.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'block\'};" id="${config.id}"><require from="./qp-drop-down"></require><require from="./qp-drop-down.css"></require><div tabindex="-1" class="drop-down__editor ${config.class} ${hasFocus ? \'focus\':\'\'} ${config.readOnly ? \'ReadOnly\' : \'\'} size-${config.size}" ref="editorWrap" mousedown.trigger="toggleSelector($event)" buttons.bind="config.readOnly ? \'0\' : \'\' & attr"><div class="editorCont"><div class="editorWrap" title=""><input name="${config.name}$text" type="text" id="${config.id}_text" ref="inputElement" value.bind="valueText" tabindex="${config.tabIndex}" keydown.capture="onKeyDown($event)" keypress.delegate="onKeyPress($event)" blur.trigger="onBlur()" focus.trigger="onFocus()" class="drop-down__display-text ${config.readOnly ? \'ReadOnly\' : \'\'}" invisible="1"><span class="center"></span><span class="text">${valueText}</span></div></div><div class="buttonsCont"><span class="center"></span><div class="sprite-icon control-icon" icon="DropDownN" type="sel" css="${config.readOnly ? \'display: none;\' : \'\'}"><div class="control-icon-img control-DropDownN"></div></div></div></div><div if.bind="showOptions" class="drop-down__options-pane ${config.class}" ref="optionsPane" glue-to.bind="editorWrap" css="width: ${editorWrap.clientWidth}px;" mousedown.capture="ignoreClicks($event)"><div repeat.for="op of config.options" click.delegate="select(op,$event)" class="qqdrop-down__option ddItem ${highlightedIndex === $index ? \'ddSelection\':\'\'}" mouseenter.capture="enterHighlight($index)" mousemove.capture="commitHighlight($index) & throttle:100"><div if.bind="config.allowMultiSelect" class="sprite-icon control-icon" icon.bind="op.selected ? \'GridCheck\' : \'GridUncheck\' & attr" data-type="check" style="margin-left:2px;margin-right:5px"><div class="control-icon-img control-${op.selected ? \'GridCheck\' : \'GridUncheck\'}"></div></div> ${op.text} </div></div></template>'}));define("apps/enhance/controls/qp-hyper-icon",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpHyperIconCustomElement=void 0;var a=r.getLogger("qp-hyper-icon");var s=function(){function e(){this.disabled=false;this.currentMode="normal";this.pushed=false}t=e;e.prototype.attached=function(){a.info("attached() of ",this.images)};e.prototype.disabledChanged=function(){if(this.disabled)this.currentMode="disabled";else this.currentMode="normal"};e.prototype.imagesChanged=function(e,t){a.info("configChanged() of ",e,t);if(!this.images.hover)this.images.hover=this.images.normal;if(!this.images.pushed)this.images.pushed=this.images.hover;if(!this.images.disabled)this.images.disabled=this.images.normal};e.prototype.OnMouseOver=function(){if(this.disabled)return;if(this.pushed)this.currentMode="pushed";else this.currentMode="hover"};e.prototype.OnMouseOut=function(){if(this.disabled)return;this.currentMode="normal";this.pushed=false};e.prototype.OnMouseDown=function(){if(this.disabled)return;this.currentMode="pushed";this.pushed=true};e.prototype.OnClick=function(){if(this.disabled)return;this.currentMode="normal";this.pushed=false};Object.defineProperty(e.prototype,"SpriteName",{get:function(){return t.parseSpriteName(this.images[this.currentMode])},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ImageName",{get:function(){return t.parseImageName(this.images[this.currentMode])},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ImageType",{get:function(){return t.parseImageType(this.images[this.currentMode])},enumerable:false,configurable:true});e.parseSpriteName=function(e){var t=e.indexOf("@");if(t<0)return null;var i=e.indexOf("svg:");if(i>=0)return e.substring(i+"svg:".length,t);return e.substring(0,t)};e.parseImageName=function(e){var t=e.indexOf("@");if(t<0)return e;return e.substr(t+1)};e.parseImageType=function(e){var t=e.indexOf("svg:");if(t===0)return"svg";t=e.indexOf("@");if(t>=0)return"sprite";return"img"};var t;i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"images",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Boolean)],e.prototype,"disabled",void 0);i.__decorate([n.computedFrom("images","currentMode"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"SpriteName",null);i.__decorate([n.computedFrom("images","currentMode"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"ImageName",null);i.__decorate([n.computedFrom("images","currentMode"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"ImageType",null);e=t=i.__decorate([n.autoinject,n.customElement("qp-hyper-icon")],e);return e}();t.QpHyperIconCustomElement=s}));define("text!apps/enhance/controls/qp-hyper-icon.html",[],(function(){return'<template><div class="checkBox" mouseover.delegate="OnMouseOver()" mouseout.delegate="OnMouseOut()" mousedown.delegate="OnMouseDown()" click.delegate="OnClick()"><img if.bind="ImageType===\'img\'" src.bind="ImageName & attr" align="absmiddle"><div if.bind="ImageType!==\'img\'" class="sprite-icon ${SpriteName}-icon" icon.bind="ImageName & attr"><div if.bind="ImageType===\'sprite\'" class="${SpriteName}-icon-img ${SpriteName}-${ImageName}"></div><svg if.bind="ImageType===\'svg\'"><use href.bind="ImageName & attr"></use></svg></div></div></template>'}));define("apps/enhance/controls/qp-options",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpOptionsCustomElement=void 0;var a=r.getLogger("qp-options");var s=function(){function e(e){this.element=e;this.value=[];this.prepareHighlightIdx=undefined;this.highlightedIndex=undefined}e.prototype.attached=function(){var e=this;if(this.optionsFor!=null){this.optionsPane.style.minWidth=this.optionsFor.clientWidth+"px"}if(!this.config.allowMultiSelect&&this.value.length>0){var t=this.config.options.findIndex((function(t){return e.value[0]<=t.value}));if(t>=0)this.highlightedIndex=t;if(this.highlightedIndex==null)this.highlightedIndex=0;if("scrollBehavior"in document.documentElement.style){this.optionsPane.children[this.highlightedIndex].scrollIntoView({block:"start"})}else{this.optionsPane.children[this.highlightedIndex].scrollIntoView(false)}}};e.prototype.commitSelection=function(){var e=undefined;if(this.config.allowMultiSelect)e=this.value;else if(this.value.length>0)e=this.value[0];var t=new CustomEvent("valuechanged",{bubbles:true,detail:{value:e}});this.element.dispatchEvent(t)};e.prototype.enterHighlight=function(e){this.prepareHighlightIdx=e};e.prototype.commitHighlight=function(e){if(this.prepareHighlightIdx===e){this.highlight(e);this.prepareHighlightIdx=undefined}};e.prototype.highlight=function(e){this.highlightedIndex=e};e.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.hide=function(){a.info("Hide")};e.prototype.select=function(e,t){this.appendValue(e.value);if(!this.config.allowMultiSelect)this.hide();this.commitSelection()};e.prototype.appendValue=function(e){if(this.config.allowMultiSelect){var t=this.value.indexOf(e);if(t===-1){this.value.push(e)}else{this.value.splice(t,1)}}else{this.value=[e]}};i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Array)],e.prototype,"value",void 0);i.__decorate([n.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"optionsFor",void 0);e=i.__decorate([n.autoinject,n.customElement("qp-options"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpOptionsCustomElement=s;var o=function(){function e(){this.selected=false}return e}()}));define("text!apps/enhance/controls/qp-options.html",[],(function(){return'<template><require from="./qp-options"></require><require from="./qp-drop-down.css"></require><div class="drop-down__options-pane ${config.class}" ref="optionsPane" mousedown.capture="ignoreClicks($event)"><div repeat.for="op of config.options" click.delegate="select(op,$event)" class="ddItem ${highlightedIndex === $index ? \'ddSelection\':\'\'}" mouseenter.capture="enterHighlight($index)" mousemove.capture="commitHighlight($index) & throttle:100" keydown.delegate="onKeyDown($event)" keypress.delegate="onKeyPress($event)"><div if.bind="config.allowMultiSelect" class="sprite-icon control-icon" icon.bind="op.selected ? \'GridCheck\' : \'GridUncheck\' & attr" data-type="check" style="margin-left:2px;margin-right:5px"><div class="control-icon-img control-${op.selected ? \'GridCheck\' : \'GridUncheck\'}"></div></div> ${op.text} </div></div></template>'}));define("apps/enhance/main",["require","exports","tslib","aurelia-bootstrapper","aurelia-framework","environment","compatibility-layer/faux-screen","aurelia-binding"],(function(e,t,i,n,r,a,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});a=i.__importDefault(a);o.disableConnectQueue();var l=function(e){var t=e instanceof Element&&e.getAttribute("id")||undefined;return{element:e,id:t}};var u=l(document.activeElement);if(u.element&&u.element.tagName==="BODY"){document.addEventListener("focus",(function(e){u=l(e.target)}),{capture:true,once:true})}var c=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,o,l,c,h,f;return i.__generator(this,(function(i){switch(i.label){case 0:t=r.PLATFORM.global.globalControlsModules;e.use.basicConfiguration().defaultResources().plugin(r.PLATFORM.moduleName("aurelia-ui-virtualization")).globalResources([s.FauxScreenCustomAttribute]).plugin("aurelia-animator-css").feature("plugins/enhance-n-watch").feature("plugins/glue").feature("plugins/happeded-on-body").feature("plugins/tooltip-service").feature("apps/enhance/controls");if(Array.isArray(t)){t.forEach((function(t){return e.use.feature(t)}))}e.use.developmentLogging(a.default.debug?"debug":"warn");return[4,e.start()];case 1:i.sent();n={elements:{},values:{}};if(a.default.debug)r.PLATFORM.global.fauxScreen=n;return[4,e.enhanceAndWatch(n)];case 2:i.sent();if(u.id){o=r.DOM.getElementById(u.id);if(o){o.focus()}}else if(u.element instanceof HTMLElement&&u.element.parentNode!=null){if(u.element!==document.activeElement){u.element.focus()}}if(r.PLATFORM.global.px_cm){px_cm.handleLoad();if(px_cm.auEnhanceCompleted)px_cm.auEnhanceCompleted();if(px_cm.requiredReloadPage(false))px_cm.reloadPage(true);px_cm.au_flush=function(){var t=e.container.get(r.TaskQueue);t.flushMicroTaskQueue()};px_cm.au_enhance=function(t){var i=e.container.get(r.TemplatingEngine);var a=i.enhance({element:t,container:e.container,resources:e.resources,bindingContext:n});px_cm.au_flush();return a}}l=px_cm.AureliaEnhanceAwaitQueue;if(l){for(c=0,h=l;c<h.length;c++){f=h[c];f()}l.splice(0,l.length)}return[2]}}))}))};n.bootstrap(c)}));define("apps/enhance/services/api-client",["require","exports","tslib","aurelia-fetch-client","aurelia-framework","whatwg-fetch","abortcontroller-polyfill/dist/abortcontroller-polyfill-only"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ApiClient=void 0;var a=function(){function e(e){this.client=e;this.root="";this.root=requirejs.s.contexts._.config.baseUrl.replace("/scripts/ca/","");this.client.configure((function(e){e.withDefaults({headers:{Accept:"application/json","X-Requested-With":"Fetch"},credentials:"same-origin"})}))}e.prototype.getBranchData=function(e,t){return this.client.fetch(this.root+"/ui/BranchSelector/Pass",{method:"POST",body:n.json(e),signal:t}).then((function(e){return e.json()}))};e.prototype.getSuggestionData=function(e,t){return this.client.fetch(this.root+"/ui/Selector/GetSuggestions",{method:"POST",body:n.json(e),signal:t}).then((function(e){return e.json()}))};e.prototype.getApiPrefix=function(){return this.root+"/ui"};e=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[n.HttpClient])],e);return e}();t.ApiClient=a}));define("apps/enhance/services/control-helper",["require","exports","tslib","aurelia-pal"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scrollToView=t.ScrollMode=t.applyDefaultValues=t.NetType=t.browser=t.isVisible=t.isLetter=t.getScreenID=t.isDigit=t.formatDate=t.dateFormatInfo=t.numberFormatInfo=t.topDocument=t.topWindow=t.equals=void 0;function r(e,t){if(e==null&&t!=null||t==null&&e!=null){return false}if(e instanceof Date&&t instanceof Date){return e.getTime()===t.getTime()}return e==t}t.equals=r;var a=n.PLATFORM.global;var s;try{a=a.top;s=a.document}catch(e){a=n.PLATFORM.global}t.topWindow=a;t.topDocument=t.topWindow.document;t.numberFormatInfo=t.topWindow._numbFormatInfo;t.dateFormatInfo=t.topWindow._dateFormatInfo;function o(e,t,i){if(t.length===1){switch(t){case"d":t=i.shortDate;break;case"D":t=i.longDate;break;case"t":t=i.shortTime;break;case"T":t=i.longTime;break;case"g":t=i.shortDate+" "+i.shortTime;break;case"G":t=i.shortDate+" "+i.longTime;break;case"f":t=i.longDate+" "+i.shortTime;break;case"F":t=i.longDate+" "+i.longTime;break}}var n="";var r=false;var a=i.monthNames.split(",");var s=i.dayNames.split(",");for(var o=0;o<t.length;o++){if(r){n+=t.substr(o,1);r=false;continue}if(t.charAt(o)==="\\"){r=true;continue}var l=t.substr(o,4);var u="";switch(l){case"MMMM":u=a[e.getMonth()];break;case"dddd":u=a[e.getMonth()];break;case"yyyy":u=e.getFullYear()+"";break}if(u){n+=u;o+=3;continue}l=t.substr(o,3);switch(l){case"MMM":u=a[e.getMonth()].substr(0,3);break;case"ddd":u=s[e.getDay()].substr(0,3);break}if(u){n+=u;o+=2;continue}l=t.substr(o,2);switch(l){case"MM":u=(e.getMonth()+1).toString();if(u.length===1)u="0"+u;break;case"dd":u=e.getDate().toString();if(u.length===1)u="0"+u;break;case"yy":u=(e.getFullYear()%100).toString();if(u.length===1)u="0"+u;break;case"HH":u=e.getHours().toString();if(u.length===1)u="0"+u;break;case"hh":{var c=e.getHours();if(c===0)c=12;else if(c>12)c-=12;u=c.toString();if(u.length===1)u="0"+u;break}case"mm":u=e.getMinutes().toString();if(u.length===1)u="0"+u;break;case"ss":u=e.getSeconds().toString();if(u.length===1)u="0"+u;break;case"tt":{var h=false;if(e.getHours()>=12)h=true;if(h)u=i.pm;else u=i.am;break}}if(u){n+=u;o+=1;continue}l=t.substr(o,1);switch(l){case"M":u=(e.getMonth()+1).toString();break;case"d":u=e.getDate().toString();break;case"y":u=(e.getFullYear()%100).toString();break;case"H":u=e.getHours().toString();break;case"h":{var c=e.getHours();if(c===0)c=12;else if(c>12)c-=12;u=c.toString();break}case"m":u=e.getMinutes().toString();break;case"s":u=e.getSeconds().toString();break}if(u){n+=u;continue}n+=t.substr(o,1)}return n}t.formatDate=o;function l(e){if(typeof e==="string"){e=e.charCodeAt(0)}var t=47;var i=58;return e>t&&e<i}t.isDigit=l;function u(){var e=window.__screenID;var t=window.location.pathname;if(e)e=e.replace(/\./g,"");else e=t.substr(t.lastIndexOf("/")+1).replace(".aspx","").toUpperCase();return e}t.getScreenID=u;function c(e){if(typeof e==="number"){e=String.fromCharCode(e)}var t=255;return e.charCodeAt(0)>t||e.toUpperCase()!==e.toLowerCase()}t.isLetter=c;function h(e){try{return e&&e.offsetParent!=null&&e.offsetWidth>0}catch(e){}return false}t.isVisible=h;var f=n.PLATFORM.global.navigator.userAgent.toLowerCase();var d=f.indexOf("msie")>=0;var p=f.indexOf("edge")>=0;var g=f.indexOf("rv:11.0")>0;var v=d||g;var m=f.indexOf("safari")>=0;var b=f.indexOf("firefox");var y=b>=0?parseFloat(f.substr(b+8,3)):0;var x=b>=0;var _=x&&y>=65;t.browser={isIE:d,isEdge:p,isIE11:g,isAnyIE:v,isSafari:m,isFirefox:x,isFirefoxFrom65:_};var w;(function(e){e[e["Empty"]=0]="Empty";e[e["Object"]=1]="Object";e[e["DBNull"]=2]="DBNull";e[e["Boolean"]=3]="Boolean";e[e["Char"]=4]="Char";e[e["SByte"]=5]="SByte";e[e["Byte"]=6]="Byte";e[e["Int16"]=7]="Int16";e[e["UInt16"]=8]="UInt16";e[e["Int32"]=9]="Int32";e[e["UInt32"]=10]="UInt32";e[e["Int64"]=11]="Int64";e[e["UInt64"]=12]="UInt64";e[e["Single"]=13]="Single";e[e["Double"]=14]="Double";e[e["Decimal"]=15]="Decimal";e[e["DateTime"]=16]="DateTime";e[e["String"]=18]="String"})(w=t.NetType||(t.NetType={}));function k(e,t){var n=i.__assign({},e);if(v)D(n);Object.assign(e,t,n)}t.applyDefaultValues=k;function D(e){for(var t in e)if(e[t]===undefined)delete e[t]}var O;(function(e){e[e["Both"]=0]="Both";e[e["Vertical"]=1]="Vertical";e[e["Horizontal"]=2]="Horizontal"})(O=t.ScrollMode||(t.ScrollMode={}));function S(e,t,i){if(i===void 0){i=O.Both}if(t==null||e.scrollWidth<=e.offsetWidth&&e.scrollHeight<=e.offsetHeight){return}var n=e.offsetParent;var r=n.getBoundingClientRect();var a=e.getBoundingClientRect();var s=t.getBoundingClientRect();var o=s.left-r.left;var l=a.left-r.left;var u=s.top-r.top;var c=a.top-r.top;var h=o+t.offsetWidth;var f=l+e.offsetWidth;var d=u+t.offsetHeight;var p=c+e.offsetHeight;var g=e.offsetWidth-e.clientWidth;var v=e.offsetHeight-e.clientHeight;var m=-1;var b=-1;var y=i===O.Both||i===O.Vertical;var x=i===O.Both||i===O.Horizontal;if(y){if(d>p-v&&u-(d-p)>c){m=e.scrollTop+(d-p)+v}if(u<c)m=e.scrollTop-(c-u)}if(x){if(h>f-g&&o-(h-f)>l){b=e.scrollLeft+(h-f)+g}if(o<l)b=e.scrollLeft-(l-o)}if(y&&m>=0)e.scrollTop=m;if(x&&b>=0)e.scrollLeft=b}t.scrollToView=S}));define("apps/enhance/services/localization",["require","exports","aurelia-pal"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LOCALIZED_STRINGS=void 0;i.PLATFORM.global.ClientLocalizedStrings=i.PLATFORM.global.ClientLocalizedStrings||{};t.LOCALIZED_STRINGS=i.PLATFORM.global.ClientLocalizedStrings;t.default=t.LOCALIZED_STRINGS}));define("apps/enhance/services/mark-highlights",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.markHighlights=void 0;function i(e,t){if(!e){return[{highlight:false,text:t}]}var i=e.split(" ").filter((function(e){return e.length>0})).map((function(e){var t=e.toUpperCase();var i=t.length;return{str:t,len:i}}));var n=t.toUpperCase();var r=Array.from({length:n.length});for(var a=0;a<r.length;a++){r[a]=false}var s=[];i.forEach((function(e){var t=0;var i=-1;do{i=n.indexOf(e.str,t);if(i>-1){for(var a=i;a<i+e.len;a++){r[a]=true}t=i+e.len}}while(i>-1)}));var o=false;var l=0;do{var u=l;while(r[l]===o&&l<r.length){l++}if(l>u){s.push({highlight:o,text:t.substring(u,l)})}o=r[l]}while(l<r.length);return s}t.markHighlights=i}));define("apps/enhance/services/suggestings-service",["require","exports","tslib","aurelia-framework","./api-client","./mark-highlights"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SuggestingsServiceFabric=t.SuggestingsService=void 0;var s=2;var o=function(){function e(e,t){this.params=e;this.apiClient=t;this.results=new Map;this.baseQuery={args:e.args,fields:this.params.fields,filter:"",graph:this.params.graph,graphStateId:this.params.graphStateId,inlineArgs:this.params.inlineArgs,skip:0,take:this.params.pageSize,view:this.params.viewName}}e.prototype.abortRequest=function(){if(this.abortController){if(!this.abortController.signal.aborted){this.abortController.abort()}}};e.prototype.getSuggestions=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;var n=this;return i.__generator(this,(function(r){if(!this.results.has(e)){t=i.__assign(i.__assign(i.__assign({},this.baseQuery),{filter:e}),{take:this.params.pageSize*s});return[2,this.getData(t).then((function(r){if(r.haveMore){r.loadMore=function(){if(r.loading){return}r.loading=true;var e=i.__assign(i.__assign({},t),{skip:r.suggestionItems.length,take:n.params.pageSize});n.getData(e).then((function(e){var t;r.haveMore=e.haveMore;r.totalCount=e.totalCount;(t=r.suggestionItems).push.apply(t,e.suggestionItems);r.loading=false}))}}n.results.set(e,r);return n.results.get(e)}))]}return[2,Promise.resolve(this.results.get(e))]}))}))};e.prototype.getData=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(i){this.abortRequest();this.abortController=new AbortController;return[2,this.apiClient.getSuggestionData(e,this.abortController.signal).then((function(i){if(!i.data||!i.fields){return{haveMore:false,totalCount:0,suggestionItems:[],loading:false}}var n=i.fields.findIndex((function(e){return e.toLowerCase()===t.params.valueField.toLowerCase()}));var r=i.fields.length>1&&t.params.descriptionName!==t.params.valueField?i.fields.findIndex((function(e){return e.toLowerCase()===(""+t.params.descriptionName).toLowerCase()})):-1;var s={haveMore:i.haveMore,loading:false,suggestionItems:i.data.map((function(t){var i=t[n];var s=r===-1?undefined:t[r];var o=a.markHighlights(e.filter,s?i+" - "+s:""+i);return{display:s,segments:o,value:i}})),totalCount:i.totalCount};return s}))]}))}))};return e}();t.SuggestingsService=o;var l=function(){function e(e){this.apiClient=e}e.prototype.getSuggestingService=function(e){return new o(e,this.apiClient)};e=i.__decorate([n.autoinject,i.__metadata("design:paramtypes",[r.ApiClient])],e);return e}();t.SuggestingsServiceFabric=l}));define("compatibility-layer/faux-object-factory",["require","exports","aurelia-logging","./faux-objects/text-editor","./faux-objects/faux-object","./faux-objects/calendar","./faux-objects/datetime-edit","./faux-objects/color-picker","./faux-objects/branch-selector","./faux-objects/check-box","./faux-objects/drop-down","./faux-objects/number-editor","./faux-objects/selector"],(function(e,t,i,n,r,a,s,o,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getFauxObject=void 0;var d=i.getLogger("object-proxy");var p={"qp-branch-selector":l.FauxObjectBranchSelector,"qp-color-picker":o.FauxObjectColorPicker,"qp-text-editor":n.FauxObjectTextEditor,"qp-number-editor":h.FauxObjectNumberEditor,"qp-calendar":a.FauxObjectCalendar,"qp-datetime-edit":s.FauxObjectDatetimeEdit,"qp-check-box":u.FauxObjectCheckBox,"qp-drop-down":c.FauxObjectDropDown,"qp-selector":f.FauxObjectSelector};var g={get:function(e,t,i){var n=Reflect.get(e,t,i);d.info("proxy get",t,n);return n},set:function(e,t,i,n){var r=Reflect.set(e,t,i,n);d.info("proxy set",t,i,r);return r}};function v(e,t,i,n){var a=e.tagName.toLowerCase();var s=p[a]||r.FauxObjectBase;var o=new s(e,t,i,n);return o}t.getFauxObject=v}));define("compatibility-layer/faux-objects/base-editor",["require","exports","tslib","aurelia-logging","./faux-object","aurelia-framework","aurelia-dependency-injection","apps/enhance/services/control-helper"],(function(e,t,i,n,r,a,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectBaseEditor=void 0;var l=n.getLogger("base-editor");var u={dataField:null,enabled:true,readOnly:false,value:null};var c;(function(e){e["valueChanging"]="valueChanging";e["valueChanged"]="valueChanged"})(c||(c={}));var h=function(e){i.__extends(t,e);function t(t,i,n,a){var s=e.call(this,t,i,n)||this;s.element=t;s.screenValues=n;s.bindingEngine=a;s.enabled=true;s.readOnly=false;s.onValueChange=0;s.autoCallBack=new r.CallbackSettings;s.trackValue=false;s[r.propertySetters].set("readOnly",(function(e){return s.setReadOnly(e)}));s[r.propertySetters].set("enabled",(function(e){return s.setEnabled(e)}));s[r.propertySetters].set("value",(function(e){return s.setValue(e)}));s[r.configSetters].set("readOnly",null);s[r.configSetters].set("enabled",null);s.subscription=s.bindingEngine.propertyObserver(s.screenValues,s.ID).subscribe((function(e,t){if(s.trackValue){s.taskQueue.queueMicroTask((function(){return s.updateValue(e)}))}}));var o=s.getExternalProps();s.events.appendEvents([c.valueChanging,c.valueChanged],o?o.clientEvents:null);return s}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);this.px_cm.setStackElements(this);this.saveTextElementRef();this.domEventsElem=new a.ElementEvents(this.element);this.domEventsElem.subscribe("input",(function(){t.px_cm.notifyOwnerTyping(t)}));this.domEventsElem.subscribe("focus",(function(){t.px_cm.notifyOwnerActivate(t)}))};t.prototype.afterInitialize=function(){var t=this;e.prototype.afterInitialize.call(this);this.taskQueue.queueTask((function(){t.value=t.getValue();t.trackValue=true}))};Object.defineProperty(t.prototype,"taskQueue",{get:function(){return s.Container.instance.get(a.TaskQueue)},enumerable:false,configurable:true});t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);this.domEventsElem.disposeAll();this.subscription.dispose()};t.prototype.saveTextElementRef=function(){this.elemText=this.elemFocus=this.getTextElement();if(this.elemText)this.setObjectRef(this.elemText)};t.prototype.getDefaultCallbackProps=function(){return i.__assign(i.__assign({},e.prototype.getDefaultCallbackProps.call(this)),u)};t.prototype.updateState=function(e){};t.prototype.refreshValue=function(){var e=this.getTextElement();if(e===a.PLATFORM.global.document.activeElement){var t=document.createEvent("HTMLEvents");t.initEvent("update",true,false);e.dispatchEvent(t);this.flushMicroTaskQueue()}return false};t.prototype.updateValue=function(e){if(e===undefined)return this.refreshValue();this.updateState(e);if(!o.equals(e,this.value)){var t={oldValue:this.value,value:e};if(this.fireEvent(c.valueChanging,null,t)){this.setValue(this.value);return false}this.setValue(e);if(e!==undefined)this.flushMicroTaskQueue();this.fireEvent(c.valueChanged,null,t);this.px_cm.notifyOwnerChanged(this);this.px_cm.processPostData(this)}return true};t.prototype.focus=function(){var e=this.getTextElement();try{e.focus()}catch(e){}};t.prototype.getTextElement=function(){return this.element.querySelector("input")};t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t);this.px_cm.setStackElementsVisible(this,t)};t.prototype.getEnabled=function(){return this[r.configRef].enabled};t.prototype.setEnabled=function(e){this.enabled=this[r.configRef].enabled=!!e};t.prototype.getReadOnly=function(){return this[r.configRef].readOnly};t.prototype.setReadOnly=function(e){this.readOnly=this[r.configRef].readOnly=!!e};t.prototype.getValue=function(e){if(e===void 0){e=undefined}if(e)this.refreshValue();return this.screenValues[this[r.configRef].id]};t.prototype.setValue=function(e){var t=this;var i=this.trackValue;this.trackValue=false;this.screenValues[this[r.configRef].id]=e;this.value=e;if(i)setTimeout((function(){return t.trackValue=i}),0)};t.prototype.initStateBag=function(e){this.stateBag=this.px.topWin().Object.create(this.px.topWin().PXStateBag.prototype);this.stateBag.constructor(this,"PText")};t.prototype.flushMicroTaskQueue=function(){var e=s.Container.instance.get(a.TaskQueue);if(e)e.flushMicroTaskQueue()};return t}(r.FauxObjectBase);t.FauxObjectBaseEditor=h}));define("compatibility-layer/faux-objects/branch-selector",["require","exports","tslib","./base-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectBranchSelector=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var s=e.call(this,t,i,n,a)||this;s.autoCallBack=new r.CallbackSettings;s[r.propertySetters].set("branchName",(function(e){return false}));s[r.configSetters].set("value",(function(e){return s.setValue(e)}));return s}t.prototype[r.initializeFauxObject]=function(){e.prototype[r.initializeFauxObject].call(this)};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.setValue=function(t){if(t instanceof Object){e.prototype.setValue.call(this,t)}else{if(this.screenValues[this[r.configRef].id]instanceof Object&&this.screenValues[this[r.configRef].id].id===t){return}var i={id:t,text:"no branch name"};e.prototype.setValue.call(this,i)}};t.prototype.setProperties=function(t){var n=t.branchName,r=t.value,a=i.__rest(t,["branchName","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.setProperties.call(this,a)}else{e.prototype.setProperties.call(this,t)}};t.prototype.copyPropertiesToConfig=function(t){var n=t.branchName,r=t.value,a=i.__rest(t,["branchName","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.copyPropertiesToConfig.call(this,a)}else{e.prototype.copyPropertiesToConfig.call(this,t)}};return t}(n.FauxObjectBaseEditor);t.FauxObjectBranchSelector=a}));define("compatibility-layer/faux-objects/calendar",["require","exports","tslib","./faux-object","aurelia-framework"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectCalendar=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n){return e.call(this,t,i,n)||this}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);var i=this.element;this.domEvents=new r.ElementEvents(i);this.domEvents.subscribe("valuechanged",(function(){px_cm.notifyOwnerChanged(t);px_cm.processPostData(t)}))};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this);this.domEvents.disposeAll()};return t}(n.FauxObjectBase);t.FauxObjectCalendar=a}));define("compatibility-layer/faux-objects/check-box",["require","exports","tslib","./faux-object","./base-editor","aurelia-logging"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectCheckBox=void 0;var s=a.getLogger("check-box__faux-object");var o=function(e){i.__extends(t,e);function t(t,i,n,r){return e.call(this,t,i,n,r)||this}t.prototype[n.initializeFauxObject]=function(){e.prototype[n.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input")};t.prototype.setValue=function(t){if(typeof t==="string"){if(t.toLowerCase()===this[n.configRef].trueValue.toLowerCase()){return e.prototype.setValue.call(this,true)}else return e.prototype.setValue.call(this,false)}e.prototype.setValue.call(this,t)};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.refreshValue=function(){return false};t.prototype.getChecked=function(){return this.getValue()!=0};t.prototype.setChecked=function(e){e?this.setValue(1):this.setValue(0)};return t}(r.FauxObjectBaseEditor);t.FauxObjectCheckBox=o}));define("compatibility-layer/faux-objects/color-picker",["require","exports","tslib","aurelia-framework","./faux-object","./base-editor","aurelia-logging"],(function(e,t,i,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectColorPicker=void 0;var o=s.getLogger("faux-color-picker");var l=function(e){i.__extends(t,e);function t(t,i,n,r){return e.call(this,t,i,n,r)||this}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);var i=this.element.querySelector("input[type=color]");if(i){this.domEventsColor=new n.ElementEvents(i);this.domEventsColor.subscribe("blur",(function(){t.taskQueue.flushTaskQueue()}))}};t.prototype.getTextElement=function(){return this.element.querySelector("input[type=text]")};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);if(this.domEventsColor){this.domEventsColor.disposeAll()}};return t}(a.FauxObjectBaseEditor);t.FauxObjectColorPicker=l}));define("compatibility-layer/faux-objects/datetime-edit",["require","exports","tslib","./faux-object","./base-editor","apps/enhance/controls/qp-datetime-edit","aurelia-framework","apps/enhance/services/control-helper","aurelia-logging"],(function(e,t,i,n,r,a,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectDatetimeEdit=void 0;var u=l.getLogger("date-time__faux-object");var c=function(e){i.__extends(t,e);function t(t,i,r,a){var s=e.call(this,t,i,r,a)||this;s.onValueChange=0;s.allowStrings=false;s.durationMode=false;s.allowCustomItems=false;s[n.configSetters].set("editMask",null);s[n.configSetters].set("displayMask",null);s[n.configSetters].set("nullText",null);s[n.configSetters].set("allowNull",null);s[n.configSetters].set("allowCustomItems",null);s[n.configSetters].set("minValue",(function(e){return s.setMinValue(e)}));s[n.configSetters].set("maxValue",(function(e){return s.setMaxValue(e)}));s[n.configSetters].set("timeMode",null);return s}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);var i=this.elemText=this.element.querySelector("input");this.domEvents=new s.ElementEvents(this.element);this.domEvents.subscribe("paste",(function(){px_cm.notifyOwnerTyping(t)}));this.domEvents.subscribe("usertyping",(function(){px_cm.notifyOwnerTyping(t)}));this.domEvents.subscribe("activated",(function(){px_cm.notifyOwnerActivate(t)}))};t.prototype.setMinValue=function(e){try{this[n.configRef].minValue=new Date(e)}catch(i){var t=this._parseStringValue(e);if(!(t instanceof Date))t=new Date(a.MIN_YEAR,0,1);this[n.configRef].minValue=t}};t.prototype.setMaxValue=function(e){try{this[n.configRef].maxValue=new Date(e)}catch(i){var t=this._parseStringValue(e);if(!(t instanceof Date))t=new Date(a.MAX_YEAR,a.MONTHS_IN_YEAR-1,a.MAX_DAYS_IN_MONTH);this[n.configRef].minValue=t}};t.prototype.setValue=function(t){var i=typeof t==="string"?this._parseStringValue(t):t;var n=i&&i.constructor.name==="Date"?i:null;if(this.allowCustomItems)this.allowStrings=true;if(this.allowCustomItems||t==null||n&&!isNaN(n.getTime())&&o.equals(this._ajustLimits(n),n)){e.prototype.setValue.call(this,i)}};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this);this.domEvents.disposeAll()};t.prototype.setTimeMode=function(e){var t=this[n.configRef];t.timeMode=e};t.prototype.setDateMask=function(e,t){var i=this[n.configRef];i.editMask=e;i.displayMask=t};t.prototype._parseStringValue=function(e){var t=this[n.configRef];var i=null;if(e==null||this.isNullValue(e)){if(t.allowNull)return null;i=new Date}else{if(t.timeMode||e.indexOf(":")>0){var r=Date.parse(e);if(!isNaN(r))i=new Date(r)}else{var a=e.split("/");if(a.length>=3){var s=parseInt(a[2]);var o=parseInt(a[0]);var l=parseInt(a[1]);if(!isNaN(s)&&!isNaN(o)&&!isNaN(l)){i=new Date(s,o-1,l);i.setFullYear(s,o-1,l)}}}}if(t.timeMode&&i instanceof Date&&!isNaN(i.getTime())){i.setFullYear(t.minValue.getFullYear());i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(t.allowCustomItems&&(i==null||isNaN(i.getTime())))return e;return i};t.prototype.isNullValue=function(e){var t=this[n.configRef];var i=String(e);if(e===undefined||i==="")return true;if(t.allowNull&&i===t.nullText)return true;return false};t.prototype._ajustLimits=function(e){var t=this[n.configRef];if(!t.timeMode&&!this.allowCustomItems&&e!=null&&!isNaN(e.getTime())){var i=e.getTime();var r=void 0;var a=void 0;if(t.minValue!=null)r=t.minValue.getTime();if(t.maxValue!=null)a=t.maxValue.getTime();if(r!==undefined&&i<r){e=new Date(r)}if(a!==undefined&&i>a){e=new Date(a)}}return e};return t}(r.FauxObjectBaseEditor);t.FauxObjectDatetimeEdit=c}));define("compatibility-layer/faux-objects/drop-down",["require","exports","tslib","./faux-object","./base-editor","aurelia-logging"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectDropDown=void 0;var s=a.getLogger("check-box__faux-object");var o=function(e){i.__extends(t,e);function t(t,i,n,r){var a=e.call(this,t,i,n,r)||this;a.initStateBag("PText");return a}t.prototype[n.initializeFauxObject]=function(){e.prototype[n.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input")};t.prototype.updateState=function(e){this.stateBag.update("Value",e)};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.refreshValue=function(){return false};return t}(r.FauxObjectBaseEditor);t.FauxObjectDropDown=o}));define("compatibility-layer/faux-objects/faux-object",["require","exports","tslib","aurelia-logging","aurelia-pal"],(function(require,exports,tslib_1,aurelia_logging_1,aurelia_pal_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallbackCommand=exports.CallbackSettings=exports.FauxObjectEventsList=exports.FauxObjectBase=exports.propertySetters=exports.configSetters=exports.configRef=exports.disposeFauxObject=exports.initializeFauxObject=void 0;var logger=aurelia_logging_1.getLogger("faux-object");exports.initializeFauxObject=Symbol("initializeFauxObject");exports.disposeFauxObject=Symbol("disposeFauxObject");exports.configRef=Symbol("configRef");exports.configSetters=Symbol("configSetters");exports.propertySetters=Symbol("propertySetters");var defaultCallbackProperties={hidden:false};var FauxObjectBase=function(){function e(t,i,n){var r=this;this.element=t;this.screenValues=n;this.hidden=false;if(!i.id){logger.error("config without id");throw"wrong config"}this[exports.configRef]=i;this.ID=i.id;this.name=i.name;this.px_context=px_context;this.tabIndex=this[exports.configRef].tabIndex;var a=2;if(i.propsTemplate)this.__className=i.propsTemplate.substring(a);this.sourceID=t.getAttribute("source-id");this[exports.propertySetters]=new Map([["hidden",function(e){return r.setHidden(e)}]]);this[exports.configSetters]=new Map([["hidden",null]]);var s=this.getExternalProps();this.events=new FauxObjectEventsList(this,[e.initEventName],s?s.clientEvents:null)}Object.defineProperty(e.prototype,"px_cm",{get:function(){return px_cm},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px",{get:function(){return this.px_context.px},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px_all",{get:function(){return this.px_context.px_all},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px_callback",{get:function(){return this.px_context.px_callback},enumerable:false,configurable:true});e.prototype.getTemplateProps=function(){return window[this[exports.configRef].propsTemplate]};e.prototype.getExternalProps=function(){var e=this.sourceID?this.sourceID:this.ID;var t=window["_"+e];return t?t:{}};e.prototype.fireEvent=function(e,t,i){if(t===void 0){t=null}if(i===void 0){i=null}return this.events.fireEvent(e,t,i)};e.prototype[exports.initializeFauxObject]=function(){var t=tslib_1.__assign(tslib_1.__assign({},this.getTemplateProps()),this.getExternalProps());this.readProperties(this,t);this.copyPropertiesToConfig(t);this.px_all[this.ID]=this;var i=this.ID.split("_").pop();if(i)px_context.px_alls[i]=this;if(this.bindingContainer)px_cm.notifyOwnerCreated(this);if(this.tabIndex>=0)this.px_cm.tabIndexer.push(this);this.fireEvent(e.initEventName)};e.prototype[exports.disposeFauxObject]=function(){return};e.prototype.destructor=function(){this[exports.disposeFauxObject]()};e.prototype.afterInitialize=function(){return};e.prototype.setObjectRef=function(e){e.object=this};e.prototype.setHidden=function(e){this.setVisible(!e)};e.prototype.setVisible=function(e){this.hidden=this[exports.configRef].hidden=!e};e.prototype.getVisible=function(){return!this.hidden};e.prototype.getDefaultCallbackProps=function(){return defaultCallbackProperties};e.prototype.setProperties=function(e){var t;var i=tslib_1.__assign(tslib_1.__assign({},this.getDefaultCallbackProps()),e);var n=this[exports.propertySetters];var r=this[exports.configRef];for(var a in i){var s=n.get(a);if(s){s(i[a])}else{var o=(t={},t[a]=i[a],t);Object.assign(this,o);if(this[exports.configSetters].has(a)){var l=this[exports.configSetters].get(a);if(l){l(i[a])}else{Object.assign(r,o)}}}}};e.prototype.readProperties=function(e,t){var i,n;for(var r in t){var a=e[r];var s=t[r];var o=(i={},i[r]=s,i);if(a!=null&&typeof a==="object"){if(a instanceof Date){o=(n={},n[r]=new Date(Date.parse(s)),n);Object.assign(e,o)}else if(a instanceof Array){Object.assign(e,o)}else this.readProperties(a,s)}else if(typeof a==="boolean"){e[r]=!!s}else Object.assign(e,o)}};e.prototype.copyPropertiesToConfig=function(e){var t;var i=this[exports.configRef];for(var n in e){if(!this[exports.configSetters].has(n))continue;var r=this[exports.configSetters].get(n);if(r){r(e[n])}else{Object.assign(i,(t={},t[n]=e[n],t))}}};e.initEventName="initialize";return e}();exports.FauxObjectBase=FauxObjectBase;var FauxObjectEventsList=function(){function FauxObjectEventsList(e,t,i){this.owner=e;this.events=new Object;this.handlers=new Object;this.count=0;this.appendEvents(t,i)}FauxObjectEventsList.prototype.dispose=function(){delete this.owner;delete this.handlers;delete this.events};FauxObjectEventsList.prototype.appendEvents=function(events,handlers){if(events==null)return;for(var _i=0,events_1=events;_i<events_1.length;_i++){var name_1=events_1[_i];this.events[name_1]=this.count++}if(handlers==null)return;for(var hn in handlers){if(this.events.hasOwnProperty(hn)){var hlist=handlers[hn].startsWith("(")?[handlers[hn]]:handlers[hn].split(",");for(var _a=0,hlist_1=hlist;_a<hlist_1.length;_a++){var handler=hlist_1[_a];var hf=void 0;var win=aurelia_pal_1.PLATFORM.global;try{hf=win[handler]}catch(e){}try{hf=eval(handler)}catch(e){}if(hf)this.addEventHandler(hn,hf)}}}};FauxObjectEventsList.prototype.addEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0)return;var n=this.handlers[i];if(n==null)n=this.handlers[i]=[];for(var r=0;r<=n.length;r++){if(n[r]==null){n[r]=new Object;n[r].func=t;break}else if(n[r].func===t)break}};FauxObjectEventsList.prototype.removeEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0||i>=this.count)return;var n=this.handlers[i];if(n==null)return;for(var r in n){if(n[r]!=null&&n[r].func===t){delete n[r];n[r]=null;return}}};FauxObjectEventsList.prototype.fireEvent=function(e,t,i){var n=this.events[e];var r=this.initializeEvent(n,t,i);var a=this.handlers[n];var s=a==null?0:a.length;if(s===0)return false;var o=false;try{while(s-- >0){if(a[s]==null)continue;a[s].func(this.owner,r);if(r.cancel)o=true}}catch(e){}return o};FauxObjectEventsList.prototype.initializeEvent=function(e,t,i){this.eventArgs=new Object;this.eventArgs.event=t;this.eventArgs.id=e;this.eventArgs.srcElement=this.owner.element;this.eventArgs.srcArgs=i;if(i!=null)for(var n in i)this.eventArgs[n]=i[n];return this.eventArgs};return FauxObjectEventsList}();exports.FauxObjectEventsList=FauxObjectEventsList;var CallbackSettings=function(){function e(){this.enabled=true;this.activeBehavior=false;this.suppressOnReload=false;this.fromUIOnly=false;this.behavior=new CallbackCommand}return e}();exports.CallbackSettings=CallbackSettings;var CallbackCommand=function(){function e(){this.blockPage=false;this.repaintControls=0;this.commitChanges=false;this.postData=1;this.postDataControls=true;this.closePopup=false;this.hideText=false;this.optimizePostData=true;this.popupCheckSave=true;this.showProcessInfo=false}return e}();exports.CallbackCommand=CallbackCommand}));define("compatibility-layer/faux-objects/number-editor",["require","exports","tslib","./text-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectNumberEditor=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var s=e.call(this,t,i,n,a)||this;s.decimals=0;s[r.configSetters].set("decimals",null);s[r.configSetters].set("minValue",null);s[r.configSetters].set("maxValue",null);s[r.configSetters].set("valueType",null);s[r.configSetters].set("editFormat",null);s[r.configSetters].set("displayFormat",null);return s}t.prototype.initInlineEditor=function(e){this.setDecimals(e.getDecimals());this.setMaxValue(e.getMaxValue());this.setMinValue(e.getMinValue())};t.prototype.setValue=function(t){if(!isNaN(t))e.prototype.setValue.call(this,t)};t.prototype.getDecimals=function(e){return this[r.configRef].decimals};t.prototype.setDecimals=function(e){this[r.configRef].decimals=this.decimals=e};t.prototype.getMinValue=function(e){return this[r.configRef].minValue};t.prototype.setMinValue=function(e){this[r.configRef].minValue=e};t.prototype.getMaxValue=function(e){return this[r.configRef].maxValue};t.prototype.setMaxValue=function(e){this[r.configRef].maxValue=e};return t}(n.FauxObjectTextEditor);t.FauxObjectNumberEditor=a}));define("compatibility-layer/faux-objects/selector",["require","exports","tslib","./base-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectSelector=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var s=e.call(this,t,i,n,a)||this;s.autoCallBack=new r.CallbackSettings;s[r.propertySetters].set("hintText",(function(e){return false}));s[r.configSetters].set("value",(function(e){return s.setValue(e)}));s.initStateBag("PXSelector");return s}t.prototype[r.initializeFauxObject]=function(){e.prototype[r.initializeFauxObject].call(this)};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.updateState=function(e){this.stateBag.update("Value",e.id)};t.prototype.setValue=function(t){if(t instanceof Object){e.prototype.setValue.call(this,t)}else{if(this.screenValues[this[r.configRef].id]instanceof Object&&this.screenValues[this[r.configRef].id].id===t){return}var i={id:t,text:"no branch name"};e.prototype.setValue.call(this,i)}};t.prototype.setProperties=function(t){var n=t.hintText,r=t.value,a=i.__rest(t,["hintText","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.setProperties.call(this,a)}else{e.prototype.setProperties.call(this,t)}};t.prototype.copyPropertiesToConfig=function(t){var n=t.hintText,r=t.value,a=i.__rest(t,["hintText","value"]);if(n&&r){a.value={value:r,text:n};e.prototype.copyPropertiesToConfig.call(this,a)}else{e.prototype.copyPropertiesToConfig.call(this,t)}};return t}(n.FauxObjectBaseEditor);t.FauxObjectSelector=a}));define("compatibility-layer/faux-objects/text-editor",["require","exports","tslib","./faux-object","./base-editor","aurelia-pal"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectTextEditor=void 0;var s={defaultLocale:"",language:"",localizationInfo:null};var o=function(e){i.__extends(t,e);function t(t,i,r,a){var s=e.call(this,t,i,r,a)||this;s.linkCommand=new n.CallbackSettings;s[n.configSetters].set("selectOnFocus",null);s[n.configSetters].set("allowNull",null);s[n.configSetters].set("nullText",null);s[n.configSetters].set("required",null);s[n.configSetters].set("asciiCharSet",null);s[n.configSetters].set("validateExp",null);return s}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);this.defaultLocale=null;this.px_cm.registerRequiresOnLoad(this,this.ID);this.px_cm.registerAutoSize(this,this.getExternalProps());this.wrapLanguage();var i=new MutationObserver((function(e){t.onMutationCallback(e)}));i.observe(this.element,{childList:true,subtree:true});this.domEventsElem.subscribe("click",(function(e){var i=e.target;if(i&&i.tagName==="A")t.px_callback.exec(t,t.linkCommand)}));this.domEventsElem.subscribe("focus",(function(e){t.hasFocus=true}));this.domEventsElem.subscribe("blur",(function(e){t.hasFocus=false}))};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.onMutationCallback=function(e){var t=false;for(var i=0,n=e;i<n.length;i++){var r=n[i];if(r.type==="childList"){if(r.addedNodes.length>0||r.removedNodes.length>0){t=true;break}}}if(t)this.saveTextElementRef()};t.prototype.getDefaultCallbackProps=function(){return i.__assign(i.__assign({},e.prototype.getDefaultCallbackProps.call(this)),s)};t.prototype.getTextElement=function(){var e=this.element.querySelector("input");return e?e:this.element.querySelector("textarea")};t.prototype.onLoad=function(){if(this.syncStateWithCommand)this.px_cm.registerCommandExecutor(this)};t.prototype.setProperties=function(t){if(this.syncStateWithCommand)t.readOnly=this.getReadOnly();e.prototype.setProperties.call(this,t);this.wrapLanguage()};t.prototype.initInlineEditor=function(e){var t=this.getTextElement();if(t.tagName==="TEXTAREA"){this.px.registerAutoSizedText(t)}this.saveTextElementRef()};t.prototype.commandStateCallback=function(e){this.setReadOnly(!e.getEnabled())};t.prototype.setVisible=function(t){if(!!t!==this.getVisible()){var i=t?"":"none";if(this.boundImage)this.boundImage.style.display=i;if(this.labelID){var n=this.px.elemByID(this.labelID);if(n)n.style.display=i}var r=this.element.nextElementSibling;if(r&&r.getAttribute("data-lang")==="indi"){r.style.display=i}}e.prototype.setVisible.call(this,t)};t.prototype.setReadOnly=function(t){e.prototype.setReadOnly.call(this,t);this.wrapLanguage()};t.prototype.setValue=function(t){e.prototype.setValue.call(this,t);this.repaintText(t)};t.prototype.repaintText=function(e){return};t.prototype.getSelectedText=function(){var e=this.getTextElement();this.selStart=e.selectionStart||0;this.selEnd=e.selectionEnd||0;return e.value.substring(this.selStart,this.selEnd)};t.prototype.select=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}var i=this.getTextElement();if(e==null||t==null){if(e!=null){i.setSelectionRange(e,e)}else{i.select()}}else i.setSelectionRange(e,t)};t.prototype.getPositioning=function(e){return a.PLATFORM.global.getComputedStyle(e).position};t.prototype.removeLanguage=function(){if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.parentNode.removeChild(this.elemLanguage)}};t.prototype.wrapLanguage=function(e){if(e===void 0){e=null}var t=e||this.language||this.defaultLocale;if(!!t){if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.innerHTML=t;this.elemLanguage.style.display=this.getReadOnly()?"none":"";return}var i=this.elemText&&this.elemText.nextElementSibling;var n=this.elemText&&this.elemText.parentNode;if(n){this.elemLanguage=a.PLATFORM.global.document.createElement("a");this.elemLanguage.className="langindi2";this.elemLanguage.innerHTML=t;this.elemLanguage.href="javascript:void 0";this.elemLanguage.style.display=this.getReadOnly()?"none":"";var r=this.getPositioning(n);if(r==="static")n.style.position="relative";this.elemLanguage.setAttribute("style","position:absolute;top:2px; /* background-color: rgba(255,255,255,0.8);*/ ");this.elemLanguage.style[this.px.isRTL()?"left":"right"]="-30px";n.insertBefore(this.elemLanguage,i);this.px.addEventHandler(this.elemLanguage,"click",this.localeEditor.bind(this))}}};t.prototype.localeEditor=function(e){var t=this.px_all[this.bindingContainer];if(t&&t.__className==="PXGrid"){t.localizedInlineEditor=this;if(t.activeCell.language||t.activeRow.isNew()&&t.activeCell.column.defaultLocale&&!t.activeCell.getReadOnly()){this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,t.activeCell.column.getKey(),t,this.getValue(),t.activeCell.language)}}else if(t&&this.language){if(!this.getReadOnly()){this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,this.dataField,this,this.getValue(),this.language)}}else if(this.localizationInfo){var i=this.localizationInfo.split(";");this.px_cm.showLocalizePopup(i[0],i[1],i[2],this,this.getValue(),this.language)}e.preventDefault();e.stopPropagation();return false};t.prototype.localeUpdated=function(e){if(!e)return;var t=e.split(";");if(t.length>1){this.language=t[0];this.setValue(t[1])}};t.prototype.adjustInline=function(e){this.wrapLanguage(e);if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.style.display="";var t=this.px.isRTL()?["multiLangRTL"]:["multiLang"];if(this.elemText)this.px.appendCss(this.elemText,t,true);var i=this.getPositioning(this.elemLanguage.parentNode);if((i==="absolute"||i==="relative")&&this.elemText!=null){var n=window.getComputedStyle(this.elemText);var r=6;var a=27;var s=3;var o=this.px.isRTL()?(this.elemText.offsetLeft||0)+r:(this.elemText.offsetLeft||0)+parseInt(n.width,10)-a;this.elemLanguage.style.right="";this.elemLanguage.style.left=o+"px";this.elemLanguage.style.top=this.elemText.offsetTop+s+"px";if(this.elemText.style.zIndex)this.elemLanguage.style.zIndex=String(parseInt(this.elemText.style.zIndex)+1)}}};t.prototype.hideInline=function(){if(this.elemLanguage){this.elemLanguage.style.display="none";if(this.elemText)this.px.excludeCss(this.elemText,["multiLang","multiLangRTL"],true)}};return t}(r.FauxObjectBaseEditor);t.FauxObjectTextEditor=o}));define("compatibility-layer/faux-screen",["require","exports","tslib","aurelia-framework","./faux-objects/faux-object","./faux-object-factory"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxScreenCustomAttribute=void 0;var s=function(){function e(e,t,i){this.element=e;this.bindingEngine=t;this.tq=i}e.prototype.bind=function(e){var t=e.elements[this.config.id];if(t!==undefined){Object.assign(t,this.config);t.value=this.config.value;this.config=t}else e.elements[this.config.id]=this.config;var i=this.config.value;e.values[this.config.id]=i;this.values=e.values;this.elements=e.elements};e.prototype.attached=function(){var e=a.getFauxObject(this.element,this.config,this.values,this.bindingEngine);var t=this.element;t.object=e;e[r.initializeFauxObject]();this.tq.queueMicroTask((function(){return e.afterInitialize()}))};e.prototype.unbind=function(){this.values[this.config.id]=undefined;this.elements[this.config.id]=undefined};e.prototype.detached=function(){var e=this.element;e.object[r.disposeFauxObject]()};i.__decorate([n.bindable({defaultBindingMode:n.bindingMode.oneTime,primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"config",void 0);e=i.__decorate([n.autoinject,n.customAttribute("faux-screen"),i.__metadata("design:paramtypes",[Element,n.BindingEngine,n.TaskQueue])],e);return e}();t.FauxScreenCustomAttribute=s}));define("elements/qp-loader-indicator",["require","exports","tslib","aurelia-framework"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLoaderIndicatorCustomElement=void 0;var r=function(){function e(){}Object.defineProperty(e.prototype,"loadingClass",{get:function(){return this.loadingState===true?"loading":this.loadingState?this.loadingState:"in-sync"},enumerable:false,configurable:true});i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"loadingState",void 0);i.__decorate([n.computedFrom("loadingState"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"loadingClass",null);return e}();t.QpLoaderIndicatorCustomElement=r}));define("text!elements/qp-loader-indicator.css",[],(function(){return".loader-indicator-img {\n    color:#999999;\n    color:var(#999999, --primary-color);\n}\n\n.loader-indicator-img .progress {\n  stroke-width: 10;\n  stroke: currentColor;\n  stroke-linecap: square;  \n  -webkit-animation: dash 2.5s infinite;  \n          animation: dash 2.5s infinite;\n}\n\n\n@-webkit-keyframes dash {\n  0% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n\n  25% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: -250;\n  }\n\n  75% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  100% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n}\n\n\n@keyframes dash {\n  0% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n\n  25% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: -250;\n  }\n\n  75% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  100% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n}\n"}));define("text!elements/qp-loader-indicator.html",[],(function(){return'<template class="qp-loader-indicator" class.bind="loadingClass"><require from="./qp-loader-indicator.css"></require><template if.bind="loadingState==\'in-sync\'"><template replaceable part="in-sync"></template></template><template if.bind="loadingState==\'will-load\'"><template replaceable part="will-load"></template></template><template if.bind="loadingState==\'loading\'"><template replaceable part="loading"><svg class="loader-indicator-img" height="3px" width="100%" viewBox="80 0 235 10" preserveAspectRatio="none"><path class="progress" stroke-width="4" d="M70,10 l250,0"></path></svg></template></template></template>'}));define("environment",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default={debug:false,testing:false}}));define("plugins/enhance-n-watch/index",["require","exports","tslib","./mutation-enhancer"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function r(e){e.aurelia.enhanceAndWatch=function(t,r){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(i){e.aurelia.__me=new n.MutationEnhancer(e.aurelia,t);e.aurelia.__me.watch(r);return[2,this.enhance(t,r)]}))}))};e.aurelia.stopWatch=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){if(e.aurelia.__me instanceof n.MutationEnhancer){e.aurelia.__me.unwatch()}return[2]}))}))}}t.configure=r}));define("plugins/enhance-n-watch/mutation-enhancer",["require","exports","aurelia-framework","aurelia-logging"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MutationEnhancer=void 0;var r=n.getLogger("enhance-watch");var a=function(){function e(e,t){this.au=e;this.bindingContext=t;this.enhanceSelector="";this.container=e.container;this.engine=e.container.get(i.TemplatingEngine)}e.prototype.watch=function(e){var t=this;this.enhanceSelector=Object.keys(this.au.resources.elements).filter((function(e){return["compose","router-view"].indexOf(e)===-1})).map((function(e){return e.toLowerCase()})).join(",");this.observer=new MutationObserver((function(e){t.onMutationcallback(e)}));this.observer.observe(i.PLATFORM.global.document,{childList:true,subtree:true})};e.prototype.unwatch=function(){if(this.observer){this.observer.disconnect()}};e.prototype.onMutationcallback=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if(n.type==="childList"){for(var a=0;a<n.addedNodes.length;a++){var s=n.addedNodes[a];if(s.nodeType!==Node.ELEMENT_NODE){continue}var o=void 0;if(this.au.resources.getElement(s.nodeName.toLowerCase())){o=[s]}else{o=s.querySelectorAll(this.enhanceSelector)}for(var l=0;l<o.length;l++){var u=o[l];if(u.getAttribute("au-target-id")){r.warn("node already enchanced",u);u.au.controller.attached()}else{this.engine.enhance({element:u,container:this.container,resources:this.au.resources,bindingContext:this.bindingContext})}}}for(var a=0;a<n.removedNodes.length;a++){var s=n.removedNodes[a];if(s.nodeType!==Node.ELEMENT_NODE){continue}var o=void 0;if(this.au.resources.getElement(s.nodeName.toLowerCase())){o=[s]}else{o=s.querySelectorAll(this.enhanceSelector)}for(var l=0;l<o.length;l++){var u=o[l];if(!u.au){r.warn("no au-target-id on removed node",u)}if(u.getAttribute("au-target-id")){u.au.controller.detached()}}}}}};return e}();t.MutationEnhancer=a}));define("plugins/glue/glue-to-custom-attribute",["require","exports","tslib","aurelia-templating","aurelia-logging","aurelia-pal","aurelia-event-aggregator","./index"],(function(e,t,i,n,r,a,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GlueToCustomAttribute=void 0;var l=r.getLogger("glue-to-attribute");var u=function(){function e(e,t){this.ea=t;this.element=e}e.prototype.bind=function(){if(!(this.target instanceof HTMLElement)){l.warn("target element is invalid",this.target)}};e.prototype.attached=function(){var e=this;if(this.target){this.coordinateSystemSubscription=this.ea.subscribe(o.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,(function(t){e.reconSquad();e.glueNow()}));this.reconSquad();this.initGlue();this.glueNow()}};e.prototype.initGlue=function(){var e=this.element.style;var t=e.maxWidth||e.width;var i=e.maxHeight||e.height;var n=this.element.getBoundingClientRect(),r=n.width,a=n.height;this.maxWidth=t&&parseInt(t)||r;this.maxHeight=i&&parseInt(i)||a;var s=this.glueRect.bottom+this.maxHeight<this.docRect.bottom;this.direction=s?"down":"up"};e.prototype.reconSquad=function(){this.docRect=a.PLATFORM.global.document.documentElement.getBoundingClientRect();this.glueRect=this.target.getBoundingClientRect()};e.prototype.detached=function(){if(this.coordinateSystemSubscription){this.coordinateSystemSubscription.dispose();this.coordinateSystemSubscription=undefined}};e.prototype.glueNow=function(){var e=this.element;var t=e.getBoundingClientRect().width;var i;var n;var r;var a=this.glueRect.width||this.glueRect.right-this.glueRect.left;var s=this.glueRect.left+Math.min(this.maxWidth,t)>this.docRect.width;if(s){var o=Math.max(this.glueRect.right,this.docRect.right);n=o}else{n=this.glueRect.left}var l=e.style;if(this.direction==="up"){i=this.glueRect.top;r=s?"translate(-100%,-100%)":"translateY(-100%)"}else{i=this.glueRect.bottom;r=s?"translateX(-100%)":""}if(!l.minWidth){l.minWidth=a+"px"}l.position="fixed";l.left=n+"px";l.top=i+"px";l.transform=r};i.__decorate([n.bindable({primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"target",void 0);e=i.__decorate([n.customAttribute("glue-to"),i.__metadata("design:paramtypes",[Element,s.EventAggregator])],e);return e}();t.GlueToCustomAttribute=u}));define("plugins/glue/index",["require","exports","aurelia-framework","./glue-to-custom-attribute","aurelia-event-aggregator"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME=void 0;t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME="absolute-positions-are-screwed";function a(e){e.globalResources([n.GlueToCustomAttribute]);var a=e.container.get(r.EventAggregator);e.postTask((function(){i.PLATFORM.global.document.addEventListener("scroll",(function(e){s(e)}),{capture:true,passive:true});i.PLATFORM.global.addEventListener("resize",(function(e){s(e)}),{passive:true})}));function s(e){a.publish(t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,e)}}t.configure=a}));define("plugins/happeded-on-body/index",["require","exports","aurelia-framework","aurelia-event-aggregator"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=t.MOUSE_DOWN_REACHED_BODY=void 0;t.MOUSE_DOWN_REACHED_BODY="mouse-down-reached-body";function r(e){var r=e.container.get(n.EventAggregator);e.postTask((function(){i.PLATFORM.global.document.addEventListener("mousedown",(function(e){a(e)}))}));function a(e){r.publish(t.MOUSE_DOWN_REACHED_BODY,e)}}t.configure=r}));define("plugins/selector-service/index",["require","exports","./selector-service"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function n(e){e.singleton(i.SelectorService)}t.configure=n}));define("plugins/selector-service/selector-service",["require","exports","tslib","aurelia-logging"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectorService=void 0;var r="selector-service-panel-container";var a=n.getLogger("selector service");var s=function(){function e(){this.selectors=new Map}e.prototype.getValueFromSelector=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.ensureSelectorInTheDom(e)];case 1:t=i.sent();a=new Promise((function(e,i){n=e;r=i;t.resolvers={resolve:n,reject:r}}));this.querySelector(t,e);return[2,a]}}))}))};e.prototype.querySelector=function(e,t){var i=__px(document).getDropDownPos(t.inputElement,e.panelElement,2);document.dropDownElem=e.panelElement;e.panelElement.setAttribute("controlID",e.panelObject.ID);e.panelElement.style.left=i.left+"px";e.panelElement.style.top=i.top+"px";e.panelElement.style.position="absolute";e.panelElement.style.display="";e.activeQuery=true;var n=e.gridObject;n.clearFastFilter();n.search(t.value,t.valueColumn);var r=e.gridObject;setTimeout((function(){if(r.filterBar&&!__px(document).IsTablet)r.filterBar.focus();else r.focus()}),1)};e.prototype.ensureSelectorInTheDom=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;var s=this;return i.__generator(this,(function(i){r=new Promise((function(e,i){t=e;n=i}));if(!this.selectors.has(e.controlId)){a={name:"DropDown",blockPage:true,commitChanges:false,repaintControls:0,postData:1,postDataControls:true,container:"",repaintControlsIDs:"",selectControlsIDs:"",commitChangesIDs:"",optimizePostData:false};__px_callback(window).execI({ID:e.controlId,sourceName:e.controlName},a,"",(function(i){s.selectors.set(e.controlId,s.callbackHandler(i,e));t(s.selectors.get(e.controlId))}))}else{t(this.selectors.get(e.controlId))}return[2,r]}))}))};e.prototype.callbackHandler=function(e,t){__px_cm(window).processHtmlData(e,t.controlId+"_selector_dialog");var i=document.querySelector("#"+t.controlId+"_selector_dialog");var n=document.querySelector("#"+t.controlId+"_pnl_gr");var r=n.object;var a=r.events;var s=document.querySelector("#"+t.controlId+"_pnl");var o=s.object;var l=o.events;document.querySelector("form").appendChild(s);var u={selectorElement:i,grid:n,gridObject:r,panelElement:s,panelObject:o,resolvers:undefined,activeQuery:false};var c=function(){var e=r.activeRow.getCell(t.valueColumn).getValue();var i=r.activeRow.getCell(t.textColumn).getValue();if(u.resolvers&&u.activeQuery){u.resolvers.resolve({id:e,text:i})}u.panelElement.style.display="none";document.dropDownElem=undefined};var h=function(e){u.resolvers.reject(new Error(e));u.panelElement.style.display="none";document.dropDownElem=undefined};u.panelObject.hideDropDown=function(){h("outer click")};l.addEventHandler("beforeHide",(function(){h("Close")}));a.addEventHandler("keyDown",(function(e,t){switch(t.key){case 13:t.cancel=true;c();break;case 27:t.cancel=true;h("Close");break}}));r.extToolbar.events.addEventHandler("buttonClick",(function(e,t){switch(t.button.key){case"Select":c();break}}));a.addEventHandler("cellClick",(function(e,t){if(t.event.clickCount===2){c()}}));return u};return e}();t.SelectorService=s}));define("plugins/tooltip-service/index",["require","exports","./tooltip-service"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function n(e){e.singleton(i.TooltipService)}t.configure=n}));define("plugins/tooltip-service/tooltip-service",["require","exports","aurelia-framework"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TooltipService=void 0;var n=500;var r=32;var a=function(){function e(){var e=this;this.subscribersOptions=new Map;var t=function(t){return e.hoverStart(t)};var n=function(t){return e.keyPressed(t)};var r=function(){return e.scrollHappened()};var a=function(){return e.resizeHappened()};i.DOM.addEventListener("mousemove",t,{capture:true});i.DOM.addEventListener("keydown",n,{capture:true});i.DOM.addEventListener("scroll",r,{capture:true});i.PLATFORM.global.addEventListener("resize",a,{passive:true})}e.prototype.scrollHappened=function(){this.notifyUserActivityHappened()};e.prototype.resizeHappened=function(){this.notifyUserActivityHappened()};e.prototype.keyPressed=function(e){this.cancelTooltip()};e.prototype.hoverStart=function(e){var t=this;var i;var n=e.target;if(this.currentTarget===n){return}else{if(this.activeSubscriber){var a=(i=this.activeSubscriber.options)===null||i===void 0?void 0:i.elementToIgnore;if(this.activeSubscriber.activator.contains(n)||(a===null||a===void 0?void 0:a.contains(n))){return}else{this.cancelTooltip()}}clearTimeout(this.actionTriggerTimer);this.actionTriggerTimer=setTimeout((function(){return t.countDownForTarget(n)}),r)}};e.prototype.countDownForTarget=function(e){var t=this;this.currentTarget=e;clearTimeout(this.actionTriggerTimer);this.activeSubscriber=this.findSubscriber(e);if(this.activeSubscriber&&!this.activeSubscriber.options.manualShowOnly){var i=this.activeSubscriber.options.triggerDelay||n;this.actionTriggerTimer=setTimeout((function(){var e,i;return(i=(e=t.activeSubscriber)===null||e===void 0?void 0:e.options)===null||i===void 0?void 0:i.onShow()}),i)}};e.prototype.findSubscriber=function(e){var t=e;while(t){if(t.getAttribute("error")){t=undefined}else{var i=this.subscribersOptions.get(t);if(i){return{activator:t,options:i}}else{t=t.parentElement||undefined}}}return undefined};e.prototype.cancelTooltip=function(){var e,t;(t=(e=this.activeSubscriber)===null||e===void 0?void 0:e.options)===null||t===void 0?void 0:t.onHide();this.activeSubscriber=undefined};e.prototype.subscribe=function(e,t){var i=this;this.subscribersOptions.set(e,t);return{dispose:function(){i.subscribersOptions.delete(e)}}};e.prototype.notifyUserActivityHappened=function(e){clearTimeout(this.actionTriggerTimer);this.cancelTooltip()};e.prototype.selfActivate=function(e){var t,i,n,r,a;console.log("self activated",e);clearTimeout(this.actionTriggerTimer);var s=this.subscribersOptions.get(e);if(((t=this.activeSubscriber)===null||t===void 0?void 0:t.options)!==s){(n=(i=this.activeSubscriber)===null||i===void 0?void 0:i.options)===null||n===void 0?void 0:n.onHide()}this.activeSubscriber={activator:e,options:s};(a=(r=this.activeSubscriber)===null||r===void 0?void 0:r.options)===null||a===void 0?void 0:a.onShow();this.currentTarget=undefined};e.prototype.selfHide=function(e){var t;var i=this.subscribersOptions.get(e);i===null||i===void 0?void 0:i.onHide();if(((t=this.activeSubscriber)===null||t===void 0?void 0:t.options)===i){this.activeSubscriber=undefined}};return e}();t.TooltipService=a}));define("plugins/happeded-on-body",["plugins/happeded-on-body/index"],(function(e){return e}));