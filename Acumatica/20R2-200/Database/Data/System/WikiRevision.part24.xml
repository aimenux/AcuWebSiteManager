<?xml version="1.0" encoding="utf-8"?>
<data>
	<table name="WikiRevision">
		<col name="CompanyID" type="Int" default="Zero" />
		<col name="PageID" type="UniqueIdentifier" />
		<col name="Language" type="VarChar(50)" />
		<col name="PageRevisionID" type="Int" />
		<col name="Content" type="NVarChar(MAX)" />
		<col name="ContentHtml" type="NVarChar(MAX)" nullable="true" />
		<col name="PlainText" type="NVarChar(MAX)" />
		<col name="ApprovalByID" type="UniqueIdentifier" nullable="true" />
		<col name="ApprovalDateTime" type="DateTime" nullable="true" />
		<col name="CreatedByID" type="UniqueIdentifier" />
		<col name="CreatedDateTime" type="DateTime" />
		<col name="CompanyMask" type="VarBinary(32)" default="CompanyMaskReadOnly" />
		<col name="UID" type="UniqueIdentifier" />
		<col name="RecordSourceID" type="SmallInt" nullable="true" />
	</table>
	<rows>
		<row PageID="258373da-50b0-4c84-94d6-78ab7f28baf1" Language="en-US" PageRevisionID="1" Content="&#xA;Stay tuned for important information about fixes, enhancements, and key features that are available in Acumatica ERP. {br}{TOC}" PlainText="Release Notes Overview Stay tuned for important information about fixes, enhancements, and key features that are     available in Acumatica ERP.  " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="03a8e3d7-7faa-19ba-3fe5-ecfd4b1cb88c" RecordSourceID="22377" />
		<row PageID="45904a89-2220-4858-bdb6-448d99a5983a" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6c738c38-16b7-77ba-ab2d-4b4b8750a694" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERPc 2020 R2, the commerce-related functionality, which supports out-of-the-box integration with the BigCommerce and Shopify automated shopping cart solutions, is no longer provided as a customization project. Instead, this functionality has now become part of the core product of Acumatica ERPc and is subject to the product’s licensing policies.
==Enabling of the E-Commerce Functionality==
The commerce-related functionality is available when the ''Commerce Integration'' feature and either of the features supporting the integration with a particular e-commerce platform (which are shown in the following screenshot) is enabled or both of the features are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.[anchor|#_f503fa56-cb47-4b63-8787-5d4ad12f1f40][anchor|#_233502dc-acca-42c2-9a64-fc4acb798650][image:ReleaseNotes/Images/RN_2020_R2_Commerce_New_Features.png|popup|The Commerce Integration feature and the platform-specific features|200px]
When the ''Commerce Integration'' feature is enabled, the following forms become available:[anchor|#_da20e8b4-47c7-426c-bf67-ffe78c9e0304]
*[HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000])
*[HelpRoot_Commerce\BC_50_10_00|Prepare Data] ([~/?ScreenId=BC501000|BC501000])
*[HelpRoot_Commerce\BC_50_15_00|Process Data] ([~/?ScreenId=BC501500|BC501500])
*[HelpRoot_Commerce\BC_30_10_00|Sync History] ([~/?ScreenId=BC301000|BC301000])

For both supported platforms, BigCommerce and Shopify, these forms are used for configuring entities for synchronization, synchronizing data, scheduling synchronization, and viewing the synchronization status of particular entities. For more information, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=311a7616-3f24-427e-9855-3109ea23ab19|Data Synchronization: General Information], [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=4d6fee33-a689-42b8-9918-a4755b75d96b|Preparing Entities for Synchronization: General Information], and [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=16fb2d61-88cc-4c3f-8a20-84cdb60c14a1|Scheduling Synchronization: General Information].{br}

When the ''BigCommerce Connector'' feature is enabled, functionality specific to the BigCommerce shopping cart software is activated, and an additional form, [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]), becomes available. This form is used for establishing a connection between the Acumatica ERPc instance and a BigCommerce store, as well as for configuring default store settings for data exchange. For more information about the initial configuration of the integration with BigCommerce stores, see [HelpRoot_Commerce\config_BigCommerce_Initial_Configuration_GeneralInfo|Initial Configuration: General Information].{br}

When the ''Shopify Connector'' feature is enabled, the system activates the functionality supporting integration with the Shopify platform. For more information about the integration with Shopify, see [HelpRoot_ReleaseNotes\RN_2020_R2_Commerce_Integration_with_Shopify|Commerce: Integration with Shopify].
==Upgrade Notes==
Before upgrading Acumatica ERP to Version 2020 R2, the implementation consultant should note the following:[anchor|#_f2ddce82-65e5-4b9a-afc1-748238891803]
*The ''BigCommerce'' customization project must be unpublished before the upgrade.
*After the upgrade to Version 2020 R2 has been completed and the ''Commerce Integration'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, all of the following will be preserved:
**The store settings specified on the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form
**Any custom filters and field mappings defined for particular entities on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form
**All data related to the synchronizations performed before the upgrade
*During the upgrade, the existing Commerce Edition customization project data—including the '''Commerce''' workspace and the generic inquiries and filters used in the commerce-related dashboard—will be recreated. If any of these generic inquiries and filters have been modified in Versions 2019 R2 or 2020 R1, they should be exported before the upgrade to Version 2020 R2.
*Any automation schedules that have been defined for the processes of fetching data and synchronizing data on the ''Fetch Data (BC501000)'' and ''Sync Data (BC501500)'' forms might not be preserved. We recommend that you check these schedules after the upgrade and recreate them, if necessary. Automation schedules that have been defined on the ''Real-Time Sync (BC502000)'' form will not be preserved; in Version 2020 R2, automation schedules are no longer used to restart real-time synchronization.
*:((({S:Warn}The ''Fetch Data'' form has been renamed to [HelpRoot_Commerce\BC_50_10_00|Prepare Data], the ''Sync Data'' form has been renamed to [HelpRoot_Commerce\BC_50_15_00|Process Data], and the ''Real-Time Sync'' form has been removed. For more information about UI changes, see [HelpRoot_ReleaseNotes\RN_2020_R2_Commerce_Usability_Improvements|Commerce: UI Changes and Usability Enhancements].
)))
]]></column>
			<column name="PlainText"><![CDATA[Commerce: Migration to the Core Product Starting in  Acumatica ERPc  2020 R2, the commerce-related functionality, which supports out-of-the-box integration with the         BigCommerce and Shopify automated shopping cart solutions, is no longer provided as a         customization project. Instead, this functionality has now become part of the core product         of  Acumatica ERPc  and is subject to the product’s licensing policies. Enabling of the E-Commerce Functionality The commerce-related functionality is available when the  Commerce Integration          feature and either of the features supporting the integration with a particular e-commerce         platform (which are shown in the following screenshot) is enabled or both of the features         are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. The Commerce Integration feature and the platform-specific features When the  Commerce Integration  feature is enabled, the following forms become         available:  ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000)  ([~/?ScreenId=BC501000|BC501000]) Prepare Data (BC501000)  ([~/?ScreenId=BC501500|BC501500]) Process Data (BC501500)  ([~/?ScreenId=BC301000|BC301000]) Sync History (BC301000) For both supported platforms, BigCommerce and Shopify, these forms are used for configuring         entities for synchronization, synchronizing data, scheduling synchronization, and viewing         the synchronization status of particular entities.          For         more information, see  Data Synchronization: General Information Data Synchronization: General Information,  Preparing Entities for Synchronization: General           Information Preparing Entities for Synchronization: General Information, and  Scheduling Synchronization: General         Information Scheduling Synchronization: General Information. When the  BigCommerce Connector  feature is enabled, functionality specific to the         BigCommerce shopping cart software is activated, and an additional form,   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC102000), becomes available. This form is used         for establishing a connection between the  Acumatica ERPc  instance and a BigCommerce store, as well as for configuring default store         settings for data exchange. For more information about the initial configuration of the         integration with BigCommerce stores, see  Initial Configuration: General Information. When the  Shopify Connector  feature is enabled, the system activates the         functionality supporting integration with the Shopify platform. For more information about         the integration with Shopify, see  Commerce: Integration with Shopify. Upgrade Notes Before upgrading  Acumatica ERP to Version  2020 R2, the implementation consultant should note the following: The  BigCommerce  customization project must be unpublished before the           upgrade. After the upgrade to Version  2020 R2 has been completed and the  Commerce Integration  feature has been enabled on the               ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, all of the following will           be preserved: The store settings specified on the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores               (BC201000) form Any custom filters and field mappings defined for particular entities on the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form All data related to the synchronizations performed before the upgrade During the upgrade, the existing Commerce Edition customization project data—including           the  Commerce  workspace and the generic inquiries and filters used           in the commerce-related dashboard—will be recreated. If any of these generic inquiries and           filters have been modified in Versions 2019 R2 or 2020 R1, they should be exported before           the upgrade to Version  2020 R2. Any automation schedules that have been defined for the processes of fetching data and           synchronizing data on the  Fetch Data (BC501000)  and  Sync Data (BC501500)            forms might not be preserved. We recommend that you check these schedules after the           upgrade and recreate them, if necessary. Automation schedules that have been defined on           the  Real-Time Sync (BC502000)  form will not be preserved; in Version  2020 R2, automation schedules            are           no longer  used to           restart real-time synchronization. The  Fetch Data  form has been renamed to                 ([~/?ScreenId=BC501000|BC501000]) Prepare Data, the  Sync Data  form has been             renamed to   ([~/?ScreenId=BC501500|BC501500]) Process Data, and the  Real-Time Sync              form has been removed. For more information about UI changes, see  Commerce: UI Changes and Usability Enhancements. ]]></column>
		</row>
		<row PageID="742afdbf-f5ef-4b79-b303-366977b593be" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="52bb1704-83dd-dd16-2dec-7f048bd9a774" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, multiple enhancements have been made to e-commerce-related forms to make these forms easier to use. The sections below list the changes that have been made to each of the forms.
==Removed Forms==
In Acumatica ERP 2020 R2, the following forms have been removed:[anchor|#_d09409c3-7c69-4931-8a80-38b2df645f73]
*''Connector Preferences (BC101000)'': The public webhook URL that was previously specified on this form is now specified on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form. See the [[#_2ffc7e89-c196-46be-ae86-61993970ebd2|Changes to the Entities Form] section of this topic for more details.
*''Real-Time Sync (BC502000)'': The functionality of starting and stopping real-time synchronization for entities is now available on the [HelpRoot_Commerce\BC_20_20_00|Entities] form. For more details, see [[#_2ffc7e89-c196-46be-ae86-61993970ebd2|Changes to the Entities Form].
[anchor|#_172134ae-b637-4be2-a6c7-5280572999fa]
==Changes to the BigCommerce Stores Form==
On the '''Connection Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form, the following sections have been added:[anchor|#_027327a1-100e-490b-9c6f-5c16bb146cf7]
*'''System Settings''' (see Item 1 in the following screenshot): In the '''Locale''' box, the administrative user specifies the locale that will be used during data synchronization with the store. If data is maintained in Acumatica ERP in multiple languages, the data that corresponds to the specified locale will be synchronized with the store.
*'''Store Properties'''(Item 2): In the read-only '''Default Currency''' box, the system displays the default currency of the BigCommerce store. In the read-only '''Store Time Zone''' box, the system displays the store&rsquo;s time zone (the time zone appears as soon as the connection to the store has been established).
[anchor|#_500d23ef-5ee1-404f-ac6b-8ce9c943886d][anchor|#_472c6947-0889-4280-a2dc-3b3b042d83d4][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Connection.png|popup|The Connection Settings tab of the BigCommerce Stores form|350px]
On the '''Entity Settings''' tab, in the table, the column with the '''Sync Immediately''' check box has been replaced with the '''Real-Time Mode''' column. To indicate if the system should immediately process data prepared by the real-time synchronization mechanism, the user now selects one of the following options (see Item 1 in the screenshot below):[anchor|#_bb6a6243-c012-43ee-81b7-f7def2037344]
*''Prepare'' (default): Synchronization records should be prepared but not processed. If real-time synchronization is turned off for the entity, the setting is ignored. (This option corresponds to the cleared '''Sync Immediately''' check box.)
*''Prepare & Process'': Synchronization records should be processed as soon as they are prepared. If real-time synchronization is turned off for the entity, the setting is ignored. (This option corresponds to the selected '''Sync Immediately''' check box.)

The '''Real-Time Mode''' column is unavailable for editing if real-time synchronization has been started. You should stop real-time synchronization on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form before changing this setting.{br}

The following columns (Items 2 and 3) have been renamed:[anchor|#_0d7ac0fb-4b59-4f50-b314-221c54882aa7]
*'''Direction''' to '''Sync Direction'''
* '''Import Real-Time Status''' to '''Real-Time Import'''
* '''Export Real-Time Status''' to '''Real-Time Export'''
* '''Number of Attempts on Error''' to '''Max. Number of Failed Attempts'''
[anchor|#_28d07fdf-40da-4ea6-9ed8-fbe58525f9a3][anchor|#_6d9b0deb-a7d9-465e-83e9-e447b6c69249][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Entity.png|popup|The Entity Settings tab of the BigCommerce Stores form|350px]
On the '''Order Settings''' tab, in the '''Order''' section, the '''Order Time Zone''' box (see the following screenshot) has been added. This is the time zone the system uses for sales orders imported from the BigCommerce store when they are created in Acumatica ERP. The order time zone is needed to determine the correct date and time of the order if Acumatica ERP and the BigCommerce store are located in different time zones.[anchor|#_e5e83da7-3ac7-4d61-bf3a-8097a8fee554][anchor|#_c38e7795-9ca3-4326-a467-63eb78d9b56b][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Order_Time_Zone.png|popup|The order time zone|400px]
In the '''Taxes''' section, which is shown in the screenshot below, the following changes have been made:[anchor|#_7e9e826e-b5b5-4d6b-ae94-73f2c06db55c]
*The new '''Primary Tax Zone''' box has been added. In this box, the administrative user can select the tax zone that will be assigned to each sales order imported to Acumatica ERP regardless of whether any other tax zone has been identified during the import of the order. 
*The '''Default Tax Zone ID''' box has been renamed to '''Default Tax Zone'''.

Both the '''Primary Tax Zone''' and '''Default Tax Zone''' boxes are available for editing if ''Synchronize Manually'' or ''Synchronize Automatically'' is selected in the '''Synchronize Taxes''' box. If the primary tax zone is selected in the '''Primary Tax Zone''' box, the '''Default Tax Zone''' box becomes unavailable.[anchor|#_02de707f-cc50-4fb2-a904-ea61a5c22595][anchor|#_97587586-65e8-42ab-9cbc-b2da97f9fc3d][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Order_Taxes.png|popup|The primary and default tax zones|400px]
A new section, '''Substitution Lists''', has been added (see the following screenshot). In this section, the administrative user can select the substitution lists that will be used for mapping tax IDs and tax categories defined in Acumatica ERP to taxes and tax classes defined in the BigCommerce store. The mapping is performed on the [HelpRoot_FormReference\SM_20_60_26|Substitution Lists] ([~/?ScreenId=SM206026|SM206026]) form and is used in manual tax synchronization.[anchor|#_b0b45007-f05d-4b2a-9240-50fb1cc72bd1][anchor|#_973cf4e0-e635-4a2b-8191-fb64e94f9618][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Order_Substitution_Lists.png|popup|Substitution lists for tax IDs and tax categories|400px]
The '''Shipping Zone Mapping''' section has been renamed to '''Shipping Option Mapping'''(see Item 1 in the following screenshot). Also, the '''Add''' and '''Delete''' buttons are now displayed on the table toolbar (Item 2). In previous versions of Acumatica ERP, the table was updated only via the API. When a new shipping option was added or deleted in the BigCommerce store, the combination of the store shipping zone and store shipping method was added to the table or deleted from the table accordingly. Now users can manually add shipping options to this table and remove them from the table.[anchor|#_b535ef9a-b816-4a6b-b615-e047787d8169][anchor|#_62cbbf29-d79a-4970-a494-8578f41ca61b][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Order_Shipping_Option_Mapping.png|popup|The Shipping Option Mapping table|350px]
On the '''Payment Settings''' tab, the '''Payment Methods''' section has been renamed to '''Payment Method Mapping'''(see Item 1 in the screenshot below). The following changes have been made to the '''Base Currency Payment Methods''' table:[anchor|#_72bf9c59-cb5f-4db1-9eb8-52687d77d4c3]
*The '''Add''' and '''Delete''' buttons (Item 2) have been added to the table toolbar. Users can now manually add payment options to the table and remove them from the table.
*The '''Process Payments''' column has been renamed to '''Active'''(Item 3). If a payment method has the '''Active''' check box selected, payments made with this payment method in the BigCommerce store are imported to Acumatica ERP. Users select this check box only for payment methods that need to be processed through Acumatica ERP.
*The value displayed in the '''Store Payment Method''' column now shows the combination of the payment gateway and the payment method, which are both copied from the order transaction. When an order is being imported from BigCommerce to Acumatica ERP, the system checks whether the table contains the combination of the payment gateway and the payment method from the order transaction; the system then performs one of the following:
**If the table contains the needed combination in the '''Store Payment Method''' column and it is activated (that is, it has the '''Active''' check box selected) and mapped to a payment method in Acumatica ERP, the system uses the payment method and other mapped settings for creating the payment in Acumatica ERP.
**If the table contains the needed combination in the '''Store Payment Method''' column, but it is not mapped to a payment method in Acumatica ERP or it is not activated (or it is neither mapped to a payment method nor activated), the system displays an error message saying that the store payment method is not mapped or not activated.
**If the table does not contain the needed combination in the '''Store Payment Method''' column, the system adds a row with the needed combination and displays an error message saying that the store payment method is not mapped to a payment method in Acumatica ERP.
*The '''Proc. Center ID''' column (Item 4) has been added. For payment methods based on credit cards, if a default processing center has been specified for the payment method—that is, if the '''Default''' check box is selected for the processing center on the '''Processing Centers''' tab of the [HelpRoot_FormReference\CA_20_40_00|Payment Methods] ([~/?ScreenId=CA204000|CA204000]) form—the system automatically inserts the default processing center in this column. If no processing center has been specified as the default for a payment method based on credit cards, the user needs to manually select a processing center in this column. For more information, see [HelpRoot_ReleaseNotes\RN_2020_R2_Commerce_Enh_to_CC_Payments_Import|Commerce: Enhancements to the Import of Credit Card Payments].
*The hidden '''Store Order Payment Method''' column has been added. This column shows the payment method included in the details of the sales order imported from BigCommerce to Acumatica ERP. In rare occasions, the combination of the payment gateway and the payment method in the order transaction can be the same for different payment methods specified in the store order. The system uses the setting in the '''Store Order Payment Method''' column to identify the right payment method in Acumatica ERP when there are multiple mappings in the table for the same store payment method (which is the combination of the payment gateway and the payment method).
*The hidden '''Create Payments from Order''' column has been added. A user can select this check box to indicate that if an empty payment is being imported from the BigCommerce store, the system should create a payment in Acumatica ERP based on the imported sales order. This check box is automatically selected for the following store payment methods:
**''AMAZON''
** ''PAYPAL''
** ''TEST PAYMENT GATEWAY''
[anchor|#_0e113250-52ef-42f1-ae7d-963c770e4a61][anchor|#_36bc80ba-7eb1-4ec3-a582-a98aeb4861af][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_BCStores_Payment.png|popup|The Payment Settings tab of the BigCommerce Stores form|350px][anchor|#_2ffc7e89-c196-46be-ae86-61993970ebd2]
==Changes to the Entities Form==
On the form toolbar of the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form, the following changes have been made:[anchor|#_3b72c28b-c697-435f-9e2b-989f1c91d07e]
*The '''Start Real-Time Sync''' and '''Stop Real-Time Sync''' buttons (see Item 1 in the following screenshot) have been added.
*The '''Clear Sync''' button has been renamed to '''Clear Sync Data''' (Item 2).
*The '''Reset Sync''' button has been removed.
[anchor|#_2c6cdf1e-0adb-406e-b574-06d865569e5f][anchor|#_41e6341a-97d1-40b5-b095-ae7a2e8793c1][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_Entities_Form_Toolbar.png|popup|New buttons on the form toolbar|350px]
When the user clicks '''Start Real-Time Sync''', the system opens the '''Start Real-Time Sync''' dialog box (see the following screenshot), in which the user confirms—and updates, if necessary—the webhook URL at which push notifications will be received for the selected entity from the external e-commerce system, and starts real-time synchronization. In previous versions of Acumatica ERP, the webhook URL for real-time push notifications was the same for all entities and stores and was specified on the ''Connector Preferences (BC101000)'' form. In Version 2020 R2, the user can override the default webhook URL in the '''Real-Time Webhook URL''' box of the '''Start Real-Time Sync''' dialog box (shown in the following screenshot) before starting real-time synchronization for a particular entity; the specified URL will be used only for the selected entity.[anchor|#_9212f634-02f9-4a8d-a4a5-ad4711f43fd8][anchor|#_01ed01ff-c1a8-4de9-be90-8d3c5a656894][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_Entities_StartRealTime.png|popup|The Start Real-Time Sync dialog box|250px]
The user clicks '''Stop Real-Time Sync''' on the form toolbar of the form to stop real-time synchronization for the selected entity.{br}

In the Summary area of the form, the following changes have been made:[anchor|#_e21048e8-50c5-4f9d-8261-f5816d837a08]
*The following boxes have been renamed:
**'''Direction''' to '''Sync Direction'''
** '''Number of Attempts on Error''' to '''Max. Number of Failed Attempts'''
** '''Import Real-Time Status''' to '''Real-Time Import'''
** '''Export Real-Time Status''' to '''Real-Time Export'''
*The '''Sync Immediately''' check box has been replaced with the '''Real-Time Mode''' box. This box is unavailable for editing if real-time synchronization is running. For details about the '''Real-Time Mode''' box, see the [[#_172134ae-b637-4be2-a6c7-5280572999fa|Changes to the BigCommerce Stores Form] section above.
*The read-only '''Real-Time Webhook URL''' box has been added. This box shows the webhook URL, which is used to receive push notifications for the entity from the external e-commerce system if real-time synchronization is running for the entity. The box is displayed only if real-time import is supported for the selected entity (that is, if the '''Real-Time Import''' box contains a value other than ''Not Supported'').
*The following read-only boxes have been removed:
**'''Latest Full Import'''
** '''Latest Full Export'''
** '''Latest Incremental Import'''
** '''Latest Incremental Export'''
*The UI elements have been rearranged to group general synchronization settings (see Item 1 in the following screenshot) and settings related to real-time synchronization (Item 2).
[anchor|#_e7e8f057-ee74-4b71-8799-cd38df96916d][anchor|#_1e0c1fbd-8ad3-4778-8f1f-9d7c7e75a7da][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_Entities_Form_SummaryArea.png|popup|Groups of synchronization settings|350px]
==Changes to the Fetch Data Form==
The ''Fetch Data (BC501000)'' form has been renamed to [HelpRoot_Commerce\BC_50_10_00|Prepare Data] (with the same form number). Starting in Acumatica ERP 2020 R2, users can only prepare data for synchronization on this form. It is no longer possible to use this form to prepare data and then immediately process the prepared data.{br}

On the form toolbar, the following changes have been made:[anchor|#_10f348cd-5e84-426b-8e7c-6fa96c7b64b1]
*The '''Process''' and '''Process All''' buttons have been removed.
*The '''Prepare''' button (see Item 1 in the screenshot below) has been added. This button starts the data preparation process to prepare data for the selected entity or entities for synchronization. For details about the synchronization process, see [HelpRoot_Commerce\config_BigCommerce_Data_Sync_GeneralInfo|Data Synchronization: General Information].

In the Selection area, the following changes have been introduced:[anchor|#_8ba3a6a9-7bd6-4083-b19c-970504bfd825]
*The '''Connector''' box has been removed.
*The '''Entity''' box (Item 2) has been added. In previous versions of Acumatica ERP, the list of entities was displayed in the table only if a store was selected in the '''Store''' box. Now the user can narrow the range of listed entities by selecting the '''Store''' or '''Entity''' box, or both boxes; the user can also display all entities of all stores by clearing both boxes.
*The '''Fetch Mode''' box has been replaced with the '''Prepare Mode''' box, in which a user can select one of the following options:
**''Incremental'': In this mode, the system prepares data that has been modified since the last data preparation.
**''Reconciliation''(Item 3): This mode was introduced in Version 2020 R2. In this mode, the system prepares the records that were last modified in the specified date range (defined by the '''Start Date''' and the '''End Date''') and that have not yet been synchronized.
**''Full'': In this mode, the system prepares the records that were last modified in the specified date range (defined by the '''Start Date''' and the '''End Date'''), even if they have been previously synchronized.
*The '''Sync Mode''' box has been removed.
*The '''Start Date''' and '''End Date''' boxes have been added. These boxes are available for editing if ''Full'' or ''Reconciliation'' is selected in the '''Prepare Mode''' box. (They are not available for editing when the ''Incremental'' mode is selected, because in this mode, the system prepares only the data that has changed since the last data preparation.) When a user selects the ''Full'' or ''Reconciliation'' mode, by default, the '''Start Date''' box contains the date that is seven days prior to the current date, and the '''End Date''' box is empty.
*:((({S:Warn}The dates selected in the '''Start Date''' and '''End Date''' boxes are not applicable to entities that cannot be filtered by their ''Last Modified'' date, such as ''Customer Price Class'' and ''Sales Category''. If any of these entities is selected in the '''Entity''' box, the dates specified in the '''Start Date''' and '''End Date''' boxes will be ignored during the data preparation process.
)))

In the table of this form, the following changes have been introduced:[anchor|#_8f4da39a-46e0-47eb-861a-852819a23817]
*The following columns have been added:
**'''Prepared Records'''(Item 4): The number of records that have been prepared for synchronization. A user can click the link in this column to open the ''Process Data'' ''(BC501500)'' form. The form will display only the synchronization records for the store and entity of the row in which the user has clicked the link.
**'''Processed Records'''(Item 4): The number of records that have already been processed. A user can click the link in this column to open the ''Sync History'' ''(BC301000)'' form. The form will display only the synchronization records for the store and entity of the row in which the user has clicked the link.
**'''Real-Time Export''': The status of real-time export for the entity. ''Stopped'' indicates that real-time export is supported but is not currently running. ''Running'' indicates that real-time export has been started. ''Not Supported'' indicates that real-time export cannot be started for the entity.
**'''Real-Time Import''': The status of real-time import for the entity. ''Stopped'' indicates that real-time import is supported but is not currently running. ''Running'' indicates that real-time import has been started. ''Not Supported'' indicates that real-time import cannot be started for the entity.
**'''Real-Time Mode''': The mode in which the system should process push notifications about changes to entity data when real-time synchronization is enabled. ''Prepare'' indicates that the data should be prepared for synchronization—that is, pulled from both systems and put in the processing queue as synchronization records—but not processed. ''Prepare & Process'' indicates that the system should attempt to process the synchronization records as soon as they are prepared.
**'''Last Reconciliation Export''' (hidden): A read-only column that shows the date and time of the last data preparation in ''Reconciliation'' mode for the ''Export'' direction.
**'''Last Reconciliation Import''' (hidden): A read-only column that shows the date and time of the last data preparation in ''Reconciliation'' mode for the ''Import'' direction.
*The following columns have been made visible by default:
**'''Store''': Now a user can also click the link in this column to open the store settings—that is, to open the store on the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) or [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form.
**'''Sync Order''': A read-only column that shows the order in which this entity is synchronized. The entity with the lowest value is processed first.
*The following columns have been renamed:
**'''Direction''' to '''Sync Direction'''
** '''Latest Incremental Import''' to '''Last Incremental Import'''
** '''Latest Incremental Export''' to '''Last Incremental Export'''
*The following columns have been removed:
**'''Latest Full Export'''
** '''Latest Full Import'''
[anchor|#_a5a837ae-a771-4d73-883c-72c791ee77c1][anchor|#_e05d1ff8-3fe6-458c-8364-145b4554460e][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_PrepareData.png|popup|The Prepare Data form|450px]
==Changes to the Sync Data Form==
The ''Sync Data (BC501500)'' form has been renamed to [HelpRoot_Commerce\BC_50_15_00|Process Data] (which keeps the same form number).
The '''Skip''' and '''Set Synced''' buttons have been moved from the table toolbar to the form toolbar (see Item 1 in the screenshot below). The Filter Settings button (Item 2) has been added to the form toolbar; now a user can create and save advanced filters on this form. For more information about advanced filters, see [HelpRoot_ReportingTools\GI_Reusable_Filters_Mapref|Managing Advanced Filters].{br}

In the Selection area of the form, the '''Connector''' box has been removed.{br}

In the table, the following changes have been introduced:[anchor|#_c54c27d7-90ab-4201-828e-9c2444c95e52]
*The '''Ref. Note ID''' column has been replaced with the '''Local ID''' column (Item 3), which shows the identifier of the record in Acumatica ERP. If a user clicks the link in this column, the system opens the relevant form of Acumatica ERP with the details of the record. The '''Local ID''' column cannot be used for filtering or sorting because it is an automatically calculated column.
*The following hidden columns have been added:
**'''Primary System''': The system—''Local'' (that is, Acumatica ERP) or ''External'' (that is, BigCommerce or Shopify)—that is used as a source of data during the synchronization.
**'''Sync Direction''': The direction of the synchronization, which can be ''Export'', ''Import'', or ''Bidirectional''.
*The following columns have been renamed:
**'''Error''' to '''Last Error'''
** '''Latest Attempt''' to '''Last Attempt'''
** '''Locally Modified''' to '''Last Locally Modified'''
** '''Externally Modified''' to '''Last Externally Modified'''
[anchor|#_d0f3c51f-44db-4000-b792-bcd9f7a4b188][anchor|#_e78bdd22-d37a-4fed-a719-a6ddb3cff5dd][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_ProcessData.png|popup|The Process Data form|450px]
==Changes to the Sync Status Form==
The ''Sync Status (BC301000)'' form has been renamed to [HelpRoot_Commerce\BC_30_10_00|Sync History] so that the name more accurately reflects the purpose of the form; it has the same form number.{br}

On the form toolbar of this form, the following changes have been made:[anchor|#_d1492b98-4edc-4eb6-ae90-b57cac541b88]
*The '''Delete''' button (see Item 1 in the following screenshot) has been added. A user clicks this button to remove the selected synchronization record or records (that is, the synchronization record or records for which the unlabeled check box is selected) from the tables on the tabs. The deletion takes effect only when the user clicks '''Save''' on the form toolbar.
*The '''Skip''', '''Set Synced''', '''Add New''', and '''Edit''' buttons (Item 2) have been moved from the table toolbar to the form toolbar. The actions performed when a user clicks the '''Skip''' or '''Set Synced''' button apply only to the selected synchronization record or records (that is, the synchronization record or records for which the unlabeled check box is selected). The action performed when a user clicks '''Edit''' applies to a single selected synchronization record (that is, the synchronization record for which the unlabeled check box is selected or that the user clicked before clicking '''Edit'''). If a user selects multiple records and clicks '''Edit''', the system displays an error.
*The Filter Settings button (Item 3) has been added. A user can now create and save advanced filters on the [HelpRoot_Commerce\BC_30_10_00|Sync History] form. For more information about advanced filters, see [HelpRoot_ReportingTools\GI_Reusable_Filters_Mapref|Managing Advanced Filters].

In the Selection area, the following boxes have been removed:[anchor|#_b83dac68-4e8e-459e-acb8-7789a7684e2f]
*'''Connector'''
* '''View'''
* '''Status'''
[anchor|#_6a4c206f-81c8-4a88-b6d1-3f35824e89aa][anchor|#_8ee48803-d815-4e89-a10e-b837b3728552][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Usability_SyncHistory.png|popup|The Sync History form|450px]
The table on the previous form has been replaced with the following tabs:[anchor|#_2a04d7d7-3eb4-4b4a-8381-0d6be04f0cf4]
*'''All Records''': Displays all synchronization records, regardless of their status.
*'''Pending & Failed''': Displays active synchronization records with the ''Pending'' and ''Failed'' statuses. The system attempts to synchronize records with these statuses when data processing is started for the corresponding entity.
*'''Failed''': Displays active synchronization records with the ''Failed'' status. A synchronization record is assigned the ''Failed'' status if the system could not process it but the number of synchronization attempts is below the allowed maximum specified for the entity to which the synchronization record belongs—that is, if the number of synchronization attempts does not exceed the number specified for the entity in the '''Max. Number of Failed Attempts''' column on the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) or [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, or in the '''Max. Number of Failed Attempts''' box on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form. The system attempts to synchronize records with this status when data processing is started for the corresponding entity.
*'''Synchronized''': Displays active synchronization records with the ''Synchronized'' status—that is, active synchronization records that have been successfully processed by the system.
*'''Skipped''': Displays active synchronization records with the ''Skipped'' status—that is, active synchronization records that have been manually excluded from synchronization by users.
*'''Aborted''': Displays active synchronization records with the ''Aborted'' status—that is, active synchronization records that have been excluded from synchronization by the system. The system assigns the ''Aborted'' status to a synchronization record if it fails to process it for more than the maximum number of failed attempts allowed for the synchronization of the entity to which the synchronization record belongs—that is, if the number of synchronization attempts exceeds the number specified for the entity in the '''Max. Number of Failed Attempts''' column on the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] or [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form, or in the '''Max. Number of Failed Attempts''' box on the [HelpRoot_Commerce\BC_20_20_00|Entities] form.
*'''Deleted''': Displays active synchronization records with the ''Deleted'' status, which is assigned to a synchronization record if the record data it contains has been prepared (that is, pulled from Acumatica ERP and the external e-commerce system) and then deleted in the local system, the external system, or both systems.
*'''Filtered''': Displays active synchronization records with the ''Filtered'' status. The system assigns this status to a synchronization record if the synchronization record has been filtered out during the synchronization because of the application of filtering conditions defined in the code or on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form. Filtered records can be manually processed by users.
*'''Invalid''': Displays active synchronization records with the ''Invalid'' status—that is, active synchronization records that cannot be synchronized. 
*'''Inactive''': Displays inactive synchronization records—synchronization records for entities that have been deactivated on the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) or [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form (or both forms).

The columns of the table have been changed as follows:[anchor|#_facdaf1c-3f5f-4c0b-bbd5-74031b6f98af]
*The following columns have been added:
**'''Active''': A read-only check box that indicates (if selected) that the entity to which the synchronization record belongs is activated on the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] or [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form.
**'''Primary System''' (hidden): The system—''Local'' (that is, Acumatica ERP) or ''External'' (that is, BigCommerce or Shopify)—that is used as a source of data during the synchronization.
**'''Sync Direction''' (hidden): The direction of the synchronization, which can be ''Export'', ''Import'', or ''Bidirectional''.
**'''Sync Record ID''' (hidden): The identifier of the synchronization record.
*The '''Error''' column has been renamed to '''Last Error'''.
*The '''Connector''' column has been hidden.
*The following columns have been renamed and hidden:
**'''Locally Modified''' to '''Last Locally Modified''': This column shows the date and time when the record was last modified in Acumatica ERP.
**'''Externally Modified''' to '''Last Externally Modified''': This column shows the date and time when the record was last modified in the external system.
]]></column>
			<column name="PlainText"><![CDATA[Commerce: UI Changes and Usability Enhancements In  Acumatica ERP 2020 R2, multiple enhancements have been made to e-commerce-related forms to make these forms         easier to use. The sections below list the changes that have been made to each of the         forms. Removed Forms In  Acumatica ERP 2020 R2, the following forms have been removed: Connector Preferences (BC101000) : The public webhook URL that was previously           specified on this form is now specified on the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form. See the  Changes to the Entities Form Changes to the Entities Form section of this topic for more details. Real-Time Sync (BC502000) : The functionality of starting and stopping real-time           synchronization for entities is now available on the   ([~/?ScreenId=BC202000|BC202000]) Entities form. For more details, see  Changes to the Entities Form Changes to the Entities Form. Changes to the BigCommerce Stores Form On the  Connection Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC102000) form, the following sections have been         added: System           Settings            (see Item 1 in the following screenshot) : In the              Locale  box, the administrative            user            specifies the locale that will be used during data synchronization with the store. If data           is maintained in  Acumatica ERP in multiple languages, the data that corresponds to the specified locale will be           synchronized with the store. Store Properties (Item           2) : In the read-only  Default Currency  box, the           system displays the default currency of the BigCommerce store. In the read-only              Store Time Zone  box, the system displays the store's time zone           (the time zone appears as soon as the connection to the store has been established). The Connection Settings tab of the BigCommerce Stores form On the  Entity Settings  tab, in the table, the column with the            Sync Immediately  check box has been replaced with the            Real-Time           Mode          column. To indicate if the system should immediately process data prepared by the real-time         synchronization mechanism, the user now selects one of the following options          (see Item 1 in the         screenshot below) : Prepare  (default): Synchronization records should be prepared but not processed.           If real-time synchronization is turned off for the entity, the setting is ignored. (This           option corresponds to the cleared  Sync Immediately  check box.) Prepare & Process : Synchronization records should be processed as soon as           they are prepared. If real-time synchronization is turned off for the entity, the setting           is ignored. (This option corresponds to the selected  Sync             Immediately  check box.) The  Real-Time Mode  column is unavailable for editing if real-time         synchronization has been started. You should stop real-time synchronization on the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form before changing this setting. The following columns          (Items 2 and         3 ) have been renamed: Direction  to  Sync Direction Import Real-Time Status  to  Real-Time             Import Export Real-Time Status  to  Real-Time             Export Number of Attempts on Error  to  Max. Number of Failed             Attempts The Entity Settings tab of the BigCommerce Stores form On the  Order Settings  tab, in the  Order          section, the  Order Time Zone  box          (see the following         screenshot)  has been added. This is the time zone the system uses for         sales orders imported from the BigCommerce store when they are created in  Acumatica ERP. The order time zone is needed to determine the correct date and time of the order if  Acumatica ERP and the BigCommerce store are located in different time zones. The order time zone In the  Taxes  section,          which is shown in the         screenshot below,  the following changes have been made: The new  Primary Tax Zone  box has been added. In this box, the           administrative user            can           select  the tax zone that will be assigned to each sales order imported           to  Acumatica ERP regardless of whether any other tax zone has been identified during the import of the           order.  The  Default Tax Zone ID  box has been renamed to              Default Tax Zone . B oth         the  Primary Tax Zone  and  Default Tax Zone          boxes are available for editing if  Synchronize Manually  or  Synchronize           Automatically  is selected in the  Synchronize Taxes  box. If the         primary tax zone is selected in the  Primary Tax Zone  box, the            Default Tax Zone  box becomes unavailable. The primary and default tax zones A new section,  Substitution Lists , has been added (see the following         screenshot). In this section, the administrative user can select the substitution lists that         will be used for mapping tax IDs and tax categories defined in  Acumatica ERP to taxes and tax classes defined in the BigCommerce store. The mapping is performed on         the   ([~/?ScreenId=SM206026|SM206026]) Substitution Lists (SM206026) form and is used in manual tax         synchronization. Substitution lists for tax IDs and tax categories The  Shipping Zone Mapping  section has been renamed to            Shipping Option Mapping (see Item 1 in the         following screenshot) . Also, the  Add  and            Delete  buttons are now displayed on the table toolbar          (Item         2) . In previous versions of  Acumatica ERP, the table was updated only via the API. When a new shipping option was added or deleted         in the BigCommerce store, the combination of the store shipping zone and store shipping         method was added to the table or deleted from the table accordingly. Now users can manually         add shipping options to this table and remove them from the table. The Shipping Option Mapping table On the  Payment Settings  tab, the  Payment           Methods  section has been renamed to  Payment Method           Mapping (see Item 1 in the         screenshot below) . The following changes have been made to the            Base Currency Payment Methods  table: The  Add  and  Delete  buttons            (Item           2)  have been added to the table toolbar. Users can now manually add           payment options to the table and remove them from the table. The  Process Payments  column has been renamed to              Active (Item           3) .            If a payment method has           the  Active  check box selected, payments made with this payment           method in the BigCommerce store are imported to  Acumatica ERP.  Users select this check box only for payment methods that need to be           processed through  Acumatica ERP. The           value displayed in the  Store Payment Method  column now shows the           combination of the payment gateway and the payment method, which are both copied from the           order transaction. When an order is being imported from BigCommerce to  Acumatica ERP, the system checks whether the table contains the combination of the payment gateway           and the payment method from the order transaction; the system then performs one of the             following: If the table contains the needed combination in the  Store Payment                 Method  column and it is activated (that is, it has the                  Active  check box selected) and mapped to a payment method in                  Acumatica ERP, the system uses the payment method and other mapped settings for creating the               payment in  Acumatica ERP. If the table contains the needed combination in the  Store Payment                 Method  column, but it is not mapped to a payment method in  Acumatica ERP or it is not activated (or it is neither mapped to a payment method nor activated),               the system displays an error               message                saying that the store payment method is not mapped or not               activated . If the table does not contain the needed combination in the  Store Payment                 Method  column, the system adds a row with the needed combination and               displays an error message saying that the store payment method is not mapped to a               payment method in  Acumatica ERP. The  Proc. Center ID  column            (Item           4)  has been added. For payment methods based on credit cards, if a           default processing center has been specified for the payment method—that is, if the              Default  check box is selected for the processing center on the              Processing Centers  tab of the   ([~/?ScreenId=CA204000|CA204000]) Payment Methods (CA204000) form—the system automatically inserts           the default processing center in this column. If no processing center has been specified           as the default for a payment method based on credit cards, the user needs to manually           select a processing center in this column. For more information, see  Commerce: Enhancements to the Import of Credit Card Payments. The hidden  Store Order Payment Method  column has been added. This           column            shows           the payment method included in the details of the sales order            imported from           BigCommerce to  Acumatica ERP. In rare occasions, the combination of the payment gateway and the payment method in           the order transaction can be the same for different payment methods specified in the store           order. The system uses the setting in the  Store Order Payment             Method  column to identify the right payment method in  Acumatica ERP when there are multiple mappings in the table for the same store payment method (which           is the combination of the payment gateway and the payment method). The hidden  Create Payments from Order  column has been added. A           user can select this check box to indicate that if an empty payment is being imported from           the BigCommerce store, the system should create a payment in  Acumatica ERP based on the imported sales order. This check box is automatically selected for the           following store payment methods: AMAZON PAYPAL TEST PAYMENT GATEWAY The Payment Settings tab of the BigCommerce Stores form Changes to the Entities Form On the form toolbar of the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form,         the following changes have been made: The  Start Real-Time Sync  and  Stop Real-Time             Sync  buttons            (see Item 1 in the           following screenshot)  have been added. The  Clear Sync  button has been renamed to  Clear Sync             Data  (Item 2). The  Reset Sync  button has been removed. New buttons on the form toolbar When the user clicks  Start Real-Time Sync , the system opens the            Start Real-Time Sync  dialog box          (see the following         screenshot) , in which the user confirms—and updates, if necessary—the         webhook URL at which push notifications will be received for the selected entity from the         external e-commerce system, and starts real-time synchronization. In previous versions of            Acumatica ERP, the webhook URL for real-time push notifications was the same for all entities and         stores and was specified on the  Connector Preferences (BC101000)  form. In Version  2020 R2, the user can override the default webhook URL in the  Real-Time Webhook           URL  box of the  Start Real-Time Sync  dialog box (shown         in the following screenshot) before starting real-time synchronization for a particular         entity; the specified URL will be used only for the selected entity. The Start Real-Time Sync dialog box The user clicks  Stop Real-Time Sync  on the form toolbar of the form         to stop real-time synchronization for the selected entity. In the Summary area of the form, the following changes have been made: The following boxes have been renamed: Direction  to  Sync Direction Number of Attempts on Error  to  Max. Number of                 Failed Attempts Import Real-Time Status  to  Real-Time                 Import Export Real-Time Status  to  Real-Time                 Export The  Sync Immediately  check box has been replaced with the              Real-Time Mode  box. This box is unavailable for editing if           real-time synchronization is running. For details about the  Real-Time             Mode  box, see the  Changes to the BigCommerce Stores Form Changes to the BigCommerce Stores Form section above. The read-only  Real-Time Webhook URL  box has been added. This box           shows the webhook URL, which is used to receive push notifications for the entity from the           external e-commerce system if real-time synchronization is running for the entity. The box           is displayed only if real-time import is supported for the selected entity (that is, if           the  Real-Time Import  box contains a value other than  Not             Supported ). The following read-only boxes have been removed: Latest Full Import Latest Full Export Latest Incremental Import Latest Incremental Export The UI elements have been rearranged to group general synchronization settings            (see Item 1 in the           following screenshot)  and settings related to real-time synchronization            (Item           2). Groups of synchronization settings Changes         to the Fetch Data Form The  Fetch Data (BC501000)  form has been renamed to   ([~/?ScreenId=BC501000|BC501000]) Prepare Data (with the same form number). Starting in  Acumatica ERP 2020 R2, users can only prepare data for synchronization on this form.          It is no longer possible         to use this form to prepare data and then immediately process the prepared         data. On the form toolbar, the following changes have been made: The  Process  and  Process All  buttons have           been removed. The  Prepare  button            (see Item 1 in the           screenshot below)  has been added. This button starts the data           preparation process to prepare data for the selected entity or entities for           synchronization. For details about the synchronization process, see  Data Synchronization: General Information. In the Selection area, the following changes have been introduced: The  Connector  box has been removed. The  Entity  box            (Item           2)  has been added. In previous versions of  Acumatica ERP, the list of entities was displayed in the table only if a store was selected in the              Store  box. Now the user can narrow the range of listed entities           by selecting the  Store  or  Entity  box, or           both boxes; the user can also display all entities of all stores by clearing both           boxes. The  Fetch Mode  box has been replaced with the  Prepare             Mode  box, in which a user can select one of the following options: Incremental : In this mode, the system prepares data that has been modified               since the last                data               preparation. Reconciliation (Item               3) : This mode was introduced in Version  2020 R2. In this mode, the system prepares the records that were last modified in the               specified date range (defined by the  Start Date  and the                  End Date ) and that have not yet been synchronized. Full : In this mode, the system prepares the records that were last modified               in the specified date range (defined by the  Start Date  and the                  End Date ), even if they have been previously               synchronized. The  Sync Mode  box has been removed. The  Start Date  and  End Date  boxes have           been added. These boxes are available for editing if  Full  or  Reconciliation            is selected in the  Prepare Mode  box. (They are not available for           editing when the  Incremental  mode is selected, because in this mode, the system           prepares only the data that has changed since the last data preparation.) When a user           selects the  Full  or  Reconciliation  mode, by default, the  Start             Date  box contains the date that is seven days prior to the current date, and           the  End Date  box is             empty. The             dates selected in the  Start Date  and  End               Date  boxes are not applicable to entities that cannot be filtered by their                Last               Modified  date, such as  Customer Price Class  and  Sales               Category . If any of these entities is selected in the                Entity  box, the dates specified in the  Start               Date  and  End Date  boxes will be ignored during the             data preparation process. In the table of this form, the following changes have been introduced: The following columns have been added: Prepared Records (Item               4) : The number of records that have been prepared for               synchronization. A user can click the link in this column to open the  Process                 Data (BC501500)  form. The form will display only the synchronization records for the               store and entity of the row in which the user has clicked the link. Processed Records (Item               4) : The number of records that have already been processed. A user               can click the link in this column to open the  Sync History (BC301000)  form. The form will display only the synchronization records for the               store and entity of the row in which the user has clicked the link. Real-Time Export : The status of real-time export for the               entity.  Stopped  indicates that real-time export is supported but is not               currently running.  Running  indicates that real-time export has been started.                  Not Supported  indicates that                real-time               export cannot be started for the               entity. Real-Time Import : The status of real-time import for the               entity.  Stopped  indicates that real-time import is supported but is not               currently running.  Running  indicates that real-time import has been started.                  Not Supported  indicates that real-time import cannot be started for the               entity. Real-Time Mode : The mode in which the system should process               push notifications about changes to entity data when real-time synchronization is               enabled.  Prepare  indicates that the data should be prepared for               synchronization—that is, pulled from both systems and put in the processing queue as               synchronization records—but not processed.  Prepare & Process  indicates that               the system should attempt to process the synchronization records as soon as they are               prepared. Last Reconciliation Export  (hidden): A read-only column that               shows the date and time of the last data preparation in  Reconciliation  mode for               the  Export  direction. Last Reconciliation Import  (hidden): A read-only column that               shows the date and time of the last data preparation in  Reconciliation  mode for               the  Import  direction. The following columns have been made visible by default: Store : Now a user can also click the link in this column to               open the store settings—that is, to open the store on the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) or   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form. Sync Order : A read-only column that shows the order in which               this entity is synchronized. The entity with the lowest value is processed first. The following columns have been renamed: Direction  to  Sync Direction Latest Incremental Import  to  Last Incremental                 Import Latest Incremental Export  to  Last Incremental                 Export The following columns have been removed: Latest Full Export Latest Full Import The Prepare Data form Changes to the Sync Data Form The  Sync Data (BC501500)  form has been renamed to   ([~/?ScreenId=BC501500|BC501500]) Process Data (which keeps the same form number). The  Skip  and  Set Synced  buttons have been         moved from the table toolbar to the form toolbar          (see Item 1 in the         screenshot below) . The Filter Settings button          (Item         2)  has been added to the form toolbar; now a user can create and save         advanced filters on this form. For more information about advanced filters, see  Managing Advanced Filters. In the Selection area of the form, the  Connector  box has been         removed. In the table, the following changes have been introduced: The  Ref. Note ID  column has been replaced with the              Local ID            column  (Item           3) , which shows the identifier of the record in  Acumatica ERP. If a user clicks the link in this column, the system opens the relevant form of  Acumatica ERP with the details of the record. The  Local ID  column cannot be           used for filtering or sorting because it is an automatically calculated column. The following            hidden           columns have been added : Primary System : The system— Local  (that is,  Acumatica ERP) or  External  (that is, BigCommerce or Shopify)—that is used as a source of               data during the synchronization. Sync Direction : The direction of the synchronization, which               can be  Export ,  Import , or  Bidirectional . The following columns have been renamed: Error  to  Last Error Latest Attempt  to  Last Attempt Locally Modified  to  Last Locally                 Modified Externally Modified  to  Last Externally                 Modified The Process Data form Changes to the Sync Status Form The  Sync Status (BC301000)  form has been renamed to   ([~/?ScreenId=BC301000|BC301000]) Sync History so that the name more accurately reflects the         purpose of the form; it has the same form number. On the form toolbar of this form, the following changes have been made: The  Delete  button            (see Item 1 in the           following screenshot)  has been added. A user clicks this button to           remove the selected synchronization record or records (that is, the synchronization record           or records for which the unlabeled check box is selected) from the tables on the tabs. The           deletion takes effect only when the user clicks  Save  on the form           toolbar. The  Skip ,  Set Synced ,  Add             New , and  Edit  buttons            (Item           2)  have been moved from the table toolbar to the form toolbar. The           actions performed when a user clicks the  Skip  or  Set             Synced  button apply only to the selected synchronization record or records           (that is, the synchronization record or records for which the unlabeled check box is           selected). The action performed when a user clicks  Edit  applies to           a single selected synchronization record (that is, the synchronization record for which           the unlabeled check box is selected or that the user clicked before clicking              Edit ). If a user selects multiple records and clicks              Edit , the system displays an error. The Filter Settings button            (Item           3)  has been added. A user can now create and save advanced filters on           the   ([~/?ScreenId=BC301000|BC301000]) Sync History form. For more information about advanced           filters, see  Managing Advanced Filters. In the Selection area, the following boxes have been removed: Connector View Status The Sync History form The table on the previous form has been replaced with the following tabs: All Records : Displays all synchronization records, regardless of           their status. Pending & Failed : Displays active synchronization records           with the  Pending  and  Failed  statuses. The system attempts to synchronize           records with these statuses when data processing is started for the corresponding           entity. Failed : Displays active synchronization records with the              Failed  status. A synchronization record is assigned the  Failed  status if           the system could not process it but the number of synchronization attempts is below the           allowed maximum specified for the entity to which the synchronization record belongs—that           is, if the number of synchronization attempts does not exceed the number specified for the           entity in the  Max. Number of Failed Attempts  column on the              Entity Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) or   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, or in the  Max. Number             of Failed Attempts  box on the   ([~/?ScreenId=BC202000|BC202000]) Entities           (BC202000) form. The system attempts to synchronize records with this status when data           processing is started for the corresponding entity. Synchronized : Displays active synchronization records with the              Synchronized  status—that is, active synchronization records that have been           successfully processed by the system. Skipped : Displays active synchronization records with the              Skipped  status—that is, active synchronization records that have been manually           excluded from synchronization by users. Aborted : Displays active synchronization records with the              Aborted  status—that is, active synchronization records that have been excluded           from synchronization by the system. The system assigns the  Aborted  status to a           synchronization record if it fails to process it for more than the maximum number of           failed attempts allowed for the synchronization of the entity to which the synchronization           record belongs—that is, if the number of synchronization attempts exceeds the number           specified for the entity in the  Max. Number of Failed Attempts            column on the  Entity Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores or   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores           form, or in the  Max. Number of Failed Attempts  box on the   ([~/?ScreenId=BC202000|BC202000]) Entities form. Deleted : Displays active synchronization records with the              Deleted  status, which is assigned to a synchronization record if the record data           it contains has been prepared (that is, pulled from  Acumatica ERP and the external e-commerce system) and then deleted in the local system, the external           system, or both systems. Filtered : Displays active synchronization records with the              Filtered  status. The system assigns this status to a synchronization record if           the synchronization record has been filtered out during the synchronization because of the           application of filtering conditions defined in the code or on the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form. Filtered records can be manually           processed by users. Invalid : Displays active synchronization records with the              Invalid  status—that is, active synchronization records that cannot be           synchronized.            Inactive : Displays inactive synchronization           records—synchronization records for entities that have been deactivated on the              Entity Settings  tab of            the               ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) or   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form (or both           forms). The columns of the table have been changed as follows: The following columns have been added: Active : A read-only check box that indicates (if selected)                 that the entity to which the synchronization record belongs is activated on the                    Entity Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores or   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. Primary System  (hidden): The system— Local  (that is,                    Acumatica ERP) or  External  (that is, BigCommerce or Shopify)—that is used as a source of                 data during the synchronization. Sync Direction  (hidden): The direction of the                 synchronization, which can be  Export ,  Import , or                  Bidirectional . Sync Record ID  (hidden): The identifier of the                 synchronization record. The  Error  column has been renamed to  Last               Error . The  Connector  column has been hidden. The following columns have been renamed and               hidden: Locally Modified  to  Last Locally                   Modified : This column shows the date and time when the record was last                 modified in  Acumatica ERP. Externally Modified  to  Last Externally                   Modified : This column shows the date and time when the record was last                 modified in the external system. ]]></column>
		</row>
		<row PageID="92e2496f-5ecd-408e-8075-d5e3ecc14f78" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="b36beef6-ce78-e4c0-1dce-cebdebace14e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, support for the Shopify automated shopping cart solution has been added. This functionality is available if the ''Shopify Connector'' feature is enabled under ''Commerce Integration'' on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
==Initial Configuration of the Shopify Integration==
When initially configuring the integration of Acumatica ERP with Shopify, the administrative user should perform the following general steps:[anchor|#_34c8de6c-90da-4d51-9817-2dfb813844b4]
#Connecting an Acumatica ERP instance to a Shopify store
#Activating the entities that need to be synchronized
#Defining the customer settings
#Defining the inventory settings
#Defining the order settings
#Defining the payment settings

The sections below describe these steps in greater detail.
==Connecting an Acumatica ERP Instance to a Shopify Store==
In the Summary area of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, in the '''Store Name''' box, the user specifies the name of the Shopify store that is being configured. On the '''Connection Settings''' tab, in the '''Store Settings''' section (shown in the following screenshot), the user fills in the '''Store Admin URL''', '''API Key''', '''API Password''', and '''Shared Secret''' boxes with the store&rsquo;s API settings.[anchor|#_95fde38c-7754-4923-bc87-1c1a3488eb05][anchor|#_8ace3b51-7db9-43cb-9338-38665b4d5d31][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Connection_API.png|popup|Shopify API information required to set up the connection|450px]((({S:Warn}This information can be found in the '''Admin API''' section of the details page of the private app that has been created for the integration of the Shopify store with Acumatica ERP. To avoid possible issues during the data synchronization, we recommend that all permissions listed under '''Admin API Permissions''' on the details page be granted the maximum available access level. For more information, see [HelpRoot_Commerce\config_Shopify_Initial_Configuration_To_Capture_Connection_Info|Initial Configuration: To Capture Store Connection Information].
)))
After the API information has been specified on the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form, the user can verify that it is correct by clicking '''Test Connection''' on the form toolbar. If the connection test is successful, the store’s URL, default currency, supported currencies, and time zone are populated automatically in the '''Store Properties''' section (see the following screenshot).[anchor|#_b5e3ae1b-932d-4bd5-86a3-b3b53ef86e96][anchor|#_605f0f62-d74a-4b94-bcd0-76005377a188][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Store_Properties.png|popup|The Shopify store properties|400px]
In the '''Store Plan''' box of the '''Store Settings''' section (see Item 1 in the following screenshot), the user specifies the subscription plan of the Shopify store (which can be ''Shopify Lite'', ''Basic Shopify'', ''Shopify'', ''Advanced Shopify'', or ''Shopify Plus''). The system uses this information to optimize the performance of the data synchronization between Acumatica ERP and the Shopify store.{br}

In the '''System Settings''' section, in the '''Locale''' box (Item 2), the user can select the locale of Acumatica ERP to be synchronized with the Shopify store if multiple locales have been configured in Acumatica ERP and data is maintained in multiple languages.[anchor|#_0757f050-45f7-4c45-8b0c-76a1a00994f6][anchor|#_cde0e659-5d96-4fba-8e95-80967fd69f0d][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Store_Plan_Locale.png|popup|The Shopify store plan and Acumatica ERP locale|400px]
==Activating the Entities that Need to Be Synchronized==
On the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, shown in the screenshot below, the user selects the '''Active''' check box for the entities that need to be synchronized between the Acumatica ERP instance and the Shopify store. After the initial configuration has been completed, the user can configure active entities on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form (for example, create filters to narrow down data to be synchronized or define additional mappings of data fields between the Acumatica ERP instance and the Shopify store) and then start synchronizing them. {br}

Additionally, for some of the entities, the user can change the predefined synchronization settings on the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. For example, the user can change the '''Sync Direction''' or the '''Primary System''' (that is, the system that is used as the source of data during the synchronization). The user can set '''Real-Time Mode''' for an entity to ''Prepare & Process'' to indicate that data processing should start as soon as the data to be synchronized has been pulled from both systems. This setting takes effect only if real-time synchronization is turned on for the entity. In the '''Max. Number of Failed Attempts''' column, the user can change the default value (which is ''5'') to increase or decrease the number of times the system will attempt to synchronize data before a particular synchronization record is excluded from synchronization. For more information about the data synchronization process, see [HelpRoot_Commerce\config_Shopify_Data_Sync_GeneralInfo|Data Synchronization: General Information].[anchor|#_8df75f2e-ce73-474a-a957-7a026915ef87][anchor|#_e3c3981e-68d1-4b3d-8e2b-7d9fb1aba5a6][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Entity_Settings.png|popup|The Entity Settings tab of the Shopify Stores form|450px]
==Defining the Customer Settings==
On the '''Customer Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, shown in the following screenshot, in the '''Customer Class''' box, the user specifies the customer class based on which new customers imported from the Shopify store will be created. In the '''Customer Autonumbering''' and '''Location Autonumbering''' boxes, the user selects the numbering sequences to be used for generating identifiers for imported customers and customer locations. If the company uses segmented keys that consist of multiple segments for customers and customer locations, it is necessary to also specify the numbering templates in the '''Customer Numbering Template''' and '''Location Numbering Template''' boxes and indicate which of the key segments should be auto-numbered. In the '''Generic Guest Customer''' box, the user specifies the customer to be inserted into orders placed in the Shopify store by non-registered shoppers and then imported to Acumatica ERP.[anchor|#_711d3440-9c00-4171-9304-fce25b8eb871][anchor|#_fcf5f08f-9166-4eac-98ed-b36cb9385df6][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Store_Customer.png|popup|The Customer Settings tab of the Shopify Stores form|450px]
==Defining the Inventory Settings==
On the '''Inventory Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form (see the screenshot below), the user specifies the default availability settings for stock and non-stock items exported to the Shopify store. In the '''Default Availability''' box, the user indicates whether each exported item should be available for purchasing and whether the available quantities should be tracked by selecting one of the following options:[anchor|#_edb4c1cb-2378-4fe2-a7a3-c5ebf49d972b]
*''Available - Track Qty'': The item is available for purchase in the online store, and its quantity is tracked.
*''Available - Don&rsquo;t Track Qty'': The item is available for purchase in the online store, and its quantity is not tracked.
*''Pre-Order'': Pre-order functionality is currently not supported in Shopify. If this option is selected, the item is available for purchase in the online store, and its quantity is not tracked.
*''Disabled'': The item cannot be purchased in the store.

In the '''When Qty Unavailable''' box, the user selects the action that the system should perform on an item with a tracked quantity if after the synchronization with Acumatica ERP, the item&rsquo;s available quantity is zero. The following options are available:[anchor|#_c798ac34-bfe7-4dc5-bb4f-dfab062bba8d]
*''Do Nothing'': The system will perform no action on the item.
*''Set as Pre-Order'': Pre-order functionality is currently not supported in Shopify. If this option is selected, the system will make the item unavailable for purchase.
*''Set as Disabled'': The system will make the item unavailable for purchase.

In the '''Availability Mode''' box, the user selects the quantity type—''On Hand'', ''Available'', or ''Available for Shipping''—to be used for availability calculations.{br}

In the '''Warehouse Mode''' box, the user specifies whether all or only specific warehouses should be used to calculate quantities by selecting the ''All'' or ''Specific'' option, respectively. If the ''Specific'' option is selected, the warehouses must be specified in the table. The user can define the sources of item quantities at a more granular level by specifying particular warehouse locations. If a location is specified for a warehouse, only this specific location of the selected warehouse is used for quantity calculations. If a specific location ID is not selected, the item’s available quantity in the online store is calculated based on the quantity in the whole warehouse.((({S:Warn}The functionality of multiple warehouses and multiple warehouse locations are supported if the ''Multiple Warehouses'' and ''Multiple Warehouse Locations'' features, respectively, are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
))){br}

In the '''Sales Category Export''' box, the user can optionally specify whether the sales categories the exported items are assigned to should be synchronized with product tags in the Shopify store. If the user selects the ''Sync Sales Categories to Product Tags'' option, during the synchronization of stock, non-stock, and template items, these items will be added to the Shopify store&rsquo;s collections based on product tags (if any collections have been created) based on the sales categories assigned to these items in Acumatica ERP. If the user selects the ''Do Nothing'' option, the sales categories assigned to items will not be synchronized with the Shopify store.[anchor|#_c856146b-7c54-47c8-9370-24292b674850][anchor|#_bd1aa2de-d74d-477d-b094-4d187dbb261a][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Store_Inventory.png|popup|The Inventory Settings tab of the Shopify Stores form|450px]
==Defining the Order Settings==
On the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, the user specifies the default settings for sales orders synchronized between Acumatica ERP and the Shopify store. {br}

In the '''Branch''' box of the '''General''' section (see Item 1 in the following screenshot), the user selects the branch to be inserted as the default in all sales orders imported from the Shopify store. {br}

The '''Order Type''' box of the '''Order''' section (Item 2) is used to select the order type that will be assigned to sales orders imported from the Shopify store. The user can create unique order types for each store to limit the volume of data to be synchronized and to easily identify sales orders imported from a particular store or e-commerce platform.{br}

In the '''Order Time Zone''' box of the '''Order''' section (Item 3), the user selects the time zone the system will use for sales orders imported from the Shopify store when they are created in Acumatica ERP. The order time zone is needed to determine the correct date and time of the order if Acumatica ERP and the Shopify store are located in different time zones.[anchor|#_c8c7ccfd-35ce-47cc-91ca-be6c09a5231a][anchor|#_e17b228a-b475-44f4-9c3d-e13ea5fc2322][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings.png|popup|The order settings|400px]
==Defining Settings for Refunds==
On the '''Order Settings''' tab ('''Order''' section) of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, in the '''Return Order Type''', '''Refund Amount Item''', and '''Refund Reason Code''' boxes, shown in the following screenshot, the user selects the order type to be assigned to return orders, the non-stock item that will be used to represent the refunded amount in the original sales order or return order, and the reason code to be included in the line with the returned item or with the refund amount item. For more information about importing refunds from the Shopify store, see [HelpRoot_ReleaseNotes\RN_2020_R2_Commerce_Shopify_Refunds|Commerce: Import of Refunds from Shopify].[anchor|#_3df585df-8ed6-466e-a11b-950a488cc90b][anchor|#_4d1d21f1-77c1-4b7f-a413-03e45ad1d4a0][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings_Refunds.png|popup|Settings for importing refunds|400px]
==Defining Settings for Discounts==
In the '''Show Discounts In''' box of the '''Order''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, shown in the following screenshot, the user selects the level on which discounts are displayed in imported sales orders. The following options are available:[anchor|#_a37d62b1-c22a-4ee5-8687-3740003a6b8f]
*''Line Discount'': Discounts applied to the order are distributed between the sales order lines and appear in the '''Discount Amount''' column on the '''Document Details''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form.
*''Document Discount'': Discounts applied to the order are aggregated and displayed on the '''Discount Details''' tab of [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form.
((({S:Warn}For discounts to be imported correctly, the ''Customer Discounts'' feature must be enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
)))[anchor|#_fdb5f150-ec91-4f49-852d-c162212fc762][anchor|#_361a36a7-524f-4c0d-938c-d5572bdbb5d9][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings_Discounts.png|popup|Settings for discounts|400px]
==Defining Settings for Taxes==
In the '''Taxes''' section of the '''Order''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form (see Item 1 in the screenshot below), in the '''Synchronize Taxes''' box, the user selects a tax synchronization option to indicate if taxes should be imported from the external system as follows: [anchor|#_f2acfa0a-7dc5-4b3e-a501-e3357949d54a]
*If the user selects ''Do Not Synchronize'', taxes are not synchronized between the systems.
*If the user selects ''Synchronize Manually'' or ''Synchronize Automatically'', the system synchronizes taxes during the synchronization of entities. In this case, the following boxes become available:
**'''Primary Tax Zone''': In this box, the administrative user can select the tax zone that will be assigned to each sales order imported to Acumatica ERP, regardless of whether any other tax zone has been identified during the import of the order.
**'''Default Tax Zone''': In this box, the administrative user can select the tax zone that will be assigned to a sales order imported to Acumatica ERP if no other tax zone has been identified during the import of the order. This box is not available for editing if a tax zone has been selected in the '''Primary Tax Zone''' box,

For the automatic synchronization of taxes, the following steps must be performed: The ''External Tax Calculation Integration'' feature must be enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the integration with the external tax provider that is used in the Shopify store must be set up in Acumatica ERP by using the same account, and the tax zone configured for the external tax provider must be selected in the '''Primary Tax Zone''' box.{br}

For manual tax synchronization, the user needs to define the applicable taxes in the Shopify store and then define the same taxes in Acumatica ERP; if different names for tax codes and categories are used in the two systems, the user needs to map them in the relevant substitution lists.{br}

In the '''Substitution Lists''' section (Item 2), the administrative user can change the substitution lists to be used for mapping tax identifiers and tax categories defined in Acumatica ERP and the Shopify store. The '''Tax Substitution List''' box is used for mapping tax IDs between the two systems, and the '''Tax Category Substitution List''' box is used for mapping tax categories. If during the import of a sales order, the system cannot find the tax ID or tax category specified in the order, it will check if there is a mapping defined for the tax ID or tax category in these substitution lists.[anchor|#_d83f6e04-ca0c-4bae-ac44-226a2cb4d730][anchor|#_bb19c13f-55b9-432d-a399-d006e7362731][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings_Taxes.png|popup|Settings for importing taxes|400px]
In the '''Shipping Zone Mapping''' section, the user maps the shipping options configured in the store with ship via codes (and optionally with shipping zones, shipping terms, or both) configured in Acumatica ERP.[anchor|#_423aaf55-282e-407e-8c68-9e9c2d5de9d1][anchor|#_acd02d39-1b34-4388-a4cc-2ad10196689d][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings_Shipping.png|popup|The Shipping Option Mapping section|450px]
==Defining the Default Payment Settings==
On the '''Payment Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form (see the following screenshot), the user maps the payment options configured in the Shopify store to the payment methods configured in Acumatica ERP. For each mapped payment method, the user can select the '''Process Payments''' check box to indicate that payments made with this payment method should be imported to Acumatica ERP and the '''Release Payment''' check box to indicate that these payments should be released immediately after import.[anchor|#_a07e8253-e671-4e6a-887e-343082a5e7bb][anchor|#_826da40d-66e4-4b5f-a243-677303963d68][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Integration_Order_Settings_Payments.png|popup|The Payment Settings tab of the Shopify Stores form|450px]
==Data Synchronization==
Once the connection between Acumatica ERP and the Shopify store has been established and the initial configuration has been performed, the user can perform additional configuration of active entities and start synchronizing data. {br}

All of the following work the same way for all supported e-commerce platforms:[anchor|#_ac149d33-83a8-462b-8748-dbcc006032ef]
*The data synchronization algorithm
*The configuration of entities for synchronization (such as configuring filters to define which entity data needs to be synchronized, defining additional mapping of fields)
*The scheduling of synchronization and enabling of real-time synchronization for an entity

For an overview of the data synchronization process, see [HelpRoot_Commerce\config_Shopify_Data_Sync_GeneralInfo|Data Synchronization: General Information]. For information on entity preparation, see [HelpRoot_Commerce\config_Shopify_Preparing_Entities_GeneralInfo|Preparing Entities for Synchronization: General Information]. To learn how to schedule synchronization to start at certain times or at specific intervals and how to enable real-time synchronization, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=16fb2d61-88cc-4c3f-8a20-84cdb60c14a1|Scheduling Synchronization: General Information].
==Synchronization Features==
The integration with Shopify, which is natively supported by Acumatica ERP 2020 R2, provides users with the ability to synchronize data related to customers, products, sales orders, payments, and shipments. The synchronization features for each of these categories are listed in the following table.[anchor|#_2630d946-03dc-45e0-bb09-65fd6e237f7e]
===Synchronization Features===
{| class="checklist" | width="100%" 
|- 
!width="25%" ! Data Category
!width="74%" ! Synchronization Features
|- 
| '''Customers and customer addresses'''
| [anchor|#_9dd6bb2b-3275-4092-9459-7576a10e0482]
*Customers and customer addresses (locations) are synchronized as part of the synchronization of the ''Customer'' entity. The ''Customer Location'' entity inherits the synchronization settings defined for the ''Customer'' entity.
*Customers and customer addresses can be exported from the Shopify store to Acumatica ERP, exported from Acumatica ERP to the Shopify store, or synchronized in both directions. The direction of the synchronization can be changed on '''Entities''' tab of the ''Shopify Stores'' (BC201010) form or on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form.
*The customer account that has been selected in the '''Generic Guest Customer''' box on the '''Customer Settings''' tab of the ''Shopify Stores'' form is excluded from synchronization and is not exported to the Shopify store. 

|- 
| '''Products'''
| [anchor|#_871c9911-a322-4639-89cf-3807b781bfd1]
*Stock items, non-stock items, and template items are synchronized when the ''Stock Item'', ''Non-Stock Item'', or ''Template Item'' entity, respectively, is synchronized with the Shopify store. Template items are supported if the ''Matrix Items'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
*For stock items, non-stock items, and template items, only export from Acumatica ERP to the Shopify store is supported.
*For stock items and template items, product availability (that is, the available quantities) can be exported to the Shopify store. The user can specify whether the quantities of the exported items should be tracked, and if they should, which quantities and warehouses in Acumatica ERP should be used in quantity calculations. Available quantities are exported to the Shopify store as part of the synchronization of the ''Product Availability'' entity.
*For product images, only export from Acumatica ERP to the Shopify store is supported. Product images uploaded on the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]), [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]), and [HelpRoot_FormReference\IN_20_30_00|Template Items] ([~/?ScreenId=IN203000|IN203000]) forms are exported as part of the synchronization of the ''Product Images'' entity. As part of the synchronization of the ''Non-Stock Item'', ''Stock Item'', and ''Template Item'' entities, product images whose links have been added to the '''Media URLs''' table on the '''eCommerce''' tab of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items], [HelpRoot_FormReference\IN_20_25_00|Stock Items], or [HelpRoot_FormReference\IN_20_30_00|Template Items] form, respectively, are exported to the Shopify store.
*:((({S:Warn}For a template item, only one image can be exported to the Shopify store. If multiple images are found in Acumatica ERP, only the default image is exported.
)))

|- 
| '''Sales orders'''
| [anchor|#_8d851a5d-855e-4c67-8fa4-7c2aa62e4524]
*Sales orders are synchronized as part of the synchronization of the ''Sales Order'' entity.
*Sales orders can be only imported from the Shopify store to Acumatica ERPc.
*For each Shopify store integrated with Acumatica ERPc, on the '''Order Settings''' tab of the ''Shopify Stores'' form, the administrative user configures an order type based on which orders imported from the Shopify store are to be created in the system.
*During the synchronization of orders, the information imported to Acumatica ERPc includes the following:
**Order summary and totals
**Order details
**Shipping and billing details
**Information about applied discounts
**Tax details
**Payment information

|- 
| '''Shipments'''
| [anchor|#_b4833d61-d2b0-4a2e-b9d5-1976c76628e9]
*Shipments are synchronized as part of the synchronization of the ''Shipment'' entity.
*Shipments can be only exported from Acumatica ERPc to the Shopify store.
*When a shipment is synchronized, the information exported to the Shopify store includes the following:
**Shipping status
**Carrier
**Item details
**Tracking numbers
*:For each box in the shipment, a separate fulfillment is created in the Shopify store.

|- 
| '''Payments'''
| [anchor|#_6c21aa57-d743-4890-8919-9c658ea78e5b]
*Payments are synchronized either automatically with sales orders or as part of the synchronization of the ''Payment'' entity.
*Payments can only be imported from the Shopify store to Acumatica ERPc.
*The administrative user maps payment methods from the Shopify store to payment methods from Acumatica ERPc, selects payment methods for which payments should be imported to Acumatica ERPc, and indicates whether the imported payments should be immediately released.

|}]]></column>
			<column name="PlainText"><![CDATA[Commerce: Integration with Shopify In  Acumatica ERP 2020 R2, support for the Shopify automated shopping cart solution has been added. This         functionality is available if the  Shopify Connector  feature is enabled under            Commerce Integration  on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000)         form. Initial Configuration of the Shopify Integration When initially configuring the integration of  Acumatica ERP with Shopify, the administrative user should perform the following general steps: Connecting an  Acumatica ERP instance to a Shopify store Activating the entities that need to be synchronized Defining the customer settings Defining the inventory settings Defining the order settings Defining the payment settings The sections below describe these steps in greater detail. Connecting an  Acumatica ERP Instance to a Shopify Store In the Summary area of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, in         the  Store Name  box, the          user          specifies the name of the Shopify store that is being configured. On the            Connection Settings  tab, in the  Store           Settings  section (shown in the following screenshot), the user fills in the            Store Admin URL ,  API Key ,  API           Password , and  Shared Secret  boxes with the store's API         settings. Shopify API information required to set up the connection This information can be found in the  Admin API  section of the         details page of the private app that has been created for the integration of the Shopify         store with  Acumatica ERP. To avoid possible issues during the data synchronization, we recommend that all         permissions listed under  Admin API Permissions  on the details page be         granted the maximum available access level. For more information, see  Initial Configuration: To Capture Store Connection Information. After the API information has been specified on the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form, the user can verify that it is correct by         clicking  Test Connection  on the form toolbar. If the connection test         is successful, the store’s URL, default currency, supported currencies, and time zone are         populated automatically in the  Store Properties  section (see the         following screenshot). The Shopify store properties In the  Store Plan  box of the  Store Settings          section  (see Item 1 in         the following screenshot) , the user specifies the subscription plan of the         Shopify store (which can be  Shopify Lite ,  Basic Shopify ,  Shopify ,            Advanced Shopify , or  Shopify Plus ). The system uses this information to         optimize the performance of the data synchronization between  Acumatica ERP and the Shopify store. In the  System Settings  section, in the  Locale          box  (Item         2) , the user can select the locale of  Acumatica ERP to be synchronized with the Shopify store if multiple locales have been configured in  Acumatica ERP and data is maintained in multiple languages. The Shopify store plan and Acumatica ERP locale Activating the Entities that Need to Be Synchronized On the  Entity Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form,          shown in the screenshot         below , the user selects the  Active  check box for         the entities that need to be synchronized between the  Acumatica ERP instance and the Shopify store. After the initial configuration has been completed, the         user can configure active entities on the   ([~/?ScreenId=BC202000|BC202000]) Entities         (BC202000) form (for example, create filters to narrow down data to be synchronized or         define additional mappings of data fields between the  Acumatica ERP instance and the Shopify store) and then start synchronizing them.  Additionally, for some of the entities, the user can change the predefined synchronization         settings on the  Entity Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. For example, the user can change the            Sync Direction  or the  Primary System  (that         is, the system that is used as the source of data during the synchronization). The user can         set  Real-Time Mode  for an entity to  Prepare & Process  to         indicate that data processing should start as soon as the data to be synchronized has been         pulled from both systems. This setting takes effect only if real-time synchronization is         turned on for the entity. In the  Max. Number of Failed Attempts          column, the user can change the default value (which is  5 ) to increase or decrease         the number of times the system will attempt to synchronize data before a particular         synchronization record is excluded from synchronization. For more information about the data         synchronization process, see  Data Synchronization: General Information. The Entity Settings tab of the Shopify Stores form Defining the Customer Settings On the  Customer Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, shown in the following screenshot,         in the  Customer Class  box, the user specifies the customer class         based on which new customers imported from the Shopify store will be created. In the            Customer Autonumbering  and  Location           Autonumbering  boxes, the user selects the numbering sequences to be used for         generating identifiers for imported customers and customer locations. If the company uses         segmented keys that consist of multiple segments for customers and customer locations, it is         necessary to also specify the numbering templates in the  Customer Numbering           Template  and  Location Numbering Template  boxes and         indicate which of the key segments should be auto-numbered. In the  Generic Guest           Customer  box, the user specifies the customer to be inserted into orders         placed in the Shopify store by non-registered shoppers and then imported to  Acumatica ERP. The Customer Settings tab of the Shopify Stores form Defining the Inventory Settings On the  Inventory Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form (see the screenshot below), the         user specifies the default availability settings for stock and non-stock items exported to         the Shopify store. In the  Default Availability  box, the user         indicates whether each exported item should be available for purchasing and whether the         available quantities should be tracked by selecting one of the following options: Available - Track Qty : The item is available for purchase in the online store,           and its quantity is tracked. Available - Don't Track Qty : The item is available for purchase in the online           store, and its quantity is not tracked. Pre-Order :  Pre-order functionality is currently not supported           in Shopify. If this option is           selected , the           item is available for purchase in the online store, and its quantity is not tracked. Disabled : The item cannot be purchased in the store. In the  When Qty Unavailable  box, the user selects the action that         the system should perform on an item with a tracked quantity if after the synchronization         with  Acumatica ERP, the item's available quantity is zero. The following options are available: Do Nothing : The system will perform no action on the item. Set as Pre-Order : Pre-order functionality is currently not supported in Shopify.           If this option is selected, the system will make the item unavailable for purchase. Set as Disabled : The system will make the item unavailable for purchase. In the  Availability Mode  box, the user selects the quantity           type— On Hand ,  Available , or  Available for Shipping —to be used for         availability calculations. In the  Warehouse Mode  box, the user specifies whether all or only         specific warehouses should be used to calculate quantities by selecting the  All  or            Specific  option, respectively. If the  Specific  option is selected, the         warehouses must be specified in the table. The user can define the sources of item         quantities at a more granular level by specifying particular warehouse locations. If a         location is specified for a warehouse, only this specific location of the selected warehouse         is used for quantity calculations. If a specific location ID is not selected, the item’s         available quantity in the online store is calculated based on the quantity in the whole           warehouse. The functionality of multiple warehouses and multiple warehouse locations           are supported if the  Multiple Warehouses  and  Multiple Warehouse Locations            features, respectively, are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features           (CS100000) form. In the  Sales Category Export  box, the user can optionally specify         whether the sales categories the exported items are assigned to should be synchronized with         product tags in the Shopify store. If the user selects the  Sync Sales Categories to           Product Tags  option, during the synchronization of stock, non-stock, and template         items, these items will be added to the Shopify store's collections based on product tags         (if any collections have been created) based on the sales categories assigned to these items         in  Acumatica ERP. If the user selects the  Do Nothing  option, the sales categories assigned to items         will not be synchronized with the Shopify store. The Inventory Settings tab of the Shopify Stores form Defining the Order Settings On the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, the user specifies the default         settings for sales orders synchronized between  Acumatica ERP and the Shopify store.  In the  Branch  box of the  General  section (see         Item 1 in the following screenshot), the user selects the branch to be inserted as the         default in all sales orders imported from the Shopify store.  The  Order Type  box of the  Order  section (Item         2) is used to select the order type that will be assigned to sales orders imported from the         Shopify store. The user can create unique order types for each store to limit the volume of         data to be synchronized and to easily identify sales orders imported from a particular store         or e-commerce platform. In the  Order Time Zone  box of the  Order          section (Item 3), the user selects the time zone the system will use for sales orders         imported from the Shopify store when they are created in  Acumatica ERP. The order time zone is needed to determine the correct date and time of the order if  Acumatica ERP and the Shopify store are located in different time zones. The order settings Defining Settings for Refunds On the  Order Settings  tab ( Order  section) of         the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, in the  Return           Order Type ,  Refund Amount Item , and  Refund           Reason Code  boxes, shown in the following screenshot, the user selects the         order type to be assigned to return orders, the non-stock item that will be used to         represent the refunded amount in the original sales order or return order, and the reason         code to be included in the line with the returned item or with the refund amount item. For         more information about importing refunds from the Shopify store, see  Commerce: Import of Refunds from Shopify. Settings for importing refunds Defining Settings for Discounts In the  Show Discounts In  box of the  Order  tab         of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, shown in the following         screenshot, the user selects the level on which discounts are displayed in imported sales         orders. The following options are available: Line Discount : Discounts applied to the order are distributed between the sales           order lines and appear in the  Discount Amount  column on the              Document Details  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form. Document Discount : Discounts applied to the order are aggregated and displayed on           the  Discount Details  tab of   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form. For discounts to be imported correctly, the  Customer Discounts  feature must be         enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. Settings for discounts Defining Settings for Taxes In the  Taxes  section of the  Order  tab of the             ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form (see Item 1 in the screenshot         below), in the  Synchronize Taxes  box, the user selects a tax         synchronization option to indicate if taxes should be imported from the external system as         follows:  If the user selects  Do Not Synchronize , taxes are not synchronized between the           systems. If the user selects              Synchronize             Manually  or  Synchronize           Automatically , the system synchronizes           taxes during the synchronization of entities. In this case, the following boxes become             available: Primary Tax Zone : In this box, the administrative user can               select the tax zone that will be assigned to each sales order imported to  Acumatica ERP, regardless of whether any other tax zone has been identified during the import of               the order. Default Tax Zone : In this box, the administrative user can               select the tax zone that will be assigned to a sales order imported to  Acumatica ERP if no other tax zone has been identified during the import of the order. This box               is not available for editing if a tax zone has been selected in the  Primary                 Tax Zone  box, For the automatic synchronization of taxes, the following steps must be performed: The            External Tax Calculation Integration  feature must be enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the integration with the external         tax provider that is used in the Shopify store must be set up in  Acumatica ERP by using the same account, and the tax zone configured for the external tax provider must         be selected in the  Primary Tax Zone  box. For manual tax synchronization, the user needs to define the applicable taxes in the         Shopify store and then define the same taxes in  Acumatica ERP; if different names for tax codes and categories are used in the two systems, the user         needs to map them in the relevant substitution lists. In the  Substitution Lists  section (Item 2), the administrative user         can change the substitution lists to be used for mapping tax identifiers and tax categories         defined in  Acumatica ERP and the Shopify store. The  Tax Substitution List  box is used for         mapping tax IDs between the two systems, and the  Tax Category Substitution           List  box is used for mapping tax categories. If during the import of a sales         order, the system cannot find the tax ID or tax category specified in the order, it will         check if there is a mapping defined for the tax ID or tax category in these substitution         lists. Settings for importing taxes In the  Shipping Zone Mapping  section, the user maps the shipping         options configured in the store with ship via codes (and optionally with shipping zones,         shipping terms, or both) configured in  Acumatica ERP. The Shipping Option Mapping section Defining the Default Payment Settings On the  Payment Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form          (see the following         screenshot) , the user maps the payment options configured in the Shopify         store to the payment methods configured in  Acumatica ERP. For each mapped payment method, the user can select the  Process           Payments  check box to indicate that payments made with this payment method         should be imported to  Acumatica ERP and the  Release Payment  check box to indicate that these payments         should be released immediately after import. The Payment Settings tab of the Shopify Stores form Data Synchronization Once the connection between  Acumatica ERP and the Shopify store has been established and the initial configuration has been         performed, the user can perform additional configuration of active entities and start         synchronizing data.  All of the following work the same way for all supported e-commerce platforms: The data synchronization algorithm The configuration of entities for synchronization (such as configuring filters to define           which entity data needs to be synchronized, defining additional mapping of fields) The scheduling of synchronization and enabling of real-time synchronization for an           entity For an overview of the data synchronization process, see  Data Synchronization: General Information. For information on entity         preparation, see  Preparing Entities for Synchronization: General Information. To learn how to         schedule synchronization to start at certain times or at specific intervals and how to         enable real-time synchronization, see  Scheduling Synchronization: General Information Scheduling Synchronization: General Information. Synchronization Features The integration with Shopify, which is natively supported by  Acumatica ERP 2020 R2, provides users with the ability to synchronize data related to customers, products,         sales orders, payments, and shipments. The synchronization features for each of these         categories are listed in the following table. Synchronization Features Data Category Synchronization Features Customers and customer addresses Customers and customer addresses (locations) are synchronized as part of the                     synchronization of the  Customer  entity. The  Customer Location                      entity inherits the synchronization settings defined for the  Customer                      entity. Customers and customer addresses can be exported from the Shopify store to  Acumatica ERP, exported from  Acumatica ERP to the Shopify store, or synchronized in both directions. The direction of                     the synchronization can be changed on  Entities  tab of the                        Shopify Stores  (BC201010) form or on the   ([~/?ScreenId=BC202000|BC202000]) Entities (BC202000) form. The customer account that has been selected in the  Generic Guest                       Customer  box on the  Customer Settings  tab                     of the  Shopify Stores  form is excluded from synchronization and is not                     exported to the Shopify store.  Products Stock items, non-stock items, and template items are synchronized when the                        Stock Item ,  Non-Stock Item , or  Template Item  entity,                     respectively, is synchronized with the Shopify store. Template items are                     supported if the  Matrix Items  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. For stock items, non-stock items, and template items, only export from  Acumatica ERP to the Shopify store is supported. For stock items and template items, product availability (that is, the                     available quantities) can be exported to the Shopify store. The user can specify                     whether the quantities of the exported items should be tracked, and if they                     should, which quantities and warehouses in  Acumatica ERP should be used in quantity calculations. Available quantities are exported to                     the Shopify store as part of the synchronization of the  Product                       Availability  entity. For product images, only export from  Acumatica ERP to the Shopify store is supported. Product images uploaded on the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000),   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500), and   ([~/?ScreenId=IN203000|IN203000]) Template Items (IN203000) forms are exported as part                     of the synchronization of the  Product Images  entity. As part of the                     synchronization of the  Non-Stock Item ,  Stock Item , and  Template                       Item  entities, product images whose links have been added to the                        Media URLs  table on the                        eCommerce  tab of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items,   ([~/?ScreenId=IN202500|IN202500]) Stock Items, or   ([~/?ScreenId=IN203000|IN203000]) Template Items form, respectively, are exported to the                     Shopify store. For a template item, only one image can be exported to the                       Shopify store. If multiple images are found in  Acumatica ERP, only the default image is exported. Sales orders Sales orders are synchronized as part of the synchronization of the  Sales                       Order  entity. Sales orders can be only imported from the Shopify store to  Acumatica ERPc . For each Shopify store integrated with  Acumatica ERPc , on the  Order Settings  tab of the  Shopify                       Stores  form, the administrative user configures an order type based on                     which orders imported from the Shopify store are to be created in the                     system. During the synchronization of orders, the information imported to  Acumatica ERPc  includes the following: Order summary and totals Order details Shipping and billing details Information about applied discounts Tax details Payment information Shipments Shipments are synchronized as part of the synchronization of the                        Shipment  entity. Shipments can be only exported from  Acumatica ERPc  to the Shopify store. When a shipment is synchronized, the information exported to the Shopify store                     includes the following: Shipping status Carrier Item details Tracking numbers For each box in the shipment, a separate fulfillment is created in the                       Shopify store. Payments Payments are synchronized either automatically with sales orders or as part of                     the synchronization of the  Payment  entity. Payments can only be imported from the Shopify store to  Acumatica ERPc . The administrative user maps payment methods from the Shopify store to payment                     methods from  Acumatica ERPc , selects payment methods for which payments should be imported to  Acumatica ERPc , and indicates whether the imported payments should be immediately                     released. ]]></column>
		</row>
		<row PageID="cac13d41-356c-46f3-9d3e-af8fabe35c43" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="205191cd-f2ae-ca47-1ee4-f333fc7851e1" RecordSourceID="22377">
			<column name="Content"><![CDATA[
The Shopify Connector, which has become available in Acumatica ERPc 2020 R2, supports the import of customer refunds that have been processed in the Shopify store.
==Configuration of the Import of Refunds in Acumatica ERPc==
To configure the import of refunds from the Shopify store to Acumatica ERPc, the user needs to perform the following general steps:[anchor|#_221b5a81-971b-406c-9327-baf2e1152553]
#On the '''Entity Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form, activate the ''Refunds'' entity.
#On the '''Order Settings''' tab (see the following screenshot), specify settings in the following boxes:
#*'''Return Order Type''': The order type, which has been created on the [HelpRoot_FormReference\SO_20_10_00|Order Types] ([~/?ScreenId=SO201000|SO201000]) form, that is assigned to return orders imported from the Shopify store. In this box, only order types based on the ''CR (Cash Return)'' order type template can be selected.
#*'''Refund Amount Item''': The non-stock item, which has been created on the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form, that is used to represent imported refund amounts in sales orders and in return orders. The non-stock item selected in this box is excluded from synchronization and is not exported when the ''Non-Stock Item'' entity is synchronized. The non-stock item representing refund amounts should be exempt from taxes.
#*'''Refund Reason Code''': The reason code, which has been created on the [HelpRoot_FormReference\CS_21_10_00|Reason Codes] ([~/?ScreenId=CS211000|CS211000]) form, to be inserted in return orders for refunds imported from the Shopify store. In this box, only reason codes of the ''Issue'' usage type can be selected.[anchor|#_9409e733-00ab-4c12-b4fc-39ccb14f3167][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Refunds_Configuration.png|popup|Refund import settings|400px]

==Import of Refunds==
Refunds are imported from the Shopify store to Acumatica ERPc as part of the synchronization of the ''Refunds'' entity, which can be synchronized only in the ''Import'' direction. During the preparation of refund data for synchronization, the system creates one synchronization record for all refunds that have been issued for a single sales order in the Shopify store.{br}

For a refund to be imported successfully, all of the following conditions must be met:[anchor|#_778c2a82-0b2e-48cd-bff3-f16919cd0f14]
*The original sales order has been synchronized.
*The original sales order must be either not shipped or shipped in full. If the sales order has been shipped partially, the refund will not be imported.
*The original payment to which the refund pertains has been imported and released.

For more information about the synchronization process, see [HelpRoot_Commerce\config_Shopify_Data_Sync_GeneralInfo|Data Synchronization: General Information]. The subsequent sections of this topics describe the results of the successful synchronization of various types of refunds.
==Refunds Without Returns==
A refund without any returned item is a refund that does not involve the return of a product. A refund of this type may be issued, for example, if a customer has not received the ordered items or has been charged more than expected.{br}

During the import of refunds on order amounts, if the original sales order has the ''Open'' or ''On Hold'' status, the following actions occur:[anchor|#_e9c8da76-9161-40f8-94ad-5afb73537e9e]
*On the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, the system creates a payment of the ''Customer Refund'' type in the refunded amount and applies it to the original payment.
*In the original sales order, on the '''Document Details''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form (see the following screenshot), the system inserts a line for the non-stock item that was specified in the '''Refund Amount Item''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form. In the '''Unit Price''' and '''Ext. Price''' columns, the system inserts the reversed refund amount (that is, the amount with the minus sign). In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. 
[anchor|#_0dc8d145-914c-437a-a0ec-6523cbe0c1a5][anchor|#_94da7679-2458-4a53-8c91-23481604197e][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Shopify_Refunds_Refund_Amount_Item_in_SO.png|popup|The refund amount item in a sales order line|400px]
If the original sales order has the ''Completed'' status, the following actions are performed:[anchor|#_fc55b0cd-c37c-47b3-8b6a-acd0db5e3faa]
*On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, the system creates a return order of the type selected in the '''Return Order Type''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. In the '''External Reference''' box of the Summary area, the system inserts the identifier of the refund in the Shopify store.
*In the return order, on the '''Document Details''' tab, the system inserts a line with the non-stock item that was specified in the '''Refund Amount Item''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. In the '''Unit Price''' and '''Ext. Price''' columns, the system inserts the refund amount (with the plus sign). In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. 

If the original sales order has a status other than ''Open'', ''On Hold'' or ''Completed'', the system displays an error message saying that the refund cannot be applied.
==Refunds for Item Returns==
A refund for the returned item is a refund that involves the return of a product. A refund of this type may be issued if, for example, a customer wants to amend the order to decrease the quantity of a purchased item or because he or she wants to return the item whose condition or performance is unsatisfactory.{br}

During the import of refunds on item returns, if the original sales order has the ''Open'' or ''On Hold'' status, the following actions occur:[anchor|#_5b2b60a9-5d99-461b-be5a-a09c587d6b00]
*On the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, the system creates a payment of the ''Customer Refund'' type in the refunded amount and applies it to the original payment.
*In the original sales order, on the '''Document Details''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, the system updates the order line or lines to decrease the item quantities. Discounts and taxes, if applied, are recalculated accordingly.

If the original sales order has the ''Completed'' status, the following actions occur:[anchor|#_830725d3-12f1-48e4-8b3c-fc2a550cd3ce]
*On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, the system creates a return order of the type that was specified in the '''Return Order Type''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. In the '''External Reference''' box of the Summary area, the system inserts the identifier of the refund in the Shopify store.
*In the return order, on the '''Document Details''' tab, the system inserts a line with the applicable quantity of the returned item. In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. 

If the original sales order has a status other than ''Open'', ''On Hold'', or ''Completed'', the system displays an error message saying that the refund cannot be applied.
==Combined Refunds==
A ''combined refund'' is a refund that involves both the return of a product and a partial refund of the order amount.{br}

During the import of combined refunds, if the original sales order has the ''Open'' or ''On Hold'' status, the following actions occur:[anchor|#_cdeb1904-aa9e-484e-8510-65622834670e]
*On the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, the system creates a payment of the ''Customer Refund'' type in the refunded amount and applies it to the original payment.
*In the original sales order, on the '''Document Details''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, the system updates the order line or lines to decrease the item quantities. Discounts and taxes, if applied, are recalculated accordingly.
*In the original sales order, on the '''Document Details''' tab, the system inserts a line for the non-stock item that was specified in the '''Refund Amount Item''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] ([~/?ScreenId=BC201010|BC201010]) form. In the '''Unit Price''' and '''Ext. Price''' columns, the system inserts the reversed refund amount (that is, the refund amount with the minus sign). In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. 

If the original sales order has the ''Completed'' status:[anchor|#_22809d75-123e-4a05-9d56-37f8fbd9b2de]
*On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, the system creates a return order of the type that was specified in the '''Return Order Type''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. In the '''External Reference''' box of the Summary area, the system inserts the identifier of the refund in the Shopify store.
*In the return order, on the '''Document Details''' tab, the system inserts a line with the applicable quantity of the returned item. In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. 
*In the return order, on the '''Document Details''' tab, the system inserts a line with the non-stock item that was specified in the '''Refund Amount Item''' box on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form. In the '''Unit Price''' and '''Ext. Price''' columns, the system inserts the refund amount (with the plus sign). In the '''Reason Code''' column, the system inserts the reason code that was specified on the '''Order Settings''' tab of the [HelpRoot_Commerce\BC_20_10_10|Shopify Stores] form.

If the original sales order has a status other than ''Open'', ''On Hold'', or ''Completed'', the system displays an error message saying that the refund cannot be applied.
==Notes==
When a user imports refunds from the Shopify store to Acumatica ERPc, the user should keep in mind the following information:[anchor|#_152854e2-fcbf-4217-b154-b446f0b3068f]
*If a refund is created for an order in the Shopify store before the sales order is synchronized, when the ''Sales Order'' entity is synchronized, the refunded or partially refunded sales order is imported with the amount that reflects the refund. In this case, no ''Customer Refund'' document is created on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.
*If a refund has been imported for a sales order and a ''Customer Refund'' document has been created for it on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form, a second refund for the same sales order can be imported only after the ''Customer Refund'' document is released.
*A ''Customer Refund'' document is created on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form for each refunded payment. If the original sales order had two payments (for example, if the customer redeemed a gift card for part of the order amount and paid the rest with a credit card) and then two refunds were created (one for each of these payment methods), after the ''Refund'' entity is synchronized, two ''Customer Refund'' documents are created in Acumatica ERPc.
]]></column>
			<column name="PlainText"><![CDATA[Commerce :     Import of Refunds from Shopify The Shopify Connector, which has become available in  Acumatica ERPc  2020 R2, supports the import of customer refunds that have been processed in the Shopify         store. Configuration of the Import of Refunds in  Acumatica ERPc To configure the import of refunds from the Shopify store to  Acumatica ERPc , the user needs to perform the following general steps: On the  Entity Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form, activate the  Refunds            entity. On the  Order Settings  tab            (see the following           screenshot) , specify settings in the following boxes: Return Order Type : The order type, which has been created on               the   ([~/?ScreenId=SO201000|SO201000]) Order Types (SO201000) form, that is assigned to               return orders imported from the Shopify store. In this box, only order types based on               the  CR (Cash Return)  order type template can be selected. Refund Amount Item : The non-stock item, which has been               created on the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form, that is               used to represent imported refund amounts in sales orders and in return orders. The               non-stock item selected in this box is excluded from synchronization and is not               exported when the  Non-Stock Item  entity is synchronized. The non-stock item               representing refund amounts should be exempt from taxes. Refund Reason Code : The reason code, which has been created               on the   ([~/?ScreenId=CS211000|CS211000]) Reason Codes (CS211000) form, to be inserted in               return orders for refunds imported from the Shopify store. In this box, only reason               codes of the                  Issue                usage type can be selected. Refund import settings Import of Refunds Refunds are imported from the Shopify store to  Acumatica ERPc  as part of the synchronization of the            Refunds          entity, which can be synchronized only in the  Import  direction. During the         preparation of refund data for synchronization, the system creates one synchronization         record for all refunds that have been issued for a single sales order in the Shopify         store. For a refund to be imported successfully, all of the following conditions must be met: The original sales order has been synchronized. The original sales order must be either not shipped or shipped in full. If the sales           order has been shipped partially, the refund will not be imported. The original payment            to           which the refund pertains  has been imported           and released. For more information about the synchronization process, see  Data Synchronization: General Information. The subsequent sections         of this topics describe the results of the successful synchronization of various types of         refunds. Refunds Without Returns A refund without any returned item is a refund that does not involve the return of a         product. A refund of this type may be issued, for example, if a customer has not received         the ordered items or has been charged more than expected. During the import of refunds on order amounts, if the original sales order has the            Open  or  On Hold  status, the following actions occur: On the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, the system creates           a payment of the  Customer Refund  type in the refunded amount and applies it to the           original payment. In the original sales order, on the  Document Details  tab of the               ([~/?ScreenId=SO301000|SO301000]) Sales Orders           form  (see the following           screenshot) , the system inserts a line for the non-stock item that was           specified in the  Refund Amount Item  box on the  Order             Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010)           form. In the  Unit Price  and  Ext. Price            columns, the system inserts the reversed refund amount (that is, the amount with the minus           sign). In the  Reason Code  column, the system inserts the reason           code that was specified on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.  The refund amount item in a sales order line I f         the original sales order has the          Completed          status, the following actions are performed: On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, the system creates a return           order of the type selected in the  Return Order Type  box on the              Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.            In           the  External Reference  box of the Summary area, the system inserts           the identifier of the refund in the Shopify store. In the return order, on the  Document Details  tab, the system           inserts a line with the non-stock item that was specified in the  Refund Amount             Item  box on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. In the  Unit Price            and  Ext. Price  columns, the system inserts the refund amount (with           the plus sign). In the  Reason Code  column, the system inserts the           reason code that was specified on the  Order Settings  tab of the               ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.  I f         the original sales order has a status other than  Open ,  On Hold  or            Completed ,         the system displays an error message saying that the refund cannot be applied. Refunds for Item Returns A refund for the returned item is a refund that involves the return of a product. A refund         of this type may be issued if, for example, a customer wants to amend the order to decrease         the quantity of a purchased item or because he or she wants to return the item whose         condition or performance is unsatisfactory. During the import of refunds on item returns, if the original sales order has the            Open  or  On Hold  status, the following actions occur: On the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, the system creates           a payment of the  Customer Refund  type in the refunded amount and applies it to the           original payment. In the original sales order, on the  Document Details  tab of the               ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, the system updates the order line or           lines to decrease the item quantities. Discounts and taxes, if applied, are recalculated           accordingly. I f         the original sales order has the          Completed          status, the following actions occur: On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, the system creates a return           order of the type that was specified in the  Return Order Type  box           on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.            In           the  External Reference  box of the Summary area, the system inserts           the identifier of the refund in the Shopify store. In the return order, on the  Document Details  tab, the system           inserts a line with the applicable quantity of the returned item. In the  Reason             Code  column, the system inserts the reason code that was specified on the              Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.  If the original sales order has a status other than  Open ,  On Hold , or            Completed ,         the system displays an error message saying that the refund cannot be applied. Combined Refunds A  combined refund  is a refund that involves both the return of a product and a         partial refund of the order amount. During the import of combined refunds, if the original sales order has the  Open  or            On Hold  status, the following actions occur: On the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, the system creates           a payment of the  Customer Refund  type in the refunded amount and applies it to the           original payment. In the original sales order, on the  Document Details  tab of the               ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, the system updates the order line or           lines to decrease the item quantities. Discounts and taxes, if applied, are recalculated           accordingly. In the original sales order, on the  Document Details  tab, the           system inserts a line for the non-stock item that was specified in the  Refund             Amount Item  box on the  Order Settings  tab of the               ([~/?ScreenId=BC201010|BC201010]) Shopify Stores (BC201010) form. In the  Unit             Price  and  Ext. Price  columns, the system inserts the           reversed refund amount (that is, the refund amount with the minus sign). In the              Reason Code  column, the system inserts the reason code that was           specified on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.  If the original sales order has the  Completed  status: On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, the system creates a return           order of the type that was specified in the  Return Order Type  box           on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. In the  External             Reference  box of the Summary area, the system inserts the identifier of the           refund in the Shopify store. In the return order, on the  Document Details  tab, the system           inserts a line with the applicable quantity of the returned item. In the  Reason             Code  column, the system inserts the reason code that was specified on the              Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form.  In the return order, on the  Document Details  tab, the system           inserts a line with the non-stock item that was specified in the  Refund Amount             Item  box on the  Order Settings  tab of the   ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. In the  Unit Price            and  Ext. Price  columns, the system inserts the refund amount (with           the plus sign). In the  Reason Code  column, the system inserts the           reason code that was specified on the  Order Settings  tab of the               ([~/?ScreenId=BC201010|BC201010]) Shopify Stores form. If the original sales order has a status other than  Open ,  On Hold , or            Completed ,         the system displays an error message saying that the refund cannot be applied. Notes When a user imports refunds from the Shopify store to  Acumatica ERPc , the user should keep in mind the following information: If a refund is created for an order in the Shopify store before the sales order is           synchronized, when the  Sales Order  entity is synchronized, the refunded or           partially refunded sales order is imported with the amount that reflects the refund. In           this case, no  Customer Refund  document is created on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. If a refund has been imported for a sales order and a  Customer Refund  document           has been created for it on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form, a second           refund for the same sales order can be imported only after the  Customer Refund            document is released. A  Customer Refund  document is created on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form for each refunded payment. If the original           sales order had two payments (for example, if the customer redeemed a gift card for part           of the order amount and paid the rest with a credit card) and then two refunds were           created (one for each of these payment methods), after the  Refund  entity is           synchronized, two  Customer Refund  documents are created in  Acumatica ERPc . ]]></column>
		</row>
		<row PageID="e2a053b5-fd0f-4cb4-bc2a-0d576f52b998" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="69f700da-fc89-d5fd-c5b5-bd67d868cb16" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a number of improvements have been made related to the import of payments based on credit card payment methods.{br}

In some cases, online shoppers might want to save their credit card data for future purchases. Acumatica ERP now supports the creation of customer payment methods based on payments associated with credit card payment methods that have been used for a purchase in a BigCommerce store and imported to Acumatica ERP.
==Configuration of the Creation of Customer Payment Methods==
To configure the ability to save credit cards used by a customer for purchase in the BigCommerce store, the user should perform the following general steps:[anchor|#_8b6d7b2d-7af4-47f9-9def-5f501d3834b5]
#In the admin panel of the BigCommerce store, on the '''Payment Methods''' page, which opens when a user clicks '''Store Setup''' > ''' Payments''' in the left menu,configure the ''Authorize.Net'' payment option, and switch on the '''Enable stored credit cards with Authorize.net''' toggle.
#:In the admin panel of the BigCommerce store, on the '''Authorize.Net''' tab of the '''Payment Methods''' page, a user can select the operation that should be performed with the credit card when a customer places an order and pays with a credit card:
#*''Authorize Only'': The funds are reserved on the customer&rsquo;s credit card; a user can later capture funds on the '''View Orders''' page of the admin panel or in Acumatica ERP after the payment has been imported.
#*''Authorize & Capture'': The customer&rsquo;s credit card is immediately charged.
#On the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form, configure the processing center used in the BigCommerce store, and select the '''Allow Saving Payment Profiles''' check box.
#On the [HelpRoot_FormReference\CA_20_40_00|Payment Methods] ([~/?ScreenId=CA204000|CA204000]) form, create a payment method based on credit cards, and link it to the processing center configured in Step 2.
#On the '''Payment Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form, in the '''Base Currency Payment Methods''' table, map the ''Authorize.Net'' payment option to the payment method created in the previous step; in the '''Proc. Center ID''' column, select the processing center configured in Step 2.
#On the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, configure a customer class; in the '''Save Payment Profiles''' box, select ''Always'' or ''Upon Confirmation''. For information about these options, see [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_CC_Payments_Optional_Payment_Methods#_fb4e3beb-4a45-4b39-91a4-45305875a94c|Changes to the Customer Classes Form].
#On the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form, assign the customer to the class configured in Step 5.

==Import of Payments Based on Credit Cards==
A customer who has signed in to the BigCommerce store can save credit card details during checkout. When this customer selects the ''Authorize.Net'' payment method, enters the details of a new card, selects the '''Save this card for future transactions''' check box, and then places an order, the details of the credit card are saved in the processing center configured in the BigCommerce store.{br}

When the payment is imported from BigCommerce to Acumatica ERP (as part of the synchronization of the ''Sales Order'' entity or the ''Payment'' entity), on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, the system creates a document with the ''Prepayment'' type and the ''Pending Processing'' status. In the Summary area of the created document, the system inserts the following:[anchor|#_469f9cee-10fb-4b95-adb9-2bc1be6bbd16]
*'''Payment Method''': The payment method that has been mapped to the store payment method in the '''Base Currency Payment Methods''' table on the '''Payment Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] form
*'''Cash Account''': The cash account selected for the mapped payment method
*'''Payment Ref.''': The number of the related credit card transaction in the processing center
*'''Processing Status''': The processing status of the credit card transaction. Depending on the last successful operation with the transaction, the processing status can be one of the following:
**''Pre-Authorized'': The payment has been authorized but the funds have not been captured. The last successful operation was ''Authorize Only''.
**''Captured'': The funds have been captured. The last successful operation with the credit card transaction was either ''Authorize and Capture'' or ''Capture Authorized''.
**''Unknown'': The last successful operation with the credit card transaction is unknown. To get the correct processing status of the credit card transaction, a user can use the '''Validate CC Payment''' action on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form.

On the '''Credit Card Processing Info''' tab, the system creates a row for the last successful operation with the credit card transaction. In the '''PC Response Reason''' box, ''Imported External Transaction'' indicates that the information about the credit card transaction operation has been imported from the external e-commerce system. The transaction operation can have one of the following types:[anchor|#_65728120-9689-4ac7-9c64-43b11c724afe]
*''Authorize Only'': The payment was authorized when the order was placed but has not yet been captured.
*''Authorize and Capture'': The payment was captured when the order was placed.
*''Capture Authorized'': The payment was authorized when the order was placed, and then the funds were captured in the admin panel of the store.
*''Unknown'': The status of the operation with the credit card transaction is unknown.

==Deferred Processing of Imported Credit Card Payments==
Credit card transactions created in Acumatica ERP during the import of payments based on credit card payment methods require validation in any of the following cases:[anchor|#_c61572b7-7a9e-4b50-a7aa-6eff4675f363]
*If the customer used a previously saved credit card
*If the customer entered the details of a new card and selected the '''Save this card for future transactions''' check box during checkout
*If the last operation on the credit card transaction has the ''Unknown'' status
{br}

External credit card transactions that meet these conditions are displayed on the '''Deferred Processing Required''' tab of the [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] ([~/?ScreenId=AR513000|AR513000]) form with the '''Load Payment Profile''' check box selected (see the following screenshot).[anchor|#_d13789dc-6065-4e82-b59d-782f0cb44780][anchor|#_ddd16978-8ed7-46c2-bdd4-9b79ca0ac72f][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Enh_to_CC_Payments_Import_Deferred_Processing_Required.png|popup|The Deferred Processing Required tab|430px]
When the validation process is started, the system performs the following actions:[anchor|#_82e53e11-d065-49ae-a34c-7c9dfc16c330]
#On the [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] ([~/?ScreenId=AR303010|AR303010]) form, creates a customer payment method based on the payment profile from the processing center.
#Links the customer payment method to the credit card transaction.
#Links the customer payment method to the imported payment.
#Requests the status of the credit card transaction, and updates the processing status of the transaction and the status of the prepayment, if necessary.
#:If the updated processing status of the transaction is ''Captured'', the status of the prepayment changes to ''Balanced''. If on the '''General Settings''' tab of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] form, the '''Enable Integrated CC Processing''' check box is selected, the system releases the prepayment.

Customizations may support forced validation of all imported credit card transactions. In this case, credit card transactions imported from external systems will be displayed on the '''Deferred Processing Required''' tab of the [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] form and will need to be validated.
==Changes in the Payment Option Mapping==
On the '''Payment Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form, the '''Base Currency Payment Methods''' table now includes the '''Proc. Center ID''' column (as you can see in the following screenshot). For payment methods based on credit cards, if a default processing center has been specified for the payment method—that is, if the '''Default''' check box is selected for the processing center on the '''Processing Centers''' tab of the [HelpRoot_FormReference\CA_20_40_00|Payment Methods] ([~/?ScreenId=CA204000|CA204000]) form—the system automatically inserts the default processing center in this column. If no processing center has been specified as the default for a payment method based on credit cards, the user needs to manually select a processing center in this column.[anchor|#_0eed3547-0376-4272-b4d0-fd04f25f5858][anchor|#_6ba8de66-14d2-4919-8961-6725f0d23128][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Enh_to_CC_Payments_Import_Proc_Center_ID.png|popup|The new Processing Center ID column|380px]
For payment options based on credit cards, the '''Release Payments''' check box is always cleared and not available for editing. Users must release payments based on credit cards manually or by using the [HelpRoot_FormReference\AR_50_10_00|Release AR Documents] ([~/?ScreenId=AR501000|AR501000]) form.]]></column>
			<column name="PlainText"><![CDATA[Commerce: Enhancements to the Import of Credit Card Payments In  Acumatica ERP 2020 R2, a number of improvements have been made related to the import of payments based on         credit card payment methods. In some cases, online shoppers might want to save their credit card data for future         purchases.  Acumatica ERP now supports the creation of customer payment methods based on payments associated with         credit card payment methods that have been used for a purchase in a BigCommerce store and         imported to  Acumatica ERP. Configuration of the Creation of Customer Payment Methods To configure the ability to save credit cards used by a customer for purchase in the         BigCommerce store, the          user          should perform the following general steps: In the admin panel of the BigCommerce store, on the  Payment             Methods  page,            which           opens when a user clicks  Store Setup  Payments  in the left menu, configure           the  Authorize.Net  payment option, and switch on the  Enable stored credit             cards with Authorize.net              toggle. In the admin panel of the             BigCommerce store, on the  Authorize.Net  tab of the                Payment Methods  page, a user can select the operation that             should be performed with the credit card when a customer places an order and pays with a             credit card: Authorize Only : The funds are reserved on the customer's credit card; a user               can later capture funds on the  View Orders  page of the admin               panel or in  Acumatica ERP after the payment has been imported. Authorize & Capture : The customer's credit card is immediately               charged. On the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form,            configure           the processing center used in the BigCommerce store, and select the  Allow             Saving Payment Profiles  check           box. On the   ([~/?ScreenId=CA204000|CA204000]) Payment Methods (CA204000) form, create a payment           method based on credit cards, and link it to the processing center configured in Step           2. On the  Payment Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) form, in the  Base Currency             Payment Methods  table, map the  Authorize.Net  payment option to the           payment method created in the previous step; in the  Proc. Center ID            column, select the processing center configured in Step 2. On the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, configure a           customer class; in the  Save Payment Profiles  box, select              Always  or  Upon Confirmation . For information about these options, see              Changes to the Customer Classes Form. On the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form, assign the customer           to the class configured in Step 5. Import of Payments Based on Credit Cards A customer who has signed in to the BigCommerce store can save credit card details during         checkout. When this customer selects the  Authorize.Net  payment method, enters the         details of a new card, selects the  Save this card for future           transactions  check box, and then places an order, the details of the credit         card are saved in the processing center configured in the BigCommerce store. When the payment is imported from BigCommerce to  Acumatica ERP (as part of the synchronization of the  Sales Order  entity or the  Payment          entity), on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, the system         creates a document with the  Prepayment  type and the  Pending Processing  status.         In the Summary area of the created document, the system inserts the following: Payment Method : The payment method that has been mapped to the           store payment method in the  Base Currency Payment Methods  table on           the  Payment Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores form Cash Account : The cash account selected for the mapped payment           method Payment Ref. : The number of the related credit card transaction           in the processing center Processing Status : The processing status of the credit card           transaction. Depending on the last successful operation with the transaction, the           processing status can be one of the following: Pre-Authorized : The payment has been authorized but the funds have not been               captured. The last successful operation was  Authorize Only . Captured : The funds have been captured. The last successful operation with               the credit card transaction was either  Authorize and Capture  or  Capture                 Authorized . Unknown : The last successful operation with the credit card transaction is               unknown. To get the correct processing status of the credit card transaction, a user               can use the  Validate CC Payment  action on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form. On the  Credit Card Processing Info  tab, the system creates a row for         the last successful operation with the credit card transaction. In the  PC           Response Reason  box,  Imported External Transaction  indicates that the         information about the credit card transaction operation has been imported from the external         e-commerce system. The transaction operation can have one of the following types: Authorize Only : The payment was authorized when the order was placed but has not           yet been captured. Authorize and Capture : The payment was captured when the order was placed. Capture Authorized : The payment was authorized when the order was placed, and           then the funds were captured in the admin panel of the store. Unknown : The status of the operation with the credit card transaction is           unknown. Deferred Processing of Imported Credit Card Payments Credit card transactions created in  Acumatica ERP during the import of payments based on credit card payment methods require validation in         any of the following cases: If the customer used a previously saved credit card If the customer entered the details of a new card and selected the  Save               this card for future transactions  check box during checkout If the last operation on the credit card transaction has the  Unknown              status External credit card transactions that meet these conditions are displayed on the            Deferred Processing Required  tab of the   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions (AR513000) form with the  Load Payment           Profile  check box selected (see the following screenshot). The Deferred Processing Required tab When the validation process is started, the system performs the following actions: On the   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods (AR303010) form, creates a customer           payment method based on the payment profile from the processing center. Links the customer payment method to the credit card transaction. Links the customer payment method to the imported payment. Requests the status of the credit card transaction, and updates the processing status of           the transaction and the status of the prepayment, if necessary. If the updated             processing status of the transaction is  Captured , the status of the prepayment             changes to  Balanced . If on the  General Settings  tab of the                 ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences form, the  Enable Integrated CC               Processing  check box is selected, the system releases the           prepayment. Customizations          may support forced validation of all imported credit card transactions. In this case, credit         card transactions imported from external systems will be displayed on the            Deferred Processing Required  tab of the   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions form and will need to be validated. Changes in the Payment Option Mapping On the  Payment Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) form, the  Base Currency           Payment Methods  table now includes the  Proc. Center ID          column  (as you can see in         the following screenshot) . For payment methods based on credit cards, if a         default processing center has been specified for the payment method—that is, if the            Default  check box is selected for the processing center on the            Processing Centers  tab of the   ([~/?ScreenId=CA204000|CA204000]) Payment Methods (CA204000) form—the system automatically inserts         the default processing center in this column. If no processing center has been specified as         the default for a payment method based on credit cards, the user needs to manually select a         processing center in this column. The new Processing Center ID column For payment options based on credit cards, the  Release Payments          check box is always cleared and not available for editing. Users must release payments based         on credit cards manually or by using the   ([~/?ScreenId=AR501000|AR501000]) Release AR Documents         (AR501000) form. ]]></column>
		</row>
		<row PageID="c6aa194b-61c2-47e8-80a3-61f1f9a7d331" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="610073ba-90c2-5f50-58a3-4aa7485da272" RecordSourceID="22377">
			<column name="Content"><![CDATA[
For each stock and non-stock item in Acumatica ERP, an organization can maintain a list of related items that shoppers might be interested in buying in addition to or instead of the original item. These items might include items complementary to the original item (for example, a cover case or a mouse may be offered to the customer when a laptop is purchased), additional services (such as, assembly services for sold furniture), items that are purchased by other shoppers with similar buying habits, and higher-priced variants of the original item. Offering related items to customers can help the organization increase the value of each sale and capitalize on sales to existing customers. Starting in Acumatica ERP 2020 R2, the BigCommerce Connector supports the export of related items to the BigCommerce store connected to the Acumatica ERP instance.
==Configuration of Related Items in Acumatica ERP==
A user can create or update the list of related items for a stock item on the '''Related Items''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form and for a non-stock item on the same tab of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form. The tab (which is shown in the following screenshot below) is displayed if the ''Commerce Integration'' group of features and the ''BigCommerce Connector'' feature are enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.[anchor|#_28e7b9c1-98bb-4bc5-b043-9b090aaadb4e][anchor|#_3df3ab1c-18cb-4f97-b388-9cd2aaec64b8][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Related_Items_Tab.png|popup|The Related Items tab of the Stock Items form|450px]
For each related item added to the '''Related Items''' tab, the user should specify the appropriate settings in the following columns:[anchor|#_118e070f-aaae-4fe8-a6de-f29a1bb64b47]
*'''Relation''': The relation to the original item, which can be one of the following options (this list can be extended through customization):
**''Cross-Sell'': An additional item that can be sold along with the original item (the item selected in the Summary area of the form)
**''Up-Sell'': A more expensive version of the original item
**''Related'': An item with a non-specific relation
**''Substitute'': A substitute item (that is, an item that is the same as or similar to the original item and that can be bought instead of the original item)
**''Alternative'': An alternative item (that is, an item that might be different from the original item but serves the same purpose as the original item)
*'''Rank''': The rank of the item, which is the order in which the item in the row is displayed among the items with the same type of relation (as specified in the '''Relation''' column) on the e-commerce website.
*'''Tag''': An additional characteristic of the related item. The list of options a user can select, which can be extended through customization, includes the following:
**''Complementary Items'': This item is among the items that are used in conjunction with the original item and that add value to the original item.
**''Items of Interest'': This item is one of the items that might be interesting to the customer, based on the history of purchases.
**''Other Users Bought'': This is one of the items that other users with similar buying habits usually purchase in addition to the original item.
**''Essential Related Products'': This item is required for the original item to be used or to work properly. 
**''Services'': This item is among the services—such as support, consulting, and installation—that can be purchased with the original item.
**''Premium'': This item is a premium version of the original item.
**''Customization'': This item is a modified version of the original item.
**''Options'': This item represents one of the optional features that are available for the original item.
**''Promotional'': This item is among the items that are currently on sale or being promoted.
**''Popular'': This is one of the items that are popular with other shoppers.
**''Seasonal'': This item is part of a seasonal promotional campaign.
**''Related'': This item has a non-specific relation to the original item.
**''Substitute'': This is a substitute item for the original item (that is, items that are the same as or similar to the original item and that can be bought instead of the original item).
**''Alternative'': This item is an alternative item for the original item (that is, different items that might be different from the original item but serve the same purpose as the original item).
*'''Inventory ID''': The identifier of the related stock or non-stock item.
*'''UOM''': The unit of measure of the related item.
*'''Effective Date''' and '''Expiration Date''': The start date and end date, respectively, of the period when the relation is effective.
*'''Active''': A check box the user selects to activate (and clears to deactivate) the original item’s relation with the item in this row.

Users can export all related items displayed in the table to an Excel spreadsheet and mass-import related items in bulk from an Excel spreadsheet.
==Export of Related Items to the BigCommerce Store==
If the ''BigCommerce Connector'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and the integration between the Acumatica ERP instance and the BigCommerce store has been configured, users can export stock and non-stock items from Acumatica ERP to the BigCommerce store along with the list of related items that have been defined for each item.{br}

During the initial configuration of a BigCommerce store, on the '''Inventory Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form, the administrative user can select the types of related items whose information needs to be exported to the BigCommerce store during the synchronization of stock items and non-stock items. On the '''Inventory Settings''' tab, in the '''Related Items''' box, the user can select the check box for any or all of the following options (which are shown in the following screenshot):[anchor|#_b63a4851-2606-49c8-9846-b17f95b0765a]
*''Cross-Sell''
* ''Related''
* ''Up-Sell''
[anchor|#_010f75c8-0164-42c4-858f-ce85a59758e6][anchor|#_337eb57c-c908-4258-bc9d-ca606461490b][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Related_Items_BCStores.png|popup|The Related Items box on the Inventory Settings tab|450px]
By default, none of these options is selected, and during the synchronization of stock items and non-stock items with the BigCommerce store, information about related items is not exported to the BigCommerce store, even if the item relations have been specified in Acumatica ERP. If an option is selected in this box and any related items are specified for the original stock item or non-stock item with a relation that corresponds to the selected option, the information about the related item is exported to the BigCommerce store when the original item is exported.((({S:Warn}Information about the related items is exported to the BigCommerce store only if all of the following conditions are met:[anchor|#_8271e4d0-92c5-463a-8dcc-d14b42c4f71e]
*The relation of the related item to the original item is ''Cross-Sell'', ''Up-Sell'', or ''Related''.
*The relation of the related item to the original item is effective on the date of the synchronization.
*The related item itself exists in (or has been exported to) the BigCommerce store.
)))
After the original item has been exported to the BigCommerce store, all its related items are listed in the '''Related Products''' section of the product management page. When a shopper browses products on the storefront, they can see the list of related products for a particular product at the bottom of the product listing page.]]></column>
			<column name="PlainText"><![CDATA[Commerce: Export of Information about Related Items to BigCommerce For each stock and non-stock item in  Acumatica ERP, an organization can maintain a list of related items that shoppers might be interested         in buying in addition to or instead of the original item. These items might include items         complementary to the original item (for example, a cover case or a mouse may be offered to         the customer when a laptop is purchased), additional services (such as, assembly services         for sold furniture), items that are purchased by other shoppers with similar buying habits,         and higher-priced variants of the original item. Offering related items to customers can         help the organization increase the value of each sale and capitalize on sales to existing         customers. Starting in  Acumatica ERP 2020 R2, the BigCommerce Connector supports the export of related items to the BigCommerce store         connected to the  Acumatica ERP instance. Configuration of Related Items in  Acumatica ERPA user can create or update the list of related items for a stock item on the            Related Items  tab of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500) form and for a non-stock item on the same tab of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form. The tab (which is shown in the         following screenshot below) is displayed if the  Commerce Integration  group of         features and the  BigCommerce Connector  feature are enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. The Related Items tab of the Stock Items form For each related item added to the  Related Items  tab, the user         should specify the appropriate settings in the following columns: Relation :           The relation to the original item, which can be one of the following options (this list           can be extended through customization): Cross-Sell : An additional item that can be sold along with the original item               (the item selected in the Summary area of the form) Up-Sell : A more expensive version of the original item Related : An item with a non-specific relation Substitute : A substitute item                (that is, an item               that is the same as or similar to the original item and that can be bought instead of               the original item) Alternative : An alternative item                (that is, an item               that might be different from the original item but serves the same purpose as the               original item) Rank : The rank of the item, which is the order in which the item           in the row is displayed among the items with the same type of relation (as specified in           the  Relation  column) on the e-commerce website. Tag : An additional characteristic of the related item. The list           of options a user can select, which can be extended through customization, includes the             following: Complementary Items : This item is among the items that are used in               conjunction with the original item and that add value to the original item. Items of Interest : This item                is               one of the                i tems               that might be interesting to the customer, based on the history of               purchases . Other Users Bought : This is one of the items that other users with similar               buying habits usually purchase in addition to the original item. Essential Related Products : This item is required for the original item to be               used or to work properly.  Services : This item is among the services—such as support, consulting, and               installation—that can be purchased with the original item. Premium : This item is a premium version of the original item. Customization : This item is a modified version of the original item. Options : This item represents one of the optional features that are available               for the original item. Promotional : This item is among the items that are currently on sale or being               promoted. Popular : This is one of the items that are popular with other shoppers. Seasonal : This item is part of a seasonal promotional campaign. Related : This item has a non-specific relation to the original item. Substitute : This is a substitute item for the original item                (that is, items               that are the same as or similar to the original item and that can be bought instead of               the original item) . Alternative : This item is an alternative item for the original item                (that is, different               items that might be different from the original item but serve the same purpose as the               original item) . Inventory ID : The identifier of the related stock or non-stock           item. UOM : The unit of measure of the related item. Effective Date  and  Expiration Date : The           start date and end date, respectively, of the period when the relation is effective. Active : A check box the user selects to activate (and clears to           deactivate) the original item’s relation with the item in this row. Users can export all related items displayed in the table to an Excel spreadsheet and         mass-import related items in bulk from an Excel spreadsheet. Export of Related Items to the BigCommerce Store If the  BigCommerce Connector  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and the integration between the  Acumatica ERP instance and the BigCommerce store has been configured, users can export stock and         non-stock items from  Acumatica ERP to the BigCommerce store along with the list of related items that have been defined for         each item. During the initial configuration of a BigCommerce store, on the  Inventory           Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000)         form, the administrative user can select the types of related items whose information needs         to be exported to the BigCommerce store during the synchronization of stock items and         non-stock items. On the  Inventory Settings  tab, in the            Related Items  box, the user can select the check box for any or all         of the following options (which are shown in the following screenshot): Cross-Sell Related Up-Sell The Related Items box on the Inventory Settings tab By default, none of these options is selected, and during the synchronization of stock         items and non-stock items with the BigCommerce store, information about related items is not         exported to the BigCommerce store, even if the item relations have been specified in  Acumatica ERP. If an option is selected in this box and any related items are specified for the         original stock item or non-stock item with a relation that corresponds to the selected         option, the information about the related item is exported to the BigCommerce store when the         original item is exported. Information about the related items is exported to the BigCommerce store only if all of         the following conditions are met: The relation of the related item to the original item is  Cross-Sell ,                Up-Sell , or  Related . The relation of the related item to the original item is effective on the date of the             synchronization. The related item itself exists in (or has been exported to) the BigCommerce             store. After the original item has been exported to the BigCommerce store, all its related items         are listed in the  Related Products  section of the product management         page. When a shopper browses products on the storefront, they can see the list of related         products for a particular product at the bottom of the product listing page. ]]></column>
		</row>
		<row PageID="72e3d443-4eea-44dc-832a-258852998eff" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="fcdb2168-493d-8a8a-83c8-72946408aa8b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERPc 2020 R2, administrators can track the status of Commerce Edition push notifications and manage the Commerce processing queue.{br}

Commerce Edition push notifications are activated when real-time synchronization is enabled for an entity on the [HelpRoot_Commerce\BC_20_20_00|Entities] ([~/?ScreenId=BC202000|BC202000]) form. When an entity for which real-time synchronization is enabled is changed in Acumatica ERPc, the corresponding push notification is added to the commerce queue and then processed. The system starts processing the queue with the delay, which is 20 seconds by default, determined by the value of the {{CommerceRealtimeDelay}} key in the {{<appSettings>}} section of the <tt>web.config</tt> file. During the delay, the duplicate notifications (which might be created, for example, if the document is updated multiple times during the processing) are merged, which reduces the number of required synchronizations.
==Commerce Queue Status==
In the new '''Commerce Queue''' section of the [HelpRoot_FormReference\SM_30_20_10|System Queues Monitor] ([~/?ScreenId=SM302010|SM302010]) form, which is displayed in the following screenshot, the following information about the commerce queue is displayed:[anchor|#_28123905-7644-4ee6-8470-d7ce55b6edd0]
*In the '''Queue Name''' box, the name of the queue generated by the Microsoft Message Queuing (MSMQ) service
*In the '''Status''' box, the processing status of the queue, which can be ''OK'' or ''Invalid''
*In the '''Processing Performance''' box, the status of the processing performance status of the queue
*In the '''Messages''' box, the current number of messages in the queue
[anchor|#_9a862bb8-62e5-4912-bbff-f3da759325c9][anchor|#_28eb1729-f1dd-4420-ab42-90221f98c73a][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Queues_Section.png|popup|The Commerce Queue section on the System Queues Monitor form|450px]
==Commerce Queue Management==
In the '''Commerce Queue''' section of the [HelpRoot_FormReference\SM_30_20_10|System Queues Monitor] ([~/?ScreenId=SM302010|SM302010]) form, an administrative user can perform the following operations (see the following screenshot):[anchor|#_f8f28cf0-5790-46a8-9a5f-4a914354ef1a]
*Clear the commerce queue by clicking '''Clear Queue'''
*Restart the services that are processing the messages in the commerce queue by clicking '''Restart Dispatcher'''
[anchor|#_ba28ce60-2695-4750-a1de-4fa34c8012a2][anchor|#_5b68fbb5-e32e-45ae-bef2-184ce6c7860c][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Queues_Buttons.png|popup|Actions that can be performed on the commerce queue|450px]
==Commerce Queue Settings==
An administrative user can specify the processing settings for the commerce queue in the '''Commerce Queue''' section of the '''Settings''' tab of the [HelpRoot_FormReference\SM_30_20_10|System Queues Monitor] ([~/?ScreenId=SM302010|SM302010]) form, as shown in the following screenshot.{br}

In the '''Processing Time Threshold (s)''' box, the user can specify the time period in seconds which is considered acceptable for processing a message in the queue. By default the processing time threshold is set to 30 seconds.{br}

In the '''Number of Records in Detailed Log''' box, the user can specify the number of events to be logged during the processing of a transaction. By default, this value is ''100''.[anchor|#_3d0bf7f7-8d3a-4b8b-acc3-19f8e53c7dc7][anchor|#_ceadd2df-2ba2-42df-b341-68a250425d1c][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Queues_Settings.png|popup|The Commerce Queue section of the Settings tab|450px]
If the processing of a message takes more time than the specified processing time threshold, the system displays an error message in the '''Processing Performance''' box in the '''Commerce Queue''' section in the Summary area of the form, as shown in the following screenshot.[anchor|#_fc949a2c-8273-4d5a-98aa-24d6aac82eba][anchor|#_5a99a80f-c4ca-4798-9082-0a039462b5fd][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Queues_Error.png|popup|The error that is displayed when the processing threshold is exceeded|450px]
In addition, the '''View Details''' button right of the '''Processing Performance''' box becomes available. The user can click this button to open the '''Commerce Processing Log''' dialog box (see the following screenshot) and review the detailed log.[anchor|#_325b984e-66a6-4c9b-a0e3-6958ed8eb6c3][anchor|#_8ac0de4b-6b68-4891-b8be-be11edba22a3][image:ReleaseNotes/Images/RN_2020_R2_Commerce_Queues_Processing_Log.png|popup|Commerce Processing Log dialog box|350px]]]></column>
			<column name="PlainText"><![CDATA[Commerce: Managing Commerce Processing Queue In  Acumatica ERPc  2020 R2, administrators can track the status of Commerce Edition push notifications and manage         the Commerce processing queue. Commerce Edition push notifications are activated when real-time synchronization is enabled         for an entity on the             ([~/?ScreenId=BC202000|BC202000]) Entities(BC202000)          form. When an entity for which real-time synchronization is enabled is         changed in  Acumatica ERPc , the corresponding push notification is added to the commerce queue and then         processed. The system starts processing the queue with the delay, which is 20 seconds by         default, determined by the value of the  CommerceRealtimeDelay  key in the            <appSettings>  section of the  web.config  file.         During the delay, the duplicate notifications (which might be created, for example, if the         document is updated multiple times during the processing) are merged, which reduces the         number of required synchronizations. Commerce Queue Status In the new  Commerce Queue  section of the   ([~/?ScreenId=SM302010|SM302010]) System Queues Monitor (SM302010) form, which is displayed in the         following screenshot, the following information about the commerce queue is displayed: In the  Queue Name  box, the name of the queue generated by the           Microsoft Message Queuing (MSMQ) service In the  Status  box, the processing status of the queue, which can           be  OK  or  Invalid In the  Processing Performance  box, the status of the processing           performance status of the queue In the  Messages  box, the current number of messages in the           queue The Commerce Queue section on the System Queues Monitor form Commerce Queue Management In the  Commerce Queue  section of the   ([~/?ScreenId=SM302010|SM302010]) System Queues Monitor (SM302010) form, an administrative user can perform         the following operations (see the following screenshot): Clear the commerce queue by clicking  Clear Queue Restart the services that are processing the messages in the commerce queue by clicking              Restart Dispatcher Actions that can be performed on the commerce queue Commerce Queue Settings An administrative user can specify the processing settings for the commerce queue in the            Commerce Queue  section of the  Settings  tab         of the   ([~/?ScreenId=SM302010|SM302010]) System Queues Monitor (SM302010) form, as shown in the         following screenshot. In the  Processing Time Threshold (s)  box, the user can specify the         time period in seconds which is considered acceptable for processing a message in the queue.         By default the processing time threshold is set to 30 seconds. In the  Number of Records in Detailed Log  box, the user can specify         the number of          events          to be logged during the processing of a transaction. By default, this value is          100 . The Commerce Queue section of the Settings tab If the processing of a message takes more time than the specified processing time         threshold, the system displays an error message in the  Processing           Performance  box in the  Commerce Queue  section in the         Summary area of the form, as shown in the following screenshot. The error that is displayed when the processing threshold is exceeded In addition, the  View Details  button right of the            Processing Performance  box becomes available. The user can click         this button to open the  Commerce Processing Log  dialog box (see the         following screenshot) and review the detailed log. Commerce Processing Log dialog box ]]></column>
		</row>
		<row PageID="616c12ab-a1da-4166-8f9a-55246c1e82cd" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d62e8740-13f8-c5cc-967a-da9d89053fec" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the logic of data synchronization between Acumatica ERP and BigCommerce has been changed for the following entities:[anchor|#_6967f007-0a8b-447d-9983-40bb3ae27295]
*''Customer'' and ''Customer Location''
* ''Shipment''
* ''Payment''

The changes are described in detail in the remaining sections of this topic.
==Synchronization of Customers and Customer Locations==
Starting in Version 2020 R2, both customers and customer locations (customer addresses) are synchronized between Acumatica ERP and BigCommerce as part of the synchronization of the ''Customer'' entity. For this reason, the following changes have been introduced on the listed Acumatica ERP forms:[anchor|#_1c6a6447-6b61-4f81-b56e-c8fa71aa4c1d]
*On the [HelpRoot_Commerce\BC_50_10_00|Prepare Data] ([~/?ScreenId=BC501000|BC501000]) form, the ''Customer Location'' entity has been removed from the table.
*On the '''Entities''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] ([~/?ScreenId=BC201000|BC201000]) form, in the row of the ''Customer Location'' entity, the following UI elements are no longer available for editing:
**The '''Direction''' column
**The '''Primary System''' column
**The '''Sync Immediately''' check box
*:However, when a user changes any of the listed settings for the ''Customer'' entity, the same change is immediately applied to the ''Customer Location'' entity.

The activation of the ''Customer'' entity no longer requires that the ''Customer Location'' be activated. That is, now it is possible to select the '''Active''' check box for the ''Customer'' entity and leave it cleared for the ''Customer Location'' entity on the '''Entities''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] form.{br}

If the ''Customer Location'' entity is not active, customer addresses are not synchronized during the synchronization of customers or sales orders. If during the order creation in BigCommerce, a new address is used as a shipping address or billing address, this address is imported to Acumatica ERP as part of the sales order; however, no new customer location is created for this address in Acumatica ERP.{br}

If the ''Customer Location'' entity is active, when the ''Customer'' entity is synchronized between BigCommerce and Acumatica ERP, customer addresses are processed as follows:[anchor|#_752c4e5d-cd06-4f1d-b7bb-b5897f8b23e6]
*For a new customer that has been created in the BigCommerce store without an address, the default customer location (''MAIN'') is created for it in Acumatica ERP. The '''Country''' and '''Ship Via''' values of the ''MAIN'' customer location are inherited from the customer class specified in the '''Customer Class''' section of the '''Customer Settings''' tab of the [HelpRoot_Commerce\BC_20_10_00|BigCommerce Stores] form. The address lines—that is, the boxes in the '''Location Address''' section of the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) form—remain empty.
*For a deleted customer, the system changes the status of the corresponding sync record for the customer and all related customer locations to ''Deleted'' on the [HelpRoot_Commerce\BC_30_10_00|Sync History] ([~/?ScreenId=BC301000|BC301000]) form. 
*For a new address that has been added in the BigCommerce store, the system checks whether in the ''MAIN'' customer location for the customer, the '''Address Line 1''', '''Address Line 2''', '''City''', and '''Postal Code''' boxes are all empty, and if they are, updates the location address with the values from the address in BigCommerce. Otherwise, the system creates a new customer location, populates it with the values from BigCommerce, and copies the '''Ship Via''' value from the ''MAIN'' customer location.
*For an address deleted in the BigCommerce store, the system marks the corresponding customer location as inactive and changes the status of the sync record on the [HelpRoot_Commerce\BC_30_10_00|Sync History] form to ''Deleted''. If the deleted address corresponds to the default (''MAIN'') customer location in Acumatica ERP, the system makes another customer location (if one exists) the default. 

==Synchronization of Shipments==
When shipments that include multiple boxes with separate tracking numbers are exported from Acumatica ERP to BigCommerce or Shopify, the system checks if the following conditions are met:[anchor|#_ead148c8-e549-4807-871d-20b0aa5e77fb]
*Each item in the shipment is linked with a particular box. If an item is not assigned to any box, the system displays an error.
*Each box in the shipment contains at least one item. If a box is not assigned at least one item, the system displays an error.

During the synchronization of shipments with Shopify or BigCommerce, for each box in the shipment, a separate shipment with a separate tracking number is created in the online store. Boxes that don&rsquo;t have any items assigned or are missing a tracking number are not exported to the online store.
==Synchronization of Payments==
Starting in Acumatica ERP 2020 R2, payments imported to Acumatica ERP from BigCommerce are created with the ''Prepayment'' type on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.]]></column>
			<column name="PlainText"><![CDATA[Commerce: Other Improvements In  Acumatica ERP 2020 R2, the logic of data synchronization between  Acumatica ERP and BigCommerce has been changed for the following entities: Customer  and  Customer Location Shipment Payment The changes are described in detail in the remaining sections of this topic. Synchronization of Customers and Customer Locations Starting in Version  2020 R2, both customers and customer locations (customer addresses) are synchronized between  Acumatica ERP and BigCommerce as part of the synchronization of the  Customer  entity. For this         reason, the following changes have been introduced on the listed  Acumatica ERP forms: On the   ([~/?ScreenId=BC501000|BC501000]) Prepare Data (BC501000) form, the  Customer             Location  entity has been removed from the table. On the  Entities  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores (BC201000) form, in the row of the  Customer             Location  entity, the following UI elements are no longer available for editing: The  Direction  column The  Primary System  column The  Sync Immediately  check box However, when a user changes any of the listed settings for the  Customer              entity, the same change is immediately applied to the  Customer Location              entity. The activation of the  Customer  entity no longer requires that the  Customer           Location  be activated. That is, now it is possible to select the            Active  check box for the  Customer  entity and leave it         cleared for the  Customer Location  entity on the  Entities  tab         of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores form. If the  Customer Location  entity is not active, customer addresses are not         synchronized during the synchronization of customers or sales orders. If during the order         creation in BigCommerce, a new address is used as a shipping address or billing address,         this address is imported to  Acumatica ERP as part of the sales order; however, no new customer location is created for this address         in  Acumatica ERP. If the  Customer Location  entity is active, when the  Customer  entity is         synchronized between BigCommerce and  Acumatica ERP, customer addresses are processed as follows: For a new customer that has been created in the BigCommerce store without an address,           the default customer location ( MAIN ) is created for it in  Acumatica ERP. The  Country  and  Ship Via  values of the              MAIN  customer location are inherited from the customer class specified in the              Customer Class  section of the  Customer             Settings  tab of the   ([~/?ScreenId=BC201000|BC201000]) BigCommerce Stores form. The           address lines—that is, the boxes in the  Location Address  section of           the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) form—remain empty. For a deleted customer, the system changes the status of the corresponding sync record           for the customer and all related customer locations to  Deleted  on the   ([~/?ScreenId=BC301000|BC301000]) Sync History (BC301000) form.  For a new address that has been added in the BigCommerce store, the system checks           whether in the  MAIN  customer location for the customer, the  Address Line             1 ,  Address Line 2 ,  City , and              Postal Code  boxes are all empty, and if they are, updates the           location address with the values from the address in BigCommerce. Otherwise, the system           creates a new customer location, populates it with the values from BigCommerce, and copies           the  Ship Via  value from the  MAIN  customer location. For an address deleted in the BigCommerce store, the system marks the corresponding           customer location as inactive and changes the status of the sync record on the   ([~/?ScreenId=BC301000|BC301000]) Sync History form to  Deleted . If the deleted address           corresponds to the default ( MAIN ) customer location in  Acumatica ERP, the system makes another customer location (if one exists) the default.  Synchronization of Shipments When shipments that include multiple boxes with separate tracking numbers are exported from            Acumatica ERP to BigCommerce or Shopify, the system checks if the following conditions are met: Each item in the shipment is linked with a particular box. If an item is not assigned to           any box, the system displays an error. Each box in the shipment contains at least one item. If a box is not assigned at least           one item, the system displays an error. During the synchronization of shipments with Shopify or BigCommerce, for each box in the         shipment, a separate shipment with a separate tracking number is created in the online         store. Boxes that don't have any items assigned or are missing a tracking number are not         exported to the online store. Synchronization of Payments Starting in  Acumatica ERP 2020 R2, payments imported to  Acumatica ERP from BigCommerce are created with the  Prepayment  type on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. ]]></column>
		</row>
		<row PageID="2e648c3d-ff08-4fb7-9e4e-0bddd11f2f2d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="9ac2e0a8-3c75-9f56-4190-5104a43e36fc" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP Construction                         Edition 2020 R2, the [HelpRoot_Construction\PM_64_40_00|AIA Report] ([~/?ScreenId=PM644000|PM644000]) and [HelpRoot_Construction\PM_64_45_00|AIA Report with Quantity] ([~/?ScreenId=PM644500|PM644500]) reports have been moved to the core product, and the report functionality has been improved. Users can now prepare historical American Institute of Architects (AIA) reports for released retainage, and they can group continuation sheet lines by project tasks.{br}{TOC}
==AIA Reports for Released Retainage==
A user now can create separate AIA reports for the released retainage on the [HelpRoot_Construction\PM_64_40_00|AIA Report] ([~/?ScreenId=PM644000|PM644000]) and [HelpRoot_Construction\PM_64_45_00|AIA Report with Quantity] ([~/?ScreenId=PM644500|PM644500]) report forms.{br}

Before preparing an AIA report for released retainage, the user needs to release retainage in the financial period for which the report is being prepared, and run project billing for a project with a pending invoice amount of zero to prepare a zero pro forma invoice. A zero pro forma invoice is created only if in the billing rule assigned to a project task, the '''Create Lines with Zero Amounts''' check box is selected in the progress billing step on the [HelpRoot_FormReference\PM_20_70_00|Billing Rules] ([~/?ScreenId=PM207000|PM207000]) form. Then the user can prepare the AIA report with released retainage based on this pro forma invoice if the invoice date of the pro forma invoice on the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form is the same as or later than the date of the AR retainage invoice.{br}

If all conditions are met, to prepare the printable version of the AIA report, the user selects the line with the needed pro forma invoice in the table on the '''Invoices''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form, and clicks '''AIA Report''' on the table toolbar; the user can instead click the '''AIA Report''' button on the form toolbar of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form. Depending on the date for which the AIA report is prepared, the report will include the retainage that has been fully or partially released in the middle of the project, or all released retainage at the end of the project.{br}

The following screenshots illustrate the pages of printable AIA report prepared for the zero pro forma invoice with retainage. The total retainage amount on the cover sheet of the AIA report is calculated as the sum of the held retainage amounts on the AIA continuation sheet. The released retainage amount is included into the current payment due amount.[anchor|#fig_rmn_tml_dmb][anchor|#image_smn_tml_dmb][image:ReleaseNotes/Images/RN_2020_R1_Construction_AIA_Reports_Cover.png|popup|Cover sheet of AIA report with retainage|450px][anchor|#fig_v4f_5ml_dmb][anchor|#image_w4f_5ml_dmb][image:ReleaseNotes/Images/RN_2020_R1_Construction_AIA_Reports_ContinuationSheet.png|popup|Continuation sheet of AIA report for the zero pro forma invoice|450px]
For a description of the changes in the calculation of contract cap retainage, see [HelpRoot_ReleaseNotes\RN_2020_R2_Construction_Contract_Cap_Retainage|Construction: Enhanced Calculation of Contract Cap Retainage].
==Grouping of Continuation Sheet Lines in AIA Reports==
On the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form, the '''AIA Level''' box has been added. If ''Summary'' is selected in the box for the project, the continuation sheet lines in the prepared AIA reports will be grouped by project tasks. If '''AIA Level''' ''Detail'' is selected in the box for the project, the continuation sheet lines in the AIA report will be specified as they are presented in the corresponding pro forma invoice.{br}

On the [HelpRoot_FormReference\PM_20_80_00|Project Templates] ([~/?ScreenId=PM208000|PM208000]) form, the '''AIA Level''' box has been added. The value specified in this box is copied to the projects that are created based on this template. The system copies the value specified in this box to the '''AIA Level''' box on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form of the project prepared based on this template.]]></column>
			<column name="PlainText"><![CDATA[Construction: AIA Report Improvements In  Acumatica ERP Construction                         Edition 2020 R2, the   ([~/?ScreenId=PM644000|PM644000]) AIA Report (PM644000) and   ([~/?ScreenId=PM644500|PM644500]) AIA Report with Quantity (PM644500) reports have been moved to the core         product, and the report functionality has been improved. Users can now prepare historical         American Institute of Architects (AIA) reports for released retainage, and they can group         continuation sheet lines by project tasks. AIA Reports for Released Retainage A user now can create separate AIA reports for the released retainage on the   ([~/?ScreenId=PM644000|PM644000]) AIA Report (PM644000) and   ([~/?ScreenId=PM644500|PM644500]) AIA Report with Quantity (PM644500) report forms. Before preparing an AIA report for released retainage, the user needs to release retainage         in the financial period for which the report is being prepared, and run project billing for         a project with a pending invoice amount of zero to prepare a zero pro forma invoice. A zero         pro forma invoice is created only if in the billing rule assigned to a project task, the            Create Lines with Zero Amounts  check box is selected in the         progress billing step on the   ([~/?ScreenId=PM207000|PM207000]) Billing Rules (PM207000) form.         Then the user can prepare the AIA report with released retainage based on this pro forma         invoice if the invoice date of the pro forma invoice on the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form is the same as or later than the         date of the AR retainage invoice. If all conditions are met, to prepare the printable version of the AIA report, the user         selects the line with the needed pro forma invoice in the table on the            Invoices  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects         (PM301000) form, and clicks  AIA Report  on the table toolbar; the user         can instead click the  AIA Report  button on the form toolbar of the             ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form. Depending on the date for         which the AIA report is prepared, the report will include the retainage that has been fully         or partially released in the middle of the project, or all released retainage at the end of         the project. The following screenshots illustrate the pages of printable AIA report prepared for the         zero pro forma invoice with retainage. The total retainage amount on the cover sheet of the         AIA report is calculated as the sum of the held retainage amounts on the AIA continuation         sheet. The released retainage amount is included into the current payment due amount. Cover sheet of AIA report with retainage Continuation sheet of AIA report for the zero pro forma invoice For a description of the changes in the calculation of contract cap retainage, see  Construction: Enhanced Calculation of Contract Cap Retainage. Grouping of Continuation Sheet Lines in AIA Reports On the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form, the  AIA Level  box has been added. If            Summary  is selected in the box for the project, the continuation sheet lines in the         prepared AIA reports will be grouped by project tasks. If  AIA Level Detail  is selected in the box for the project, the continuation sheet lines in the         AIA report will be specified as they are presented in the corresponding pro forma         invoice. On the   ([~/?ScreenId=PM208000|PM208000]) Project Templates (PM208000) form, the  AIA           Level  box has been added. The value specified in this box is copied to the         projects that are created based on this template. The system copies the value specified in         this box to the  AIA Level  box on the  Summary          tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form of the project prepared based         on this template. ]]></column>
		</row>
		<row PageID="d8c9c22d-d0bc-4998-99ec-ceeb0d9e5974" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d18a83f1-c6b2-c6a7-e81e-e8613e10c855" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP Construction                         Edition 2020 R2, pro forma invoices that include progress billing lines now have automatically generated application numbers; the system specifies these numbers on the prepared AIA reports.
==Application Number in Pro Forma Invoices and AIA Reports==
The pro forma invoices with progress billing lines now include the automatically generated application number on the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form, as shown in the following screenshot. Application numbers are unique within the project; each project has its own numbering sequence of application numbers.[anchor|#_a7f421f7-2028-4eee-846d-2adbe1b5d40c][anchor|#_f17055ef-5ac1-47ac-b01f-b0ddabd13dcd][image:ReleaseNotes/Images/RN_2020_R1_Construction_Application_Number_PFInvoice.png|popup|Application number in a pro forma invoice|450px]
The application number is not changed in revisions of pro forma invoice that are created by using the '''Actions''' > '''Correct Pro Forma Invoice''' menu command on the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] form. For more information on correcting pro forma invoices, see [HelpRoot_ReleaseNotes\RN_2020_R2_Projects_PF_Invoice_Corrections|Construction: The Correction Workflow of Pro Forma Invoices].{br}

When a user prepares the corresponding AIA report on the [HelpRoot_Construction\PM_64_40_00|AIA Report] ([~/?ScreenId=PM644000|PM644000]) or [HelpRoot_Construction\PM_64_45_00|AIA Report with Quantity] ([~/?ScreenId=PM644500|PM644500]) report form, the system specifies the application number of the pro forma invoice in the AIA report header, as shown in the following screenshot.[anchor|#_2d20a67e-1842-4530-841f-ee3a47592f30][anchor|#_d8958fb0-b702-4f2f-8848-23351787f32b][image:ReleaseNotes/Images/RN_2020_R1_Construction_Application_Number_AIA.png|popup|Application number on the AIA report|450px]
==Application Number Format in a Project==
By default, the application number is a four-digit value that the system assigns sequentially: the first pro forma invoice is assigned ''0001'', the second one is assigned ''0002'', and so on. A user can change the format of the application number by adding letters, symbols, and extra digits to fit the internal application number format of the company.{br}

In a project, the last assigned application number is shown in the new '''Last Application Nbr.''' box on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form, as shown in the following screenshot.[anchor|#_d9d17925-9300-4f2e-9dc8-bd0b341d5ebe][anchor|#_d14331b5-2c01-47cf-9886-ca7026ac033a][image:ReleaseNotes/Images/RN_2020_R1_Construction_Application_Number_Project.png|popup|Last application number in the project|450px]
On the '''Summary''' tab of the [HelpRoot_FormReference\PM_20_80_00|Project Templates] ([~/?ScreenId=PM208000|PM208000]) form, the '''Application Nbr. Format''' box has been added. In this box, the user can specify the custom format of the application number to be used in the pro forma invoices prepared for the project created based on this project template. The system copies the value specified in the '''Application Nbr. Format''' box to the '''Last Application Nbr.''' box on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form of the project prepared based on this template.{br}

On the '''Invoices''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form, the '''Application Nbr.''' column has been added. The column lists the application numbers of the pro forma invoices, as shown in the following screenshot.[anchor|#_bf6272f4-33ee-4078-92d4-1a6adad4d2e0][anchor|#_70df6130-ace6-487f-83a3-49a087f651f4][image:ReleaseNotes/Images/RN_2020_R1_Construction_Application_Number_Project_Invoices.png|popup|Application numbers of the pro forma invoices prepared for the project|450px]]]></column>
			<column name="PlainText"><![CDATA[Construction: Application Number for Progress Billing In  Acumatica ERP Construction                         Edition 2020 R2, pro forma invoices that include progress billing lines now have automatically generated         application numbers; the system specifies these numbers on the prepared AIA reports. Application Number in Pro Forma Invoices and AIA Reports The pro forma invoices with progress billing lines now include the automatically generated         application number on the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form, as         shown in the following screenshot. Application numbers are unique within the project; each         project has its own numbering sequence of application numbers. Application number in a pro forma invoice The application number is not changed in revisions of pro forma invoice that are created by         using the  Actions Correct Pro Forma Invoice  menu command on the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices form. For         more information on correcting pro forma invoices, see  Construction: The Correction Workflow of Pro Forma Invoices. When a user prepares the corresponding AIA report on the   ([~/?ScreenId=PM644000|PM644000]) AIA Report (PM644000) or   ([~/?ScreenId=PM644500|PM644500]) AIA Report with Quantity (PM644500) report form, the system specifies the         application number of the pro forma invoice in the AIA report header, as shown in the         following screenshot. Application number on the AIA report Application Number Format in a Project By default, the application number is a four-digit value that the system assigns         sequentially: the first pro forma invoice is assigned  0001 , the second one is         assigned  0002 , and so on. A user can change the format of the application number by         adding letters, symbols, and extra digits to fit the internal application number format of         the company. In a project, the last assigned application number is shown in the new  Last           Application Nbr.  box on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form, as shown in the following         screenshot. Last application number in the project On the  Summary  tab of the   ([~/?ScreenId=PM208000|PM208000]) Project Templates (PM208000) form, the  Application Nbr. Format  box has been added.         In this box, the user can specify the custom format of the application number to be used in         the pro forma invoices prepared for the project created based on this project template. The         system copies the value specified in the  Application Nbr. Format  box         to the  Last Application Nbr.  box on the            Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects         (PM301000) form of the project prepared based on this template. On the  Invoices  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form, the  Application Nbr.          column has been added. The column lists the application numbers of the pro forma invoices,         as shown in the following screenshot. Application numbers of the pro forma invoices prepared for the project ]]></column>
		</row>
		<row PageID="a9332edf-c5f9-48d9-9508-53d438974854" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6baed6f2-e9f0-3fe6-fa36-b3849163a4f2" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, a user can add new joint payees to any open accounts payable bill with a positive balance that have the '''Joint Payees''' check box selected in the Summary area of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form.{br}

On the '''Joint Payees''' tab of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form, the '''Add Row''' button is now available for released bills that have a positive balance, as shown in the following screenshot. The user can change the joint payee if the line has not been added to a payment yet.[anchor|#fig_ycy_25x_vmb][anchor|#image_zcy_25x_vmb][image:ReleaseNotes/Images/RN_2020_R2_Construction_Joint_Payees.png|popup|Adding a joint payee to an open bill|450px]
On the '''Joint Payees''' tab of the [HelpRoot_FormReference\AP_30_20_00|Checks and Payments] ([~/?ScreenId=AP302000|AP302000]) form, the '''Reload Joint Payees''' button has been added (see the following screenshot). A user clicks this button to add the joint payee lines corresponding to the bill or bills specified on the '''Document To Apply''' tab of the [HelpRoot_FormReference\AP_30_20_00|Checks and Payments] form; the action is available for any accounts payable check that has not been printed or released yet, and for any check that is being reprinted—that is, a check for which the user has invoked the '''Reprint''' or '''Reprint with New Number''' action on the [HelpRoot_FormReference\AP_50_52_00|Release Payments] ([~/?ScreenId=AP505200|AP505200]) form.[anchor|#fig_lwf_y2x_vmb][anchor|#image_mwf_y2x_vmb][image:ReleaseNotes/Images/RN_2020_R2_Construction_Joint_Payees_2.png|popup|Loading joint payees for a check|450px]((({S:Warn}If the '''Pay by Line''' check box is selected for a bill on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form, the system will load all joint payee lines to a check.
)))[anchor|#section_kzq_mpx_vmb]
==Other UI Changes==
The '''Adjust Joint Amount''' button has been removed from the table toolbar on the '''Joint Payees''' tab of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form. A user can now change the '''Joint Amount Owed''' directly in the table on the '''Joint Payees''' tab of the form.]]></column>
			<column name="PlainText"><![CDATA[Construction: Improvements      to      the Joint Payees Functionality Starting  in  Acumatica ERP 2020 R2,  a          user can add new joint payees to          any          open accounts payable         bill          with          a  positive balance that have the  Joint Payees  check         box selected in the Summary area of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments         (AP301000) form. On the  Joint Payees  tab of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form, the  Add Row  button is         now available for released bills that have          a          positive balance, as shown in the          following          screenshot .         The user can change the joint payee if the line          has          not  been          added to a payment yet. Adding            a  joint payee           to            an  open bill On the  Joint Payees  tab of the   ([~/?ScreenId=AP302000|AP302000]) Checks and Payments (AP302000) form, the  Reload Joint           Payees  button has been added (see the following screenshot). A user clicks         this button to add the joint payee lines corresponding to the bill or bills specified on the            Document To Apply  tab of the   ([~/?ScreenId=AP302000|AP302000]) Checks and Payments form; the action is available for          any          accounts payable check          that          has not been printed or released yet, and for          any          check  that         is          being         reprinted — that         is,          a         check  for which the user has invoked the  Reprint  or            Reprint with New Number  action on the   ([~/?ScreenId=AP505200|AP505200]) Release Payments (AP505200)         form. Loading joint payees for a check If the  Pay by Line  check box is selected for a bill on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form, the system will load all joint payee lines to          a          check. Other UI Changes The  Adjust Joint Amount  button has been removed from the table         toolbar on the  Joint Payees  tab of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments         (AP301000)  form.          A          user  can now         change the  Joint Amount Owed  directly in the table on the            Joint Payees          tab  of the         form . ]]></column>
		</row>
		<row PageID="4b8c03de-50fe-47bf-948c-bed2d63fc2b4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="98276aa1-70ea-1a21-b2d7-eab0e7392875" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the ''Substantiated Billing (CU000071)'' and ''Substantiated Billing Consolidated (CU000019)'' reports have been moved from the ''Construction Reporting'' customization package to the core product, and their IDs also have been changed. The [HelpRoot_Construction\PM_65_00_00|Substantiated Billing] ([~/?ScreenId=PM650000|PM650000]) and [HelpRoot_Construction\PM_65_00_50|Substantiated Billing - Consolidated] ([~/?ScreenId=PM650050|PM650050]) reports are now available if the ''Construction'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.{br}

The opportunity to attach images of different formats (such as PNG, JPG, JPEG, BMP, GIF, TIFF, and TIF) besides PDF files has been added to the [HelpRoot_Construction\PM_65_00_50|Substantiated Billing - Consolidated] ([~/?ScreenId=PM650050|PM650050]) report. Also, both reports have a new visual style, as the following screenshots show.[anchor|#_5ae48359-78d3-4b62-8272-e903e2e83bb5][anchor|#_858474ab-9c06-453b-b3a3-405f5943852d][image:ReleaseNotes/Images/RN_2020_R2_Construction_Substatiated_Billing_Reports.png|popup|The Substantiated Billing report|450px][anchor|#_0037a736-05cc-4b70-9873-107a1cd83eee][anchor|#_4f7ee5f2-eaca-48cc-974d-f893251a51a0][image:ReleaseNotes/Images/RN_2020_R2_Construction_Substatiated_Billing_Reports_2.png|popup|The Substantiated Billing Consolidated report|450px]]]></column>
			<column name="PlainText"><![CDATA[Construction: Improvements to the Substantiated Billing Reports In  Acumatica ERP 2020 R2,     the  Substantiated Billing (CU000071)  and  Substantiated Billing Consolidated      (CU000019)  reports have been moved from the  Construction Reporting  customization     package to the core product, and their IDs also have been changed. The   ([~/?ScreenId=PM650000|PM650000]) Substantiated Billing (PM650000) and   ([~/?ScreenId=PM650050|PM650050]) Substantiated Billing - Consolidated (PM650050) reports are now available if the       Construction  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000)     form. The opportunity to attach images of different formats (such as PNG, JPG, JPEG, BMP, GIF, TIFF,     and TIF) besides PDF files has been added      to the   ([~/?ScreenId=PM650050|PM650050]) Substantiated Billing - Consolidated (PM650050) report . Also,      both      reports have a new visual style, as the following screenshots show. The Substantiated Billing report The Substantiated Billing Consolidated report ]]></column>
		</row>
		<row PageID="ad8f4431-630c-4050-86ec-e76f6c50180a" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="34243c16-20ba-68f3-cb5f-b3059aaba066" RecordSourceID="22377">
			<column name="Content"><![CDATA[[anchor|#section_o3q_jjg_2mb]
 Acumatica ERP Construction                         Edition 2020 R2 introduces enhanced logic for calculating the retainage in pro forma invoices for the projects that have ''Contract Cap'' specified as the '''Retainage Mode''' on the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form.{br}

In a pro forma invoice on the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form prepared for a project with contract cap retainage, the system now calculates the '''Allocated Retained Amount''' (that is, the amount of retainage that is considered to be held for the related revenue budget line in this pro forma invoice), by using the following formula:{br}

{{Allocated Retained Amount = (Total Retained Amount - Total Released Retainage) * Line Weight}}{br}

In this formula:{br}

{{Total Retained Amount}} is the sum of retained amounts summed up by all revenue budget lines of the project.{br}

{{Total Released Retainage}} is the sum of amounts of the released AR retainage documents that are related to the project.{br}

For each pro forma invoice line, {{Line Weight}} is calculated as follows:{br}

{{Line Weight = (Amount to Invoice + Previously Invoiced) / Total Completed}}{br}

where {{Total Completed}} is the sum of {{Amount to Invoice}} and {{Previously Invoiced}} amounts for all pro forma invoice lines.{br}

The calculated '''Allocated Retained Amount''' of the pro forma invoice line is shown in the '''Retainage Held''' column in the continuation sheet of AIA report prepared on the [HelpRoot_Construction\PM_64_40_00|AIA Report] ([~/?ScreenId=PM644000|PM644000]) or [HelpRoot_Construction\PM_64_45_00|AIA Report with Quantity] ([~/?ScreenId=PM644500|PM644500]) form. In the AIA report, the retainage held amount is equal to the allocated retained amount from pro forma invoice that was calculated by the formula. The total retainage amount on the cover sheet of the AIA report is calculated as the sum of the held retainage amounts on the AIA continuation sheet. Once the retainage is released, the released retainage amount is included in the current payment due amount. ]]></column>
			<column name="PlainText"><![CDATA[Construction: Enhanced Calculation of Contract Cap Retainage  Acumatica ERP Construction                         Edition 2020 R2 introduces enhanced logic for calculating the retainage in pro forma invoices for the         projects that have  Contract Cap  specified as the  Retainage           Mode  on the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form. In a pro forma invoice on the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form         prepared for a project with contract cap retainage, the system now calculates the            Allocated Retained Amount  (that is, the amount of retainage that is         considered to be held for the related revenue budget line in this pro forma invoice), by         using the following formula: Allocated Retained Amount = (Total Retained Amount - Total Released Retainage) *           Line Weight In this formula: Total Retained Amount  is the          sum of retained amounts         summed up by all revenue budget lines of the project. Total Released Retainage  is the sum of amounts of the released AR         retainage documents that are related to the project. For each pro forma invoice line,  Line Weight  is calculated as follows: Line Weight = (Amount to Invoice + Previously Invoiced) / Total         Completed where  Total Completed  is the sum of  Amount to Invoice  and            Previously Invoiced  amounts for all pro forma invoice lines. The calculated  Allocated Retained Amount  of the pro forma invoice         line is shown in the  Retainage Held  column in the continuation sheet         of AIA report prepared on the   ([~/?ScreenId=PM644000|PM644000]) AIA Report (PM644000) or             ([~/?ScreenId=PM644500|PM644500]) AIA Report with Quantity (PM644500) form. In the AIA report, the         retainage held amount is equal to the allocated retained amount from pro forma invoice that         was calculated by the formula. The total retainage amount on the cover sheet of the AIA         report is calculated as the sum of the held retainage amounts on the AIA continuation sheet.         Once the retainage is released, the released retainage amount is included in the current         payment due amount.  ]]></column>
		</row>
		<row PageID="6511b1b0-678c-4a98-cc11-87f160372f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="43450629-cc6f-13cf-5d85-9e41d9ea00a6" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, project-related address information has been reformatted and the related settings have been moved for smoother integration with forms in other functional areas and unification of the address structure.{br}

On the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form, the '''Site Address''' box, which holds the address of the site where the project work is performed, has been removed from the tab. Instead, the '''Project Address''' section with the following boxes has been added to the tab: '''Address Line 1''', '''City''', '''Country''', '''State''', '''Postal Code''', '''Altitude''', and '''Longitude'''.{br}

During the upgrade to Acumatica ERP 2020 R2, for each project, the system populates the '''Address Line 1''' box ({{PMAddress.AddressLine1}}) with the value from the '''Site Address''' box ({{Contract.SiteAddress}}). The value in the '''Address Line 1''' box could be very long after the upgrade. We recommend that users check the address line of the site address of each project after the upgrade and manually move parts of the site address to the corresponding boxes (for example, extract the city and move this value into the '''City''' box). The previous site address ({{Contract.SiteAddress}}) remains in the database.{br}

The '''Project Address''' section appears on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form if the ''Project Accounting'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form. The appearance of the project address information no longer depends on whether the ''Construction'' feature is enabled. Also, the visibility of the '''Project Address''' section no longer depends on the selection of the '''Enable Weather Service Integration for Daily Field Reports''' check box on the '''Weather Service Integration Settings''' tab of the [HelpRoot_Construction\PJ_10_10_00|Project Management Preferences] ([~/?ScreenId=PJ101000|PJ101000]) form.{br}

The [HelpRoot_Construction\PJ_30_40_00|Daily Field Report] ([~/?ScreenId=PJ304000|PJ304000]) form has been updated to use the new address settings of the project site. The '''Address Line 1''', '''City''', '''Country''', '''State''', '''Postal Code''', '''Altitude''', and '''Longitude''' boxes have been added to the Summary area of this form. When a user selects a project in the Summary area, the system populates these boxes with the corresponding values of the project from the '''Project Address''' section on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] form.{br}

The following reports also support the new address format: [HelpRoot_Construction\PJ_64_40_00|Daily Field Report Form] ([~/?ScreenId=PJ644000|PJ644000]), [HelpRoot_Construction\PJ_64_40_50|Daily Field Report by Project Form] ([~/?ScreenId=PJ644050|PJ644050]), [HelpRoot_Construction\PJ_66_30_00|Submittal Form] ([~/?ScreenId=PJ663000|PJ663000]), and [HelpRoot_Construction\SC_64_70_00|Subcontract Payment] ([~/?ScreenId=SC647000|SC647000]).]]></column>
			<column name="PlainText"><![CDATA[Construction: Changes to the Project Site Address In  Acumatica ERP 2020 R2, project-related address information has been reformatted and the related settings have         been moved for smoother integration with forms in other functional areas and unification of         the address structure. On the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form, the  Site Address  box, which holds the address of         the site where the project work is performed, has been removed from the tab. Instead, the            Project Address  section with the following boxes has been added to         the tab:  Address Line 1 ,  City ,            Country ,  State ,  Postal           Code ,  Altitude , and          Longitude . During the upgrade to  Acumatica ERP 2020 R2, for each project, the system populates the  Address Line 1  box           ( PMAddress.AddressLine1 ) with the value from the  Site           Address  box ( Contract.SiteAddress ). The value in the            Address Line 1  box could be very long after the upgrade. We         recommend that users check the address line of the site address of each project after the         upgrade and manually move parts of the site address to the corresponding boxes (for example,         extract the city and move this value into the  City  box). The previous         site address ( Contract.SiteAddress ) remains in the database. The  Project Address  section appears on the            Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects         form if the  Project Accounting  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. The appearance of the project         address information no longer depends on whether the  Construction  feature is enabled.         Also, the visibility of the  Project Address  section no longer depends         on the selection of the  Enable Weather Service Integration for Daily Field           Reports  check box on the  Weather Service Integration           Settings  tab of the   ([~/?ScreenId=PJ101000|PJ101000]) Project Management Preferences (PJ101000)         form. The   ([~/?ScreenId=PJ304000|PJ304000]) Daily Field Report (PJ304000) form has been updated to use         the new address settings of the project site. The  Address Line 1 ,            City ,  Country ,  State ,            Postal Code ,  Altitude , and            Longitude  boxes have been added to the Summary area of this form.         When a user selects a project in the Summary area, the system populates these boxes with the         corresponding values of the project from the  Project Address  section         on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects form. The following reports also support the new address format:   ([~/?ScreenId=PJ644000|PJ644000]) Daily Field Report Form (PJ644000),   ([~/?ScreenId=PJ644050|PJ644050]) Daily Field Report by Project Form (PJ644050),   ([~/?ScreenId=PJ663000|PJ663000]) Submittal Form (PJ663000), and   ([~/?ScreenId=SC647000|SC647000]) Subcontract Payment (SC647000). ]]></column>
		</row>
		<row PageID="6511b1b0-312a-4a98-bb22-87f160115f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="128357a8-575b-94d4-c544-1bc1e8c80b1f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, users can make adjustments to pro forma invoices that have related accounts receivable documents released. Because users can make corrections in an old billing iteration, the pro forma invoice can keep the same reference number and application number.{br}

The functionality of correcting pro forma invoices is available if the ''Construction'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form. The sections below describe the process of correcting pro forma invoices and any known limitations.
==Making Corrections to a Pro Forma Invoice==
A user can correct a pro forma invoice with the ''Closed'' status for which the corresponding accounts receivable document has already been released. To assign the pro forma invoice the ''On Hold'' status so that it can be edited, on the form toolbar of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form, the user clicks '''Actions''' > '''Correct Pro Forma Invoice'''. The system changes the status of the pro forma invoice and adds a line with the previous revision of the pro forma invoice to the '''Previous Revisions''' table on the '''Financial Details''' tab. In this table, the settings in the following columns are shown for each revision (see the screenshot below):[anchor|#_7b4f4a8f-fa87-4421-99da-f5f1d85a3c2e]
*'''Revision''': The revision number of the pro forma invoice, which is an integer that the system assigns sequentially, starting from 1
*'''Invoice Total''': The total amount of the revision of the pro forma invoice
*'''Retainage Total''': The total retainage amount of the revision of the pro forma invoice
*'''Tax Total''': The total tax amount of the revision of the pro forma invoice
*'''AR Doc. Type''': The type of the accounts receivable document related to the revision of the pro forma invoice
*'''AR Ref. Nbr.''': The reference number of the accounts receivable document related to the revision of the pro forma invoice
*'''Reversing Doc. Type''': The type of the AR document that reverses the accounts receivable document related to the revision of the pro forma invoice
*'''Reversing Ref. Nbr.''': The reference number of the AR document that reverses the accounts receivable document related to the revision of the pro forma invoice
*'''Description''': The description of the revision of the pro forma invoice
[anchor|#_66c88766-407d-4eb8-9664-2b0accd77d8b][anchor|#_0e293594-df70-4639-96c9-017adffa310e][image:ReleaseNotes/Images/RN_2020_R2_Projects_PF_Invoice_Corrections.png|popup|Previous versions of the pro forma invoice|450px]
Accounts receivable documents of old revisions of a pro forma invoice are also shown on the '''Invoices''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form.{br}

When a user makes all the needed adjustments to the corrected pro forma invoice and releases it, the system creates the accounts receivable document based on the pro forma invoice; it also creates a reversing AR document with the ''Balanced'' status for the previous revision of the released AR document.((({S:Warn}The correction of overbilled amounts that include retainage is available in the ordinary billing process if a user adds a negative amount that corresponds to the overbilled amount in a new pro forma invoice. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_Credit_Memos_with_Retainage_by_Line|Finance: Credit Memos with Retainage That Are Paid by Line] and [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_Negative_ExtPrice_in_AR_Invoices|Finance: Negative Ext. Price in AR Invoices with Retainage That Are Paid by Line].
)))
==Comparing Revisions of a Pro Forma Invoice==
All the revisions of a pro forma invoice can be compared on the [HelpRoot_Construction\PM_GI_00_30|Pro Forma Invoice Correction History] (PMGI0030) form, which is shown in the following screenshot. On the form, the system displays all lines of all the revisions of the pro forma invoice that is selected in the '''Reference Nbr.''' box in the Summary area. The lines are sorted ascending by the invoice line number and then descending by the invoice revision—that is, the system shows all the revisions of the first invoice line, then all the revisions of the second line, and so on. The lines of the current revision are highlighted with green and have the highest revision number.[anchor|#_d3c55d1a-ee93-4776-a966-ab804459ed11][anchor|#_5cddadb9-88f3-4509-b0fb-cf808dcd9728][image:ReleaseNotes/Images/RN_2020_R2_Projects_PF_Invoice_Corrections2.png|popup|All the revisions of a pro forma invoice|450px]
==Limitations of the Correction Workflow==
The following limitations apply to the correction of pro forma invoices:[anchor|#_db8c25e2-3bd4-49b7-8289-226449abb14b]
*The correction workflow is available for a pro forma invoice if it has only progress billing lines. A pro forma invoice with time and material lines cannot be corrected.
*The correction workflow is available for a pro forma invoice only when the billing currency is the same as the project currency.
*The application of payments must be removed or the payments must be voided for the corresponding account receivable documents related to the pro forma invoice being corrected.
*Corresponding retainage invoices related to the pro forma invoice being corrected must be manually reversed or deleted.
*As a result of the correction, the system completely reverses the corresponding accounts receivable documents related to the previous revision of the pro forma invoice. On the release of the corrected pro forma invoice, the system does not create an accounts receivable document with a delta of the amount of the current and previous revisions of the pro forma invoice; instead, it creates a new accounts receivable document with the full amount of the corrected pro forma invoice.
]]></column>
			<column name="PlainText"><![CDATA[Construction: The Correction Workflow of Pro Forma Invoices In  Acumatica ERP 2020 R2, users can make adjustments to pro forma invoices that have related accounts receivable         documents released. Because users can make corrections in an old billing iteration, the pro         forma invoice can keep the same reference number and application number. The functionality of correcting pro forma invoices is available if the  Construction          feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. The         sections below describe the process of correcting pro forma invoices and any known         limitations. Making Corrections to a Pro Forma Invoice A user can correct a pro forma invoice with the  Closed  status for which the         corresponding accounts receivable document has already been released. To assign the pro         forma invoice the  On Hold  status so that it can be edited, on the form toolbar of the             ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form, the user clicks  Actions Correct Pro Forma Invoice . The system changes the status of the pro forma invoice and adds a line with         the previous revision of the pro forma invoice to the  Previous           Revisions  table on the  Financial Details  tab. In this         table, the settings in the following columns are shown for each revision (see the screenshot         below): Revision : The revision number of the pro forma invoice, which is           an integer that the system assigns sequentially, starting from 1 Invoice Total : The total amount of the revision of the pro forma           invoice Retainage Total : The total retainage amount of the revision of           the pro forma invoice Tax Total : The total tax amount of the revision of the pro forma           invoice AR Doc. Type : The type of the accounts receivable document           related to the revision of the pro forma invoice AR Ref. Nbr. : The reference number of the accounts receivable           document related to the revision of the pro forma invoice Reversing Doc. Type : The type of the AR document that reverses           the accounts receivable document related to the revision of the pro forma invoice Reversing Ref. Nbr. : The reference number of the AR document that           reverses the accounts receivable document related to the revision of the pro forma           invoice Description : The description of the revision of the pro forma           invoice Previous versions of the pro forma invoice Accounts receivable documents of old revisions of a pro forma invoice are also shown on the            Invoices  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects         (PM301000) form. When a user makes all the needed adjustments to the corrected pro forma invoice and         releases it, the system creates the accounts receivable document based on the pro forma         invoice; it also creates a reversing AR document with the  Balanced  status for the         previous revision of the released AR document. The correction of overbilled amounts           that include retainage is available in the ordinary billing process if a user adds a           negative amount that corresponds to the overbilled amount in a new pro forma invoice. For           details, see  Finance: Credit Memos with Retainage That Are Paid by Line           and  Finance: Negative Ext. Price in AR Invoices with Retainage That Are Paid by Line. Comparing Revisions of a Pro Forma Invoice All the revisions of a pro forma invoice can be compared on the  Pro Forma Invoice Correction History (PMGI0030) form, which is shown in the following         screenshot. On the form, the system displays all lines of all the revisions of the pro forma         invoice that is selected in the  Reference Nbr.  box in the Summary         area.  The lines are sorted         ascending by the invoice line number and then descending by the invoice revision—that is,         the system shows all the revisions of the first invoice line, then all the revisions of the         second line, and so on. The lines of the current revision are highlighted with green and         have the highest revision number. All the revisions of a pro forma invoice Limitations of the Correction Workflow The following limitations apply to the correction of pro forma invoices: The correction workflow is available for a pro forma invoice if it has only progress           billing lines. A pro forma invoice with time and material lines cannot be corrected. The correction workflow is available for a pro forma invoice only when the billing           currency is the same as the project currency. The application of payments must be removed or the payments must be voided for the           corresponding account receivable documents related to the pro forma invoice being           corrected. Corresponding retainage invoices related to the pro forma invoice being corrected must           be manually reversed or deleted. As a result of the correction, the system completely reverses the corresponding accounts           receivable documents related to the previous revision of the pro forma invoice. On the           release of the corrected pro forma invoice, the system does not create an accounts           receivable document with a delta of the amount of the current and previous revisions of           the pro forma invoice; instead, it creates a new accounts receivable document with the           full amount of the corrected pro forma invoice. ]]></column>
		</row>
		<row PageID="0ffb1990-b00d-46f9-9d4c-0661e4cfe26d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="b8e4fd8a-77eb-f3e0-f325-b87c02164d1f" RecordSourceID="22377">
			<column name="Content"><![CDATA[ Acumatica ERP 2020 R2 introduces a new layout of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) forms, which have similar settings; this layout is similar to that of the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) and [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) forms. With the new layout, users can enter data more quickly, and they can more easily link the data on the [HelpRoot_FormReference\CR_30_30_00|Business Accounts], [HelpRoot_FormReference\AR_30_30_00|Customers], and [HelpRoot_FormReference\AP_30_30_00|Vendors] forms. The layout of the [HelpRoot_FormReference\CR_30_30_10|Account Locations] ([~/?ScreenId=CR303010|CR303010]), [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]), and [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) forms has also been changed. With the new layout, users can easily synchronize or override the data on these forms and the [HelpRoot_FormReference\CR_30_30_00|Business Accounts], [HelpRoot_FormReference\AR_30_30_00|Customers], and [HelpRoot_FormReference\AP_30_30_00|Vendors] forms, respectively.

==New and Updated Tabs of the Business Accounts Form==
The '''General''' tab (which was the '''Details''' tab in previous versions of Acumatica ERP) of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form contains the following information, as shown in the following screenshot:[anchor|#_efba2611-4070-4183-a756-429ffa4f7388]
*General information about the business account—such as the address and contact settings of the company
*The settings related to the personal data privacy of the business account, if the account belongs to an individual
*The settings of the primary contact for the company—including settings related to the personal data privacy of the primary contact
[anchor|#_e8bdb4f3-aa17-4cb8-b5c3-e154d5bb3db4][anchor|#_dd114143-6cf9-4899-8fc6-9b86eb8ce8e2][image:ReleaseNotes/Images/RN_2020_R2_CRM_New_Business_Accounts_Form_Layout_General_Tab.png|popup|The General tab of the Business Accounts form|450px]
Once a user has specified the settings of the primary contact on the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form and saved the applicable business account, the system creates the contact and associates the contact with the account. The contact can be viewed on the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form, and additional settings can be specified for it.{br}

The '''CRM Info''' tab of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form contains the Acumatica ERP-specific customer relationship management (CRM) information, such as the activity statistics and the contact preferences of the selected account, as shown in the following screenshot.[anchor|#_6ce937f1-a937-4265-af48-582cdf235a53][anchor|#_fe0107f8-9dfa-4802-8157-f748f45fbb65][image:ReleaseNotes/Images/RN_2020_R2_CRM_New_Business_Accounts_Form_Layout_CRM_Info_Tab.png|popup|The CRM Info tab of the Business Accounts form|450px]
The '''Contacts''' tab of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form contains the list of contacts for the business account, including the primary contact, as shown in the following screenshot. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_CRM_Business_Accounts_Enhancements_Primary_Contacts|CRM: Primary Contacts in Business Accounts, Customers, and Vendors].[anchor|#_f88a1ba5-c449-4fef-9af3-9c9f7f77c40f][anchor|#_a3968e07-9830-4692-b976-a256491522d2][image:ReleaseNotes/Images/RN_2020_R2_CRM_New_Business_Accounts_Form_Layout_Contacts_Tab.png|popup|The Contacts tab of the Business Accounts form|450px]
The '''Shipping''' tab (which was the '''Delivery Settings''' tab in previous versions of Acumatica ERP) of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form contains the tax and shipping settings to be used for the business account, as shown in the following screenshot.[anchor|#_701c73fe-dc02-4f90-8047-f110f27611fc][anchor|#_667a3f5f-cc26-4d9f-8813-ba9f2d9f9779][image:ReleaseNotes/Images/RN_2020_R2_CRM_New_Business_Accounts_Form_Layout_Shipping_Tab.png|popup|The Shipping tab of the Business Accounts form|480px]
==Major Changes to the Layout of the Customers and Vendors Forms==
The '''General''' tab (which was the '''General Info''' tab in previous versions of Acumatica ERP) of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) forms contains the following information:[anchor|#_5d3d0eba-a48a-4bcd-8ac6-2d18a4cd4f58]
*General information about the customer or vendor, respectively—such as the address and contact settings of the company
*The settings related to the personal data privacy of the customer or vendor, if the customer or vendor is an individual
*The settings of the primary contact for the customer or vendor, respectively—including settings related to the personal data privacy of the primary contact

The '''Contacts''' tab of the [HelpRoot_FormReference\AR_30_30_00|Customers] and [HelpRoot_FormReference\AP_30_30_00|Vendors] forms contains the list of contacts for the customer or vendor, respectively, including the primary contact. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_CRM_Business_Accounts_Enhancements_Primary_Contacts|CRM: Primary Contacts in Business Accounts, Customers, and Vendors].{br}

The enhanced logic of synchronization of contact and address settings between contact and business account records, contact and customer records, contact and vendor records is described in [[#_a373a62d-8d6d-4fc0-9ea2-73b21ebc2d3e|Synchronization of Contact and Address Settings].{br}

The enhanced logic of the synchronization of contact and address settings between the business account, customer, or vendor record and the corresponding location form is described in [[#_536e0e26-cc3b-42a5-8d6a-49f0403d40f6|Synchronization of Contact and Address Settings Between Business Accounts, Customers, and Vendors and the Location Records].{br}

The names and the order of some other tabs and UI elements (which hold finance settings) on the tabs of the [HelpRoot_FormReference\AR_30_30_00|Customers] and [HelpRoot_FormReference\AP_30_30_00|Vendors] forms have been changed as well. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_Other_Improvements|Finance: Other Improvements].
==Major changes of Layout on the Account Locations, Customer Locations, and Vendor Locations Forms==
The '''General''' tab (which was the '''General Info''' tab in previous versions of Acumatica ERP) of the [HelpRoot_FormReference\CR_30_30_10|Account Locations] ([~/?ScreenId=CR303010|CR303010]) form contains the address settings and additional settings of the location, as shown in the following screenshot. On the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) and [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) forms, the same tab holds similar settings.[anchor|#_224f5196-9bf1-47c8-8858-d055167d8fea][anchor|#_09532216-2084-4dd8-a0f2-df902156df44][image:ReleaseNotes/Images/RN_2020_R2_CRM_New_Accounts__Locations_Form_Layout_General_Tab.png|popup|The General tab of the Account Locations form|480px]
On the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] form, the tax and shipment settings have been moved to the '''Shipping''' tab. On the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] form, the tax and shipment settings have been moved to the '''Purchase Settings''' tab. Also, on the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] form, the payment settings have been moved to the '''Payment''' tab. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_Other_Improvements|Finance: Other Improvements].[anchor|#_a373a62d-8d6d-4fc0-9ea2-73b21ebc2d3e]
==Synchronization of Contact and Address Settings==
Users can easily synchronize or override the contact settings (such as attention name, phone numbers, and email address) and address settings between the contact records (that is, the records of individuals who serve as contacts of the organization) and the associated business account, customer, and vendor records. On the following tabs of forms with contact and address settings, the '''Override''' check box has been added:[anchor|#_9a895eb4-5c4e-46dc-aeb1-382b5edaa878]
*The '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form
*The '''Shipping''' tab of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form
*The '''Billing''' and '''Shipping''' tabs of the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form
*The '''Payment''' and '''Purchase Settings''' on the [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form

If the '''Override''' check box on the '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form is cleared, the contact and address settings of the contact record are synchronized with the contact and address settings of the associated lead, business account, customer, or vendor, with the synchronization occurring in both directions. That is, if you update the contact and address settings on the [HelpRoot_FormReference\CR_30_10_00|Leads],[HelpRoot_FormReference\CR_30_30_00|Business Accounts], [HelpRoot_FormReference\AR_30_30_00|Customers], or [HelpRoot_FormReference\AP_30_30_00|Vendors] form, the settings will be also updated on the associated forms. If the check box is selected on the '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form, users can update these settings and these settings can differ from those on the '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form.[anchor|#_536e0e26-cc3b-42a5-8d6a-49f0403d40f6]
==Synchronization of Contact and Address Settings Between Business Accounts, Customers, and Vendors and the Location Records==
Users can easily synchronize or override the contact and address settings between a business account and the associated business account locations, between a customer and the associated customer locations, and between the vendor and the associated vendor locations. On the following tabs of forms with contact and address settings, the '''Override''' check box has been added:[anchor|#_7744e3e8-0f18-47bd-964f-a32340f1dfb5]
*The '''General''' tab of the [HelpRoot_FormReference\CR_30_30_10|Account Locations] ([~/?ScreenId=CR303010|CR303010]) and [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) forms
*The '''General''' and '''Payment''' tabs of the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) form

If the '''Override''' check box is selected in any of the sections of these tabs, the contact or address settings in the section and tab of the form can differ from the contact or address settings of the business account, customer, or vendor. If the check box is cleared, the contact or address settings on this tab and on the '''General''' tab of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), or [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form, respectively, are synchronized—inherited from the '''General''' tab of the appropriate form for the business account, customer, or vendor record, respectively.)
==The Updated Actions Menu on the Business Accounts, Customers, and Vendors Forms==
On the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) forms, in the '''Actions''' menu, the '''Convert to Customer''' and '''Convert to Vendor''' actions have been removed. Users can click the '''Extend to Customer''' and '''Extend to Vendor''' actions, respectively, instead.]]></column>
			<column name="PlainText"><![CDATA[CRM: New Layout of the Business Accounts, Customers, Vendors, and Locations Forms  Acumatica ERP 2020 R2 introduces a new layout of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000),           ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000), and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) forms, which have similar settings; this       layout is similar to that of the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) and           ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) forms. With the new layout, users       can enter data more quickly, and they can more easily link the data on the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts,   ([~/?ScreenId=AR303000|AR303000]) Customers, and           ([~/?ScreenId=AP303000|AP303000]) Vendors forms.        The       layout of the   ([~/?ScreenId=CR303010|CR303010]) Account Locations (CR303010),   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020), and   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations (AP303010) forms has also been changed. With the new       layout, users can easily synchronize or override the data on these forms and the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts,   ([~/?ScreenId=AR303000|AR303000]) Customers, and           ([~/?ScreenId=AP303000|AP303000]) Vendors forms,       respectively. New and Updated Tabs of the Business Accounts Form The  General  tab (which was the  Details  tab in         previous versions of  Acumatica ERP) of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form contains the         following information, as shown in the following screenshot: General information about the business account—such as the address and contact           settings of the company The settings related to the personal data privacy of the business           account,            if the account belongs to an individual The settings of the primary contact for the company—including settings related to           the personal data privacy of the primary contact The General tab of the Business Accounts form Once a user has specified the settings of the primary contact on the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts form and saved the applicable business account, the         system creates the contact and associates the contact with the account. The contact can be         viewed on the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form, and additional         settings can be specified for it. The  CRM Info  tab of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts         form contains the  Acumatica ERP-specific customer relationship management (CRM) information, such as the activity         statistics and the contact preferences of the selected account, as shown in the following         screenshot. The CRM Info tab of the Business Accounts form The  Contacts  tab of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts         form contains the list of contacts for the business account, including the primary contact,         as shown in the following screenshot. For details, see  CRM: Primary Contacts in Business Accounts, Customers, and Vendors. The Contacts tab of the Business Accounts form The  Shipping  tab (which was the  Delivery           Settings  tab in previous versions of  Acumatica ERP) of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts form contains the tax and shipping         settings to be used for the business account, as shown in the following screenshot. The Shipping tab of the Business Accounts form Major Changes to the Layout of the Customers and Vendors Forms The  General  tab (which was the  General Info          tab in previous versions of  Acumatica ERP) of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) forms contains the following         information: General information about the customer or vendor, respectively—such as the address           and contact settings of the company The settings related to the personal data privacy of the customer or           vendor ,           if the customer or vendor is an individual The settings of the primary contact for the customer or vendor,           respectively—including settings related to the personal data privacy of the primary           contact The  Contacts  tab of the   ([~/?ScreenId=AR303000|AR303000]) Customers         and   ([~/?ScreenId=AP303000|AP303000]) Vendors forms contains the list of contacts for the         customer or vendor, respectively, including the primary contact. For details, see  CRM: Primary Contacts in Business Accounts, Customers, and Vendors. The enhanced logic of synchronization of contact and address settings between contact and         business account records, contact and customer records, contact and vendor records is         described in  Synchronization of Contact and Address Settings Synchronization of Contact and Address Settings. The enhanced logic of the synchronization of contact and address settings between the         business account, customer, or vendor record and the corresponding location form is         described in  Synchronization of Contact and Address Settings Between Business Accounts, Customers,         and Vendors and the Location Records Synchronization of Contact and Address Settings Between Business Accounts, Customers, and Vendors and the Location Records. The names and the order of some other tabs and UI elements (which hold finance settings) on         the tabs of the   ([~/?ScreenId=AR303000|AR303000]) Customers and   ([~/?ScreenId=AP303000|AP303000]) Vendors forms have been changed as well. For details, see            Finance: Other Improvements. Major changes of Layout on the Account Locations, Customer Locations, and Vendor         Locations Forms The  General  tab (which was the  General Info          tab in previous versions of  Acumatica ERP) of the   ([~/?ScreenId=CR303010|CR303010]) Account Locations (CR303010) form contains the address         settings and additional settings of the location, as shown in the following screenshot. On         the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) and   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations (AP303010) forms, the same tab holds similar         settings. The General tab of the Account Locations form On the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations form, the tax and shipment settings have         been moved to the  Shipping  tab. On the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations form, the tax and shipment settings have been moved         to the            Purchase           Settings  tab. Also, on the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations form, the payment settings have been moved to the            Payment  tab. For details, see  Finance: Other Improvements. Synchronization of Contact and Address Settings Users can easily synchronize or override the          contact         settings (such as attention name, phone numbers, and email address)  and         address settings between the contact records (that is, the records of individuals who serve         as contacts of the organization) and the associated business account, customer, and vendor         records. On the following tabs of forms with contact and address settings, the            Override  check box has been added: The  Details  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form The  Shipping  tab of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form The  Billing  and  Shipping  tabs of the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form The  Payment  and              Purchase             Settings  on the   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) form If the  Override  check box on the  Details  tab         of the   ([~/?ScreenId=CR302000|CR302000]) Contacts form is cleared,          the         contact and address settings of the contact         record  are synchronized with the contact and         address settings of the associated lead, business account, customer, or vendor, with the         synchronization occurring in both directions. That is, if you update the contact and address         settings on the   ([~/?ScreenId=CR301000|CR301000]) Leads,  ([~/?ScreenId=CR303000|CR303000]) Business Accounts,   ([~/?ScreenId=AR303000|AR303000]) Customers, or             ([~/?ScreenId=AP303000|AP303000]) Vendors form,          the         settings will be also updated on the associated forms . If the check box         is selected on the  Details  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts form, users can update these settings and these         settings can differ from those on the  Details  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts form. Synchronization of Contact and Address Settings Between Business Accounts, Customers,         and Vendors and the Location Records Users can easily synchronize or override the contact and address settings between a         business account and the associated business account locations, between a customer and the         associated customer locations, and between the vendor and the associated vendor locations.         On the following tabs of forms with contact and address settings, the            Override  check box has been added: The  General  tab of the   ([~/?ScreenId=CR303010|CR303010]) Account Locations (CR303010) and   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) forms The  General  and  Payment  tabs of the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations (AP303010) form If the  Override  check box is selected in any of the sections of         these tabs, the contact or address settings in the section and tab of the form can differ         from the contact or address settings of the business account, customer, or vendor. If the         check box is cleared, the contact or address settings on this tab and on the            General  tab of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts         (CR303000),   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000), or   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) form, respectively, are         synchronized—inherited from the  General  tab of the appropriate         form for the business account, customer, or vendor record, respectively.) The Updated Actions Menu on the Business Accounts, Customers, and Vendors Forms On the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000),   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000), and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) forms,          in         the  Actions  menu, the  Convert to Customer  and            Convert to Vendor  actions have been removed. Users can click the            Extend to Customer  and  Extend to Vendor          actions, respectively, instead. ]]></column>
		</row>
		<row PageID="15ea6772-bf7e-4c67-a8ee-c56b3aaecf0f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="29207917-8d25-a2f8-a152-ce0b78cfd03b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, enhancements have been made to the relationship between business accounts, customers, vendors, and contacts, as well as to the layout of the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]), [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) forms. These changes are designed to help users enter and view data, including contact and address information, and navigate between forms.
==Improved Relationship Between Contacts, Business Accounts, Customers, and Vendors==
In previous versions of Acumatica ERP, if more than one contact was associated with a business account, a user could find it difficult to define a primary contact for the account. Starting in Acumatica ERP 2020 R2, the information about the primary contact is displayed on the '''General''' and '''Contacts''' tabs of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form. In the '''Primary Contact''' section of the '''General''' tab (shown in the following screenshot), a user can specify or change the primary contact. A user can also add new contacts to the system by clicking '''Actions''' > '''Create Contact''' on the form toolbar and creating a contact in the '''New Contact '''dialog box.[anchor|#_cc2e7971-4090-4dfc-a60f-d40e714c70f1][anchor|#_1414cbdf-1b2d-4113-885c-e5dc867bcfa4][image:ReleaseNotes/Images/RN_2020_R2_CRM_Business_Accounts_Enhancements_Primary_Contacts_3.png|popup|The Primary Contact section on the Business Accounts form|480px]
On the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) forms, the layout of the '''General''' tab is similar to the layout of this tab on the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form, and this tab also contains the '''Primary Contact''' section on these forms.{br}

On the '''Contacts''' tab of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts], [HelpRoot_FormReference\AR_30_30_00|Customers], and [HelpRoot_FormReference\AP_30_30_00|Vendors] forms, the primary contact is also displayed (see Item 1 in the following screenshot). A user can select any active contact as the primary one by clicking the contact (Item 2) and then clicking the '''Set as Primary''' button on the table toolbar (Item 3). This causes the system to select the check box in the '''Primary''' column for the new primary contact. Only one primary contact can be selected for an account.[anchor|#_51f01be2-a991-494c-aef1-1cafba4374d9][anchor|#_b611d3dd-6b6f-4c2e-b641-e4ec60a7539d][image:ReleaseNotes/Images/RN_2020_R2_CRM_Business_Accounts_Enhancements_Primary_Contacts_1.png|popup|Selection of the new primary contact on the Contacts tab of the Business Accounts form|450px]
When the primary contact is changed, the system populates the elements on the '''General''' tab with the settings of the new primary contact.{br}

For an existing contact on the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form, if a user clears the value in the '''Business Account''' box, the system displays a warning about the possibility of changing the primary contact for the business account, as shown in the following screenshot.[anchor|#_82ae26e1-fa73-4471-9fc6-8039e2765fca][anchor|#_d5f35d20-11f0-48d9-ad6d-5ed3ee480c6b][image:ReleaseNotes/Images/RN_2020_R2_CRM_Business_Accounts_Enhancements_Primary_Contacts_2.png|popup|The warning about changing the primary contact for the account|450px]
If the user proceeds with clearing the '''Business Account''' box for the contact—thus deleting the link between the contact and the account—on the '''General''' and '''Contacts''' tabs of the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form, the system clears all settings related to the primary contact. If this account has been extended to also be a customer or vendor, the system also clears the settings related to the primary contact on the '''General''' and '''Contacts''' tabs of the [HelpRoot_FormReference\AR_30_30_00|Customers]or [HelpRoot_FormReference\AP_30_30_00|Vendors]form, respectively.
==Improved Layout of the Contacts Form==
With the improved layout of the [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form, if a user corrects the address settings on the form, the system changes this address on the associated [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form.{br}

On the '''Details''' tab of the [HelpRoot_FormReference\CR_30_20_00|Contacts] form, the '''Override''' check box has been added. If the '''Override''' check box on the '''Details''' tab is cleared, the address settings on the [HelpRoot_FormReference\CR_30_20_00|Contacts] and [HelpRoot_FormReference\CR_30_30_00|Business Accounts] forms are synchronized (the address settings are inherited from the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form). If the check box is selected, the address settings on the [HelpRoot_FormReference\CR_30_20_00|Contacts] form can differ from the address settings on the [HelpRoot_FormReference\CR_30_30_00|Business Accounts] form.]]></column>
			<column name="PlainText"><![CDATA[CRM: Primary Contacts in Business Accounts, Customers, and      Vendors In  Acumatica ERP 2020 R2,          enhancements have been made to  the relationship between business accounts,         customers, vendors, and         contacts , as well as         to          the layout of the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000),   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000),   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000), and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000)         forms .         These changes are designed to help users enter and view data, including contact and address         information, and navigate between          forms . Improved Relationship Between Contacts, Business Accounts, Customers, and         Vendors In previous versions of  Acumatica ERP, if more than one contact          was          associated with a business account, a user could find it difficult to define a primary         contact for the account. Starting in  Acumatica ERP 2020 R2, the information about the primary contact is displayed on the            General  and  Contacts  tabs of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form. In the  Primary           Contact  section of the  General  tab (shown in the         following screenshot), a user can specify or change the primary contact. A user can also add         new contacts to the system by clicking  Actions Create Contact  on the form toolbar and creating a contact in the  New Contact          dialog box. The Primary Contact section on the Business Accounts form On the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) forms, the layout of the            General  tab is similar to the layout         of  this tab         on  the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts         form ,          and this tab also contains the  Primary Contact          section  on these         forms . On the  Contacts  tab of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts,   ([~/?ScreenId=AR303000|AR303000]) Customers, and             ([~/?ScreenId=AP303000|AP303000]) Vendors forms, the primary contact is also displayed         ( see          Item 1 in the following screenshot). A user can select any active contact         as the primary one by clicking the contact (Item 2) and then clicking the  Set as           Primary  button on the table toolbar (Item 3). This causes the system to select         the check box in the  Primary  column for the new primary contact. Only         one primary contact can be selected for an account. Selection of the new primary contact on the Contacts tab of the Business Accounts           form When the primary contact is changed, the system populates the elements on the            General  tab with the settings of the new primary contact. For an existing contact on the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000)         form, if a user clears the value in the  Business Account  box, the         system displays a warning about the possibility of changing the primary contact for the         business account, as shown in the following screenshot. The warning about changing the primary contact for the account If the user proceeds with clearing the  Business Account  box for the         contact—thus deleting the link between the contact and the account—on the            General  and  Contacts  tabs of the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts form, the system clears all settings related to the         primary contact. If this account has been extended         to  also         be  a customer or vendor, the system also clears the settings related to         the primary contact on the  General  and            Contacts  tabs          of         the   ([~/?ScreenId=AR303000|AR303000]) Customersor             ([~/?ScreenId=AP303000|AP303000]) Vendorsform,         respectively . Improved Layout of the Contacts Form With the improved layout of the   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000)         form, if a user corrects the address settings on the form, the system changes this address         on the associated   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form. On the  Details  tab of the   ([~/?ScreenId=CR302000|CR302000]) Contacts form, the  Override  check box has been added. If the            Override  check box on the  Details  tab is         cleared,          the         address settings on the   ([~/?ScreenId=CR302000|CR302000]) Contacts and   ([~/?ScreenId=CR303000|CR303000]) Business Accounts forms are synchronized (the address settings are         inherited from the   ([~/?ScreenId=CR303000|CR303000]) Business Accounts form).  If         the check box is selected, the address settings on the   ([~/?ScreenId=CR302000|CR302000]) Contacts form can differ from the address settings on the             ([~/?ScreenId=CR303000|CR303000]) Business Accounts form. ]]></column>
		</row>
		<row PageID="0986f86d-3d86-4ebc-b200-9838b7e94124" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="1eb64ed0-5500-ce7b-945b-78444b364914" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Address data quality is essential for many business operations. In Acumatica ERP 2020 R2, new address enrichment functionality, which gives users the ability to make address information more accurate, has been introduced.
==Address Enrichment Functionality==
With the new address enrichment functionality, a user can add a new address, update an existing address, and fill in the missing address information in a record that has address settings. To make this functionality available, an administrator should enable the ''Address Lookup Integration'' feature on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form in the ''Customer Management'' group of features. When the ''Address Lookup Integration'' feature has been enabled, the administrator should do the following:[anchor|#_17b79c1a-0f21-4873-91c1-de3bbe0c11cd]
#On the ''Address Providers (CS103000)'' form—previously named [HelpRoot_FormReference\CS_10_30_00|Address Providers] ([~/?ScreenId=CS103000|CS103000])—specify the data about an address provider.
#On the [HelpRoot_FormReference\SM_20_05_05|Site Preferences] ([~/?ScreenId=SM200505|SM200505]) form, select this address provider in the '''Address Lookup Plug-In''' box.

As a result, the address provider will be used on all forms that have address information (if applicable), including those in the '''Marketing''', '''Receivables''', '''Payables''', '''Projects''', and '''Payroll''' workspaces.{br}

 The ''Address Lookup Integration'' feature can also be used for the Acumatica Self-Service                         Portal: To do so, an administrator should set up the address provider on the ''Portal Preferences (SP800000)'' form.
==The New Address Providers==
 Acumatica ERP provides integration with Google Maps and Bing Maps services. On the ''Address Providers (CS103000)'' form, either of the following plug-ins can be specified (Item 1 in the following screenshot):[anchor|#_891cbbca-6241-4bdf-897f-a96407ba352e]
*''Bing Maps''
* ''Google Maps''

When the address provider has been selected, on the '''Plug-In Parameters''' tab of the form, a user should specify values in the '''Value''' column for the following parameters:[anchor|#_5603b5ad-b041-43a0-8fda-537f2aa9d640]
*''API KEY'' (Item 2): A user gets an API key after registration in the particular service that the user is planning to use. This key should be entered here.
*''COUNTRY'' (Item 3): The user reviews and edits (if needed) the ISO 3166 country code for each country in which users can search for addresses. The predefined countries for the Google Maps provider are the United States, the United Kingdom, Canada, and Mexico. The predefined country for the Bing Maps provider is the United States.
*:The countries that are not predefined may have different address templates used by postal services, and Acumatica cannot guarantee that the data from these templates will be correctly processed by the system.
[anchor|#_ae7debbc-7081-4152-992c-e0a72aa8f549][anchor|#_1fb283c9-e5ac-4c16-83ae-466d489bf3da][image:ReleaseNotes/Images/RN_2020_R2_CRM_Address_Enrichment_Plug_Ins.png|popup|New plug-ins on the Address Providers form|480px]
==The New Address Lookup Dialog Box==
A user can add address information based on the company name, for example, of a lead. On the [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form (in the '''Address''' section of the '''Contact Info''' tab), the '''Address Lookup''' button has been added. The button is displayed instead of the '''View on Map''' button if the integration with an address provider has been set up in the system.{br}

When a user clicks the '''Address Lookup''' button (Item 1 in the following screenshot), the '''Address Lookup''' dialog box opens (Item 2). In the '''Enter a location''' box, the user can specify the name of the company and select the company address (Item 3). To see the location, the user can click the link (Item 4) to view the address in a new browser tab in the map service (this link works the same way as the '''View on Map''' button works). If the address is correct, the user can click '''Select''' (Item 5) to fill in the boxes in the '''Address''' section of the applicable entry form with the company location details. The address options that a user can select from the list of addresses offered by the map service are limited to the locations of the country or countries specified for the address provider.[anchor|#_eefc6610-0a9a-4be3-bee4-4ddf3b4d2130][anchor|#_0ab5431c-e902-4bf7-8e2c-7eeea1004b9a][image:ReleaseNotes/Images/RN_2020_R2_CRM_Address_Enrichment_Address_Lookup_Dialog_Box.png|popup|Selection of a company address in the Address Lookup dialog box |480px]
The '''Address Lookup''' dialog box can also be used for the following purposes:[anchor|#_8ec6a14d-01c2-45f4-b990-74ce2229daee]
*Viewing the existing company location: If a user clicks the '''Address Lookup''' button, the company address is shown in the '''Address Lookup''' dialog box as a location on the map.
*Finding a company address by a postal code if no other address details are available: If a user enters the postal code into the search box in the '''Address Lookup''' dialog box, the system displays the address options with the cities and country (and a state for the United States) that are valid for the postal code.
*Finding a full address by a street address: If a user enters the street address into the search box of the '''Address Lookup''' dialog box, and selects the address, the system will fill in the country (and state for the United States), city, and postal code data on the form.

==Minor Enhancements and Limitations of the Address Enrichment Functionality==
The following minor enhancements related to the address enrichment functionality have been made on the forms that have address information on them:[anchor|#_3b1b7625-0a39-4d5b-a4a6-6714359218d5]
*The ability to expand the size of the '''Address Lookup''' dialog box to see the map in a larger scale.
*The ability to use only a keyboard to select an address in the dialog box. A user can select and confirm any of the address settings. When the '''Address Lookup''' dialog box has been opened, the system moves the focus to the '''Enter a location''' box (Item 3 in the screenshot above). The user enters the known part of the address in the box, selects the address by using the arrow keys, and selects Enter. Then the user checks the address and selects Enter to close the dialog box.

Selecting locations in the '''Address Lookup''' dialog box has the following limitation: A user cannot select an address on a map by clicking a specific area on the map to see and select the address. Acumatica considers to include this capability in future releases.]]></column>
			<column name="PlainText"><![CDATA[CRM: Address Enrichment Through the Third-Party Provider Address data quality is essential for many business operations. In  Acumatica ERP 2020 R2, new address enrichment functionality, which gives users the ability to make address         information more accurate, has been introduced. Address Enrichment Functionality With the new address enrichment functionality, a user can add a new address, update an         existing address, and fill in the missing address information in a record that has address         settings. To make this functionality available, an administrator should enable the            Address Lookup Integration  feature on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form in the  Customer Management          group of features. When the  Address Lookup Integration  feature has been enabled, the         administrator should do the following: On the  Address Providers (CS103000)  form—previously named   ([~/?ScreenId=CS103000|CS103000]) Address Providers (CS103000)—specify the data about an           address provider. On the   ([~/?ScreenId=SM200505|SM200505]) Site Preferences (SM200505) form, select this address           provider in the  Address Lookup Plug-In  box. As a result, the address provider will be used on all forms that have address information         (if applicable), including those in the  Marketing ,            Receivables ,  Payables ,            Projects , and  Payroll  workspaces.  The  Address Lookup Integration  feature can also be used for the  Acumatica Self-Service                         Portal: To do so, an administrator should set up the address provider on the  Portal           Preferences (SP800000)  form. The New Address Providers  Acumatica ERP provides integration with Google Maps and Bing Maps services. On the  Address Providers           (CS103000)  form, either of the following plug-ins can be specified (Item 1 in the         following screenshot): Bing Maps Google Maps When the address provider has been selected, on the  Plug-In           Parameters  tab of the form, a user should specify values in the            Value  column for the following parameters: API KEY  (Item 2): A user gets an API key after registration in the particular           service that the user is planning to use. This key should be entered here. COUNTRY  (Item 3): The user reviews and edits (if needed) the ISO 3166 country           code for each country in which users can search for addresses. The predefined countries           for the Google Maps provider are the United States, the United Kingdom, Canada, and           Mexico. The predefined country for the Bing Maps provider is the United States. The             countries that are not predefined may have different address templates used by postal             services, and  Acumatica cannot guarantee that the data from these templates will be correctly processed by             the system. New plug-ins on the Address Providers form The New Address Lookup Dialog Box A user can add address information based on the company name, for example, of a lead. On         the   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form (in the            Address  section of the  Contact Info  tab),         the  Address Lookup  button has been added. The button is displayed         instead of the  View on Map  button if the integration with an address         provider has been set up in the system. When a user clicks the  Address Lookup  button (Item 1 in the         following screenshot), the  Address Lookup  dialog box opens (Item 2).         In the  Enter a location  box, the user can specify the name of the         company and select the company address (Item 3). To see the location, the user can click the         link (Item 4) to view the address in a new browser tab in the map service (this link works         the same way as the  View on Map  button works). If the address is         correct, the user can click  Select  (Item 5) to fill in the boxes in         the  Address  section of the applicable entry form with the company         location details. The address options that a user can select from the list of addresses         offered by the map service are limited to the locations of the country or countries         specified for the address provider. Selection of a company address in the Address Lookup dialog box  The  Address Lookup  dialog box can also be used for the following         purposes: Viewing the existing company location: If a user clicks the  Address             Lookup  button, the company address is shown in the  Address             Lookup  dialog box as a location on the map. Finding a company address by a postal code if no other address details are available: If           a user enters the postal code into the search box in the  Address             Lookup  dialog box, the system displays the address options with the cities           and country (and a state for the United States) that are valid for the postal code. Finding a full address by a street address: If a user enters the street address into the           search box of the  Address Lookup  dialog box, and selects the           address, the system will fill in the country (and state for the United States), city, and           postal code data on the form. Minor Enhancements and Limitations of the Address Enrichment Functionality The following minor enhancements related to the address enrichment functionality have been         made on the forms that have address information on them: The ability to expand the size of the  Address Lookup  dialog box           to see the map in a larger scale. The ability to use only a keyboard to select an address in the dialog box. A user can           select and confirm any of the address settings. When the  Address             Lookup  dialog box has been opened, the system moves the focus to the              Enter a location  box (Item 3 in the screenshot above). The user           enters the known part of the address in the box, selects the address by using the arrow           keys, and selects Enter. Then the user checks the address and selects Enter to close the           dialog box. Selecting locations in the  Address Lookup  dialog box has the         following limitation: A user cannot select an address on a map by clicking a specific area         on the map to see and select the address.  Acumatica considers to include this capability in future releases. ]]></column>
		</row>
		<row PageID="1f58d633-e3ac-427b-8350-870e97198e1f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="bd20a506-4300-71d0-0054-438de93bc03b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a user can select a person who will be the owner of the record, such as a lead, contact, or business account, among employees of the company.((({S:Hint}An employee of the company is not necessarily a system user. If needed, on the [HelpRoot_FormReference\SM_20_10_10|Users] ([~/?ScreenId=SM201010|SM201010]) form, a system administrator can create a new user account and associate it with the employee or edit information about the existing user account that is associated with the employee.
)))
==Selection of Owners Among Employees==
In previous versions of Acumatica ERP, in the '''Owner''' box of the forms including [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]), [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]), and [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), a user could select a person who will be responsible for this lead, contact, or business account respectively, among only system users (that is, only people that have a username and a password in the system).{br}

Starting in Acumatica ERP 2020 R2, the internal code supporting the '''Owner''' element has been changed to allow the selection of the record among employees. For compatibility reasons, the list of employees is still restricted to the list of users, as shown in the following screenshot.[anchor|#_51a8b6e8-6e30-408b-897c-e4c6b5dd5525][anchor|#_5c750522-5ff6-4460-b9a5-3f1f28f845d2][image:ReleaseNotes/Images/RN_2020_R2_CRM_Owner_Selection.png|popup|Selection of an owner on the Leads form|480px]]]></column>
			<column name="PlainText"><![CDATA[CRM: Enhancements to the Selection of Owners In  Acumatica ERP 2020 R2, a user can select a person who will be the owner of the record, such as a lead, contact,         or business account, among employees of the company. An employee of the           company is not necessarily a system user. If needed, on the   ([~/?ScreenId=SM201010|SM201010]) Users (SM201010) form, a system administrator can           create a new user account and associate it with the employee or edit information about the           existing user account that is associated with the employee. Selection of Owners Among Employees In previous versions of  Acumatica ERP, in the  Owner  box of the forms including   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000),   ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000), and   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000), a user could select a person who will         be responsible for this lead, contact, or business account respectively, among only system         users (that is, only people that have a username and a password in the system). Starting in  Acumatica ERP 2020 R2, the internal code supporting the  Owner  element has been changed         to allow the selection of the record among employees. For compatibility reasons, the list of         employees is still restricted to the list of         users ,          as shown in the following         screenshot . Selection of an owner on the Leads form ]]></column>
		</row>
		<row PageID="572b7f15-f7be-4d1e-9a88-0b891ad9eb1a" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="1c98dabe-08ad-d836-0b1f-ccfd881590a2" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP, a document may be emailed to specific recipients either manually or automatically during mass processing. Predefined mailings are used for the generation of these emails. Mailings can be defined on the '''Mailing Settings''' tab, which is available on various preferences forms and on business account-related forms, such as [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]), and [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]).{br}

In Acumatica ERP 2020 R2, the capability of setting up mailing recipients on the '''Mailing Settings''' tab has been enhanced as follows:[anchor|#_ff4c02db-67e9-4c23-8b17-5a41e28c1a25]
*The '''Recipients''' column has been added to the '''Mailings''' table, as shown in the screenshot below. In this column, a user can select one of the following options:
**''Add Recipients'': On the generation of an email to which these settings apply, the system will copy the recipients specified for the selected notification template, if one has been specified for the mailing, and from the '''Recipients''' table on this tab. On an entry form, such as [HelpRoot_FormReference\AR_30_30_00|Customers], the '''Recipients''' table will be populated with the values specified for the corresponding class—in this example, a customer class on the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] form—and the user will be able to add any number of extra recipients to the table.
**:This option defines the way this functionality has worked in previous versions of Acumatica ERP. After an upgrade to Acumatica ERP 2020 R2, this option will be selected by default for all available mailing settings.
**''Override Recipients'': On the generation of an email to which these settings apply, the recipients will be copied only from the '''Recipients''' table on this tab. On an entry form, values will not be copied from the class settings, and the user will have to manually add all needed recipients to the '''Recipients''' table. The recipients specified in the notification template or report associated with the mailing will not be included in the generated email.[anchor|#_48d3e584-f613-4515-ad24-fce48eb10fef][image:ReleaseNotes/Images/RN_2020_R2_CRM_Enhanced_Email_Recipients_1.png|popup|New column in the Mailings table|450px]
*The '''BCC''' column has been removed from the '''Recipients''' table.
*The '''Add To''' column has been added to the '''Recipients''' table, as shown in the following screenshot. The ''To'', ''CC'', and ''BCC'' options, which are available in this column, determine the element in which the recipient will be included in the generated email. 
*:After an upgrade to Acumatica ERP 2020 R2, ''CC'' or ''BCC'' will be selected by default for each recipient specified in this table across all available mailings, depending on whether the check box in the '''BCC''' column was cleared or selected for the recipient in the previous version of Acumatica ERP.[anchor|#_222455ac-b86c-4636-b408-33f32b5b93c2][image:ReleaseNotes/Images/RN_2020_R2_CRM_Enhanced_Email_Recipients_2.png|popup|New column in the Recipients table|450px]
]]></column>
			<column name="PlainText"><![CDATA[CRM: Enhancements to the Setting Up of Mailing Recipients In  Acumatica ERP, a document may be emailed to specific recipients either manually or automatically during         mass processing. Predefined mailings are used for the generation of these emails. Mailings         can be defined on the  Mailing Settings  tab, which is available on         various preferences forms and on business account-related forms, such as   ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000),   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000),   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000), and   ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000). In  Acumatica ERP 2020 R2, the capability of setting up mailing recipients on the  Mailing           Settings  tab has been enhanced as follows: The  Recipients  column has been added to the              Mailings  table, as shown in the screenshot below. In this column,           a user can select one of the following options: Add Recipients : On the generation of an email to which these settings apply,               the system will copy the recipients specified for the selected notification template,               if one has been specified for the mailing, and from the                  Recipients  table on this tab. On an entry form, such as   ([~/?ScreenId=AR303000|AR303000]) Customers, the  Recipients  table               will be populated with the values specified for the corresponding class—in this               example, a customer class on the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes               form—and the user will be able to add any number of extra recipients to the                 table. This option defines the way this functionality has worked in previous                 versions of  Acumatica ERP. After an upgrade to  Acumatica ERP 2020 R2, this option will be selected by default for all available mailing               settings. Override Recipients : On the generation of an email to which these settings               apply, the recipients will be copied only from the  Recipients                table on this tab. On an entry form, values will not be copied from the class               settings, and the user will have to manually add all needed recipients to the                  Recipients  table. The recipients specified in the               notification template or report associated with the mailing will not be included in               the generated email. New column in the Mailings table The  BCC  column has been removed from the              Recipients  table. The  Add To  column has been added to the              Recipients  table, as shown in the following screenshot. The              To ,  CC , and  BCC  options, which are available in this column,           determine the element in which the recipient will be included in the generated email.              After an upgrade to  Acumatica ERP 2020 R2,  CC  or  BCC  will be selected by default for each recipient specified in             this table across all available mailings, depending on whether the check box in the                BCC  column was cleared or selected for the recipient in the             previous version of  Acumatica ERP. New column in the Recipients table ]]></column>
		</row>
		<row PageID="d8f45126-fac8-45c1-b953-9eab60d220f5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="3c2b7327-7a2a-3ba7-e997-e8d3e236c07f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a new set of built-in user roles for the CRM functional area has been introduced. By using these predefined roles, partners and customers can reduce time and effort spent on the implementation and management of access control to the CRM area for users.
==New Predefined User Roles for CRM==
 Acumatica ERP 2020 R2 provides the following user roles for the CRM functional area (shown in the following screenshot):[anchor|#_404caa74-9be7-434c-919c-f072977adc51]
*''CR Marketing Manager'': A user with this role has access to marketing functions and settings.
*''CR Sales & Marketing Admin'': A user with this role has full access to sales and marketing functions and settings.
*''CR Sales Representative'': A user with this role has access to sales functions and settings.
*''CR Support Admin'': A user with this role has full access to support functions and settings.
*''CR Support Representative'': A user with this role has access to support functions and settings.
*''CR Viewer'': A user with this role has read-only access to marketing, sales, and support functions and settings.

Administrators and partners can use these predefined roles or quickly and easily create new roles based on the predefined ones.[anchor|#_6c865832-dea5-4959-bc44-6244df4dcb5a][anchor|#_edaa1a2d-a557-4752-bdcf-2b965e09d21e][image:ReleaseNotes/Images/RN_2020_R2_CRM_Predefined_User_Roles.png|popup|Predefined user roles for CRM|480px]
For each role, a set of access rights has been defined, as shown in the following screenshot for the ''CR Marketing Manager'' role. A predefined role can be used without changes, or an administrator or partner can modify the access rights to better meet the organization&rsquo;s needs.[anchor|#_3c87d60c-1d10-433a-8b66-60bb6342a64c][anchor|#_627c7aa2-a048-4306-a70d-0c56a48aa14c][image:ReleaseNotes/Images/RN_2020_R2_CRM_Predefined_Access_Rights.png|popup|Access rights for the CR Marketing Manager role|480px]]]></column>
			<column name="PlainText"><![CDATA[CRM: Predefined User Roles In  Acumatica ERP 2020 R2, a new set of built-in user roles for the CRM functional area has been introduced. By         using these predefined roles, partners and customers can reduce time and effort spent on the         implementation and management of access control to the CRM area for users. New Predefined User Roles for CRM  Acumatica ERP 2020 R2 provides the following user roles for the CRM functional area (shown in the following         screenshot): CR Marketing Manager : A user with this role has access to marketing functions and           settings. CR Sales & Marketing Admin : A user with this role has full access to sales           and marketing functions and settings. CR Sales Representative : A user with this role has access to sales functions and           settings. CR Support Admin : A user with this role has full access to support functions and           settings. CR Support Representative : A user with this role has access to support functions           and settings. CR Viewer : A user with this role has read-only access to marketing, sales, and           support functions and settings. Administrators and partners can use these predefined roles or quickly and easily create new         roles based on the predefined ones. Predefined user roles for CRM For each role, a set of access rights has been defined, as shown in the following         screenshot for the  CR Marketing Manager  role. A predefined role can be used without         changes, or an administrator or partner can modify the access rights to better meet the         organization's needs. Access rights for the CR Marketing Manager role ]]></column>
		</row>
		<row PageID="a1c16caf-b59c-43ab-9add-9be30b57c3e4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="3f5a8925-187d-ff54-475a-919ed5dfaee0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, integration with Microsoft Outlook can be used as follows:[anchor|#ul_e3d_rsn_xmb]
*In the functionality related to CRM, projects, and construction project management
*In the Acumatica ERP Construction                         Edition
*For document recognition

==Enhanced Integration of Acumatica ERP and Outlook==
In previous versions of Acumatica ERP, the Acumatica add-in for Outlook was used only in the functionality related to CRM. On the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the ''Outlook Integration'' feature was located in the ''Customer Management'' group of features.{br}

Starting in Acumatica ERP 2020 R2, the integration of Acumatica ERP and Microsoft Outlook has been enhanced. The ''Outlook Integration'' feature has been moved from the ''Customer Management'' group of features to the ''Third Party Integrations'' group of features, as shown in the following screenshot.[anchor|#_ba8f979a-172a-4127-92d3-e239b3d2a1bb][anchor|#_b8f11de1-63f0-47cc-a011-f0bab7f604b7][image:ReleaseNotes/../UserGuide/Images/RN_2020_R2_CRM_Enhancements_to_Outlook_Integration.png|popup|The Outlook Integration feature in the Third-Party Integrations group of features|480px]
The integration of Acumatica ERP and Outlook gives users the following new abilities:[anchor|#_b6429568-593a-4e99-ab69-86205f1d0c1c]
*Attaching the logged activity to a project if both the ''Outlook Integration'' feature and the ''Projects'' feature have been enabled
*Creating a project issue and attaching the logged activity to the project issue if both the ''Outlook Integration'' feature and the ''Construction Project Management'' feature have been enabled
*Creating an RFI and attaching the logged activity to the RFI if both the ''Outlook Integration'' feature and the ''Construction Project Management'' feature have been enabled
*Submitting email attachments to the recognition service and viewing documents processed by the recognition service if both the ''Outlook Integration'' feature and the ''Document Recognition Service'' feature have been enabled.

The integration of the CRM functionality and Outlook continues to work as it did in previous versions of Acumatica ERP. If both the ''Outlook Integration'' feature and the ''Customer Management'' feature are enabled, users have the following abilities:[anchor|#_1dda983f-57e4-4215-88a8-899c1b1f313f]
*Creating new leads and contacts from a mailbox
*Logging communication activities related to leads and contacts
*Viewing details in lead, contact, and employee records

If both the ''Outlook Integration'' feature and the ''Case Management'' feature are enabled, users have the following abilities:[anchor|#_42ccba74-b3d4-4d9b-a372-765bcb9d1c0e]
*Creating and viewing cases
*Attaching the logged activity to cases
*Viewing details in case records
]]></column>
			<column name="PlainText"><![CDATA[CRM: Enhancements to the Integration of  Acumatica ERP     and Outlook In  Acumatica ERP 2020 R2, integration with Microsoft Outlook can be used as follows: In the functionality related to CRM, projects, and construction project             management In the  Acumatica ERP Construction                         EditionFor document recognition Enhanced Integration of  Acumatica ERP and Outlook In previous versions of  Acumatica ERP, the  Acumatica add-in for Outlook was used only in the functionality related to CRM. On the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the  Outlook Integration          feature was located in the  Customer Management  group of features. Starting in  Acumatica ERP 2020 R2, the integration of  Acumatica ERP and Microsoft Outlook has been enhanced. The  Outlook Integration  feature has been         moved from the  Customer Management  group of features to the  Third Party           Integrations  group of features, as shown in the following screenshot. The Outlook Integration feature in the Third-Party Integrations group of           features The integration of  Acumatica ERP and Outlook gives users the following new abilities: Attaching the logged activity to a project if both the  Outlook Integration            feature and the  Projects  feature have been enabled Creating a project issue and attaching the logged activity to the project issue if both           the  Outlook Integration  feature and the  Construction Project Management            feature have been enabled Creating an RFI and attaching the logged activity to the RFI if both the  Outlook             Integration  feature and the  Construction Project Management  feature have been           enabled Submitting email attachments to the recognition service and viewing documents processed           by the recognition service if both the  Outlook Integration  feature and the              Document Recognition Service  feature have been enabled. The integration of the CRM functionality and Outlook continues to work as it did in         previous versions of  Acumatica ERP. If both the  Outlook Integration  feature and the  Customer Management          feature are enabled, users have the following abilities: Creating new leads and contacts from a mailbox Logging communication activities related to leads and contacts Viewing details in lead, contact, and employee records If both the  Outlook Integration  feature and the  Case Management  feature are         enabled, users have the following abilities: Creating and viewing cases Attaching the logged activity to cases Viewing details in case records ]]></column>
		</row>
		<row PageID="5b48783a-4bd4-402a-9b94-f6fc07b5f362" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="dc9a5741-4912-826a-a333-d01c9ab44786" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, users can pin the most important activities—such as emails, tasks, notes, or phone calls—to the top of the activities list for quick access and easy tracking. The activity pins are supported for cases, opportunities, and leads. On the '''Activities''' tab of the [HelpRoot_FormReference\CR_30_60_00|Cases] ([~/?ScreenId=CR306000|CR306000]), [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]), and [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form, a user can select an activity that should be pinned to the top of the list and click the '''Pin/Unpin''' button, shown in the following screenshot, to pin the activity to the top of the list. Once the user has pinned an activity, it is moved to the top of the list and an icon is shown in the '''Is Pinned''' column (also shown in the following screenshot).[anchor|#_575d447f-293b-4591-9853-8d40358ea768][anchor|#_a9956b72-938b-4db8-8cfd-4dd0324755cc][image:ReleaseNotes/Images/RN_2020_R2_CRM_Pinning_Activities.png|popup|Pinned activities on the Cases form|450px]
A user can also click a pinned activity and click the '''Pin/Unpin''' button to unpin the activity. If a user unpinned an activity from the list, an icon is no longer shown in the '''Is Pinned''' column, and the activity is moved to the a location based on the sorting settings.]]></column>
			<column name="PlainText"><![CDATA[CRM: Pinning of Activities In  Acumatica ERP 2020 R2, users can pin the most important activities—such as emails, tasks, notes, or phone         calls—to the top of the activities list for quick access and easy tracking. The         activity pins are supported for cases, opportunities, and leads. On the            Activities  tab of the   ([~/?ScreenId=CR306000|CR306000]) Cases         (CR306000),   ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000), and   ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form, a user can select an activity that         should be pinned to the top of the list and click the  Pin/Unpin          button, shown in the following screenshot, to pin the activity to the top of the list. Once         the user has pinned an activity, it is moved to the top of the list and an icon is shown in         the  Is Pinned  column (also shown in the following screenshot). Pinned activities on the Cases form A user can also click a pinned activity and click the  Pin/Unpin          button to unpin the activity. If a user unpinned an activity from the list, an icon is no         longer shown in the  Is Pinned  column, and the activity is moved to         the a  location based on the sorting settings. ]]></column>
		</row>
		<row PageID="aa809976-1eb7-4b23-b33b-5592176bf7e9" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="e20ea36e-498f-fd50-ffb9-fea359052650" RecordSourceID="22377">
			<column name="Content"><![CDATA[
To address the legal requirements related to 1099 reporting that have become effective starting in the 2020 tax year, changes to the 1099 functionality in Acumatica ERP 2020 R2 have been introduced: The new [HelpRoot_ReportReference\AP_65_31_00|1099-NEC Form] ([~/?ScreenId=AP653100|AP653100]) report has been added, the [HelpRoot_ReportReference\AP_65_30_00|1099-MISC Form] ([~/?ScreenId=AP653000|AP653000]) report has been modified, and the descriptions of the 1099 boxes have been amended with new box numbers.{br}

Starting in 2020, a Form 1099-NEC has to be submitted to the IRS for nonemployee compensation, which was reported on Box 7 of 1099-MISC prior to 2020.{br}

When a user enters a bill from a 1099 vendor, the system fills in the '''1099 Box''' column on the '''Document Details''' tab of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form with the default 1099 box specified for the vendor. For the 1099-NEC form, the 1099 box is ''7-Nonemployee Compensation (1099-NEC Box 1 starting 2020)''. When the payment for the bill is released, the bill amount is posted to the appropriate expense account, which is the account specified for the non-employee compensation box on the '''1099 Settings''' tab of the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form, and recorded to Box 1 of the 1099-NEC form. For details, see [HelpRoot_Financials\AP__CON_1099_Maintenance|Maintaining and Filing the 1099-MISC Forms].{br}{TOC}
==The New 1099-NEC Form==
The new [HelpRoot_ReportReference\AP_65_31_00|1099-NEC Form] ([~/?ScreenId=AP653100|AP653100]) report has been added. On this report form, users should select the company or branch for which they want to run the report and the year (which is 2020 or later). If users need to generate the 1099-NEC report for years earlier than 2019, they should use the [HelpRoot_ReportReference\AP_65_30_00|1099-MISC Form] ([~/?ScreenId=AP653000|AP653000]) form with ''All Boxes'' selected in the '''NEC (Box 7)''' box of the report form.{br}

By default, access rights to the [HelpRoot_ReportReference\AP_65_31_00|1099-NEC Form] report have been granted to users with the ''Administrator'' role.
==Other UI Changes==
The following UI changes have been introduced to support the changes in the 1099 functionality:[anchor|#_f8a7db9c-d1f4-4f53-b494-9f8e1f1669b7]
*The [HelpRoot_ReportReference\AP_65_40_00|1099 Year Summary] ([~/?ScreenId=AP654000|AP654000]) report now has two report formats—''1099-MISC'' and ''1099-NEC'' selected in the '''Report Format''' box. The report title now reflects the name of the selected report format: ''1099 Year Summary (1099-NEC)'' or ''1099 Year Summary (1099-MISC)''.
*The '''Reports''' menu on the form toolbar of the [HelpRoot_FormReference\AP_40_50_00|1099 Vendor History] ([~/?ScreenId=AP405000|AP405000]) form has been updated with a new menu command: '''1099-NEC Year Summary'''. On the same menu, the '''Year 1099 Summary''' menu command has been renamed to '''1099-MISC Year Summary''', and the '''Year 1099 Details''' menu command has been renamed to '''1099 Year Details'''.
*The '''Reports''' menu on the form toolbar of the [HelpRoot_FormReference\AP_50_70_00|Close 1099 Year] ([~/?ScreenId=AP507000|AP507000]) form has been updated with a new menu command: '''1099-NEC Year Summary'''. On the same menu, the '''1099 Year Summary''' menu command has been renamed to '''1099-MISC Year Summary'''.
*On the [HelpRoot_ReportReference\AP_65_30_00|1099-MISC Form] ([~/?ScreenId=AP653000|AP653000]) report, if a user selects ''Only Box 7'' or ''Except Box 7'' in the '''NEC (Box 7)''' box on the '''Report Parameters''' tab, the system will create a 1099-MISC filing for 2019 or any previous year. For 2020 or any later year, a report generated with either of these parameters will be empty. 
]]></column>
			<column name="PlainText"><![CDATA[Finance: Changes in 1099 Reporting for 2020 Tax Year To address the legal requirements related to 1099 reporting that have become effective         starting in the 2020 tax year, changes to the 1099 functionality in  Acumatica ERP 2020 R2 have been introduced: The new   ([~/?ScreenId=AP653100|AP653100]) 1099-NEC Form (AP653100)         report has been added, the   ([~/?ScreenId=AP653000|AP653000]) 1099-MISC Form (AP653000) report         has been modified, and the descriptions of the 1099 boxes have been amended with new box         numbers. Starting in 2020, a Form 1099-NEC has to be submitted to the IRS for nonemployee compensation,         which was reported on Box 7 of 1099-MISC prior to 2020. When a user enters a bill from a 1099 vendor, the system fills in the  1099           Box  column on the  Document Details  tab of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form with the default 1099 box specified         for the vendor. For the 1099-NEC form, the 1099 box is  7-Nonemployee Compensation           (1099-NEC Box 1 starting 2020) . When the payment for the bill is released, the bill         amount is posted to the appropriate expense account, which is the account specified for the         non-employee compensation box on the  1099 Settings  tab of the   ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form, and recorded to Box 1 of the         1099-NEC form. For details, see  Maintaining and Filing the 1099-MISC Forms. The New 1099-NEC Form The new   ([~/?ScreenId=AP653100|AP653100]) 1099-NEC Form (AP653100) report has been added. On this         report form, users should select the company or branch for which they want to run the report         and the year (which is 2020 or later). If users need to generate the 1099-NEC report for         years earlier than 2019, they should use the   ([~/?ScreenId=AP653000|AP653000]) 1099-MISC Form         (AR653000) form with  All Boxes  selected in the  NEC (Box 7)  box         of the report form. By default, access rights to the   ([~/?ScreenId=AP653100|AP653100]) 1099-NEC Form report have been         granted to users with the  Administrator  role. Other UI Changes The following UI changes have been introduced to support the changes in the 1099     functionality: The   ([~/?ScreenId=AP654000|AP654000]) 1099 Year Summary (AP654000) report now has two report             formats— 1099-MISC  and  1099-NEC  selected in the  Report             Format  box. The report title now reflects the name of the selected report           format:  1099 Year Summary (1099-NEC)  or  1099 Year Summary (1099-MISC) . The  Reports  menu on the form toolbar of the   ([~/?ScreenId=AP405000|AP405000]) 1099 Vendor History (AP405000) form has been updated with a new menu           command:  1099-NEC Year Summary . On the same menu, the              Year 1099 Summary  menu command has been renamed to              1099-MISC Year Summary , and the  Year 1099             Details  menu command has been renamed to  1099 Year             Details . The  Reports  menu on the form toolbar of the   ([~/?ScreenId=AP507000|AP507000]) Close 1099 Year (AP507000) form has been updated with a new menu           command:  1099-NEC Year Summary . On the same menu, the              1099 Year Summary  menu command has been renamed to              1099-MISC Year Summary . On the   ([~/?ScreenId=AP653000|AP653000]) 1099-MISC Form (AP653000) report, if a user selects              Only Box 7  or  Except Box 7  in the  NEC (Box 7)  box           on the  Report Parameters  tab, the system will create a 1099-MISC           filing for 2019 or any previous year. For 2020 or any later year, a report generated with           either of these parameters will be empty.  ]]></column>
		</row>
		<row PageID="f07941c2-ca4e-44ce-baa6-1f6c82aeede5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="5c97b4e1-cfca-aee1-5651-e66cbdbacfe4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, every time a card payment was created in Acumatica ERP, the system saved the payment profile information and created a customer payment method for it. It was not possible to accept card payments without the payment profile information being saved.{br}

Starting in Acumatica ERP 2020 R2, users can configure the system in such a way that payment profile data is not saved when card payments are processed; optionally, the data could be saved if a customer wants it to be saved. The system can now authorize, capture, refund, and void credit card payments for which a payment profile is not saved in the system.{br}

The following sections describe the changes that have been made to Acumatica ERP to support this functionality.{br}{TOC}
==Changes to the Processing Centers Form==
On the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form, the '''Allow Saving Payment Profiles''' check box has been added to the Summary area, as shown in the following screenshot.[anchor|#_9cd65d2c-3f12-4f7e-a70f-f02170d50177][anchor|#_062f4899-ba78-4ccb-b630-c1231479c21e][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_Processing_Centers.png|popup|The new Allow Saving Payment Profiles check box|400px]
This check box is available only if the plug-in used for the processing center supports the creation of customer profiles.{br}

Depending on the state of the '''Allow Saving Payment Profiles''' check box, the system handles card payments as follows:[anchor|#_830b150e-4fa7-438c-b6aa-39f282a3a850]
*If the check box is selected, when accepting card payments, the system extracts the payment profile ID from the processing center and creates a customer payment method associated with the credit card.
*If the check box is cleared, when accepting card payments, the system associates a payment with the credit card transaction without creating a customer payment method.
[anchor|#_fb4e3beb-4a45-4b39-91a4-45305875a94c]
==Changes to the Customer Classes Form==
On the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the '''Credit Card Processing Settings''' section has been added to the '''General Settings''' tab, as shown in the following screenshot.[anchor|#_c8fc8b0c-df80-4d88-bec3-d2ec4dac7ad7][anchor|#_295f74a2-b23c-4402-a725-b057cfcdda7c][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_Customer_Classes.png|popup|The new '''Credit Card Processing Settings''' section|400px]
The section consists of the '''Save Payment Profiles''' box, which determines if payment profiles should be saved in the system for the customers of this class. The box includes the following options: [anchor|#_2d0f4753-f698-4e8d-84c0-c671737c62fd]
*''Upon Confirmation'': By default, the system does not save a payment profile when accepting a new card payment from a customer of the class, but users can manually indicate that the card for a particular payment or prepayment should be saved by selecting the '''Save Card''' check box, which appears on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form when this option is selected. A customer payment method for the customer selected in the payment or prepayment can be created on the [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] ([~/?ScreenId=AR303010|AR303010]) form. Credit cards matched to this customer can be processed on the [HelpRoot_FormReference\CA_20_60_00|Synchronize Cards] ([~/?ScreenId=CA206000|CA206000]) form.
*''Always'' (default): The system saves a payment profile when accepting a new card payment from a customer of the class. A customer payment method for this customer can be created on the [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] form. Credit cards matched to this customer can be processed on the [HelpRoot_FormReference\CA_20_60_00|Synchronize Cards] form.
*''Never'': The system does not allow a payment profile to be saved when it accepts a new card payment for the customer. A customer payment method for this customer cannot be created on the [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] form. Credit cards matched to this customer cannot be processed on the [HelpRoot_FormReference\CA_20_60_00|Synchronize Cards] form.

When a user selects an option in the '''Save Payment Profiles''' box, this value is applied to all new payments of the existing customers that belong to this customer class.
==Changes to the Payments and Applications Form==
On the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form, for documents with the ''Payment'' and ''Prepayment'' types, the '''Save Card''' check box has been added to the Summary area, as shown in the following screenshot.[anchor|#_2f43b3b1-01be-420e-8427-026668637a2b][anchor|#_9eafb204-1568-4261-a77c-7610bd3bc918][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_Payments_and_Applications.png|popup|New '''Save Card''' check box for payments and prepayments|450px]
The check box appears on the form if all of the following conditions are met:[anchor|#_7c551ab5-4723-4018-9c9d-a6d9be8dc63e]
*The '''New Card''' check box in the Summary area of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form is selected.
*For the processing center, the '''Allow Saving Payment Profiles''' check box is selected in the Summary area of the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form.
*For the customer class to which the selected customer belongs, on the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, ''Upon Confirmation'' is selected in the '''Save Payment Profiles''' box in the '''Credit Card Processing Settings''' section of the '''General Settings''' tab.

The '''Card/Account No.''' box in the Summary area of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form is now optional for AR documents that use a credit card payment method.{br}

All actions related to credit card processing—'''Capture CC Payment''', '''Authorize CC Payment''', '''Record CC Payment''', '''Validate CC Payment''', '''Void CC Payment''', and '''Refund CC Payment'''—are now available for credit card payments without the payment profiles being saved.{br}

The '''Record CC Payment''' dialog box (shown in the following screenshot), which opens when the user clicks '''Actions''' > '''Record CC Payment''', now displays only the '''Proc. Center Tran. Nbr.''' box. In this box, the user specifies the transaction number issued by the processing center and clicks '''Save'''. To ensure that the transaction matches the payment, the system validates the transaction number before saving it in the system.[anchor|#_fb0651b4-a8fa-42f0-bc15-858424d8fbf9][anchor|#_2df42f4e-fadb-42bc-b37a-2f14da3af828][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_Record_CC_Payment.png|popup|The Record CC Payment dialog box|400px]
For documents of the ''Customer Refund'' type for which a credit card payment method is selected in the '''Payment Method''' box, the '''Proc. Center ID''' box has been added to the Summary area. This box displays the default processing center of the selected payment method.{br}

The '''Orig PC Ref. Nbr.''' box has been renamed to '''Orig. Transaction''' and moved after the '''Payment Method''' box. The following screenshot illustrates the UI changes made on this form for customer refunds.[anchor|#_423be2e6-7614-45ce-a6d4-06ba2d8c27a5][anchor|#_7757d181-4671-4267-8824-47a37f5175c1][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_Record_Customer_Refund.png|popup|UI changes for customer refunds|450px]
By default, the '''Orig. Transaction''' box is empty; if a user manually enters a value in this box, the '''Processing Center ID''' box becomes available and the refund transaction is processed by the processing center selected in the '''Processing Center ID''' box.{br}

If a value is selected automatically in the '''Orig. Transaction''' box and a credit card has been saved for the original transaction, the '''Card/Account No.''' box is shown instead of the '''Processing Center ID''' box and is filled in with the card or account number of the selected transaction. If no credit card has been saved for the original transaction, the '''Processing Center ID''' box specifies the processing center of the selected transaction. 
==Changes to the Customer Payment Methods Form==
On the [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] ([~/?ScreenId=AR303010|AR303010]) form, for a credit card payment method selected in the '''Payment Method''' box, the system checks the option in the '''Save Payment Profiles''' box on the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form for the customer's class. If the selected option is ''Never'', the system displays an error message indicating that the saving of payment profiles is not allowed for the customer class.{br}

If a credit card payment method is selected in the '''Payment Method''' box and a processing center is selected in the '''Proc. Center ID''' box, the system verifies the state of the '''Allow Saving Payment Profiles''' check box on the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form for the processing center. If this check box is cleared, the system displays an error message indicating that the saving of payment profiles is not allowed for the processing center.
==Changes to the Synchronize Cards Form==
On the [HelpRoot_FormReference\CA_20_60_00|Synchronize Cards] ([~/?ScreenId=CA206000|CA206000]) form, the functionality of the '''Load Card Data''' button has been changed. Now when a user selects a processing center in the '''Processing Center''' box and clicks '''Load Card Data''', the system checks the state of the '''Allow Saving Payment Profiles''' check box on the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form for the processing center. If the '''Allow Saving Payment Profiles''' check box is cleared, the system displays an error message and does not load card data.{br}

The functionality of the '''Process''' action has been changed. The system checks the record of the customer specified in the '''Customer ID''' column of the table on this form and the record matched to the payment profile and determines its customer class. For the customer class of this customer, if ''Never'' is selected in the '''Save Payment Profiles''' box on the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the system displays an error message and does not save the payment profile.{br}

The '''Schedules''' button has been removed from the form toolbar, and the form is now unavailable for scheduling on the [HelpRoot_FormReference\SM_20_50_20|Automation Schedules] ([~/?ScreenId=SM205020|SM205020]) form.{br}

The [HelpRoot_FormReference\CA_20_60_00|Synchronize Cards] form is now accessible to only users assigned to the ''AR Admin'' or ''System Administrator'' role (or both roles).
==Changes to the Validate External Transactions Form==
On the [HelpRoot_FormReference\AR_51_30_00|Validate External Transactions] ([~/?ScreenId=AR513000|AR513000]) form, the '''All Records''', '''Held for Review''', and '''Deferred Processing Required''' tabs have been added, as shown in the screenshots below. The '''Load Payment Profile''' column and the '''Validation is Required''' column (which is hidden by default) have been added to the tables on all tabs.[anchor|#_6dd1f5da-e35c-421a-8a9e-24b2f1d131de][anchor|#_ac0a1c94-5765-4a77-8d9a-efe27e269939][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_ValidateExtTransactions_Held_for_Review.png|popup|New tabs and new column|400px]
 The '''Held for Review''' tab shows transactions held for review, and the '''Deferred Processing Required''' tab (shown in the following screenshot) shows payments that have been imported from the selected processing center, but for which additional processing—validation of the transaction or loading of the payment profile—is required. During the validation of transactions for which loading of the payment profile is required, their payment profile is loaded if it exists in the processing center.[anchor|#_af8bab20-95a7-4c66-bcb6-daf020d67d5f][anchor|#_3d636daf-9cf2-4add-b00d-8d8bbc1e6267][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCPayments_Optional_CPM_ValidateExtTransactions_DeferredProcessingRequired.png|popup|The Deferred Processing Required tab|400px]]]></column>
			<column name="PlainText"><![CDATA[Finance: Credit Card Payments with Optional Customer Payment Methods In previous versions of  Acumatica ERP, every time a card payment was created in  Acumatica ERP, the system saved the payment profile information and created a customer payment method         for it. It was not possible to accept card payments without the payment profile information         being saved. Starting in  Acumatica ERP 2020 R2, users can configure the system in such a way that payment profile data is not saved when         card payments are processed; optionally, the data could be saved if a customer wants it to         be saved. The system can now authorize, capture, refund, and void credit card payments for         which a payment profile is not saved in the system. The following sections describe the changes that have been made to  Acumatica ERP to support this functionality. Changes to the Processing Centers Form On the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form, the  Allow           Saving Payment Profiles  check box has been added to the Summary area, as shown         in the following screenshot. The new Allow Saving Payment Profiles check box This check box is available only if the plug-in used for the processing center supports the         creation of customer profiles. Depending on the state of the  Allow Saving Payment Profiles  check         box, the system handles card payments as follows: If the check box is selected, when accepting card payments, the system extracts the           payment profile ID from the processing center and creates a customer payment method           associated with the credit card. If the check box is cleared, when accepting card payments, the system associates a           payment with the credit card transaction without creating a customer payment method. Changes to the Customer Classes Form On the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, the  Credit           Card Processing Settings  section has been added to the  General           Settings  tab, as shown in the following screenshot. The new  Credit Card Processing Settings  section The section consists of the  Save Payment Profiles  box, which         determines if payment profiles should be saved in the system for the customers of this         class. The box includes the following options:  Upon Confirmation : By default, the system does not save a payment profile when           accepting a new card payment from a customer of the class, but users can manually indicate           that the card for a particular payment or prepayment should be saved by selecting the              Save Card  check box, which appears on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form when this option is selected. A           customer payment method for the customer selected in the payment or prepayment can be           created on the   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods (AR303010) form. Credit cards           matched to this customer can be processed on the   ([~/?ScreenId=CA206000|CA206000]) Synchronize Cards (CA206000) form. Always  (default): The system saves a payment profile when accepting a new card           payment from a customer of the class. A customer payment method for this customer can be           created on the   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods form. Credit cards matched to           this customer can be processed on the   ([~/?ScreenId=CA206000|CA206000]) Synchronize Cards           form. Never : The system does not allow a payment profile to be saved when it accepts a           new card payment for the customer. A customer payment method for this customer cannot be           created on the   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods form. Credit cards matched to           this customer cannot be processed on the   ([~/?ScreenId=CA206000|CA206000]) Synchronize Cards           form. When a user selects an option in the  Save Payment Profiles  box, this         value is applied to all new payments of the existing customers that belong to this customer         class. Changes to the Payments and Applications Form On the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form, for documents with the            Payment  and  Prepayment  types, the  Save Card  check box         has been added to the Summary area, as shown in the following screenshot. New  Save Card  check box for payments and prepayments The check box appears on the form if all of the following conditions are met: The  New Card  check box in the Summary area of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form is selected. For the processing center, the  Allow Saving Payment Profiles            check box is selected in the Summary area of the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form. For the customer class to which the selected customer belongs, on the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form,  Upon Confirmation  is           selected in the  Save Payment Profiles  box in the  Credit             Card Processing Settings  section of the  General             Settings  tab. The  Card/Account No.  box in the Summary area of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form is now optional for AR documents that use a         credit card payment method. All actions related to credit card processing— Capture CC           Payment ,  Authorize CC Payment ,  Record CC           Payment ,  Validate CC Payment ,  Void CC           Payment , and  Refund CC Payment —are now available for         credit card payments without the payment profiles being saved. The  Record CC Payment  dialog box (shown in the following         screenshot), which opens when the user clicks  Actions Record CC Payment , now displays only the  Proc. Center Tran. Nbr.  box. In         this box, the user specifies the transaction number issued by the processing center and         clicks  Save . To ensure that the transaction matches the payment, the         system validates the transaction number before saving it in the system. The Record CC Payment dialog box For documents of the  Customer Refund  type for which a credit card payment method is         selected in the  Payment Method  box, the  Proc. Center           ID  box has been added to the Summary area. This box displays the default         processing center of the selected payment method. The  Orig PC Ref. Nbr.  box has been renamed to  Orig.           Transaction  and moved after the  Payment Method  box. The         following screenshot illustrates the UI changes made on this form for customer refunds. UI changes for customer refunds By default, the  Orig. Transaction  box is empty; if a user manually         enters a value in this box, the  Processing Center ID  box becomes         available and the refund transaction is processed by the processing center selected in the            Processing Center ID  box. If a value is selected automatically in the  Orig. Transaction  box         and a credit card has been saved for the original transaction, the  Card/Account           No.  box is shown instead of the  Processing Center ID          box and is filled in with the card or account number of the selected transaction. If no         credit card has been saved for the original transaction, the  Processing Center           ID  box specifies the processing center of the selected transaction.  Changes to the Customer Payment Methods Form On the   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods (AR303010) form, for a credit card         payment method selected in the  Payment Method  box, the system checks         the option in the  Save Payment Profiles  box on the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form for the customer's class. If the         selected option is  Never , the system displays an error message indicating that the         saving of payment profiles is not allowed for the customer class. If a credit card payment method is selected in the  Payment Method          box and a processing center is selected in the  Proc. Center ID  box,         the system verifies the state of the  Allow Saving Payment Profiles          check box on the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form for the         processing center. If this check box is cleared, the system displays an error message         indicating that the saving of payment profiles is not allowed for the processing center. Changes to the Synchronize Cards Form On the   ([~/?ScreenId=CA206000|CA206000]) Synchronize Cards (CA206000) form, the functionality of         the  Load Card Data  button has been changed. Now when a user selects a         processing center in the  Processing Center  box and clicks            Load Card Data , the system checks the state of the  Allow           Saving Payment Profiles  check box on the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form for the processing center. If the            Allow Saving Payment Profiles  check box is cleared, the system         displays an error message and does not load card data. The functionality of the  Process  action has been changed. The system         checks the record of the customer specified in the  Customer ID  column         of the table on this form and the record matched to the payment profile and determines its         customer class. For the customer class of this customer, if  Never  is selected in the            Save Payment Profiles  box on the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, the system displays an error         message and does not save the payment profile. The  Schedules  button has been removed from the form toolbar, and the         form is now unavailable for scheduling on the   ([~/?ScreenId=SM205020|SM205020]) Automation Schedules(SM205020) form. The   ([~/?ScreenId=CA206000|CA206000]) Synchronize Cards form is now accessible to only users         assigned to the  AR Admin  or  System Administrator  role (or both roles). Changes to the Validate External Transactions Form On the   ([~/?ScreenId=AR513000|AR513000]) Validate External Transactions (AR513000) form, the  All           Records ,  Held for Review , and  Deferred           Processing Required  tabs have been added, as shown in the screenshots below.         The  Load Payment Profile  column and the  Validation is           Required  column (which is hidden by default) have been added to the tables on         all tabs. New tabs and new column  The  Held for Review  tab shows transactions held for review, and the            Deferred Processing Required  tab (shown in the following         screenshot) shows payments that have been imported from the selected processing center, but         for which additional processing—validation of the transaction or loading of the         payment profile—is required. During the validation of transactions for which loading         of the payment profile is required, their payment profile is loaded if it exists in the         processing center. The Deferred Processing Required tab ]]></column>
		</row>
		<row PageID="cbd95519-2cdf-485b-b604-74d64c527e1f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a617454d-4185-f661-6c7b-ba2a2030a88a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, credit memos support the full retainage processing cycle along with AR invoices, making it possible to perform proper correction of project billing and providing corresponding changes in the AIA report.{br}

On the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, credit memos can be created with the following check boxes selected:[anchor|#_1bcb4042-dcf0-4eb0-90eb-239da1820c36]
*'''Apply Retainage''': Credit memos can be created manually on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form or automatically from the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form with a negative total amount of a pro forma invoice. For these credit memos, the system calculates all retainage-related information (total retainage, unreleased retainage, and retained taxes). The '''Release Retainage''' command on the '''Actions''' menu of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] is available; when the menu command is invoked, the system generates a retainage credit memo. 
*'''Pay by Line''': Credit memos with the '''Pay by Line''' check box selected and the '''Apply Retainage''' check box cleared can be created manually on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form. Credit memos created with the '''Pay by Line''' check box selected cannot be applied directly to invoices and debit memos. To apply such a credit memo, a user has to select its lines for application on the '''Documents to Apply''' tab of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.
*Both '''Apply Retainage''' and '''Pay by Line''': For these credit memos, the system calculates all retainage-related information (total retainage, unreleased retainage, and retained taxes). 
*:If a user releases retainage for lines of an AR invoice that were paid by line and had a negative '''Retainage to Release''' amount, the system creates a retainage credit memo. If a user releases retainage for lines of a credit memo paid by line with a positive '''Retainage to Release''' amount, the system creates a retainage invoice.
{br}{TOC}
==Changes to the Invoices and Memos Form for Credit Memos==
On the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, the following changes have been introduced:[anchor|#_95f699f3-89e0-42c1-b923-4cb054b138f8]
*The '''Apply Retainage''' check box has been added. For a credit memo created manually by a user, the state of this check box is copied from the customer&rsquo;s settings, which are specified on the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form. For credit memos created from pro forma invoices, retainage settings are copied from the project settings on the '''Summary''' tab of the [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]) form. With this check box selected, the '''Retainage''' tab appears on the form, as shown in the screenshots below.
*The '''Pay by Line''' check box has been added. For credit memos created manually by a user and for those created from pro forma invoices, the state of this check box is copied from the customer&rsquo;s settings, which are specified on the [HelpRoot_FormReference\AR_30_30_00|Customers] form. 
*The '''Retainage Percent''' and '''Retainage Amount''' columns have been added in the table on the '''Document Details''' tab.

If both the '''Apply Retainage''' and '''Pay by Line''' check boxes are selected for a credit memo, the system will calculate the following amounts for each document line during release of the document: '''Balance''', '''Tax Amount''', '''Retained Tax''', and '''Unreleased Retainage'''. {br}

The following screenshot illustrates a credit memo with retainage that is paid by line.{br}

[anchor|#_3cc71133-db12-4079-9e1a-3520579f6add][anchor|#_0c08ee22-8f06-44c1-8816-58c15aab5010][image:ReleaseNotes/Images/RN_2020_R2_Finance_Credit_Memo_Retainage_By_Line.png|popup|A credit memo with retainage that is paid by line|450px]{br}

The following screenshot illustrates the '''Retainage''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form with a released credit memo with retainage.[anchor|#_1535ce14-8b81-4802-8353-b20e0a2c91ed][anchor|#_37752cf7-368a-4b53-9bb8-7976a8ed7e43][image:ReleaseNotes/Images/RN_2020_R2_Finance_Credit_Memo_Retainage_By_Line_Released.png|popup|Retainage tab for a credit memo with retainage that is paid by line|450px]
==Release of Retainage for Credit Memos==
On the [HelpRoot_FormReference\AR_51_00_00|Release AR Retainage] ([~/?ScreenId=AR510000|AR510000]) form, the system now loads the following documents:[anchor|#_9cc0c75b-fd4a-4413-a23d-2f0cc07debc5]
*Invoices and credit memos with the '''Pay by Line''' check box cleared that have unreleased retainage greater than ''0.00''
*Lines of invoices and credit memos with the '''Pay by Line''' check box selected that have unreleased retainage less than or greater than ''0.00''

For credit memos, amounts in the '''Retainage to Release''', '''Unreleased Retainage''', and '''Total Amount''' columns are shown with the opposite sign of that used for the amounts in the original credit memo lines on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form. The amount in the '''Retainage to Release''' box in the Summary area is calculated similarly. Depending on the sign of the total retainage to release for each original document, the system generates either a retainage invoice (if the '''Retainage to Release''' value is greater than or equal to ''0.00'') or a retainage credit memo (if the '''Retainage to Release''' value is less than ''0.00'').
==Application of Credit Memos Paid by Line==
Credit memo lines can be applied to documents with the ''Payment'', ''Prepayment'', and ''Customer Refund'' types on the '''Documents to Apply''' tab of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.{br}

Credit memos paid by line cannot be directly applied to invoices on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form. To apply credit memo lines, a user should create a payment on this form, and then apply an invoice and credit memo lines to this payment.{br}

On the '''Documents to Apply''' tab of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form, a positive value in the '''Amount Paid''' column increases the payment&rsquo;s available balance for the credit memo lines with positive balances; a negative value in this column decreases the payment&rsquo;s available balance for the credit memo lines with negative balances. In a customer refund, positive credit memo lines decrease the available balance, while negative credit memo lines increase it.{br}

When the system loads documents for applications, positive credit memo lines and negative invoice lines are loaded and processed first because they increase the payment&rsquo;s available balance.{br}

If a user reverses applications of the positive credit memo lines, they will be processed in the same way as reversals of credit memos with the '''Pay by Line''' check box cleared. If a user reverses applications of the negative credit memo lines, the lines will be processed in the same way as reversals of applications for positive invoice lines. The value in the '''Amount Paid''' column for reversals is always shown with opposite sign of that used for the original application. {br}

Users can also void payments and refunds applied to credit memo lines with the negative sign.
==Reversal of Credit Memos==
On reversal of a credit memo with the '''Apply Retainage''' check box selected, a reversing debit memo is created. On release of this reversing debit memo, on the '''Retainage''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, the '''Unreleased Retainage''', '''Released Retainage''', '''Unpaid Retainage''', and '''Paid Retainage''' values are set to ''0.00'' for the debit memo and its lines. The same values of a reversed credit memo are also set to ''0.00''.{br}

A reversing debit memo cannot be reversed. A debit memo with the '''Pay by Line''' check box selected must be applied manually to a credit memo, so that both documents can be closed.
==Changes to Reports==
The following list summarizes changes in multiple reports that have been created to support credit memos with retainage that are paid by line:[anchor|#_8cf25119-2d16-446c-8eac-39538cad20fc]
*On the '''Report Parameters''' tab of the [HelpRoot_ReportReference\AR_63_40_00|AR Open Documents by Customer] ([~/?ScreenId=AR634000|AR634000]) and [HelpRoot_ReportReference\AR_63_41_00|AR Open Documents by Project] ([~/?ScreenId=AR634100|AR634100]) forms, the '''Include Retainage Invoices''' check box has been renamed to '''Include Retainage Documents'''.
*On the [HelpRoot_ReportReference\AR_63_10_00|AR Aging] ([~/?ScreenId=AR631000|AR631000]) form, the calculation of unreleased retainage in the ''Detailed with Retainage'' format has been improved to consider the sign of retainage documents when calculating balances (negative for credit memos and positive for debit memos and invoices).
*On the [HelpRoot_ReportReference\AR_63_45_00|AR Retainage Register] ([~/?ScreenId=AR634500|AR634500]) form, the calculation of all amounts now depends on the sign—negative for credit memos and reversing credit memos, and positive for debit memos and invoices.

==Limitation==
The remaining balance of a credit memo paid by line cannot be written off on the [HelpRoot_FormReference\AR_50_50_00|Write Off Balances and Credits] ([~/?ScreenId=AR505000|AR505000]) form. A user should manually create a debit memo to write off the balance.]]></column>
			<column name="PlainText"><![CDATA[Finance: Credit Memos with Retainage That Are Paid by Line Starting in  Acumatica ERP 2020 R2, credit memos support the full retainage processing cycle along with AR invoices, making         it possible to perform proper correction of project billing and providing corresponding         changes in the AIA report. On the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form, credit memos can be     created with the following check boxes selected: Apply Retainage : Credit memos can be created manually on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form or automatically from the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form with a negative total amount of a           pro forma invoice. For these credit memos, the system calculates all retainage-related           information (total retainage, unreleased retainage, and retained taxes). The              Release Retainage  command on the  Actions            menu of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos is available; when the menu           command is invoked,  the system generates a retainage credit memo.  Pay by Line : Credit memos with the  Pay by Line       check box selected and the  Apply Retainage  check box cleared can be      created manually on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Credit memos created      with the  Pay by Line  check box selected cannot be applied directly to      invoices and debit memos. To apply such a credit memo, a user has to select its lines for      application on the  Documents to Apply  tab of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. Both  Apply Retainage  and  Pay by Line : For           these credit memos, the system calculates all retainage-related information (total           retainage, unreleased retainage, and retained taxes).  If a user releases retainage for             lines of an AR invoice that were paid by line and had a negative  Retainage to               Release  amount, the system creates a retainage credit memo. If a user             releases retainage for lines of a credit memo paid by line with a positive                Retainage to Release  amount, the system creates a retainage             invoice. Changes to the Invoices and Memos Form for Credit Memos On the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form, the following changes         have been introduced: The  Apply Retainage  check box has been added. For a credit memo           created manually by a user, the state of this check box is copied from the customer's           settings, which are specified on the   ([~/?ScreenId=AR303000|AR303000]) Customers           (AR303000) form. For credit memos created from pro forma invoices, retainage settings are           copied from the project settings on the  Summary  tab of the   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000) form. With this check box selected,           the  Retainage  tab appears on the form, as shown in the screenshots           below. The  Pay by Line  check box has been added. For credit memos           created manually by a user and for those created from pro forma invoices, the state of           this check box is copied from the customer's settings, which are specified on the   ([~/?ScreenId=AR303000|AR303000]) Customers form.  The  Retainage Percent  and  Retainage Amount            columns have been added in the table on the  Document Details            tab. If both the  Apply Retainage  and  Pay by Line          check boxes are selected for a credit memo, the system will calculate the following amounts         for each document line during release of the document:  Balance ,            Tax Amount ,  Retained Tax , and            Unreleased Retainage .  The following screenshot illustrates a credit memo with retainage that is paid by line. A credit memo with retainage that is paid by line The following screenshot illustrates the  Retainage  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form with a released credit memo with         retainage. Retainage tab for a credit memo with retainage that is paid by line Release of Retainage for Credit Memos On the   ([~/?ScreenId=AR510000|AR510000]) Release AR Retainage (AR510000) form, the system now loads the     following documents: Invoices and credit memos with the  Pay by Line  check box cleared that           have unreleased retainage greater than  0.00 Lines of invoices and credit memos with the  Pay by Line  check box           selected that have unreleased retainage less than or greater than  0.00 For credit memos, amounts in the  Retainage to Release ,            Unreleased Retainage , and  Total Amount          columns are shown with the opposite sign of that used for the amounts in the original credit         memo lines on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. The amount         in the  Retainage to Release  box in the Summary area is calculated         similarly. Depending on the sign of the total retainage to release for each original         document, the system generates either a retainage invoice (if the  Retainage to           Release  value is greater than or equal to  0.00 ) or a retainage credit         memo (if the  Retainage to Release  value is less than          0.00 ). Application of Credit Memos Paid by Line Credit memo lines can be applied to documents with the  Payment ,  Prepayment , and       Customer Refund  types on the  Documents to Apply  tab of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. Credit memos paid by line cannot be directly applied to invoices on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form. To apply credit memo lines, a user should         create a payment on this form, and then apply an invoice and credit memo lines to this         payment. On the  Documents to Apply  tab of the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form, a positive value in the  Amount           Paid  column increases the payment's available balance for the credit memo         lines with positive balances; a negative value in this column decreases the payment's         available balance for the credit memo lines with negative balances. In a customer refund,         positive credit memo lines decrease the available balance, while negative credit memo lines         increase it. When the system loads documents for applications, positive credit memo lines and negative         invoice lines are loaded and processed first because they increase the payment's available         balance. If a user reverses applications of the positive credit memo lines, they will be processed in         the same way as reversals of credit memos with the  Pay by Line  check         box          cleared .         If a user reverses applications of the negative credit memo lines, the lines will be         processed in the same way as reversals of applications for positive invoice lines. The value         in the  Amount Paid  column for reversals is always shown with opposite         sign of that used for the original application.  Users can also void payments and refunds applied to credit memo lines with the negative     sign. Reversal of Credit Memos On reversal of a credit memo with the  Apply Retainage  check box         selected, a reversing debit memo is created. On release of this reversing debit memo, on the            Retainage  tab of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos         (AR301000) form, the  Unreleased Retainage ,  Released           Retainage ,  Unpaid Retainage , and  Paid           Retainage  values are set to  0.00  for the debit memo and its lines. The         same values of a reversed credit memo are also set to  0.00 . A reversing debit memo cannot be reversed. A debit memo with the  Pay by      Line  check box selected must be applied manually to a credit memo, so that both     documents can be closed. Changes to Reports The following list summarizes changes in multiple reports that have been created to support         credit memos with retainage that are paid by line: On the  Report Parameters  tab of the   ([~/?ScreenId=AR634000|AR634000]) AR Open Documents by Customer (AR634000) and   ([~/?ScreenId=AR634100|AR634100]) AR Open Documents by Project (AR634100) forms, the  Include Retainage       Invoices  check box has been renamed to  Include Retainage       Documents . On the   ([~/?ScreenId=AR631000|AR631000]) AR Aging (AR631000) form, the calculation of           unreleased retainage in the  Detailed with Retainage  format has been improved to           consider the sign of retainage documents when calculating balances (negative for credit           memos and positive for debit memos and invoices). On the   ([~/?ScreenId=AR634500|AR634500]) AR Retainage Register (AR634500) form, the calculation of all           amounts now depends on the sign—negative for credit memos and reversing credit           memos, and positive for debit memos and invoices. Limitation The remaining balance of a credit memo paid by line cannot be written off on the   ([~/?ScreenId=AR505000|AR505000]) Write Off Balances and Credits (AR505000) form. A user should manually create a         debit memo to write off the balance. ]]></column>
		</row>
		<row PageID="f4ac73fa-3d6f-446a-b42b-47bd186beb6c" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="60776526-e6bc-7265-d5a6-772bc041e894" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, credit card transactions created in the system were linked to sales orders and SO invoices. Starting in Acumatica ERP 2020 R2, credit card transactions are linked directly to payments that are associated with the original sales orders and SO invoices.{br}{TOC}
==The New Generate Payments for Card Transactions Form==
The new ''Generate Payments for Card Transactions (SO511000)'' form, shown in the screenshot below, has been added. On this form, users process documents that have card transactions associated with them so that the documents can be processed further in Acumatica ERP 2020 R2.[anchor|#_788e7c8a-a223-4864-a06c-b90af19aba38][anchor|#_2355a6de-ba0c-4b14-9ea8-4c27ba4d4bdb][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCTrans_Linked_to_Payments_GeneratePayments_for_Card_Transactions.png|popup|The new Generate Payments for Card Transactions form|400px]
The table of this form shows documents with the ''Sales Order'' and ''SO Invoice'' types that need to be processed. A user can limit the date range for which documents should be displayed by selecting needed dates in the '''Start Date''' and '''End Date''' boxes of the Summary area.
==Conversion of Documents with Credit Card Transactions==
On the ''Generate Payments for Card Transactions (SO511000)'' form, when a user selects a row with a document and clicks '''Process''' or '''Process All''' on the form toolbar, the system processes the selected SO invoices as follows:[anchor|#_6d823855-2ca9-4d46-8459-0e9b1f4a34da]
#Creates payments for the transactions originating from or captured on the SO invoices 
#Applies these payments to SO invoices

The system processes the selected sales orders as follows:[anchor|#_c257e5d0-ea8e-4cb9-9996-e3c89ed403c2]
#Finds the related SO invoices.
#Processes the SO invoices by creating payments for the transactions originating from or captured on the SO invoices, and applies these payments to the SO invoices.
#Creates payments for the transactions originating from the sales order, and applies these payments to the SO invoices and the sales order.
#:The system distributes the amounts in the following order:
##Between the SO invoices linked to the sales order, in the order of creation, for each invoice’s open balance
##If the payment has a nonzero balance after step 3a, applies the remainder to the sales order
##If the payment has a nonzero balance after step 3b, leaves the remainder as the open balance of the payment
#:To illustrate how the amounts are distributed, consider the following example. Before 2020 R2, a sales order was created with two lines—one line with a $100 item and the other line with a $90 item.
#:The $190 amount was preauthorized for the sales order. The $100 item was shipped and an SO invoice for $100 was created. The $90 item&rsquo;s price was changed to $80 in the sales order.
#:When a payment is created in 2020 R2 for the preauthorized amount of $190, it is distributed as follows:
##A part of the payment ($100) is applied to the SO invoice.
##The remaining balance of the payment is $90, but only $80 can be and is applied to the sales order.
##$10 remains as the open balance of the payment.

The following screenshot illustrates a sales order that has been processed on the ''Generate Payments for Card Transactions'' form and can be further processed in the system.[anchor|#_75d32769-ab75-465d-ba6d-182dd1e4f5c2][anchor|#_d801ebb8-e402-4f60-aa22-c85e63eb60e5][image:ReleaseNotes/Images/RN_2020_R2_Finance_CCTrans_Linked_to_Payments_Converted_SO.png|popup|The sales order converted on the Generate Payments for Card Transactions form|450px]]]></column>
			<column name="PlainText"><![CDATA[Finance: Credit Card Transactions Linked to Payments In previous versions of  Acumatica ERP,     credit card transactions created in the system were linked to sales orders and SO invoices.     Starting in  Acumatica ERP 2020 R2,     credit card transactions are linked directly to payments that are associated with the original     sales orders and SO invoices. The New Generate Payments for Card Transactions Form The new  Generate Payments for Card Transactions (SO511000)  form, shown in the         screenshot below, has been added. On this form, users process documents that have card         transactions associated with them so that the documents can be processed further in  Acumatica ERP 2020 R2. The new Generate Payments for Card      Transactions       form The table of this form shows documents with the  Sales Order  and  SO Invoice  types         that need to be processed. A user can limit the date range for which documents should be         displayed by selecting needed dates in the  Start Date  and            End Date  boxes of the Summary area. Conversion of Documents with Credit Card Transactions On the  Generate Payments for Card Transactions (SO511000)  form, when a user selects a         row with a document and clicks  Process  or  Process           All  on the form toolbar, the system processes the selected SO invoices as         follows: Creates payments for the transactions originating from or captured on the SO invoices  Applies these payments to SO invoices The system processes the selected sales orders as follows: Finds the related SO invoices. Processes the SO invoices by creating payments for the transactions originating from or           captured on the SO invoices, and applies these payments to the SO invoices. Creates payments for the transactions originating from the sales order, and applies           these payments to the SO invoices and the sales order. The system distributes the             amounts in the following order: Between the SO invoices linked to the sales order, in the order of creation, for               each invoice’s open balance If the payment has a nonzero balance after step 3a, applies the remainder to the               sales order If the payment has a nonzero balance after step 3b, leaves the remainder as the open               balance of the payment To illustrate how the amounts are distributed, consider the following example.             Before  2020 R2, a sales order was created with two lines—one line with a $100 item and the             other line with a $90 item. The $190 amount was preauthorized for the sales order.             The $100 item was shipped and an SO invoice for $100 was created. The $90 item's price             was changed to $80 in the sales order. When a payment is created in  2020 R2 for the preauthorized amount of $190, it is distributed as follows: A part of the payment ($100) is applied to the SO invoice. The remaining balance of the payment is $90, but only $80 can be and is applied to               the sales order. $10 remains as the open balance of the payment. The following screenshot illustrates a sales order that has been processed on the  Generate           Payments for Card Transactions  form and can be further processed in the system. The sales order converted on the Generate Payments for Card Transactions form ]]></column>
		</row>
		<row PageID="7604f954-dabf-4bf0-a5b3-0cde58770ebd" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="7ed1b22e-f993-68ed-1a4b-369802ea8813" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, the direct input mode for entering credit card information has been discontinued. The hosted form provided by the applicable processing center must be used to enter credit card data when customer payment methods are created for the payment methods based on credit cards.{br}

On the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form, if the '''Allow Direct Input''' check box was selected for a particular processing center in a previous version, it remains on the form, but it now displays a warning, as shown in the following screenshot. For a newly created processing center and for the processing centers for which this check box was cleared in the previous versions, the check box does not appear on the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] form.[anchor|#_0dc3cd23-2414-449e-af97-dc9bf9efa013][anchor|#_a1381b2a-cfd8-4af3-b0e3-b59c26ef2a9a][image:ReleaseNotes/Images/RN_2020_R2_Finance_Discontinued_Direct_Input_Processing_Centers.png|popup|The Processing Centers (CA205000) form with a warning message|400px]{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Finance: Discontinued Direct Input Mode for Credit Cards Starting in  Acumatica ERP 2020 R2, the direct input mode for entering credit card information has been discontinued. The         hosted form provided by the applicable processing center must be used to enter credit card         data when customer payment methods are created for the payment methods based on credit         cards. On the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form, if the            Allow Direct Input  check box was selected for a particular         processing center in a previous version, it remains on the form, but it now displays a         warning, as shown in the following screenshot. For a newly created processing center and for         the processing centers for which this check box was cleared in the previous versions, the         check box does not appear on the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers form. The Processing Centers (CA205000) form with a warning message ]]></column>
		</row>
		<row PageID="c5fce7ab-5d26-4f27-bd27-a35afb0c9570" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="5e771628-a908-2458-b5db-244228a09458" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, multiple UI and functionality improvements have been introduced to bank transaction processing to make it easier for users to process bank transactions.{br}{TOC}
==Changes to the Import Bank Transactions Form=={br}

On the [HelpRoot_FormReference\CA_30_65_00|Import Bank Transactions] ([~/?ScreenId=CA306500|CA306500]) form, the '''Process Transactions''' button has been added to the form toolbar. The button is available if a bank statement is selected on the form, as shown in the following screenshot.[anchor|#_e69dfc16-eefd-4fba-a025-f66fe9b54385][anchor|#_05c5d45c-2d3b-4a67-9c48-0c8ffd2cb0a7][image:ReleaseNotes/Images/RN_2020_R2_Finance_BankTranProcessing_Import_Bank_Transactions.png|popup|The Process Transactions button|450px]
When a user clicks this button, the system navigates to the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form and automatically selects the cash account specified in the bank statement in the '''Cash Account''' box.
==Changes to the Process Bank Transactions Form==
When there were many transactions in the system, in the previous versions of Acumatica ERP, it was difficult to see which cash accounts had imported but unprocessed transactions. To address this issue, the Process Bank Transactions (CA3060PL) substitute form (shown in the following screenshot) has been added to make it easier for users to work with the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form. When a user clicks the form name in a workplace or search results, this form is brought up instead of [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions], and it lists all cash accounts for which bank transactions can be processed. The following screenshot illustrates the substitute form with the '''All Records''' and '''Unprocessed Transactions''' tabs.[anchor|#_e7b0d813-f3e8-4b84-96c9-b6bdf4ed6d84][anchor|#_fa1545e1-cd8c-4022-aec1-f05a85376b9a][image:ReleaseNotes/Images/RN_2020_R2_Finance_BankTranProcessing_Substitute_Form.png|popup|The Process Bank Transactions substitute form|400px]{br}

The '''Unprocessed Transactions''' tab lists cash accounts for which bank transactions have been loaded to the system, but not yet processed.
==Changes to the Process Bank Transaction Form==
On the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form, the following UI changes have been introduced to the '''Create Payment''' tab:[anchor|#_9c5ee0be-d273-4d43-a932-aaa03c807ed3]
*The '''Payment Date''' box has been added. The default value is copied from the date of the bank transaction and can be overridden.
*The '''Fin. Period''' box has been added. The default value is based on the bank transaction date on the [HelpRoot_FormReference\CA_30_65_00|Import Bank Transactions] ([~/?ScreenId=CA306500|CA306500]) form and can be overridden.
*The '''Amount Used''' box has been renamed to '''Detail Total'''.
*The '''Clear Rule''' and '''Create Rule''' buttons have been moved to the right of the tab.
*If ''AR'' or ''AP'' is selected in the '''Module''' box, the '''Clear Rule''' and '''Create Rule''' buttons do not appear on the tab, because rule creation is possible for only cash management transactions.
*If ''AR'' or ''AP'' is selected in the '''Module''' box, the '''Customer Order''', '''Vendor Ref.''', and '''Reference Nbr.''' columns appear in the invoice selector.

The following screenshot illustrates the UI changes on the '''Create Payment''' tab for a cash management transaction.[anchor|#_6732fc5e-2701-4530-8be1-572fc53a60f1][anchor|#_bfb85152-043c-44da-8c2e-37a462be1918][image:ReleaseNotes/Images/RN_2020_R2_Finance_ImprovedBankTran_Create_Payment_Tab_CA.png|popup|UI changes on the Create Payment tab for CA|300px]
==Changes to the Bank Transaction Rules Form==
On the Bank Transaction Rules (CA2045PL) form, the '''Rule''' column has been removed and the '''Description''' column has been renamed to '''Rule Description'''. Rules are now sorted by their description in ascending order.{br}

On the [HelpRoot_FormReference\CA_20_45_00|Bank Transaction Rules] ([~/?ScreenId=CA204500|CA204500]) form, the following improvements have been introduced:[anchor|#_f8a6e884-7586-4bd8-acf0-db8f2de7efd5]
*The '''Bank Transaction Rule ID''' box has been removed. 
*The '''Description''' box has been renamed to '''Rule Description''' (which is required).
*The '''Use Wildcards''' check box in the '''Matching Criteria''' section has been renamed to '''Use Wildcards (&#42;, ?)'''
*The '''Description''' box in the '''Matching Criteria''' section has been renamed to '''Tran. Description'''.
*In the '''Action''' box in the '''Output''' section, the ''Hide'' option has been renamed to ''Hide Transaction''.

These same improvements have been made in the '''Create Rule''' dialog box of the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form. This dialog box opens when a user selects the '''Create''' check box on the '''Create Payment''' tab of the form and clicks '''Create Rule'''.{br}

The following screenshot shows the UI changes on the [HelpRoot_FormReference\CA_20_45_00|Bank Transaction Rules] form.[anchor|#_2de3f000-16c7-4314-af5a-fd84f93e2abf][anchor|#_93dd2fe2-56ab-4a7f-bef5-eadb19b078eb][image:ReleaseNotes/Images/RN_2020_R2_Finance_ImprovedBankTran_Bank_Transaction_Rules.png|popup|UI changes on the Bank Transaction Rules form|300px]
Additionally, in the '''Bank Transaction Rules''' dialog box, the following changes have been introduced, which are shown in the following screenshot:[anchor|#_c163aa4d-ccda-4154-b13d-1f8257cd2189]
*The form toolbar at the top of the dialog box and the standard buttons have been removed.
*The '''Save & Close''' button has been moved to the bottom of the dialog box.
*The '''Save & Apply''' button has been added. When a user clicks this button, the system saves the rule, closes the dialog box, and applies the rule to the existing transactions. This button is available only for active rules.
[anchor|#_60fe1121-bde4-47e2-aa98-068193649d65][anchor|#_0c749b87-7451-491a-95ec-b9a3c885529a][image:ReleaseNotes/Images/RN_2020_R2_Finance_ImprovedBankTran_Bank_Transaction_Rules_Dialog_Box.png|popup|UI changes in the Bank Transaction Rules dialog box|250px]]]></column>
			<column name="PlainText"><![CDATA[Finance: Improved Usability of Bank Transaction Processing In  Acumatica ERP 2020 R2, multiple UI and functionality improvements have been introduced to bank transaction         processing to make it easier for users to process bank transactions. Changes to the Import Bank Transactions Form On the   ([~/?ScreenId=CA306500|CA306500]) Import Bank Transactions (CA306500) form, the  Process           Transactions  button has been added to the form toolbar. The button is         available if a bank statement is selected on the form, as shown in the following         screenshot. The Process Transactions button When a user clicks this button, the system navigates to the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form and automatically selects the cash         account specified in the bank statement in the  Cash Account  box. Changes to the Process Bank Transactions Form When there were many transactions in the system, in the previous versions of  Acumatica ERP, it was difficult to see which cash accounts had imported but unprocessed transactions.         To address this issue, the Process Bank Transactions (CA3060PL) substitute form (shown in         the following screenshot) has been added to make it easier for users to work with the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form. When a user clicks the form name         in a workplace or search results, this form is brought up instead of   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions, and it lists all cash accounts for which bank         transactions can be processed. The following screenshot illustrates the substitute form with         the  All Records  and  Unprocessed Transactions            tabs. The Process Bank Transactions substitute form The  Unprocessed Transactions  tab lists cash accounts for which bank         transactions have been loaded to the system, but not yet processed. Changes to the Process Bank Transaction Form On the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form, the following UI         changes have been introduced to the  Create Payment  tab: The  Payment Date  box has been added. The default value is copied           from the date of the bank transaction and can be overridden. The  Fin. Period  box has been added. The default value is based on           the bank transaction date on the   ([~/?ScreenId=CA306500|CA306500]) Import Bank Transactions (CA306500)           form and can be overridden. The  Amount Used  box has been renamed to  Detail             Total . The  Clear Rule  and  Create Rule  buttons           have been moved to the right of the tab. If  AR  or  AP  is selected in the  Module  box, the              Clear Rule  and  Create Rule  buttons do not           appear on the tab, because rule creation is possible for only cash management           transactions. If  AR  or  AP  is selected in the  Module  box, the              Customer Order ,  Vendor Ref. , and              Reference Nbr.  columns appear in the            invoice           selector . The following screenshot illustrates the UI changes on the  Create           Payment  tab for a cash management transaction. UI changes on the Create Payment tab for CA Changes to the Bank Transaction Rules Form On the Bank Transaction Rules (CA2045PL) form, the  Rule  column has         been removed and the  Description  column has been renamed to            Rule Description . Rules are now sorted by their description in         ascending order. On the   ([~/?ScreenId=CA204500|CA204500]) Bank Transaction Rules (CA204500) form, the following         improvements have been introduced: The  Bank Transaction Rule ID  box has been           removed .            The  Description  box has been renamed to  Rule             Description  (which is required). The  Use Wildcards  check box in the  Matching             Criteria  section has been renamed to  Use Wildcards (*,             ?) The  Description  box in the  Matching             Criteria  section has been renamed to  Tran.             Description . In the  Action  box in the  Output  section,           the  Hide  option has been renamed to  Hide Transaction . These same improvements have been made in the  Create Rule  dialog box         of the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form. This dialog box opens         when a user selects the  Create  check box on the  Create           Payment  tab of the form and clicks  Create Rule . The following screenshot shows the UI changes on the   ([~/?ScreenId=CA204500|CA204500]) Bank Transaction Rules form. UI changes on the Bank Transaction Rules form Additionally, in the  Bank Transaction Rules  dialog box, the         following changes have been introduced, which are shown in the following screenshot: The form toolbar at the top of the dialog box and the standard buttons have been           removed. The  Save & Close  button has been moved to the bottom of the           dialog box. The  Save & Apply  button has been added. When a user clicks           this button, the system saves the rule, closes the dialog box, and applies the rule to the           existing transactions. This button is available only for active rules. UI changes in the Bank Transaction Rules dialog box ]]></column>
		</row>
		<row PageID="6c888250-78a6-4797-8113-6909167f1689" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="bf976daf-cc2d-ffac-f738-8c1f90346d16" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, the [HelpRoot_ReportReference\AP_63_10_00|AP Aged Past Due] ([~/?ScreenId=AP631000|AP631000]) and [HelpRoot_ReportReference\AP_63_11_00|AP Aged Past Due MC] ([~/?ScreenId=AP631100|AP631100]) reports showed all open AP documents, regardless of the date a user specified in the '''Aging Date''' box on the '''Report Parameters''' tab of the respective report form. As a result, the reports showed open AP documents even if they were dated later than the specified aging date and did not show closed AP documents that were closed later than the aging date. The aging date was used only to break down the listed documents by aging periods; users had no way to view document balances as of a specific date.{br}

Starting in Acumatica ERP 2020 R2, the improved ''AP Aging (AP631000)'' and ''AP Aging MC (AP631100)'' reports are instead provided. (The names have changed, but the numbers are the same.) These reports show released AP documents whose document dates are earlier than or the same as the date specified by the user in the '''Age as of Date''' box on the '''Report Parameters''' tab. The reports also show the document balances as of the aging date.{br}{TOC}
==Changes in Document Retrieval and Balance Calculation==
In Acumatica ERP 2020 R2, the logic of retrieving documents to be shown on the ''AP Aging (AP631000)'' and ''AP Aging MC (AP631100)'' reports and of calculating document balances has been changed from that of the [HelpRoot_ReportReference\AP_63_10_00|AP Aged Past Due] ([~/?ScreenId=AP631000|AP631000]) and [HelpRoot_ReportReference\AP_63_11_00|AP Aged Past Due MC] ([~/?ScreenId=AP631100|AP631100]) reports. The system retrieves documents that meet the following criteria:[anchor|#_76fff693-09e2-4f04-b081-46595d6095eb]
*The document is released.
*The document&rsquo;s date is earlier than or the same as the date specified in the '''Age as of Date''' box on the '''Report Parameters''' tab.
*The document is not fully paid on the aging date.

In the report, the system calculates a document balance as of the age date by decreasing its amount with the amount of the released applications dated not later than the aging date.
==UI Changes==
The following UI changes have been introduced to support these improvements:[anchor|#_05833986-312d-4d7a-8eed-99ad60da470b]
*The [HelpRoot_ReportReference\AP_63_10_00|AP Aged Past Due] ([~/?ScreenId=AP631000|AP631000]) report has been renamed to ''AP Aging''.
*The [HelpRoot_ReportReference\AP_63_11_00|AP Aged Past Due MC] ([~/?ScreenId=AP631100|AP631100]) report has been renamed to ''AP Aging MC''.
*The [HelpRoot_ReportReference\AP_63_15_00|AP Aged Outstanding] ([~/?ScreenId=AP631500|AP631500]) report has been renamed to ''AP Coming Due''.
*The [HelpRoot_ReportReference\AP_63_16_00|AP Aged Outstanding MC] ([~/?ScreenId=AP631600|AP631600]) report has been renamed to ''AP Coming Due MC''.
*On the '''Report Parameters''' tab of the ''AP Aging'' and ''AP Aging MC'' report forms, the '''Aging Date''' box has been renamed to '''Age as of Date'''.
]]></column>
			<column name="PlainText"><![CDATA[Finance: Improvements in AP Aging Reports In previous versions of  Acumatica ERP, the   ([~/?ScreenId=AP631000|AP631000]) AP Aged Past Due (AP631000) and   ([~/?ScreenId=AP631100|AP631100]) AP Aged Past Due MC (AP631100) reports showed all open AP documents,         regardless of the          date         a user specified in the  Aging Date  box on the  Report           Parameters  tab of the respective report form. As a result, the reports showed         open AP documents even if they were dated later than the specified aging date and did not         show closed AP documents that were closed later than the aging date. The aging date was used         only to break down the listed documents by aging periods; users had no way to view document         balances as of a specific date. Starting in  Acumatica ERP 2020 R2, the improved  AP Aging (AP631000)  and  AP Aging MC (AP631100)  reports are         instead provided. (The names have changed, but the numbers are the same.) These reports show         released AP documents whose document dates are earlier than or the same as the date         specified by the user in the  Age as of Date  box on the            Report Parameters  tab. The reports also show the document balances         as of the aging date. Changes in Document Retrieval and Balance Calculation In  Acumatica ERP 2020 R2, the logic of retrieving documents to be shown on the  AP Aging (AP631000)  and            AP Aging MC (AP631100)  reports and of calculating document balances has been         changed from that of the   ([~/?ScreenId=AP631000|AP631000]) AP Aged Past Due (AP631000) and   ([~/?ScreenId=AP631100|AP631100]) AP Aged Past Due MC (AP631100) reports. The system retrieves documents         that meet the following criteria: The document            is           released . The document's date is earlier than or the same as the date specified in the              Age as of Date  box on the  Report             Parameters  tab. The document            is not fully paid on the aging           date . In the report, the system calculates a document balance as of the age date by decreasing         its amount with the amount of the released applications dated not later than the aging         date. UI Changes The following UI changes have been introduced to support these improvements: The   ([~/?ScreenId=AP631000|AP631000]) AP Aged Past Due (AP631000) report has been renamed to              AP Aging . The   ([~/?ScreenId=AP631100|AP631100]) AP Aged Past Due MC (AP631100) report has been renamed to              AP Aging MC . The   ([~/?ScreenId=AP631500|AP631500]) AP Aged Outstanding (AP631500) report has been renamed to              AP Coming Due . The   ([~/?ScreenId=AP631600|AP631600]) AP Aged Outstanding MC (AP631600) report has been renamed to              AP Coming Due MC . On the  Report Parameters  tab of the  AP Aging  and  AP             Aging MC  report forms, the  Aging Date  box has been renamed to              Age as of Date . ]]></column>
		</row>
		<row PageID="5cd9b0d7-7545-415f-a3e3-daf0c55d6b55" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6b51900a-0bd9-7c87-f2b9-3fd2a7f8a40d" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, multiple changes have been made to the [HelpRoot_ReportReference\CA_62_70_00|Reconciliation Statement] ([~/?ScreenId=CA627000|CA627000]) report, which is a print-friendly version of a reconciliation statement created on the [HelpRoot_FormReference\CA_30_20_00|Reconciliation Statements] ([~/?ScreenId=CA302000|CA302000]) form.{br}

The improved report now shows the following information that was not available in previous versions of Acumatica ERP:[anchor|#_f6ba2391-3518-4194-b34b-3eed66c11b4b]
*The starting bank statement balance
*The cash account balance as of the statement date (previously, the balance at the end of the financial period was shown)
*The list and total of unreconciled disbursements and receipts
*The list and total of reconciled disbursements and receipts

The following screenshot illustrates the current report.[anchor|#_7be9fa4e-89cc-4ce0-9761-079b163cf362][anchor|#_5e719e0a-a272-49c7-bc33-1957b59af2cd][image:ReleaseNotes/Images/RN_2020_R2_Finance_Reconciliation_Statement_Report_Report_Form.png|popup|The improved Reconciliation Statement (CA627000) report|400px]{br}{TOC}
==Changes to the Reconciliation Statements (CA302000) Form==
On the [HelpRoot_FormReference\CA_30_20_00|Reconciliation Statements] ([~/?ScreenId=CA302000|CA302000]) form, the '''Print''' menu has been added to the form toolbar, with the '''Reconciliation Statement Report''' command. By clicking this command, a user can run a reconciliation statement report with the system automatically filling in the following report parameters before generating the [HelpRoot_ReportReference\CA_62_70_00|Reconciliation Statement] ([~/?ScreenId=CA627000|CA627000]) report: [anchor|#_8166c98a-35d5-4467-af77-3766203c29bb]
*'''Cash Account''': The account selected in the '''Cash Account''' box in the Summary area
*'''Statement Date''': The date selected in the '''Reconciliation Date''' box in the Summary area
*'''Show Reconciled Transactions''': Cleared (if the reconciliation statement has been released)
]]></column>
			<column name="PlainText"><![CDATA[Finance: Improvements to the Reconciliation Statement Report In  Acumatica ERP 2020 R2, multiple changes have been made to the   ([~/?ScreenId=CA627000|CA627000]) Reconciliation Statement         (CA627000) report, which is a print-friendly version of a reconciliation statement created         on the   ([~/?ScreenId=CA302000|CA302000]) Reconciliation Statements (CA302000) form. The improved report now shows the following information that was not available in previous         versions of  Acumatica ERP: The starting bank statement balance The cash account balance as of the statement date (previously, the balance at the end of           the financial period was shown) The list and total of unreconciled disbursements and receipts The list and total of reconciled disbursements and receipts The following screenshot illustrates the current report. The improved Reconciliation Statement (CA627000) report Changes to the Reconciliation Statements (CA302000) Form On the   ([~/?ScreenId=CA302000|CA302000]) Reconciliation Statements (CA302000) form, the            Print  menu has been added to the form toolbar, with the            Reconciliation Statement Report  command. By clicking this command,         a user can run a reconciliation statement report with the system automatically filling in         the following report parameters before generating the   ([~/?ScreenId=CA627000|CA627000]) Reconciliation Statement (CA627000) report:  Cash Account : The account selected in the  Cash             Account  box in the Summary area Statement Date : The date selected in the  Reconciliation             Date  box in the Summary area Show Reconciled Transactions : Cleared (if the reconciliation           statement has been released) ]]></column>
		</row>
		<row PageID="38f17273-7862-414b-b241-b3e503d1afd9" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6728bd9d-a69e-7714-1445-4524d2b2ad2d" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, if multiple related companies or branches in the same tenant provided services or sold goods to one another, to record these transactions, an accountant in each company or branch had to manually create an extra entity: The accountant in one company or branch had to create a customer for the purchasing company or branch, and the accountant in the other company or branch had to create a vendor for the selling company or branch. Then the accountant in the first company or branch had to create and process an AR invoice to the customer, and the accountant in the second company or branch had to create an AP bill from the vendor. Thus, one transaction was processed by the accounting departments of two companies or branches within the organization.{br}

Starting in Acumatica ERP 2020 R2, users can process sales transactions between legal entities implemented as companies or branches in the same tenant. While viewing a company or branch, an administrator can quickly extend it—that is, cause it to be defined as a customer or vendor. Also, the system can automatically create AP bills in the purchasing company based on the AR invoices created in the selling company.{br}

The intercompany sales functionality is available in the system if the ''Inter-Branch Transactions'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.{br}{TOC}
==Changes to the Companies Form==
On the '''Actions''' menu of the [HelpRoot_FormReference\CS_10_15_00|Companies] ([~/?ScreenId=CS101500|CS101500]) form, the '''Extend to Customer''', '''Extend to Vendor''', '''View Customer''', and '''View Vendor''' commands have been added, as shown in the following screenshot.[anchor|#_bd62ec5c-5861-4134-8a60-75b9a7f498e1][anchor|#_e49fb33d-935e-4da9-a1da-3ba4a834d105][image:ReleaseNotes/Images/RN_2020_R2_Finance_Companies_Extend_to_CustomerVendor.png|popup|New commands on the Actions menu|400px]
These menu commands are available for companies that have the ''Without Branches'' company type specified in the Summary area of the form. ((({S:Warn}Branches of companies with the ''With Branches Not Requiring Balancing'' or ''With Branches Requiring Balancing'' company type can be extended to a customer or vendor on the [HelpRoot_FormReference\CS_10_20_00|Branches] ([~/?ScreenId=CS102000|CS102000]) form.
)))
If the user clicks '''Actions''' > '''Extend to Customer''', the system navigates to the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form and automatically inserts the company's settings into the appropriate boxes. Also, the system inserts (in the '''Customer Class''' box on the '''General Settings''' tab) the customer class that is specified in the '''Default Customer Class ID''' box on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. Accordingly, on the [HelpRoot_FormReference\AR_30_30_00|Customers] form, it inserts the settings specified for the default customer class, except for the '''Tax Zone''' on the '''Delivery Settings''' tab, '''Shipping Rule''' on the '''Delivery Settings''' tab, and the subaccounts specified on the''' GL Accounts''' tab (if subaccounts are in use in the system); these settings are instead copied from the company settings. If the user specifies another customer class, the system similarly inserts its settings except for the overriding company settings. The user should review and update the settings of the customer record and then save it. Once the customer based on the company has been saved, this customer can be selected for documents on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form.((({S:Hint}Once a company with the ''Without Branches'' type has been extended to a customer, a user cannot change the type of this company.
)))
If the user clicks '''Actions''' > '''Extend to Vendor''', the system navigates to the [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form and automatically inserts the company's settings into the appropriate boxes. Also, the system inserts (in the '''Vendor Class''' box on the '''General Settings''' tab) the vendor class that is specified in the '''Default Vendor Class ID''' box on the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form. Accordingly, on the [HelpRoot_FormReference\AP_30_30_00|Vendors] form, it inserts the settings specified for the default vendor class, except for the '''Tax Zone''' on the '''Purchase Settings''' tab, '''Shipping Rule''' on the '''Purchase Settings''' tab, and the subaccounts specified on the''' GL Accounts''' tab (if subaccounts are in use in the system); these settings are instead copied from the company settings. If the user specifies another vendor class, the system similarly inserts its settings except for the overriding company settings. The user should review and update the settings of the vendor record and then save it. Once the vendor based on the company has been saved, this vendor can be selected for documents on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form.{br}

For a company that has been extended to a customer or a vendor (or both), the '''View Customer''' command or '''View Vendor''' command (or both commands) become available on the '''Actions''' menu of the [HelpRoot_FormReference\CS_10_15_00|Companies] form, as shown in the following screenshot.[anchor|#_b4a5f967-dee5-4d23-ab26-4a0b4bad50f1][anchor|#_3d45c711-f698-49ea-a96e-6c9cd5e1b5b8][image:ReleaseNotes/Images/RN_2020_R2_Finance_Companies_View_CustomerVendor.png|popup|The View Customer and View Vendor commands on the Actions menu|400px]((({S:Warn}A company extended to a customer or vendor cannot be deleted; the customer or vendor record has to be deleted first.
)))
==Changes to the Branches Form==
On the '''Actions''' menu of the [HelpRoot_FormReference\CS_10_20_00|Branches] ([~/?ScreenId=CS102000|CS102000]) form, the '''Extend to Customer''', '''Extend to Vendor''', '''View Customer''', and '''View Vendor''' commands have been added, as shown in the following screenshot.[anchor|#_0d93148b-d731-460e-9bd4-c9846ab2e41b][anchor|#_14e6aad7-fcee-4183-ac39-4a9b01df2092][image:ReleaseNotes/Images/RN_2020_R2_Finance_Branches_Extend_to_CustomerVendor.png|popup|New commands on the Actions menu|400px]
These menu commands are available for branches in companies that have the ''With Branches Not Requiring Balancing'' or ''With Branches Requiring Balancing'' company type selected in the Summary area of the [HelpRoot_FormReference\CS_10_15_00|Companies] ([~/?ScreenId=CS101500|CS101500]) form.{br}

If the user clicks '''Actions''' > '''Extend to Customer''', the system navigates to the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form and automatically inserts the branch settings into the appropriate boxes. Also, the system inserts (in the '''Customer Class''' box on the '''General Settings''' tab) the customer class that is specified in the '''Default Customer Class ID''' box on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. Accordingly, on the [HelpRoot_FormReference\AR_30_30_00|Customers] form, it inserts the settings specified for the default customer class, except for the '''Tax Zone''' on the '''Delivery Settings''' tab, '''Shipping Rule''' on the '''Delivery Settings''' tab, and the subaccounts specified on the''' GL Accounts''' tab (if subaccounts are in use in the system); these settings are instead copied from the branch settings. If the user specifies another customer class, the system similarly inserts its settings except for the overriding branch settings. The user should review and update the customer record and then save it. Once the customer based on the branch has been saved, this customer can be selected for documents on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form.{br}

If the user clicks '''Actions''' > '''Extend to Vendor''', the system navigates to the [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form and automatically inserts the branch settings into the appropriate boxes. Also, the system inserts (in the '''Vendor Class''' box on the '''General Settings''' tab) the vendor class that is specified in the '''Default Vendor Class ID''' box on the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form. Accordingly, on the [HelpRoot_FormReference\AP_30_30_00|Vendors] form, the system inserts the settings specified for the default vendor class, except for the '''Tax Zone''' on the '''Delivery Settings''' tab, '''Shipping Rule''' on the '''Delivery Settings''' tab, and the subaccounts specified on the''' GL Accounts''' tab (if subaccounts are in use in the system); these settings are instead copied from the branch settings. If the user specifies another vendor class, the system similarly inserts its settings except for the overriding branch settings. The user should review and update the vendor&rsquo;s information and save the new vendor record. Once the vendor based on the branch has been saved, this vendor can be selected for documents on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form.{br}

For a branch that has been extended to a customer or a vendor (or both), the '''View Customer''' command or '''View Vendor''' command (or both commands) become available on the '''Actions''' menu of the [HelpRoot_FormReference\CS_10_15_00|Companies] form, as shown in the following screenshot.[anchor|#_3f492d52-f19d-4367-9c8e-37ddac763223][anchor|#_4ee3bef5-48d3-4046-a9e1-983e5590603b][image:ReleaseNotes/Images/RN_2020_R2_Finance_Branches_View_CustomerVendor.png|popup|View Customer and View Vendor commands on the Actions menu|400px]((({S:Warn}A branch extended to a customer or vendor cannot be deleted; the customer or vendor record has to be deleted first.
)))
==Changes to the Accounts Receivable Preferences Form==
On the '''General Settings''' tab ('''Data Entry Settings''' section) of the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form, the new '''Use Intercompany Sales Account From''' box has been added, as shown in the following screenshot.[anchor|#_c3242fc9-9dc5-4ba3-b566-8cbd83477125][anchor|#_430583d7-bced-4144-872d-ab5ff38ad9b0][image:ReleaseNotes/Images/RN_2020_R2_Finance_Intercompany_Sales_AR_Preferences.png|popup|New box on the General Settings tab|400px]
This setting defines which sales account the system inserts in intercompany AR documents of a customer that was extended from a company or branch. The following options can be selected:[anchor|#_ddc01d18-ec94-456d-8558-126761621d19]
*''Customer Location'': The system inserts the sales account specified in the '''Sales Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) form.
*''Inventory Item'': The system inserts the sales account specified in the '''Sales Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form for stock items or of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form for non-stock items.

==Changes to the Accounts Payable Preferences Form==
On the '''General Settings''' tab ('''Data Entry Settings''' section) of the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form, the new '''Use Intercompany Expense Account From''' box has been added, as shown in the following screenshot.[anchor|#_c518a56e-0c2d-4e3c-a5be-5b21ddb98bce][anchor|#_b4308b96-6587-4be7-a586-50f416f7b9d9][image:ReleaseNotes/Images/RN_2020_R2_Finance_Intercompany_Sales_AP_Preferences.png|popup|New box on the General Settings tab|400px]
This setting defines which expense account the system inserts in intercompany AP documents of a vendor that was extended from a company or branch. The following options can be selected:[anchor|#_e13e3455-d6fb-49fc-9191-d114f27db6cd]
*''Vendor Location'': The system inserts the expense account specified in the '''Expense Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) form.
*''Inventory Item'': The system inserts the expense account specified in the '''Expense Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form for stock items or of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form for non-stock items.

==Changes to the Invoices and Memos Form==
On the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, the '''Intercompany Invoicing''' section has been added to the '''Financial Details''' tab, and the '''Generate/View AP Document''' command has been added to the '''Actions''' menu. The new UI elements are illustrated in the following screenshot.[anchor|#_851c0553-d641-42bf-aadc-b45a8679b582][anchor|#_91226017-4381-4b28-aab7-c282c40dd7b5][image:ReleaseNotes/Images/RN_2020_R2_Finance_Intercompany_Sales_Invoices_and_Memos.png|popup|UI changes on the Invoices and Memos form|450px]
The '''Related AP Document''' box of the '''Intercompany Invoicing''' section shows a link with the reference number of the AP bill that has been generated automatically from the selected AR invoice. Users can click this link to navigate to the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form with this document open.{br}

If the '''Exclude from Intercompany Processing''' check box (also in the '''Intercompany Invoicing''' section) is selected, the selected invoice should not be used for generating a related AP bill. {br}

If the user clicks '''Actions''' > '''Generate/View AP Document''', the system automatically creates an AP document related to the selected AR document or opens an existing AP document on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form.((({S:Warn}The system copies multiple parameters from an AR document to an AP document. For details, see [[#_82bbf0f9-8309-48e1-81de-b58911090105|Mapping Rules for the Creation of AP Documents].
)))
==Changes to the Bills and Adjustments Form==
On the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form, the '''Intercompany Invoicing''' section has been added to the '''Financial Details''' tab, as illustrated in the following screenshot.[anchor|#_423dd9b7-9582-4790-b7a6-e48378d541f6][anchor|#_03b09fe2-e65f-43de-bc11-a835598008c7][image:ReleaseNotes/Images/RN_2020_R2_Finance_Intercompany_Sales_Bills_and_Adjustments.png|popup|UI changes on the Bills and Adjustments form|450px]
The '''Related AR Document''' box of this section is a lookup box where a user can view the AR document based on which the AP document was created or can select a corresponding AR document from the list for a manually entered AP document. The list in this box contains AR documents for which the customer is the originating branch of the AP document and AR documents for which the branch is the vendor of the AP document. Users can click the Edit button to the right of this box to open the related AR document on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form.
==New Generate Intercompany Documents Form==
The ''Generate Intercompany Documents (AP503500)'' form, shown in the following screenshot, has been added for the mass generation of AP documents based on AR documents from the selling company. [anchor|#_600ddb98-df06-4f10-b317-69fc1e5fda72][anchor|#_e9c635c0-cbe3-4344-a814-03cd875f02ea][image:ReleaseNotes/Images/RN_2020_R2_Finance_Intercompany_Sales_Generate_Intercompany_Documents.png|popup|Generate Intercompany Documents form|400px]
In the boxes of the Selection area of the form, the user specifies the selection criteria for the documents to be loaded in the table. The user can also manage the process of generating AP documents by using the following check boxes:[anchor|#_ff6e88ac-7802-4cc7-8c9a-0bf57fecf831]
*'''Create AP Documents on Hold''': If this check box is selected, AP documents will be created with the ''On Hold'' status. If it is cleared, AP documents will be created with the ''Balanced'' or ''Pending Approval'' status, depending on whether approvals have been configured for accounts payable documents.
*'''Create AP Documents in Specific Period''': If this check box is selected, AP documents will be created in the financial period that the user specifies in the '''Fin. Period''' box.
*'''Copy Project Information to AP Document''': If this check box is selected, the project information (project code, cost code, and task ID) will be copied from the AR document to the AP document.

By default, full access rights to this new form have been granted to the ''AP Admin'', ''AP Clerk'', and ''Administrator'' roles.
==Automatic Creation of AP Documents==
When a user generates AP documents either by clicking '''Process''' or '''Process All''' on the form toolbar of the ''Generate Intercompany Documents (AP503500)'' form or by clicking '''Actions''' > '''Generate/View AP Documents''' on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, for each AR document, the system generates a corresponding AP document by using the following mapping rules.[anchor|#_82bbf0f9-8309-48e1-81de-b58911090105]
===Mapping Rules for the Creation of AP Documents===
{| class="checklist" | width="100%" 
|- 
!width="27%" ! UI Element
!width="72%" ! Value
|- 
| colspan="2" | Summary area
|- 
| '''Type'''
| [anchor|#_586f920b-f14e-4317-9424-49d66b8b84b2]
* ''Bill'' if the AR document&rsquo;s type is ''Invoice''.
*''Credit Adj.'' if the AR document&rsquo;s type is ''Debit Memo''.
*''Debit Adj.'' if the AR document&rsquo;s type is ''Credit Memo''.

|- 
| '''Hold''' check box
| [anchor|#_9cc06f64-9b00-4811-ba8a-fa3faa9c1f14]
*For the ''Generate Intercompany Documents'' form, selected if the '''Create AP Document on Hold''' check box is selected.
*For the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the same as the state of the '''Hold Documents on Entry''' check box on the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form.

|- 
| '''Date'''
| The value from the '''Date''' box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
|- 
| '''Post Period'''
| [anchor|#_d0192ec1-3ce3-4f5d-9cc6-a6c62a67a1d8]
*For the ''Generate Intercompany Documents'' form, the value specified in the '''Post Period''' box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form. If this setting has not been specified, the post period is calculated as the period from the calendar of the AP document's originating branch that corresponds to the AR document's '''Post Period''' in the master calendar.
*For the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the post period is calculated as the period from the calendar of the AP document's originating branch that corresponds to the AR document's '''Post Period''' in the master calendar. If the period does not exist in the calendar of the AP document&rsquo;s originating branch, the value is empty. If the period is ''Inactive'' or ''Locked'', the system displays an error message. If posting to closed periods is allowed for the user, an AP document is created with a warning in the '''Post Period''' box on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form. If posting to closed periods is not allowed, the AP document is not created.

|- 
| '''Vendor Ref'''
| The reference number of the AR document specified in the '''Reference Number''' box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
|- 
| '''Vendor'''
| The originating branch of the AR document.
|- 
| '''Location'''
| The vendor&rsquo;s default location.
|- 
| '''Currency'''
| The currency of the AR document.
|- 
| '''Currency Rate Type'''
| The currency rate type of the AR document.
|- 
| '''Currency Exchange Rate'''
| The exchange rate of the AR document.
|- 
| '''Terms'''
| The credit terms of the AR document.
|- 
| '''Due Date'''
| The due date of the AR document.
|- 
| '''Cash Discount Date'''
| The cash discount date of the AR document.
|- 
| '''Pay by Line''' check box
| The state of the '''Pay by Line''' check box of the vendor record.
|- 
| '''Description'''
| The description of the AR document.
|- 
| '''Discount Total'''
| [anchor|#_a65521ca-8f64-4df0-a5b3-33be2fb9610a]
*If the ''Vendor Discounts'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, an automatically calculated value based on the values on the '''Discount Details''' tab on the[HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form.
*If the ''Vendor Discount'' feature has been disabled:
**If the ''Customer Discounts'' feature has been enabled, the sum of '''Discount Amount''' of all lines from the '''Discount Details''' tab on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
**If the ''Customer Discounts'' feature has been disabled, the '''Discount Total''' of the AR document.

|- 
| '''Amount'''
| The value of the '''Amount''' box on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
|- 
| '''Cash Discount'''
| If the AP document&rsquo;s amount is the same as the AR document&rsquo;s amount, the value of the '''Cash Discount''' box of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form. Otherwise, this value is calculated based on the document's terms.
|- 
| colspan="2" | '''Financial Details''' tab
|- 
| '''Branch'''
| The customer specified in the '''Customer''' box of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
|- 
| '''Vendor Tax Zone'''
| The tax zone specified for the vendor location in the '''Tax Zone''' box on the '''Purchase Settings''' tab of the [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form. 
|- 
| '''Tax Calculation Mode'''
| The tax calculation mode specified in the '''Tax Calculation Mode''' box on the '''Financial Details''' tab of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos].
|- 
| colspan="2" | '''Document Details''' tab
|- 
| '''Branch'''
| The customer specified in the '''Customer''' box of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
|- 
| '''Inventory ID'''
| The '''Inventory ID''' of the AR document line.
|- 
| '''Transaction Description'''
| The '''Transaction Description''' of the AR document line.
|- 
| '''Quantity'''
| The '''Quantity''' of the AR document line.
|- 
| '''UOM'''
| The '''UOM''' of the AR document line.
|- 
| '''Unit Cost'''
| The '''Unit Cost''' of the AR document line.
|- 
| '''Ext. Cost'''
| The '''Ext. Cost''' of the AR document line.
|- 
| '''Account'''
| 
One of the following, depending on the value of the '''Use Intercompany Expense Account From''' box on the [HelpRoot_FormReference\AP_10_10_00|Accounts Payable Preferences] ([~/?ScreenId=AP101000|AP101000]) form:[anchor|#_584dda04-834a-4c50-b670-9209bc8c857e]
*If ''Vendor Location'' is selected, the expense account specified in the '''Expense Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) form.
*If ''Inventory Item'' is selected, the expense account specified in the '''Expense Account''' box on the '''GL Accounts''' tab of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form.

|- 
| '''Project'''
| If the '''Copy Project Information to AP Document''' check box has been selected on the ''Generate Intercompany Documents'' form or the user clicked '''Yes''' in the confirmation message on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the '''Project''' of the AR document. Otherwise, the non-project code (''X'' by default) is inserted. 
|- 
| '''Project Task'''
| If the '''Copy Project Information to AP Document''' check box has been selected on the ''Generate Intercompany Documents'' form or the user clicked '''Yes''' in the confirmation message on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the '''Project Task''' of the AR document. Otherwise, the value is empty.
|- 
| '''Cost Code'''
| If the '''Copy Project Information to AP Document''' check box has been selected on the ''Generate Intercompany Documents'' form or the user clicked '''Yes''' in the confirmation message on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, the '''Cost Code''' of the AR document. Otherwise, the value is empty.
|- 
| '''Discount Amount'''
| The '''Discount Amount''' of the AR document line.
|- 
| '''Discount Percent'''
| The '''Discount Percent''' of the AR document line.
|- 
| '''Manual Discount''' check box
| Selected.
|- 
| '''Deferral Code'''
| Empty value. Because deferral codes cannot be used simultaneously in AR and AP documents, if at least one deferral code is specified in at least one line of the related AR document, the system displays a warning that deferral codes cannot be copied.
|- 
| '''Tax Category'''
| The '''Tax Category''' of the AR document line.
|- 
| colspan="2" | '''Discount Details''' tab((({S:Warn}Lines are created if the ''Vendor Discounts'' feature has been enabled. If the ''Customer Discounts'' feature has been enabled, each discount line in the AP document corresponds to a discount line of the AR document and contains the following column values.
)))
|- 
| '''Manual Discount''' check box
| Selected.
|- 
| '''Discount Amount'''
| The '''Discount Amount''' of the AR document’s discount line.
|- 
| '''Description'''
| The '''Description''' of the AR document&rsquo;s discount line.
|- 
| colspan="2" | If the ''Customer Discounts'' feature has been disabled, one discount line is created in the AP document with the following column values.
|- 
| '''Manual Discount''' check box
| Selected.
|- 
| '''Discount Amount'''
| The '''Discount Total''' of the AR document.
|}((({S:Warn}Taxes are not copied to an AP document, but are calculated based on the tax zone of the vendor (the originating branch of the AR invoice). If the total amount or the tax total amount of the AR document differs from the total amount and the tax total amount in the AP document, the system will display a warning message, but the user will be able to release the AP document.
)))
The system generates an AP document if the original AR document meets the following criteria:[anchor|#_b77300a7-218f-495d-9722-6b44ebf7837a]
*The document&rsquo;s customer has been extended from a company or branch.
*The document&rsquo;s type is ''Invoice'', ''Credit Memo'', or ''Debit Memo''.
*The document is released.
*The '''Exclude from Intercompany Processing''' check box has been cleared for the document on the '''Financial Details''' tab ('''Intercompany Invoicing''' section) of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
*The document has no related AP document. That is, the '''Related AP Document''' box is empty on the '''Financial Details''' tab ('''Intercompany Invoicing''' section) of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form.
*The document has not been migrated.
*The document is not a retainage invoice and is not an invoice with retainage.
*The document is not a child document of an AR document with the ''Multiple'' installment credit terms. 
]]></column>
			<column name="PlainText"><![CDATA[Finance: Intercompany Sales In previous versions of  Acumatica ERP, if multiple related companies or branches in the same tenant provided services or sold         goods to one another, to record these transactions, an accountant in each company or branch         had to manually create an extra entity: The accountant in one company or branch had to         create a customer for the purchasing company or branch, and the accountant in the other         company or branch had to create a vendor for the selling company or branch. Then the         accountant in the first company or branch had to create and process an AR invoice to the         customer, and the accountant in the second company or branch had to create an AP bill from         the vendor. Thus, one transaction was processed by the accounting departments of two         companies or branches within the organization. Starting in  Acumatica ERP 2020 R2, users can process sales transactions between legal entities implemented as companies or         branches in the same tenant. While viewing a company or branch, an administrator can quickly         extend it—that is, cause it to be defined as a customer or vendor.          Also,         the system can automatically create AP bills in the purchasing company based on the AR         invoices created in the selling company. The intercompany sales functionality is available in the system if the  Inter-Branch           Transactions  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. Changes to the Companies Form On the  Actions  menu of the   ([~/?ScreenId=CS101500|CS101500]) Companies     (CS101500) form, the  Extend to Customer ,  Extend to      Vendor ,  View Customer , and  View      Vendor  commands have been added, as shown in the following screenshot. New commands on the Actions menu These menu commands are available for companies that have the  Without Branches  company         type specified in the Summary area of the form.  Branches of companies with the  With Branches Not Requiring Balancing  or  With           Branches Requiring Balancing  company type can be extended to a customer or vendor on         the   ([~/?ScreenId=CS102000|CS102000]) Branches (CS102000) form. If the user clicks  Actions Extend to Customer , the system navigates to the   ([~/?ScreenId=AR303000|AR303000]) Customers         (AR303000) form and automatically inserts the company's settings into the appropriate boxes.         Also, the system inserts (in the  Customer Class  box on the            General Settings  tab) the customer class that is specified in the            Default Customer Class ID  box on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form. Accordingly, on the   ([~/?ScreenId=AR303000|AR303000]) Customers form, it inserts the settings specified for the         default customer class, except for the  Tax Zone  on the            Delivery Settings  tab,  Shipping Rule  on the            Delivery Settings  tab, and the subaccounts specified on           the  GL Accounts  tab (if subaccounts are in use in the system);         these settings are instead copied from the company settings. If the user specifies another         customer class, the system similarly inserts its settings except for the overriding company         settings. The user should review and update the settings of the customer record and then         save it. Once the customer based on the company has been saved, this customer can be         selected for documents on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000)         form. Once a company with the  Without Branches  type has been extended to a         customer, a user cannot change the type of this company. If the user clicks  Actions Extend to Vendor , the system navigates to the   ([~/?ScreenId=AP303000|AP303000]) Vendors         (AP303000) form and automatically inserts the company's settings into the appropriate boxes.         Also, the system inserts (in the  Vendor Class  box on the            General Settings  tab) the vendor class that is specified in the            Default Vendor Class ID  box on the   ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form. Accordingly, on the   ([~/?ScreenId=AP303000|AP303000]) Vendors form, it inserts the settings specified for the         default vendor class, except for the  Tax Zone  on the            Purchase Settings  tab,  Shipping Rule  on the            Purchase Settings  tab, and the subaccounts specified on           the  GL Accounts  tab (if subaccounts are in use in the system);         these settings are instead copied from the company settings. If the user specifies another         vendor class, the system similarly inserts its settings except for the overriding company         settings. The user should review and update the settings of the vendor record and then save         it. Once the vendor based on the company has been saved, this vendor can be selected for         documents on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form. For a company that has been extended to a customer or a vendor (or both), the  View           Customer  command or  View Vendor  command (or both         commands) become available on the  Actions  menu of the   ([~/?ScreenId=CS101500|CS101500]) Companies form, as shown in the following screenshot. The View Customer and View Vendor commands on the Actions menu A  company         extended to a  customer or vendor          cannot be deleted;         the customer or vendor record has to be deleted         first . Changes to the Branches Form On the  Actions  menu of the   ([~/?ScreenId=CS102000|CS102000]) Branches (CS102000) form, the  Extend to           Customer ,  Extend to Vendor ,  View           Customer , and  View Vendor  commands have been added, as         shown in the following screenshot. New commands on the Actions menu These menu commands are available for branches in companies that have the  With Branches           Not Requiring Balancing  or  With Branches Requiring Balancing  company type         selected in the Summary area of the   ([~/?ScreenId=CS101500|CS101500]) Companies (CS101500)         form. If the user clicks  Actions Extend to Customer , the system navigates to the   ([~/?ScreenId=AR303000|AR303000]) Customers         (AR303000) form and automatically inserts the branch settings into the appropriate boxes.         Also, the system inserts (in the  Customer Class  box on the            General Settings  tab) the customer class that is specified in the            Default Customer Class ID  box on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form. Accordingly, on the   ([~/?ScreenId=AR303000|AR303000]) Customers form, it inserts the settings specified for the         default customer class, except for the  Tax Zone  on the            Delivery Settings  tab,  Shipping Rule  on the            Delivery Settings  tab, and the subaccounts specified on           the  GL Accounts  tab (if subaccounts are in use in the system);         these settings are instead copied from the branch settings. If the user specifies another         customer class, the system similarly inserts its settings except for the overriding branch         settings. The user should review and update the customer record and then save it. Once the         customer based on the branch has been saved, this customer can be selected for documents on         the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. If the user clicks  Actions Extend to Vendor , the system navigates to the   ([~/?ScreenId=AP303000|AP303000]) Vendors         (AP303000) form and automatically inserts the branch settings into the appropriate boxes.         Also, the system inserts (in the  Vendor Class  box on the            General Settings  tab) the vendor class that is specified in the            Default Vendor Class ID  box on the   ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form. Accordingly, on the   ([~/?ScreenId=AP303000|AP303000]) Vendors form, the system inserts the settings specified for         the default vendor class, except for the  Tax Zone  on the            Delivery Settings  tab,  Shipping Rule  on the            Delivery Settings  tab, and the subaccounts specified on           the  GL Accounts  tab (if subaccounts are in use in the system);         these settings are instead copied from the branch settings. If the user specifies another         vendor class, the system similarly inserts its settings except for the overriding branch         settings. The user should review and update the vendor's information and save the new vendor         record. Once the vendor based on the branch has been saved, this vendor can be selected for         documents on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form. For a branch that has been extended to a customer or a vendor (or both), the            View Customer  command or  View Vendor  command         (or both commands) become available on the  Actions  menu of the   ([~/?ScreenId=CS101500|CS101500]) Companies form, as shown in the following screenshot. View Customer and View Vendor commands on the Actions menu A branch         extended to a customer or vendor cannot be deleted; the customer or vendor record has to be         deleted first . Changes to the Accounts Receivable Preferences Form On the  General Settings  tab ( Data Entry Settings      section) of the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form, the new       Use Intercompany Sales Account From  box has been added, as shown in the     following screenshot. New box on the General Settings tab This setting defines which sales account the system inserts in intercompany AR documents of a         customer that was extended from a company or branch. The following options can be         selected: Customer Location : The system inserts the sales account specified in the              Sales Account  box on the  GL Accounts  tab           of the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) form. Inventory Item : The system inserts the sales account specified in the              Sales Account  box on the  GL Accounts  tab           of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500) form for stock items or of           the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form for non-stock items. Changes to the Accounts Payable Preferences Form On the  General Settings  tab ( Data Entry Settings      section) of the   ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form, the new       Use Intercompany Expense Account From  box has been added, as shown in     the following screenshot. New box on the General Settings tab This setting defines which expense account the system inserts in intercompany AP documents of         a vendor that was extended from a company or branch. The following options can be         selected: Vendor Location : The system inserts the expense account specified in the              Expense Account  box on the  GL Accounts  tab           of the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations (AP303010) form. Inventory Item : The system inserts the expense account specified in the              Expense Account  box on the  GL Accounts  tab           of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500) form for stock items or of           the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form for non-stock items. Changes to the Invoices and Memos Form On the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form, the            Intercompany Invoicing  section has been added to the            Financial Details  tab, and the  Generate/View AP           Document  command has been added to the  Actions  menu.         The new UI elements are illustrated in the following screenshot. UI changes on the Invoices and Memos form The  Related AP Document  box of the  Intercompany           Invoicing  section shows a link with the reference number of the AP bill that         has been generated automatically from the selected AR invoice. Users can click this link to         navigate to the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form with this         document open. If the  Exclude from Intercompany Processing  check box (also in the            Intercompany Invoicing  section) is selected, the selected invoice         should not be used for generating a related AP bill.  If the user clicks  Actions Generate/View AP Document , the system automatically creates an AP document related to the selected AR         document or opens an existing AP document on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form. The system copies multiple parameters from an AR document to an AP document. For         details, see  Mapping Rules for the Creation of AP Documents Mapping Rules for the Creation of AP Documents. Changes to the Bills and Adjustments Form On the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form, the       Intercompany Invoicing  section has been added to the       Financial Details  tab, as illustrated in the following screenshot. UI changes on the Bills and Adjustments form The  Related AR Document  box of this section is a lookup box where a         user can  view the          AR         document  based on         which the AP document was created or can select a corresponding AR document from the list         for a manually entered AP         document .         The list in this box contains AR documents for which the customer is the originating branch         of the AP document and AR documents for which the branch is the vendor of the AP document.         Users can click the Edit button to the right of this box to open the related AR document on         the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. New Generate Intercompany Documents Form The  Generate Intercompany Documents (AP503500)  form, shown in the following screenshot,         has been added for the mass generation of AP documents based on AR documents from the         selling company.  Generate Intercompany Documents form In the boxes of the Selection area of the form, the user specifies the selection criteria for         the documents to be loaded in the table. The user can also manage the process of generating         AP documents by using the following check boxes: Create AP Documents on Hold : If this check box is selected, AP           documents will be created with the  On Hold  status. If it is cleared, AP documents           will be created with the  Balanced  or  Pending Approval  status, depending on           whether approvals have been configured for accounts payable documents. Create AP Documents in Specific Period : If this check box is           selected, AP documents will be created in the financial period that the user specifies in           the  Fin. Period  box. Copy Project Information to AP Document : If this check box is           selected, the project information (project code, cost code, and task ID) will be copied           from the AR document to the AP document. By default, full access rights to this new form have been granted to the  AP Admin ,            AP Clerk , and  Administrator  roles. Automatic Creation of AP Documents When a user generates AP documents either by clicking  Process  or            Process All  on the form toolbar of the  Generate Intercompany           Documents (AP503500)  form or by clicking  Actions Generate/View AP Documents  on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form, for each         AR document, the system generates a corresponding AP document by using the following mapping         rules. Mapping Rules for the Creation of AP Documents UI Element Value Summary area Type Bill  if the AR document's type is  Invoice . Credit Adj.  if the AR document's type is  Debit Memo . Debit Adj.  if the AR document's type is  Credit Memo . Hold  check box For the  Generate Intercompany Documents  form, selected if the                        Create AP Document on Hold  check box is selected. For the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the same as the                     state of the  Hold Documents on Entry  check box on the                         ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form. Date The value from the  Date  box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Post Period For the  Generate Intercompany Documents  form, the value specified in                     the  Post Period  box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. If this setting has not been                     specified, the post period is calculated as the period from the calendar of the                     AP document's originating branch that corresponds to the AR document's                        Post Period  in the master calendar. For the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the post period is                     calculated as the period from the calendar of the AP document's originating                     branch that corresponds to the AR document's  Post Period                      in the master calendar. If the period does not exist in the calendar of the AP                     document's originating branch, the value is empty. If the period is                        Inactive  or  Locked , the system displays an error message. If                     posting to closed periods is allowed for the user, an AP document is created                     with a warning in the  Post Period  box on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form. If posting to closed                     periods is not allowed, the AP document is not created. Vendor Ref The reference number of the AR document specified in the  Reference                   Number  box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos                 form. Vendor The originating branch of the AR document. Location The vendor's default location. Currency The currency of the AR document. Currency Rate Type The currency rate type of the AR document. Currency Exchange Rate The exchange rate of the AR document. Terms The credit terms of the AR document. Due Date The due date of the AR document. Cash Discount Date The cash discount date of the AR document. Pay by Line  check box The state of the  Pay by Line  check box of the vendor                 record. Description The description of the AR document. Discount Total If the  Vendor Discounts  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, an automatically                     calculated value based on the values on the  Discount                       Details  tab on the  ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form. If the  Vendor Discount  feature has been disabled: If the  Customer Discounts  feature has been enabled, the sum of                            Discount Amount  of all lines from the                            Discount Details  tab on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. If the  Customer Discounts  feature has been disabled, the                            Discount Total  of the AR document. Amount The value of the  Amount  box on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Cash Discount If the AP document's amount is the same as the AR document's amount, the value                 of the  Cash Discount  box of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Otherwise, this value is calculated                 based on the document's terms. Financial Details  tab Branch The customer specified in the  Customer  box of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Vendor Tax Zone The tax zone specified for the vendor location in the  Tax                   Zone  box on the  Purchase Settings  tab of the                     ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) form.  Tax Calculation Mode The tax calculation mode specified in the  Tax Calculation                   Mode  box on the  Financial Details  tab of the                     ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos. Document Details  tab Branch The customer specified in the  Customer  box of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. Inventory ID The  Inventory ID  of the AR document line. Transaction Description The  Transaction Description  of the AR document                 line. Quantity The  Quantity  of the AR document line. UOM The  UOM  of the AR document line. Unit Cost The  Unit Cost  of the AR document line. Ext. Cost The  Ext. Cost  of the AR document line. Account One of the following, depending on the value of the  Use Intercompany                     Expense Account From  box on the   ([~/?ScreenId=AP101000|AP101000]) Accounts Payable Preferences (AP101000) form: If  Vendor Location  is selected, the expense account specified in the                        Expense Account  box on the  GL                       Accounts  tab of the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations                     (AP303010) form. If  Inventory Item  is selected, the expense account specified in the                        Expense Account  box on the  GL                       Accounts  tab of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items                     (IN202000) form. Project If the  Copy Project Information to AP Document  check box                 has been selected on the  Generate Intercompany Documents  form or the user                 clicked  Yes  in the confirmation message on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the  Project  of                 the AR document. Otherwise, the non-project code ( X  by default) is inserted.                Project Task If the  Copy Project Information to AP Document  check box                 has been selected on the  Generate Intercompany Documents  form or the user                 clicked  Yes  in the confirmation message on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the  Project                   Task  of the AR document. Otherwise, the value is empty. Cost Code If the  Copy Project Information to AP Document  check box                 has been selected on the  Generate Intercompany Documents  form or the user                 clicked  Yes  in the confirmation message on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, the  Cost Code                  of the AR document. Otherwise, the value is empty. Discount Amount The  Discount Amount  of the AR document line. Discount Percent The  Discount Percent  of the AR document line. Manual Discount  check box Selected. Deferral Code Empty value. Because deferral codes cannot be used simultaneously in AR and AP                 documents, if at least one deferral code is specified in at least one line of the                 related AR document, the system displays a warning that deferral codes cannot be                 copied. Tax Category The  Tax Category  of the AR document line. Discount Details                    tab Lines                   are created if the  Vendor Discounts  feature has been enabled. If the                      Customer Discounts  feature has been enabled, each discount line in the AP                   document corresponds to a discount line of the AR document and contains the                   following column values. Manual Discount  check box Selected. Discount Amount The  Discount Amount  of the AR document’s discount                 line. Description The  Description  of the AR document's discount                 line. If the  Customer Discounts  feature has been                 disabled, one discount line is created in the AP document with the following column                 values. Manual Discount  check box Selected. Discount Amount The  Discount Total  of the AR document. Taxes are not copied to an AP document, but are calculated based on the tax zone of the         vendor (the originating branch of the AR invoice). If the total amount or the tax total         amount of the AR document differs from the total amount and the tax total amount in the AP         document, the system will display a warning message, but the user will be able to release         the AP document. The system generates an AP document if the original AR document meets the following         criteria: The document's customer has been extended from a company or branch. The document's type is  Invoice ,  Credit Memo , or  Debit Memo . The document            is           released . The  Exclude from Intercompany Processing  check box has been           cleared for the document on the  Financial Details  tab             ( Intercompany Invoicing  section) of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. The document has no related AP document. That is, the  Related AP             Document  box is empty on the  Financial Details  tab             ( Intercompany Invoicing  section) of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form. The document has not been migrated. The document is not a retainage invoice and is not an invoice with retainage. The document is not a child document of an AR document with the  Multiple            installment credit terms.  ]]></column>
		</row>
		<row PageID="5d13a577-d8cc-47db-b151-b4bb1b80537f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="25ec2ef5-10d0-9f2a-3080-1d76cadf702d" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, invoices paid by line could not have lines with a negative extended price. For example, if a user made a mistake in a pro forma invoice and this mistake was copied to the original invoice with retainage, there was no way to properly correct the amount after the original invoice was posted. While to increase the amount, the user could create an additional invoice, there was no way to reduce the amount and to update the balances of GL accounts and related project settings.{br}

Starting in 2020 R2, on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form, users can create AR invoices paid by line, specifying a negative value in the '''Ext. Price''' column. For such invoices without retainage, this new functionality allows users to correct an invoice by adding a line with a negative extended price, without having to create a credit memo to decrease the invoice amount. For invoices with retainage, the retainage amounts and taxable invoice lines will be calculated by the system based on the value specified in the '''Ext. Price''' column.{br}

The following screenshot shows an AR invoice with retainage and paid by line, in which the line has a negative value in the '''Ext. Price''' column.[anchor|#_3dbbbbd7-987a-4043-a447-c8ee0f7c0ea5][anchor|#_975f43cd-c9c0-4f47-8a57-dc4fd8c3f622][image:ReleaseNotes/Images/RN_2020_R2_Finance_ARInvoice_with_Negative_Ext_Price.png|popup|AR invoice with a negative extended price |450px]{br}{TOC}
==Release of Retainage for Original Invoices with Negative Lines==
When retainage is released for all lines of the original invoice, including negative lines, the system creates a retainage invoice on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form with lines with negative and positive amounts, but the total amount is a positive value.
==Support of Cash Discounts==
The system supports cash discounts for AR invoices on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form that have lines with negative amounts. The following screenshot illustrates an invoice with a cash discount applied to the invoice line with a negative amount.[anchor|#_039f96be-9dae-4db9-9769-edd7f651755a][anchor|#_a821624e-b696-4a77-9c96-fdb16006883e][image:ReleaseNotes/Images/RN_2020_R2_Finance_ARInvoice_with_Negative_Ext_Price_Cash_Disc.png|popup|AR invoice with a negative extended price and a cash discount applied|450px]
==Application of Payments to Negative Invoice Lines==
The system processes negative amounts in invoice lines in the same way as it processes lines of credit memos. {br}

A payment with only one negative line applied cannot be released. Such a payment should be applied to another positive line of the invoice; that is, the '''Payment Amount''' box on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form should have a value greater than or equal to ''0''.{br}

A user can apply payments and credit memos to and release retainage for an invoice that can be paid by line—an invoice with the '''Pay by Line''' check box selected on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form—even if the total balance or the unreleased retainage of the invoice is ''0.00'', but the invoice lines have a balance or the invoice has unreleased retainage. (For such invoices, the '''Enter Payment/Apply Memo''' and '''Release Retainage''' actions on the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] form, as well as the '''Reference Number''' selector on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form are available.){br}

Documents that can be paid by line cannot have a document balance that is less than ''0'' or greater than the document balance before payment. For example, an invoice has the following lines and a balance of ''600'':[anchor|#_86137b28-101c-4338-b088-c61dc50f22dd]
*'''Line Nbr.''': ''1'', '''Ext. Price''': <tt>–100</tt>
*'''Line Nbr.''': ''2'', '''Ext. Price''': <tt>200</tt>
*'''Line Nbr.''': ''3'', '''Ext. Price''': <tt>500</tt>

A user cannot pay only Line 2 and Line 3 with a total balance of ''700'', because in this case the document balance will become negative. Also, the user cannot pay Line 1 separately, because in this case the document balance will become ''700'', which is greater than its amount ($600).]]></column>
			<column name="PlainText"><![CDATA[Finance: Negative Ext. Price in AR Invoices with Retainage That Are Paid by Line In previous versions of  Acumatica ERP, invoices paid by line could not have lines with a negative extended price. For example,         if a user made a mistake in a pro forma invoice and this mistake was copied to the original         invoice with retainage, there was no way to properly correct the amount after the original         invoice was posted. While to increase the amount, the user could create an additional         invoice, there was no way to reduce the amount and to update the balances of GL accounts and         related project settings. Starting in  2020 R2, on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form, users can create AR         invoices paid by line, specifying a negative value in the  Ext. Price          column. For such invoices without retainage, this new functionality allows users to correct         an invoice by adding a line with a negative extended price, without having to create a         credit memo to decrease the invoice amount. For invoices with retainage, the retainage         amounts and taxable invoice lines will be calculated by the system based on the value         specified in the  Ext. Price  column. The following screenshot shows an AR invoice with retainage and paid by line, in which the         line has a negative value in the  Ext. Price  column. AR invoice with a negative extended price  Release of Retainage for Original Invoices with Negative Lines When retainage is released for all lines of the original invoice, including negative lines,         the system creates a retainage invoice on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos         (AR301000) form with lines with negative and positive amounts, but the total amount is a         positive value. Support of Cash Discounts The system supports cash discounts for AR invoices on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form that have lines with negative         amounts. The following screenshot illustrates an invoice with a cash discount applied to the         invoice line with a negative amount. AR invoice with a negative extended price and a cash discount applied Application of Payments to Negative Invoice Lines The system processes negative amounts in invoice lines in the same way as it processes         lines of credit memos.  A payment with only one negative line applied cannot be released. Such a payment should be         applied to another positive line of the invoice; that is, the  Payment           Amount  box on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form         should have a value greater than or equal to  0 . A user can apply payments and credit memos to and release retainage for an invoice that can         be paid by line—an invoice with the  Pay by Line  check box         selected on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form—even if         the total balance or the unreleased retainage of the invoice is  0.00 , but the invoice         lines have a balance or the invoice has unreleased retainage. (For such invoices, the            Enter Payment/Apply Memo  and  Release           Retainage  actions on the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos form, as         well as the  Reference Number  selector on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form are available.) Documents that can be paid by line cannot have a document balance that is less than            0  or greater than the document balance before payment. For example, an invoice has         the following lines and a balance of  600 : Line Nbr. :  1 ,  Ext. Price :              –100 Line Nbr. :  2 ,  Ext. Price :              200 Line Nbr. :  3 ,  Ext. Price :              500 A user cannot pay only Line 2 and Line 3 with a total balance of  700 , because in         this case the document balance will become negative. Also, the user cannot pay Line 1         separately, because in this case the document balance will become  700 , which is         greater than its amount ($600). ]]></column>
		</row>
		<row PageID="d0c60057-f8b3-4549-b9a4-e801b3397d6c" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="3a6a3c16-505c-13c8-26cf-4667a6c49985" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, on the [HelpRoot_FormReference\CA_30_20_00|Reconciliation Statements] ([~/?ScreenId=CA302000|CA302000]) form, the '''Release''' button has been added to the '''Quick Transaction''' dialog box so that a user can not only create adjustments on the fly, but also release them without having to navigate away from this form. The updated '''Quick Transaction''' dialog box is shown in the following screenshot.[anchor|#_fc284b3a-845d-4c2e-8cdb-e95ef616200d][anchor|#_fcbec3c8-e82d-43c4-8dd6-36bb9c38f4c3][image:ReleaseNotes/Images/RN_2020_R2_Finance_Autorelease_Adjustment_Quick_Tran.png|popup|Release button on the Quick Transaction dialog box|350px]
The '''Release''' button becomes available if the '''Hold''' check box has been cleared. The '''Hold''' check box is shown in the dialog box even if the '''Hold Transactions on Entry''' check box has been cleared on the [HelpRoot_FormReference\CA_10_10_00|Cash Management Preferences] ([~/?ScreenId=CA101000|CA101000]) form.{br}

When a user clicks '''Release''', the system saves and releases the created cash transaction. A released cash transaction is added to the table on the [HelpRoot_FormReference\CA_30_20_00|Reconciliation Statements] form.{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Finance: Release of Adjustments Created on the Reconciliation Statements Form Starting in  Acumatica ERP 2020 R2, on the   ([~/?ScreenId=CA302000|CA302000]) Reconciliation Statements (CA302000) form, the            Release  button has been added to the  Quick           Transaction  dialog box so that a user can not only create adjustments on the         fly, but also release them without having to navigate away from this form. The updated            Quick Transaction  dialog box is shown in the following         screenshot. Release button on the Quick Transaction dialog box The  Release  button becomes available if the  Hold          check box has been cleared. The  Hold  check box is shown in the dialog         box even if the  Hold Transactions on Entry  check box has been cleared         on the   ([~/?ScreenId=CA101000|CA101000]) Cash Management Preferences(CA101000) form. When a user clicks  Release , the system saves and releases the created         cash transaction. A released cash transaction is added to the table on the   ([~/?ScreenId=CA302000|CA302000]) Reconciliation Statements form. ]]></column>
		</row>
		<row PageID="8ac8df53-f30f-4832-95ee-c5a72c0be47f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="01f2506e-cfc6-7260-4fc7-c26fb2133c15" RecordSourceID="22377">
			<column name="Content"><![CDATA[
When multiple companies with their own accounting departments are configured within the same tenant, users may want to limit access to customer accounts to employees of the particular company or branch. To support this requirement, starting in 2020 R2, customer accounts in Acumatica ERP can be associated with one of the following:[anchor|#_1b668bca-3072-41a0-ab73-73642bba8d55]
*A branch: If a customer record is associated with a branch, the customer can be accessed by users assigned to the role specified for the branch in the '''Access Role''' box of the '''Branch Details''' tab ('''Configuration Settings''' section) of the [HelpRoot_FormReference\CS_10_20_00|Branches] ([~/?ScreenId=CS102000|CS102000]) form. The customer can be selected in documents originating from this branch.
*A company: If a customer record is associated with a company, the customer can be accessed by a user that has access to at least one of the company’s branches (or to the company if it has no branches). That is, the customer can be accessed by a user with access to the role specified in the '''Access Role''' box ('''Configuration Settings''' section) on the '''Branch Details''' tab of the [HelpRoot_FormReference\CS_10_20_00|Branches] form for the branch, or the '''Company Details''' tab of the [HelpRoot_FormReference\CS_10_15_00|Companies] ([~/?ScreenId=CS101500|CS101500]) form for the company. The customer can be selected in documents originating from any branch of the company.
*No entity: If a customer record is not associated with a branch or company, it can be accessed by any user. The customer can be selected in documents originating from any branch.

These capabilities are now available if the new ''Customer Visibility Restriction'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form. With this feature enabled, the UI changes described further in this topic appear on the appropriate forms.((({S:Warn}If any restriction groups have been configured in the system, they will be applied in addition to the customer visibility restriction functionality.
)))
For details, see [HelpRoot_Financials\Finance_Restricting_Customer_Visibility_GeneralInfo|Customer Visibility: General Information].{br}{TOC}
==Changes to the Enable/Disable Features Form==
On the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, the ''Customer Visibility Restriction'' feature has been added. This feature can be enabled if the ''Multiple-Branch Support'' feature has been enabled.{br}

If a user disables the ''Customer Visibility Restriction'' feature, the system does not apply any restrictions to visibility of customer records that have been configured in the system.
==Changes to the Customer Classes Form==
On the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the '''Restrict Visibility To''' box on the '''General Settings''' tab ('''Default General Settings''' section) has been added, as shown in the following screenshot. If any active branch or company is selected in this box for the class, this branch or company will be used as the default setting for customers of the class.[anchor|#_9cb52fbf-3c87-4fc5-9d5a-2702b6cdec43][anchor|#_7e79416c-4c16-48a5-a610-43862b958b31][image:ReleaseNotes/Images/RN_2020_R2_Finance_Restricted_Visibility_Customer_Classes.png|popup|The Restrict Visibility To box on the Customer Classes form|400px]
If a user changes the visibility for a customer class, the modified setting applies to new customers created based on this class and to old customers that are re-assigned to the class after the class was modified.
==Changes to the Customers Form==
On the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form, the '''Restrict Visibility To''' box has been added to the '''Financial Settings''' section on the '''Financial''' tab, as shown in the screenshot below. In this box, users can select a company or a branch that will work with the customer exclusively.{br}

When a customer is created on this form, if a branch or company is specified for the selected customer class in the '''Restrict Visibility To''' box of the '''General Settings''' tab of the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the branch or company is copied to the '''Restrict Visibility To''' box of the current form.{br}

If a branch is selected in this box, the system copies this value to the '''Shipping Branch''' box on the '''Delivery Settings''' tab ('''Default Location Settings''' section) of this form. If a user changes the setting in the''' Restrict Visibility To''' box, the system displays a dialog box asking the user whether the value in the '''Shipping Branch''' should be kept.[anchor|#_a2b499c3-331d-4af8-9b01-445db3eebf1b][anchor|#_ba199c8b-c0c8-42ed-ba01-44a2e1bba5eb][image:ReleaseNotes/Images/RN_2020_R2_Finance_Restricted_Visibility_Customers.png|popup|UI change on the Financial tab of the Customers form|400px]
If a user changes the customer class of an existing customer in the '''Customer Class''' box on the '''General Info''' tab, the system displays a dialog box asking the user to confirm this change. If the change is confirmed, the system inserts the '''Restrict Visibility To ''' value specified for that customer class.{br}

On this form, a user can select in the '''Customer ID''' box only customers that are visible in the branches the user has access to, based on the '''Restrict Visibility To''' setting of each customer, the access role assigned to the branch, and the roles assigned to the user. The list of classes available in the '''Customer Class''' box on this form is also restricted based on the roles assigned to the current user: Only customer classes with the visibility restriction accessible by the user can be selected on the form.{br}

On the '''Locations''' tab of the form, the '''Shipping Branch''' column has been added, as shown in the following screenshot.[anchor|#_11ef187d-7742-42ea-a217-74709cbc628a][anchor|#_c79275ea-3e62-40c3-bfbc-3e9340d0acce][image:ReleaseNotes/Images/RN_2020_R2_Finance_Restricted_Visibility_Customers_Location.png|popup|The Shipping Branch column on the Locations tab|450px]
==Other UI Changes==
The following list summarizes other UI changes that have been made to support the restricted visibility of customer records:[anchor|#_c0c8d930-41f2-46cc-8f22-0cd41a21bee7]
*On the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) form, the list of values in the '''Default Branch''' box on the '''General''' tab ('''Other Settings''' section) is limited based on the customer visibility restriction.
*On multiple processing forms that have the '''Company''' or '''Branch''' setting, such as the [HelpRoot_FormReference\AR_50_50_00|Write Off Balances and Credits] ([~/?ScreenId=AR505000|AR505000]) form, only customers visible in the selected branch or company can be selected in the '''Customer''' box and can be processed. On other forms, that have the '''Customer''' setting, but do not have the '''Branch''' setting, such as [HelpRoot_FormReference\PM_50_30_00|Run Project Billing] ([~/?ScreenId=PM503000|PM503000]) form, the list of customers is limited based on the user's access role.
*On the [HelpRoot_ReportReference\AR_65_05_00|Customer Summary] ([~/?ScreenId=AR650500|AR650500]) or [HelpRoot_ReportReference\AR_65_10_00|Customer Profiles] ([~/?ScreenId=AR651000|AR651000]) report forms, when a user runs the report to display customer-related information, the report will show only the customers visible to the current user based on the roles assigned to the user.
*The [HelpRoot_FormReference\AR_30_30_00|Customers] (AR3030PL), [HelpRoot_FormReference\AR_30_30_20|Customer Locations] (AR3030P1), and [HelpRoot_FormReference\AR_30_30_10|Customer Payment Methods] (AR3030P2) lists have been modified to restrict the visibility of customer records and documents according to the configured visibility.
]]></column>
			<column name="PlainText"><![CDATA[Finance: Restricted Visibility of Customer Records When multiple companies with their own accounting departments are configured within the same         tenant, users may want to limit access to customer accounts to employees of the particular         company or branch. To support this requirement, starting in  2020 R2, customer accounts in  Acumatica ERP can be associated with one of the following: A branch: If a customer record is associated with a branch, the customer can be accessed by           users assigned to the role specified for the branch in the  Access             Role  box of the  Branch Details  tab             ( Configuration Settings  section) of the   ([~/?ScreenId=CS102000|CS102000]) Branches (CS102000) form. The customer can be selected in           documents originating from this branch. A company: If a customer record is associated with a company, the customer can be accessed           by a user that has access to at least one of the company’s branches (or to the company if           it has no branches). That is, the customer can be accessed by a user with access to the           role specified in the  Access Role  box ( Configuration             Settings  section) on the  Branch Details  tab of the               ([~/?ScreenId=CS102000|CS102000]) Branches form for the branch, or the              Company Details  tab of the   ([~/?ScreenId=CS101500|CS101500]) Companies (CS101500) form for the company. The customer can           be selected in documents originating from any branch of the company. No entity: If a customer record is not associated with a branch or company, it can be           accessed by any user. The customer can be selected in documents originating from any           branch. These capabilities are now available if the new  Customer Visibility Restriction  feature         has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. With         this feature enabled, the UI changes described further in this topic appear on the         appropriate forms. If any restriction groups have been configured in the system, they will be applied in         addition to the customer visibility restriction functionality. For details, see  Customer Visibility: General Information. Changes to the Enable/Disable Features Form On the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, the  Customer           Visibility Restriction  feature has been added. This feature can be enabled if the            Multiple-Branch Support  feature has been enabled. If a user disables the  Customer Visibility Restriction  feature, the system does not         apply any restrictions to visibility of customer records that have been configured in the         system. Changes to the Customer Classes Form On the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, the            Restrict Visibility To  box on the  General           Settings  tab ( Default General Settings  section) has         been added, as shown in the following screenshot. If any active branch or company is         selected in this box for the class, this branch or company will be used as the default         setting for customers of the class. The Restrict Visibility To box on the Customer Classes  form If a user changes the visibility for a customer class, the modified setting applies to new         customers created based on this class and to old customers that are re-assigned to the class         after the class was modified. Changes to the Customers Form On the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form, the            Restrict Visibility To  box has been added to the            Financial Settings  section on the  Financial          tab, as shown in the screenshot below. In this box, users can select a company or a branch         that will work with the customer exclusively. When a customer is created on this form, if a branch or company is specified for the         selected customer class in the  Restrict Visibility To  box of the            General Settings  tab of the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, the branch or company is copied to         the  Restrict Visibility To  box of the current form. If a branch is selected in this box, the system copies this value to the            Shipping Branch  box on the  Delivery Settings          tab ( Default Location Settings  section) of this form.          If         a user changes the setting in the  Restrict Visibility To  box, the         system displays a dialog box asking the user whether the value in the  Shipping           Branch  should be kept. UI change on the Financial tab of the Customers form If a user changes the customer class of an existing customer in the  Customer           Class  box on the  General Info  tab, the system displays         a dialog box asking the user to confirm this change. If the change is confirmed, the system         inserts the  Restrict Visibility To   value specified for that customer         class. On this form, a user can select in the  Customer ID  box only         customers that are visible in the branches the user has access to, based on the            Restrict Visibility To  setting of each customer, the access role         assigned to the branch, and the roles assigned to the user. The list of classes available in         the  Customer Class  box on this form is also restricted based on the         roles assigned to the current user: Only customer classes with the visibility restriction         accessible by the user can be selected on the form. On the  Locations  tab of the form, the  Shipping           Branch  column has been added, as shown in the following screenshot. The Shipping Branch column on the Locations tab Other UI Changes The following list summarizes other UI changes that have been made to support the restricted         visibility of customer records: On the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) form, the list of values           in the  Default Branch  box on the  General  tab             ( Other Settings  section) is limited based on the customer           visibility restriction. On  multiple processing forms that have the  Company  or              Branch  setting, such as the   ([~/?ScreenId=AR505000|AR505000]) Write Off Balances and Credits (AR505000) form,            only           customers visible in the selected branch or company can be selected in the              Customer  box and can be processed.  On other           forms, that have the  Customer  setting, but do not have the              Branch  setting, such as   ([~/?ScreenId=PM503000|PM503000]) Run Project Billing (PM503000) form, the list of customers is limited           based on the user's access role. On the   ([~/?ScreenId=AR650500|AR650500]) Customer Summary (AR650500) or   ([~/?ScreenId=AR651000|AR651000]) Customer Profiles (AR651000) report forms, when a user runs the           report to display customer-related information, the report will show only the customers           visible to the current user based on the roles assigned to the user. The   ([~/?ScreenId=AR303000|AR303000]) Customers (AR3030PL),   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR3030P1), and   ([~/?ScreenId=AR303010|AR303010]) Customer Payment Methods (AR3030P2) lists have been modified to restrict           the visibility of customer records and documents according to the configured           visibility. ]]></column>
		</row>
		<row PageID="b94ebc3d-cfdf-476b-8478-8397f0c8dc17" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a2170b09-c3e5-fffc-0a55-a4b14f0b74d1" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, flexible recognition methods were available in accounts receivable only. Starting in Acumatica ERP 2020 R2, the flexible recognition methods can be used in deferral codes set up for items used in AP documents—purchase orders, AP bills, debit adjustments, and credit adjustments.{br}

This functionality is available if the ''Deferred Revenue Management'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.{br}

The system calculates the amount to be deferred according to the following rules:[anchor|#_565d1c41-00f6-463a-8667-bcb0b44eddbf]
*If taxes are applied to a document, the amount excluding the taxes is deferred.
*If a line discount is applied to a document line, the amount minus the line discount is deferred.
*If a document discount or a group discount is applied to a document, the line amount without the discount is deferred.
{br}{TOC}
==Change to the Deferral Codes Form==
On the [HelpRoot_FormReference\DR_20_20_00|Deferral Codes] ([~/?ScreenId=DR202000|DR202000]) form, if a flexible recognition method—''Flexible by Periods, Prorate by Days'' or ''Flexible by Days in Period''—is selected in the '''Recognition Method''' box, the ''Expense'' option in the '''Code Type''' box is available for selection.
==Changes to the Bills and Adjustments Form==
On the '''Document Details''' tab of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form, the following columns, shown in the screenshot below, have been added:[anchor|#_4833fcc6-9a85-4dae-b741-a1c6a2a00dab]
*'''Term Start Date''': The date when the process of deferred expense recognition should start for the selected item. For bills and adjustments created from an existing document, this value is copied from the original document.
*'''Term End Date''': The date when the process of deferred expense recognition should finish for the selected item. For bills and adjustments created from an existing document, this value is copied from the original document. For bills and adjustments created by clicking the '''New Record''' button on the form toolbar of the Bills and Adjustments (AP3010PL) form or '''Add New Record''' on the form toolbar of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form, the default value in this column is determined by the following formula: {{Term Start Date + the default term setting of the stock item or non-stock item}}.

These columns are available for editing if the item selected in the document line has a deferral code with a flexible recognition method and the ''Expense'' code type.[anchor|#_b7736138-34aa-4b6a-a12e-053c5af58fe7][anchor|#_244c6836-c943-4649-812e-86d850c20008][image:ReleaseNotes/Images/RN_2020_R2_Finance_Deferrals_AP_Bills_and_Adjustments.png|popup|New columns on the Bills and Adjustments form|450px]
==Changes to the Purchase Orders Form==
On the '''Document Details''' tab of the [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form, the following columns have been added:[anchor|#_f44ae5c7-625c-444c-aa06-e2a7ec4aa7f7]
*'''Term Start Date''': The date when the process of deferred expense recognition should start for the selected item.
*'''Term End Date''': The date when the process of the deferred expense recognition should finish for the selected item. The default value in this column is determined by the following formula: {{Term Start Date + the default term setting of the stock item or non-stock item}}.
]]></column>
			<column name="PlainText"><![CDATA[Finance: Support of Flexible Recognition Methods for Deferred Expenses In previous versions of  Acumatica ERP,     flexible recognition methods were available in accounts receivable only. Starting in  Acumatica ERP 2020 R2,     the flexible recognition methods can be used in deferral codes set up for items used in AP     documents—purchase orders, AP bills, debit adjustments, and credit adjustments. This functionality is available if the  Deferred Revenue Management  feature has been     enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form. The system calculates the amount to be deferred according to the following rules: If taxes are applied to a document, the amount excluding the taxes is deferred. If a line discount is applied to a document line, the amount minus the line discount is      deferred. If a document discount or a group discount is applied to a document, the line amount without      the discount is deferred. Change to the Deferral Codes Form On the   ([~/?ScreenId=DR202000|DR202000]) Deferral Codes (DR202000) form, if a flexible recognition      method— Flexible by Periods, Prorate by Days  or  Flexible by Days in Period —is     selected in the  Recognition Method  box, the  Expense  option in the       Code Type  box is available for selection. Changes to the Bills and Adjustments Form On the  Document Details  tab of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form, the following columns, shown in the     screenshot below, have been added: Term Start Date : The date when the process of deferred expense      recognition should start for the selected item. For bills and adjustments created from an      existing document, this value is copied from the original document. Term End Date : The date when the process of deferred expense      recognition should finish for the selected item. For bills and adjustments created from an      existing document, this value is copied from the original document. For bills and adjustments      created by clicking the  New Record  button on the form toolbar of the      Bills and Adjustments (AP3010PL) form or  Add New Record  on the form      toolbar of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form, the default value      in this column is determined by the following formula:  Term Start Date + the default       term setting of the stock item or non-stock item . These columns are available for editing if the item selected in the document line has a     deferral code with a flexible recognition method and the  Expense  code type. New columns on the Bills and Adjustments form Changes to the Purchase Orders Form On the  Document Details  tab of the   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) form, the following columns have been     added: Term Start Date : The date when the process of deferred expense      recognition should start for the selected item. Term End Date : The date when the process of the deferred expense      recognition should finish for the selected item. The default value in this column is determined      by the following formula:  Term Start Date + the default term setting of the stock item       or non-stock item . ]]></column>
		</row>
		<row PageID="8467d357-cd1d-4454-821f-1a781d5cefea" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="8ff78595-3a7e-4c61-4b4f-10f35c916b8a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, during the process of matching cash transactions in a bank statement to AR invoices, weights for match relevance were calculated based on weights of payments. Starting in 2020 R2, invoices are selected for matching based on their due date or discount date, and the match relevance is calculated based on either of these dates. Users can now filter invoices for matching by cash account and by date, and they can specify a minimum value of match relevance for automatically matching invoices and payments.{br}{TOC}
==Changes to the Cash Management Preferences (CA101000) Form==
To support this functionality, the following UI elements on the '''Bank Statement Settings''' tab of the [HelpRoot_FormReference\CA_10_10_00|Cash Management Preferences] ([~/?ScreenId=CA101000|CA101000]) form have been changed:[anchor|#_23a49126-c08a-4af1-a65d-b34e7d905a88]
*The '''Weights for Relevance Calculation''', '''Date Range for Relevance Calculation''', and '''Expense Receipt Matching''' sections have been removed from the tab.
*The '''Transaction Matching Settings''' section has been renamed to '''Other Matching Settings'''.
*The '''Invoice Matching''' section has been added. It is used to filter selected invoices as possible matches for transactions.
*The '''Auto-Match Thresholds''' section has been added. It is used to find the best match during the auto-matching process.
*The '''Weights for Relevance Calculation''', '''Date Range for Relevance Calculation''', and '''Expense Receipt Matching''' sections have been combined into the '''Payment and Expense Receipt Relevance''' section, which has been moved to the '''Relevance Calculation''' tab.
The following screenshot illustrates the UI changes on the '''Bank Statement Settings''' tab of the [HelpRoot_FormReference\CA_10_10_00|Cash Management Preferences] form.[anchor|#_34f43cbb-3c7c-4fda-8506-615e81e9a681][anchor|#_d46403d7-a88c-4cad-b535-da4fb85948a0][image:ReleaseNotes/Images/RN_2020_R2_Finance_TranMatching_CA_Preferences_BankStatementSettings.png|popup|UI changes on the Bank Statement Settings tab|300px]
The '''Relevance Calculation''' tab that contains the '''Payment and Expense Receipt Relevance''' and '''Invoice Relevance''' sections has been added to the [HelpRoot_FormReference\CA_10_10_00|Cash Management Preferences] form, as shown in the following screenshot.[anchor|#_6efc85a4-7b65-4046-8f68-5323eb703a4d][anchor|#_f8ccc4db-2f01-470a-a5bb-089cfe2c222b][image:ReleaseNotes/Images/RN_2020_R2_Finance_TranMatching_CA_Preferences_RelevanceCalculation.png|popup|The new Relevance Calculation tab|300px]
The '''Invoice Relevance''' section specifies weights for calculating match relevance for invoices.
==Changes to the Process Bank Transactions (CA306000) Form==
The following changes have been made to the '''Transaction Matching Settings''' dialog box, which opens when a user clicks '''Match Settings''' on the form toolbar of the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form:[anchor|#_4c537ab4-1465-4386-a489-ac9102039485]
*The settings in this dialog box have been divided into two tabs—'''Matching Settings''' and '''Relevance Calculation'''.
*The following changes have been made to the '''Matching Settings''' tab, as illustrated on the screenshot below:
**The '''Invoice Matching''' section has been added. It is used to filter selected invoices as possible matches for a transaction.
**The '''Transaction Matching Settings''' section has been renamed to '''Other Matching Settings'''.
**The '''Auto-Match Thresholds''' section has been added. It is used to find the best match during the auto-matching process.
**The '''Weights for Relevance Calculation''', '''Date Range for Relevance Calculation''', and '''Expense Receipt Matching''' sections have been combined into the '''Payment and Expense Receipt Relevance''' section, which has been moved to the '''Relevance Calculation''' tab.
[anchor|#_fe751b44-61b0-4c61-bc43-526fc676e53b][anchor|#_73249b52-91b3-4b5d-ab62-6083750305df][image:ReleaseNotes/Images/RN_2020_R2_Finance_TranMatching_ProcessBankTran_MatchingSettings.png|popup|The Matching Settings tab of the Transaction Matching Settings dialog box|300px]
The following screenshot illustrates the new '''Relevance Calculation''' tab of the '''Transaction Matching Settings''' dialog box.[anchor|#_3c125690-d03b-4498-9515-7baa2130668b][anchor|#_6e270f14-9625-4da9-8792-fdc85c54f235][image:ReleaseNotes/Images/RN_2020_R2_Finance_TranMatching_ProcessBankTran_RelevanceCalculation.png|popup|The Relevance Calculation tab of the Transaction Matching Settings dialog box|300px]
==Selection of Invoices for Matching==
On the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form, for each transaction, invoices that meet all of the following conditions are selected as possible matches on the '''Match to Invoices''' tab:[anchor|#_33b1a247-9347-4bbf-8f4e-5546315fc6a6]
*The '''Pay by Line''' check box is cleared for the invoice in the Summary area of the [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form.
*If the '''Match by Cash Account''' check box is selected in the '''Invoice Matching''' section on the '''Matching Settings''' tab of the '''Transaction Matching Settings''' dialog box (which is invoked on the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] form), only invoices with the same cash account or an empty cash account are selected for matching with the bank transaction.
*One of the following groups of formulas applies to the invoices:
**{{Bank transaction date <= invoice discount date}} and {{bank transaction amount = invoice amount–discount amount}}
**{{Bank transaction date > invoice discount date}} and {{bank transaction amount = invoice amount}}
*The '''Match by Discount and Due Date''' check box is selected in the '''Invoice Matching''' section on the '''Matching Settings''' tab of the '''Transaction Matching Settings''' dialog box, and either of the following conditions is true:
**An invoice&rsquo;s due date minus the days before due date is the same as or earlier than the bank transaction date, and the invoice due date plus the number of days after the due date is the same or later than the bank transaction date.
**An invoice&rsquo;s discount date minus the number of days before the discount date is earlier than or the same as the bank transaction date.

==Auto-Matching Process==
The auto-matching process, which starts when a user clicks '''Auto-Match''' on the toolbar of the [HelpRoot_FormReference\CA_30_60_00|Process Bank Transactions] ([~/?ScreenId=CA306000|CA306000]) form, selects bank transactions that have not been matched yet and for which either of the following conditions is met with regard to the '''Create''' check box on the '''Create Payment''' tab in the right pane of the form:[anchor|#_8b1f4b10-35ed-4b46-bea7-bf74a1aa5ab3]
*The check box is cleared.
*The check box is selected, and no other information has been entered on the '''Create Payment''' tab (where '''Module''' is ''CA'' and '''Entry Type ID''' is left empty).
{br}

Based on the match relevance thresholds specified by users in the '''Auto-Match Thresholds''' section of the '''Transaction Matching Settings''' dialog box, a document is considered to be the best match to a bank transaction and is matched automatically if any of the following conditions is met:[anchor|#_2efb1cf1-f8c3-48c9-ba9c-9bfca71f8d02]
*The document is the only match, and the document&rsquo;s match relevance specified in the '''Match Relevance, %''' column of the related tab is greater than the '''Relative Relevance Threshold''' specified on the '''Matching Settings''' tab in the '''Transaction Matching Settings''' dialog box.
*There are multiple matches, and the best match has a '''Match Relevance, %''' that is greater than the '''Absolute Relevance Threshold''' specified on the '''Matching Settings''' tab in the '''Transaction Matching Settings''' dialog box.
*There are multiple matches, and the '''Match Relevance, %''' of the best match minus the '''Match Relevance, %''' of the second best match is greater than or equal to the '''Relative Relevance Threshold''' specified on the '''Matching Settings''' tab of the '''Transaction Matching Settings''' dialog box.

For more details of calculation of the best match during the auto-matching process and a calculation example, see [HelpRoot_Financials\finance_Bank_Reconciliation_Transaction_Comparison_and_Match_Relevance|Bank Reconciliation: Additional Information].]]></column>
			<column name="PlainText"><![CDATA[Finance: Support of Transaction Matching for Invoices In previous versions of  Acumatica ERP, during the process of matching cash transactions in a bank statement to AR invoices,         weights for match relevance were calculated based on weights of payments. Starting in  2020 R2, invoices are selected for matching based on their due date or discount date, and the         match relevance is calculated based on either of these dates. Users can now filter invoices         for matching by cash account and by date, and they can specify a minimum value of match         relevance for automatically matching invoices and payments. Changes to the Cash Management Preferences (CA101000) Form To support         this functionality, the following UI elements on the  Bank Statement           Settings  tab of the   ([~/?ScreenId=CA101000|CA101000]) Cash Management Preferences (CA101000)         form have been changed: The  Weights for Relevance Calculation ,  Date Range for             Relevance Calculation , and  Expense Receipt Matching            sections have been removed from the tab. The  Transaction Matching Settings  section has been renamed to              Other Matching Settings . The  Invoice Matching  section has been added. It is used to filter           selected invoices as possible matches for transactions. The  Auto-Match Thresholds  section has been added. It is used to           find the best match during the auto-matching process. The  Weights for Relevance Calculation ,  Date Range for             Relevance Calculation , and  Expense Receipt Matching            sections have been combined into the  Payment and Expense Receipt             Relevance  section, which has been moved to the  Relevance             Calculation  tab. The following screenshot illustrates the UI changes on the  Bank Statement         Settings  tab of the   ([~/?ScreenId=CA101000|CA101000]) Cash Management Preferences form. UI changes on the Bank Statement Settings tab The  Relevance Calculation  tab that contains the            Payment and Expense Receipt Relevance  and  Invoice           Relevance  sections has been added to the   ([~/?ScreenId=CA101000|CA101000]) Cash Management Preferences form, as shown in the following screenshot. The new Relevance Calculation tab The  Invoice Relevance  section specifies weights for         calculating match relevance for invoices. Changes to the Process Bank Transactions (CA306000) Form The following changes have been made to the  Transaction Matching           Settings  dialog box, which opens when a user clicks  Match           Settings  on the form toolbar of the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form: The settings in this dialog box have been divided into two             tabs— Matching Settings  and  Relevance             Calculation . The following changes have been made to the  Matching Settings            tab, as illustrated on the screenshot below: The  Invoice Matching  section has been added. It is used to               filter selected invoices as possible matches for a transaction. The  Transaction Matching Settings  section has been renamed to                  Other Matching Settings . The  Auto-Match Thresholds  section has been added. It is used               to find the best match during the auto-matching process. The  Weights for Relevance Calculation ,  Date Range                 for Relevance Calculation , and  Expense Receipt                 Matching  sections have been combined into the  Payment and                 Expense Receipt Relevance  section, which has been moved to the                  Relevance Calculation  tab. The Matching Settings tab of the Transaction Matching Settings dialog box The following screenshot illustrates the new  Relevance Calculation          tab of the  Transaction Matching Settings  dialog box. The Relevance Calculation tab of the Transaction Matching Settings dialog box Selection of Invoices for Matching On the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form, for each transaction,         invoices that meet all of the following conditions are selected as possible matches on the            Match to Invoices  tab: The  Pay by Line  check box is cleared for the invoice in the           Summary area of the   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form. If the  Match by Cash Account  check box is selected in the              Invoice Matching  section on the  Matching             Settings  tab of the  Transaction Matching Settings            dialog box (which is invoked on the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions form),           only invoices with the same cash account or an empty cash account are selected for           matching with the bank transaction. One of the following groups of formulas applies to the invoices: Bank transaction date <= invoice discount date  and  bank                 transaction amount = invoice amount–discount amount Bank transaction date > invoice discount date  and  bank                 transaction amount = invoice amount The  Match by Discount and Due Date  check box is selected in the              Invoice Matching  section on the  Matching             Settings  tab of the  Transaction Matching Settings            dialog box, and either of the following conditions is true: An invoice's due date minus the days before due date is the same as or earlier than               the bank transaction date, and the invoice due date plus the number of days after the               due date is the same or later than the bank transaction date. An invoice's discount date minus the number of days before the discount date is               earlier than or the same as the bank transaction date. Auto-Matching Process The auto-matching process, which starts when a user clicks            Auto-Match  on the toolbar of the   ([~/?ScreenId=CA306000|CA306000]) Process Bank Transactions (CA306000) form, selects bank transactions that         have not been matched yet and for which either of the following conditions is met with         regard to the  Create  check box on the  Create           Payment  tab in the right pane of the form: The check box is cleared. The check box is selected, and no other information has been entered on the              Create Payment  tab (where  Module  is              CA  and  Entry Type ID  is left empty). Based on the match relevance thresholds specified by users in the  Auto-Match           Thresholds  section of the  Transaction Matching Settings          dialog box, a document is considered to be the best match to a bank transaction and is         matched automatically if any of the following conditions is met: The document is the only match, and the document's match relevance specified in the              Match Relevance, %  column of the related tab is greater than the              Relative Relevance Threshold  specified on the  Matching             Settings  tab in the  Transaction Matching Settings            dialog box. There are multiple matches, and the best match has a  Match Relevance,             %  that is greater than the  Absolute Relevance             Threshold  specified on the  Matching Settings  tab in           the  Transaction Matching Settings  dialog box. There are multiple matches, and the  Match Relevance, %  of the           best match minus the  Match Relevance, %  of the second best match is           greater than or equal to the  Relative Relevance Threshold  specified           on the  Matching Settings  tab of the  Transaction Matching             Settings  dialog box. For more details of calculation of the best match during the auto-matching process and a         calculation example, see  Bank Reconciliation: Additional Information. ]]></column>
		</row>
		<row PageID="10ee0c4d-ae4b-45b1-af7c-0db1fc2e86f4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2fa38898-fdac-5b56-031a-b7a2e4f271a4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, multiple improvements to the UI and financial management processes related to fixed assets and to vendor and customer classes have been introduced, as described below.{br}{TOC}
==Changes to the Convert Purchases to Assets Form==
To separate two processes—converting a purchase to a new asset and converting a purchase to an existing asset—the following UI changes have been made on the [HelpRoot_FormReference\FA_50_45_00|Convert Purchases to Assets] ([~/?ScreenId=FA504500|FA504500]) form:[anchor|#_d5d1693a-ad57-4cdc-94df-b461009ead4a]
*The default column order has been changed in the upper and lower tables.
*In the lower table, the '''Asset for Reconciliation''' column has been renamed to '''Asset ID''', and the '''New Asset''' column has been renamed to '''Create Asset'''.

The following screenshot illustrates the UI changes on the [HelpRoot_FormReference\FA_50_45_00|Convert Purchases to Assets] form.[anchor|#_2696623f-1219-4094-8b84-e1859bc67160][anchor|#_37563ca2-e6bd-4e56-89a3-0f0b2db565c3][image:ReleaseNotes/Images/RN_2020_R2_Finance_Other_Conver_Purchases_to_Assets_UI.png|popup|UI changes on the Convert Purchases to Assets form|450px]
Developers need to consider these implementation changes and make the necessary updates to customization projects. For a detailed list of changes, see ''Reference List of Changes'' in Release Notes for Developers.
==Changes to the Customer Classes and Vendor Classes Forms==
On the [HelpRoot_FormReference\AR_20_10_00|Customer Classes] ([~/?ScreenId=AR201000|AR201000]) form, the '''Apply Restriction Settings to All Customers''' button has been removed from the form toolbar. To replace this functionality, the '''Include Customers to Restriction Group''' command has been added to the '''Actions''' menu, as shown in the following screenshot.[anchor|#_8de87e81-9956-44e6-a61b-042343b92c8b][anchor|#_dc012cf9-ba69-4195-b4f7-16d827a3ae7a][image:ReleaseNotes/Images/RN_2020_R2_Finance_OtherImprovements_Customer_Classes.png|popup|UI change on the Customer Classes form|400px]
On the [HelpRoot_FormReference\AP_20_10_00|Vendor Classes] ([~/?ScreenId=AP201000|AP201000]) form, the '''Apply Restriction Settings to All Vendors''' button has been removed from the form toolbar. To replace this functionality, the '''Include Vendors to Restriction Group''' command has been added to the '''Actions''' menu, as shown in the following screenshot.[anchor|#_3dad7b69-cbac-4077-840b-4449c9766553][anchor|#_bee7e5a6-c593-4163-848c-4b9d2c52793b][image:ReleaseNotes/Images/RN_2020_R2_Finance_OtherImprovements_Vendor_Classes.png|popup|UI change on the Vendor Classes form|350px]
These changes have been introduced to avoid confusion after the implementation of the [HelpRoot_ReleaseNotes\RN_2020_R2_Finance_Restricted_Visibility_for_Customers|Finance: Restricted Visibility of Customer Records] feature.
==UI Changes on the Customers, Customer Locations, Vendor Locations, and Vendors Forms==
Multiple UI changes have been introduced within the scope of the [HelpRoot_ReleaseNotes\RN_2020_R2_CRM_New_Business_Accounts_Form_Layout|CRM: New Layout of the Business Accounts, Customers, Vendors, and Locations Forms] functionality.{br}

On the [HelpRoot_FormReference\AR_30_30_20|Customer Locations] ([~/?ScreenId=AR303020|AR303020]) form, shown in the screenshot below, the following UI changes have been made:[anchor|#_e9bec7d0-b4c6-4e11-be3d-bfba333bd529]
*The '''Actions''' menu has been added to the form toolbar, with two commands: '''View Account Location''' and '''Validate Addresses'''.
*A standard Copy and Paste menu has been added to the form toolbar.
*A new '''Shipping''' tab has been added.
*The '''General Info''' tab has been renamed to '''General'''. On this tab, the following changes have been made:
**The '''Location Contact''' section has been renamed to '''Additional Location Info'''.
**A new '''Other Settings''' section has been added.
**The '''Shipping Branch''' box has been renamed to '''Default Branch''' and moved to the '''Other Settings''' section.
*Multiple UI elements have been rearranged on the form.
[anchor|#_ce0e8764-b218-4a9d-8525-434740f9e5e5][anchor|#_bff8de69-1e13-406d-9389-922e6870bf73][image:ReleaseNotes/Images/RN_2020_R2_Finance_Other_Customer_Locations.png|popup|UI changes on the Customer Locations form|400px]
Similar changes have been implemented on the [HelpRoot_FormReference\AP_30_30_10|Vendor Locations] ([~/?ScreenId=AP303010|AP303010]) form, which is shown in the following screenshot.[anchor|#_d03948dc-52a2-4ec0-85f9-efd7e1459afd][anchor|#_50a16bba-2bae-4a9d-a65e-52ad5180bc28][image:ReleaseNotes/Images/RN_2020_R2_Finance_Other_Vendor_Locations.png|popup|The Vendor Locations form|400px]
On the [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form, shown in the screenshot below, the following UI changes have been made:[anchor|#_75970e50-62df-451b-8d25-e25f79d1f74d]
*The '''Customer Class''' box has been moved to the Summary area.
*The '''General Info''' tab has been renamed to '''General'''. On this tab, the following changes have been made:
**A new '''Account Info''' section has been added.
**The '''Customer Name''' box has been renamed to '''Account Name''' and moved to the '''Account Info''' section.
**The '''Main Address''' section has been renamed to '''Account Address''', and the '''Main Contact''' section has been renamed to '''Additional Account Info'''.
**In the '''Additional Account Info''' section, the '''Email''' box has been renamed to '''Account Email'''.
**A new '''Primary Contact''' section has been added.
**The '''Personal Data Privacy''' section has been split into two sections: '''Account&rsquo;s Personal Data Privacy''' and '''Contact&rsquo;s Personal Data Privacy'''.
*The '''Financial Settings''', '''Retainage Settings''', and '''Credit Verification Rules''' sections have been moved to the new '''Financial''' tab.
*The '''Billing Settings''' tab has been renamed to '''Billing'''.
*The '''Delivery Settings''' tab has been renamed to '''Shipping'''.
[anchor|#_d6148d57-40d7-4982-a411-52d01cda9228][anchor|#_1abecf15-a7d6-41c7-b8a1-32666b01c534][image:ReleaseNotes/Images/RN_2020_R2_Finance_Other_Customers.png|popup|UI changes on the Customers form|450px]
Similar changes have been made on the [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form, which is shown in the following screenshot.[anchor|#_cf4e3307-77fd-475c-9363-3f07b372c6f5][anchor|#_03cb03d7-fce0-4245-bdc9-a42cf71456d8][image:ReleaseNotes/Images/RN_2020_R2_Finance_Other_Vendors.png|popup|The Vendors form|400px]]]></column>
			<column name="PlainText"><![CDATA[Finance: Other Improvements In  Acumatica ERP 2020 R2, multiple improvements to the UI and financial management processes related to fixed         assets and to vendor and customer classes have been introduced, as described below. Changes to the Convert Purchases to Assets Form To separate two processes—converting a purchase to a new asset and converting a         purchase to an existing asset—the following UI changes have been made on the   ([~/?ScreenId=FA504500|FA504500]) Convert Purchases to Assets (FA504500) form: The default column order has been changed in the upper and lower tables. In the lower table, the  Asset for Reconciliation  column has been           renamed to  Asset ID , and the  New Asset            column has been renamed to  Create Asset . The following screenshot illustrates the UI changes on the   ([~/?ScreenId=FA504500|FA504500]) Convert Purchases to Assets form. UI changes on the Convert Purchases to Assets form Developers need to consider these implementation changes and make the necessary updates to         customization projects. For a detailed list of changes, see  Reference List of Changes          in Release Notes for Developers. Changes to the Customer Classes and Vendor Classes Forms On the   ([~/?ScreenId=AR201000|AR201000]) Customer Classes (AR201000) form, the  Apply           Restriction Settings to All Customers  button has been removed from the form         toolbar. To replace this functionality, the  Include Customers to Restriction           Group  command has been added to the  Actions  menu, as         shown in the following screenshot. UI change on the Customer Classes form On the   ([~/?ScreenId=AP201000|AP201000]) Vendor Classes (AP201000) form, the  Apply           Restriction Settings to All Vendors  button has been removed from the form         toolbar. To replace this functionality, the  Include Vendors to Restriction           Group  command has been added to the  Actions  menu, as         shown in the following screenshot. UI change on the Vendor Classes form These changes have been introduced to avoid confusion after the implementation of the  Finance: Restricted Visibility of Customer Records feature. UI Changes on the Customers, Customer Locations, Vendor Locations, and Vendors         Forms Multiple UI changes have been introduced within the scope of the  CRM: New Layout of the Business Accounts, Customers, Vendors, and Locations Forms functionality. On the   ([~/?ScreenId=AR303020|AR303020]) Customer Locations (AR303020) form, shown in the         screenshot below, the following UI changes have been made: The  Actions  menu has been added to the form toolbar, with two           commands:  View Account Location  and  Validate             Addresses . A standard Copy and Paste menu has been added to the form toolbar. A new  Shipping  tab has been added. The  General Info  tab has been renamed to              General . On this tab, the following changes have been made: The  Location Contact  section has been renamed to                  Additional Location Info . A new  Other Settings  section has been added. The  Shipping Branch  box has been renamed to                  Default Branch  and moved to the  Other                 Settings  section. Multiple UI elements have been rearranged on the form. UI changes on the Customer Locations form Similar changes have been implemented on the   ([~/?ScreenId=AP303010|AP303010]) Vendor Locations         (AP303010) form, which is shown in the following screenshot. The Vendor Locations form On the   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form, shown in the         screenshot below, the following UI changes have been made: The  Customer Class  box has been moved to the Summary area. The  General Info  tab has been renamed to              General . On this tab, the following changes have been made: A new  Account Info  section has been added. The  Customer Name  box has been renamed to  Account                 Name  and moved to the  Account Info  section. The  Main Address  section has been renamed to                  Account Address , and the  Main Contact                section has been renamed to  Additional Account Info . In the  Additional Account Info  section, the                  Email  box has been renamed to  Account                 Email . A new  Primary Contact  section has been added. The  Personal Data Privacy  section has been split into two               sections:  Account's Personal Data Privacy  and                  Contact's Personal Data Privacy . The  Financial Settings ,  Retainage           Settings , and  Credit Verification Rules  sections have           been moved to the new  Financial  tab. The  Billing Settings  tab has been renamed to              Billing . The  Delivery Settings  tab has been renamed to              Shipping . UI changes on the Customers form Similar changes have been made on the   ([~/?ScreenId=AP303000|AP303000]) Vendors         (AP303000) form, which is shown in the following screenshot. The Vendors form ]]></column>
		</row>
		<row PageID="46719d4c-508c-4a46-9975-377c0ee8c7cd" Language="en-US" PageRevisionID="1" Content="&#xA;The Acumatica mobile app connected to an instance of Acumatica ERP 2020 R2 can display a simple dialog box—that is, a dialog box the system opens when a user invokes an action so that the user can confirm the action. {br}&#xA;&#xA;If a simple dialog box is displayed in the desktop version of Acumatica ERP, the dialog box will also be displayed in the mobile app without a customizer needing to map the dialog box.{br}&#xA;&#xA;For a detailed description of the dialog boxes that are supported in the mobile version of Acumatica ERP 2020 R2, see [HelpRoot_Dev_Mobile\MOBILE_MSDL_Screen_AskDialog|Displaying a Simple Dialog Box]." PlainText="Mobile: Support of Simple Dialog Boxes The  Acumatica    mobile app connected to an instance of  Acumatica ERP 2020 R2    can display a simple dialog box—that is, a dialog box the system opens when a user invokes    an action so that the user can confirm the action.  If a simple dialog box is displayed in the desktop version of  Acumatica ERP,    the dialog box will also be displayed in the mobile app without a customizer needing to map the    dialog box. For a detailed description of the dialog boxes that are supported in the mobile version of  Acumatica ERP 2020 R2,    see  Displaying a Simple Dialog Box. " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f60ebb59-f996-52c1-11cd-cd35861a977b" RecordSourceID="22377" />
		<row PageID="25ebe6f8-6c23-4a8d-a926-7a3bba1a93d3" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="ccd24009-6613-a28b-75f1-0fb10328fbe8" RecordSourceID="22377">
			<column name="Content"><![CDATA[[anchor|#section_jzx_qfq_mmb]
In Acumatica ERP 2020 R2, the credit terms for customers have been improved with the addition of the prepayment percent functionality. A user can now set the percent of a payment to be made by a customer before a sales order can be processed.[anchor|#section_lvd_tmq_mmb]
==Credit Terms with Prepayment Requirement==
To define the prepayment percent, on the [HelpRoot_FormReference\CS_20_65_00|Credit Terms] ([~/?ScreenId=CS206500|CS206500]) form, the '''Order Prepayment Settings''' section has been added. This section appears only when the user selects the ''Customers'' option in the '''Visible To''' box of the '''General Settings''' section. The prepayment percent settings are also affected by the installment type of the credit terms. The '''Prepayment Required''' check box in the '''Order Prepayment Settings''' section is available only when the ''Single'' option is selected in the '''Installment Type''' box in the '''Installment Settings''' section (see the following screenshot).[anchor|#fig_zkp_wrq_mmb][anchor|#image_alp_wrq_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_Enhancements_in_Prepayments_for_Sales_Orders_Percent_setting.png|popup|The Prepayment Percent check box|450px][anchor|#section_l5d_tmq_mmb]{br}

The prepayment percent functionality works only for the sales orders with automation behavior ''Sales Order'' and AR document type ''Invoice''. If a prepayment percent is set for a customer in a sales order of the ''SO'' type, the user cannot create a shipment and prepare an invoice for this sales order until the required prepayment is made by the customer.{br}

The rest of the payment is regulated by the settings in the '''Due Day Settings''' section on the [HelpRoot_FormReference\CS_20_65_00|Credit Terms] ([~/?ScreenId=CS206500|CS206500]) form and does not block the further processing of the sales orders for which the prepayment percent is set.{br}

((({S:Warn}After the system has been upgraded to Acumatica ERP 2020 R2, in all the credit terms on the [HelpRoot_FormReference\CS_20_65_00|Credit Terms] form that match the conditions listed above, the '''Prepayment Required''' check box is cleared by default and the value in the '''Prepayment Percent''' box is zero.
)))[anchor|#section_zxm_rtr_mmb]
==Override of a Predefined Prepayment Percent in a Sales Order==
If a user needs to change the predefined prepayment percent for a single sales order without changing the credit terms of the customer, the override can be performed in the sales order on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form. On the '''Financial Settings''' tab of the form, the '''Payment Information''' section has been added to the form for customers with a predefined prepayment percent (see the following screenshot).[anchor|#fig_rrw_wds_mmb][anchor|#image_srw_wds_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_Enhancements_in_Prepayments_for_Sales_Orders_Payment_Information_section.png|The Payment Information section|450px]{br}

The user selects the '''Override Prepayment''' check box to make the '''Prepayment Percent''' and '''Prepayment Amount''' boxes available for editing. When the user changes the value in one of the boxes, the other box is adjusted automatically. The new value of the prepayment percent in the sales order has a higher priority than the predefined value on the [HelpRoot_FormReference\CS_20_65_00|Credit Terms] ([~/?ScreenId=CS206500|CS206500]) form. If the user clears the '''Override Prepayment''' check box, the value of the '''Prepayment Percent''' box automatically changes to the one that has been set for the customer&rsquo;s credit terms on the [HelpRoot_FormReference\CS_20_65_00|Credit Terms] form.{br}

The value in the '''Prepayment Amount''' box is also recalculated automatically on every change of the sales order total amount.{br}

The required prepayment percent and prepayment amount is added to the [HelpRoot_ReportReference\SO_64_10_10|Sales Order] ([~/?ScreenId=SO641010|SO641010]) report for sales orders.{br}

The '''Prepayment Requirements Satisfied''' check box in the '''Payment Information''' section is selected automatically when the amount of the prepayment applied to the sales order or the sum of prepayment amounts is greater than or equal to the value specified in the '''Prepayment Amount''' box on the '''Financial Settings''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form ('''Payment Information''' section). The check box is cleared automatically if the amount of a prepayment applied to the sales order or the sum of the prepayment amounts becomes less than the value specified in the '''Prepayment Amount''' box.]]></column>
			<column name="PlainText"><![CDATA[Order Management: Enhancements in Prepayments for Sales Orders In  Acumatica ERP 2020 R2, the credit terms for customers have been improved with the addition of the prepayment         percent functionality. A user can now set the percent of a payment to be made by a customer         before a sales order can be processed. Credit Terms with Prepayment Requirement To define the prepayment percent, on the   ([~/?ScreenId=CS206500|CS206500]) Credit Terms         (CS206500) form, the  Order Prepayment Settings  section has been         added. This section appears only when the user selects the  Customers  option in the            Visible To  box of the  General Settings          section. The prepayment percent settings are also affected by the installment type of the         credit terms. The  Prepayment Required  check box in the            Order Prepayment Settings  section is available only when the            Single  option is selected in the  Installment Type  box in the            Installment Settings  section (see the following screenshot). The Prepayment Percent check box The prepayment percent functionality works only for the sales orders with automation         behavior  Sales Order  and AR document type  Invoice . If a prepayment percent is         set for a customer in a sales order of the  SO  type, the user cannot create a shipment         and prepare an invoice for this sales order until the required prepayment is made by the         customer. The rest of the payment is regulated by the settings in the  Due Day           Settings  section on the   ([~/?ScreenId=CS206500|CS206500]) Credit Terms         (CS206500) form and does not block the further processing of the sales orders for which the         prepayment percent is set. After the system has been upgraded to  Acumatica ERP 2020 R2, in all the credit terms on the   ([~/?ScreenId=CS206500|CS206500]) Credit Terms form that           match the conditions listed above, the  Prepayment Required  check           box is cleared by default and the value in the  Prepayment Percent            box is zero. Override of a Predefined Prepayment Percent in a Sales Order If a user needs to change the predefined prepayment percent for a single sales order         without changing the credit terms of the customer, the override can be performed in the         sales order on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form. On the            Financial Settings  tab of the form, the  Payment           Information  section has been added to the form for customers with a predefined         prepayment percent (see the following screenshot). The Payment Information section The user selects the  Override Prepayment  check box to make the            Prepayment Percent  and  Prepayment Amount          boxes available for editing. When the user changes the value in one of the boxes, the other         box is adjusted automatically. The new value of the prepayment percent in the sales order         has a higher priority than the predefined value on the   ([~/?ScreenId=CS206500|CS206500]) Credit Terms (CS206500) form. If the user clears the            Override Prepayment  check box, the value of the            Prepayment Percent  box automatically changes to the one that has         been set for the customer's credit terms on the   ([~/?ScreenId=CS206500|CS206500]) Credit Terms         form. The value in the  Prepayment Amount  box is also recalculated         automatically on every change of the sales order total amount. The required prepayment percent and prepayment amount is added to the   ([~/?ScreenId=SO641010|SO641010]) Sales Order (SO641010) report for sales orders. The  Prepayment Requirements Satisfied  check box in the            Payment Information  section is selected automatically when the         amount of the prepayment applied to the sales order or the sum of prepayment amounts is         greater than or equal to the value specified in the  Prepayment Amount          box on the  Financial Settings  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form ( Payment Information          section). The check box is cleared automatically if the amount of a prepayment applied to         the sales order or the sum of the prepayment amounts becomes less than the value specified         in the  Prepayment Amount  box. ]]></column>
		</row>
		<row PageID="13cf1d08-b60f-4609-acc8-a200d1d6654f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="7660614c-f0d9-83f6-fdcb-cf993ad9764a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Previously, users with no access to accounts receivable forms were not able to access the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form to create payments for sales orders they had created on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form. In Acumatica ERP 2020 R2, the ability to add payments to sales orders without opening the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form has been introduced.((({S:Warn}The implemented functionality is valid only for credit card processing with the '''Enable Integrated CC Processing''' check box selected on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form.
))) Also, the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form has been redesigned to facilitate these changes.[anchor|#section_mmr_skh_2mb]
==Creation of Payments on the Sales Orders Form==
In the updated payment processing, a user working with a sales order on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form can create a payment or prepayment document for the sales order without accessing the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form. When the user clicks '''Create Payment''' or '''Create Prepayment''' buttons on the table toolbar of the '''Payments''' tab (see the following screenshot), the '''Create Payment''' dialog box is opened instead of the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form.[anchor|#fig_ht1_llg_2mb][anchor|#image_it1_llg_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Create_Payment.PNG|popup|Create Payment and Create Prepayment buttons on the Payments tab|450px]
In the '''Create Payment''' dialog box (see the screenshot in the following section), the user specifies the following information: the amount to be paid or prepaid, a short description of the payment, the payment method and cash account, and the payment reference number. The system copies the default values from the '''Financial Settings''' tab ('''Payment Information''' section) of the current form.[anchor|#section_w5f_qw3_2mb]
==Creating Cash or Check Payments==
When a user invokes the '''Create Payment''' dialog box on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form, if the user selects cash or check payment methods, the '''OK''' and '''Cancel''' buttons become available in the dialog box (see the following screenshot). When the '''OK''' button is clicked, the payment is created with a status that is determined by the state of the '''Hold Documents on Entry''' check box in the '''Data Entry Settings''' section on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. If the '''Hold Documents on Entry''' check box is selected, the payment is created with the ''On Hold'' status. If the '''Hold Documents on Entry''' check box is cleared, the payment is created with the ''Balanced'' status.[anchor|#fig_jyw_zng_2mb][anchor|#image_kyw_zng_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Create_Payment_dialog.PNG|popup|The Create Payment dialog box with a cash payment method|300px][anchor|#section_sx1_tw3_2mb]
==Creating Credit Card Payments==
Direct credit card transactions can no longer be processed for a sales order and transferred to the corresponding invoice as transactions. A payment with a credit card payment method is created for any ''Authorization'' or ''Capture'' credit card transactions. If a user needs to process ''Authorization'' or ''Capture'' transactions for a sales order, for each transaction the user open the''' Create Payment''' dialog box on the '''Payments''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form by clicking the '''Create Payment''' or '''Create Prepayment''' button and select the credit card payment method.((({S:Warn}Sales orders and invoices with the ''Cash Sale'' type do not support credit card payment method anymore.
)))When the user selects a credit card payment method in the '''Create Payment''' dialog box, the '''Capture''', '''Authorize''', and '''Cancel''' buttons become available (see the following screenshot). When the user clicks the '''Authorize''' button, the system creates a payment and authorizes a transaction with the amount equal to the value of the '''Payment Amount''' box in the dialog box. When the user clicks the '''Capture''' button, the system creates a payment and captures a transaction with the amount equal to the value of the '''Payment Amount''' box in the dialog box. These payments are fully applied to the sales order. The credit card payments are created with a status that is determined by the state of the '''Enable Integrated CC Processing''' check box in the '''Data Processing Settings''' section on the [HelpRoot_FormReference\AR_10_10_00|Accounts Receivable Preferences] ([~/?ScreenId=AR101000|AR101000]) form. If the '''Enable Integrated CC Processing''' check box is selected, the captured payments are created with the ''Open'' status. If the '''Enable Integrated CC Processing''' check box is cleared, the captured payments are created with the ''Balanced'' status. We do not recommend clearing the '''Enable Integrated CC Processing''' check box.((({S:Warn}The authorized payments are always created in the ''Pending Processing'' status despite of the the '''Enable Integrated CC Processing''' check box state.
)))[anchor|#fig_cpv_txg_2mb][anchor|#image_dpv_txg_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Create_Payment_dialog_visa.PNG|popup|The Create Payment dialog box with a credit card payment method|300px]In the '''Create Payment''' dialog box, the '''New Card''' check box appears when a credit card payment method is selected. If the customer has no credit card information stored in the system and a credit card payment method has been selected, the system selects the '''New Card''' check box automatically. When this check box is selected, the '''Proc. Center ID''' box becomes available and the user can select the required processing center for the new card. When the user clicks the '''Authorize''' or '''Capture''' button while the '''New Card''' check box is selected, the system opens the '''Add Payment''' dialog box of the payment gateway so the user can fill in credit card credentials (see the following screenshot). When the user has specified the credit card credentials and clicked the '''Pay''' button, the system creates a credit card payment, which is fully applied to the sales order.[anchor|#fig_omr_bfh_2mb][anchor|#image_pmr_bfh_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Create_Payment_dialog_visa_new_card.PNG|popup|The Add Payment dialog box of the gateway for adding a new card|300px]
A user that has access rights to the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form can view the payment on this form by clicking the link with the payment number in the '''Reference Nbr.''' box on '''Payments''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form (see the following screenshot). If the user does not have sufficient rights, then he or she cannot see the payment on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form.[anchor|#fig_yqv_b4h_2mb][anchor|#image_zqv_b4h_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Sales_Order_Link.PNG|popup|The Reference Nbr. box on the Payments tab|450px][anchor|#section_dl2_5kx_mmb]
==The Workflow of Sales Orders with a Defined Prepayment Percent==
In general, the updated workflow for sales orders with a prepayment percent consists of the following steps:[anchor|#ol_otw_blx_mmb]
#A sales order is approved (if approval is required).
#The system checks whether any payments that require validation are applied to the sales order.
#If there are payments, the system checks whether the required percent of the sales order amount is received.
#:If at least one payment that requires validation is applied to the sales order, this sales order is assigned the ''Pending Processing'' status on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form until the payment is validated. 
#:If the sum of all prepayments is not enough to satisfy the defined prepayment percent, the system assigns the ''Awaiting Payment'' status to the sales order (see the following screenshot). In the sales orders with the ''Awaiting Payment'' status, the ''Create Shipment'' action (the '''Actions''' menu) on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form is unavailable.
#If the required prepayment is greater than or equal to the defined prepayment percent amount, the customer&rsquo;s credit limit is verified (if the verification is enabled).
[anchor|#fig_pvr_n4x_mmb][anchor|#image_qvr_n4x_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Awaiting_Payment_status.png|popup|A sales order with the Awaiting Payment status|450px]
Payments and prepayments with the cash, check, or credit card payment method can be used to satisfy the prepayment percent requirement. Pre-authorized payments with the credit card payment method can also be used to satisfy the requirement.{br}

 If the customer&rsquo;s credit limit is exceeded when the credit limit is verified that is, if the verification is enabled for a customer, and the '''Hold Documents on Failed Credit Check''' check box is selected on the [HelpRoot_FormReference\SO_20_10_00|Order Types] ([~/?ScreenId=SO201000|SO201000]) form, the system assigns the ''Credit Hold'' status to the sales order. If the sales order passes all verifications, the system assigns the ''Open'' status to the sales order. The user can create the shipment and process the sales order further.[anchor|#section_b3c_mh1_nmb]
==Changes in the Processing of Invoices==
When a user prepares an invoice for a shipment or directly for a sales order, payments and prepayments that were applied to the sales order are transferred to the invoice. If the sales order has a pre-authorized credit card payment, the payment is transferred to the invoice and can be captured on the invoice level.{br}

When the user confirms a partial shipment and prepares an invoice for a sales order with the ''Back Order Allowed'' shipping rule, the pre-authorized credit card payment is partially transferred to the invoice, with the remainder applied to the sales order. If the pre-authorized credit card payment with the amount equal to the invoice amount has been captured for the invoice and the payment has no more balance applied to a sales order, the system recalculates the application of the payment amount to the sales order. If the sum of the total payment amount applied to the sales order and the total payment amount transferred to invoices is less than prepayment amount of the sales order, the system assigns the ''Awaiting Payment'' status instead of the ''Back Order'' status to the sales order.{br}

The invoice processing has been changed with regard to payments that are applied to the invoice. When an invoice is created, the system checks the following conditions and performs the noted action:[anchor|#ul_oz3_flb_nmb]
*If any payments applied to the invoice require validations, the system assigns the ''Pending Processing'' status to the invoice.
*If the payments applied to the invoice are payments with credit card payment method and pre-authorized transactions, the system assigns the ''Pending Processing'' status to the invoice.
*If the customer&rsquo;s credit limit has been exceeded, the system assigns the ''Credit Hold'' status to the invoice.

An invoice with the ''Pending Processing'' status cannot be released.{br}

When a pre-authorized credit card payment is transferred from a sales order to the invoice, the invoice is created with the ''Pending Processing'' status. If the invoice is created with the ''On Hold'' or ''Balanced'' status and a credit card payment with a pre-authorized transaction is created or applied to the invoice, the invoice will automatically receive the ''Pending Processing'' status.{br}

Pre-authorized credit card payments applied to an invoice can now be captured directly from the '''Applications''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form by means of the '''Capture CC Payment''' button. If a pre-authorized credit card payment is captured successfully, the system automatically releases the payment and assigns the ''Open'' status to the payment, therefore the invoice will receive the ''Balanced'' status (if the customer&rsquo;s credit limit is not exceeded). If the capture of the pre-authorized credit card payment fails, the invoice will receive the ''Credit Hold'' status (despite of the customer&rsquo;s credit limit state). If there are several pre-authorized credit card payments applied to a single invoice, and the capture of one of them was not successful, the invoice will keep the ''Pending Processing'' status as long as at least one payment applied to the invoice is a pre-authorized credit card payment. {br}

If the amount that is applied to the invoice is less than pre-authorized payment amount, when a user clicks the '''Capture CC Payment''' button, the amount applied to the invoice will be captured. If the amount that is applied to the invoice is equal to the pre-authorized payment amount, the pre-authorized payment amount will be captured. Credit card payments that have multiple applications cannot be captured on the invoice level. If the user tries to capture such payments, the corresponding error message will be displayed.{br}

The following condition is valid only for invoices with prepayment percent requirement. When the invoice has an applied prepayment that equals the prepayment required by the customer&rsquo;s credit terms and the payment for the total sales order amount is transferred to the invoice from a sales order, the invoice will be assigned the ''Credit Hold'' status if the amount of the invoice is increased and the difference between the amount of the original sales order and calculated amount of the invoice has not been recorded as the write-off amount.{br}

The invoice will also be assigned the ''Credit Hold'' status on the failure of the capture of a pre-authorized credit card payment that is transferred from sales order or applied directly to the invoice.[anchor|#section_i4p_xmz_mmb]
==Mass Processing of Credit Card Payments for Sales Orders==
The [HelpRoot_FormReference\SO_50_70_00|Credit Card Processing for Sales Orders] ([~/?ScreenId=SO507000|SO507000]) form has been added to the '''Processes''' category of the '''Sales Orders''' workspace. On this form, the user can mass-process credit card payments that are applied to sales orders and SO invoices. The following actions are available on the form (see the following screenshot):[anchor|#ul_crp_5rz_mmb]
*''Capture CC Payment''
* ''Validate CC Payment''
* ''Void Expired CC Payment''
* ''Re-Authorize CC Payment''
[anchor|#fig_ym4_qtz_mmb][anchor|#image_zm4_qtz_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_External_Payment_Transactions_for_SO_order_Credit_Card_Processing_for_Sales.png|popup|Actions on the Credit Card Processing for Sales form|450px]
The user can apply the ''Capture CC Payment'' action to the following credit card payments:[anchor|#ul_gjj_tsz_mmb]
*Payments in which the card number is specified
*Payments with the ''Pending Processing'' status that have transactions with the ''Pre-authorized Processing'' status
*Payments that are applied to a sales order or an SO invoice 

If a credit card payment with a pre-authorized transaction is partially applied to a sales order and is partially transferred to an invoice for this sales order, the part of the payment applied to the invoice will be displayed on the [HelpRoot_FormReference\SO_50_70_00|Credit Card Processing for Sales Orders] form. When the ''Capture CC Payment'' action is selected and processing occurs, the pre-authorized transaction will be captured with the amount, which equals the value in the '''Applied Amount''' box on the ''Credit Card Processing for Sales'' form.{br}

The user can apply the ''Validate CC Payment'' action to the following credit card payments: [anchor|#ul_ox2_ld1_nmb]
*Payments that require validation
*Payments that do not have transactions
*Payments with ''Held for Review'' status in the processing center
*Expired payments

When the ''Validate CC Payment'' action is selected and processing occurs, the transactions in credit card payments will be validated in the processing center and updated to valid processing statuses.{br}

The user can apply the ''Void Expired CC Payment'' action to the following credit card payments:[anchor|#ul_qnt_vd1_nmb]
*Payments in which the card number is not empty
*Payments and prepayments with the ''Pending Processing'' status that have transactions with the ''Pre-Authorized'' or ''Pre-authorization Expired'' status
*Payments for which a funds hold is expected to be expiring according the '''Funds Hold Expiration Date''' box value on the [HelpRoot_FormReference\SO_50_70_00|Credit Card Processing for Sales Orders] ([~/?ScreenId=SO507000|SO507000]) form
*Payments for which the number of reauthorization attempts is greater than zero

When the ''Void Expired CC Payment'' action is selected and processing occurs, a pre-authorized transaction will be voided. When the transaction is voided, the reauthorization date for the payment will be set according to the settings of the '''Reauthorization Delay''' box on the '''Processing Centers''' tab of the [HelpRoot_FormReference\CA_20_40_00|Payment Methods] ([~/?ScreenId=CA204000|CA204000]) form and the allowed number of reauthorization attempts for the payment will be set according to the settings of the processing center on the [HelpRoot_FormReference\CA_20_50_00|Processing Centers] ([~/?ScreenId=CA205000|CA205000]) form.{br}

The user can apply the ''Re-Authorize CC Payment'' action to the following credit card payments:[anchor|#ul_qgm_2g1_nmb]
*Payments with reauthorization date that is earlier than the current date
*Payments with a number of reauthorization attempts that is greater than zero
*Payments with the ''Pending Processing'' status
*Payments in which the card number is not empty

When the ''Re-Authorize CC Payment'' action is selected and processing occurs, new authorized transaction will be created and added to the payment. The credit card payment will have a valid pre-authorize transaction, and the system will assign the ''Processing'' status to the payment. If the transaction reauthorization fails, the system will try to authorize the transactions until the allowed number of reauthorization attempts reaches zero. ]]></column>
			<column name="PlainText"><![CDATA[Order Management: Changes in the Processing of Prepayments and Payments for a Sales     Order Previously, users with no access to accounts receivable forms were not able to access the           ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form to create payments for sales       orders they had created on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form.       In  Acumatica ERP 2020 R2, the ability to add payments to sales orders without opening the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form has been introduced. The implemented         functionality is valid only for credit card processing with the  Enable Integrated           CC Processing  check box selected on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form.  Also, the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form has been redesigned to facilitate these       changes. Creation of Payments on the Sales Orders Form In the updated payment processing, a user working with a sales order on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form can create a payment or prepayment         document for the sales order without accessing the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. When the user clicks            Create Payment  or  Create Prepayment  buttons         on the table toolbar of the  Payments  tab (see the following         screenshot), the  Create Payment  dialog box is opened instead of the             ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form. Create Payment and Create Prepayment buttons on the Payments tab In the  Create Payment  dialog box (see the screenshot in the         following section), the user specifies the following information: the amount to be paid or         prepaid, a short description of the payment, the payment method and cash account, and the         payment reference number. The system copies the default values from the  Financial           Settings  tab ( Payment Information  section) of the         current form. Creating Cash or Check Payments When a user invokes the  Create Payment  dialog box on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form, if the user selects cash or check         payment methods, the  OK  and  Cancel  buttons         become available in the dialog box (see the following screenshot). When the            OK  button is clicked, the payment is created with a status that is         determined by the state of the  Hold Documents on Entry  check box in         the  Data Entry Settings  section on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000) form. If the  Hold Documents           on Entry  check box is selected, the payment is created with the  On Hold          status. If the  Hold Documents on Entry  check box is cleared, the         payment is created with the  Balanced  status. The Create Payment dialog box with a cash payment method Creating Credit Card Payments Direct credit         card transactions can no longer be processed for a sales order and transferred to the         corresponding invoice as transactions. A payment with a credit card payment method is         created for any  Authorization  or  Capture  credit card transactions. If a user         needs to process  Authorization  or  Capture  transactions for a sales order, for         each transaction the user open the  Create Payment  dialog box on the            Payments  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders         (SO301000) form by clicking the  Create Payment  or  Create           Prepayment  button and select the credit card payment method. Sales orders           and invoices with the  Cash Sale  type do not support credit card payment method           anymore. When the user selects a credit card payment method in the          Create Payment  dialog box, the  Capture ,          Authorize , and  Cancel  buttons become available       (see the following screenshot). When the user clicks the  Authorize        button, the system creates a payment and authorizes a transaction with the amount equal to the       value of the  Payment Amount  box in the dialog box. When the user clicks       the  Capture  button, the system creates a payment and captures a       transaction with the amount equal to the value of the  Payment Amount        box in the dialog box. These payments are fully applied to the sales order. The credit card       payments are created with a status that is determined by the state of the  Enable         Integrated CC Processing  check box in the  Data Processing         Settings  section on the   ([~/?ScreenId=AR101000|AR101000]) Accounts Receivable Preferences (AR101000)       form. If the  Enable Integrated CC Processing  check box is selected, the       captured payments are created with the  Open  status. If the  Enable Integrated         CC Processing  check box is cleared, the captured payments are created with the          Balanced  status. We do not recommend clearing the  Enable Integrated CC         Processing  check box. The authorized payments are always created in the            Pending Processing  status despite of the the  Enable Integrated CC           Processing  check box state. The Create Payment dialog box with a credit card payment method In the  Create Payment  dialog box, the  New         Card  check box appears when a credit card payment method is selected. If the       customer has no credit card information stored in the system and a credit card payment method       has been selected, the system selects the  New Card  check box       automatically. When this check box is selected, the  Proc. Center ID  box       becomes available and the user can select the required processing center for the new card.       When the user clicks the  Authorize  or  Capture        button while the  New Card  check box is selected, the system opens the          Add Payment  dialog box of the payment gateway so the user can fill in       credit card credentials (see the following screenshot). When the user has specified the credit       card credentials and clicked the  Pay  button, the system creates a       credit card payment, which is fully applied to the sales order. The Add Payment dialog box of the gateway for adding a new card A user that has access rights to the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications         (AR302000) form can view the payment on this form by clicking the link with the payment         number in the  Reference Nbr.  box on  Payments          tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form (see the following screenshot).         If the user does not have sufficient rights, then he or she cannot see the payment on the             ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form. The Reference Nbr. box on the Payments tab The Workflow of Sales Orders with a Defined Prepayment         Percent In general, the updated workflow for sales orders with a prepayment         percent consists of the following steps: A sales order is approved (if approval is required). The system checks whether any payments that require validation are applied to the sales           order. If there are payments, the system checks whether the required percent of the sales order           amount is received. If at least one payment that requires validation is applied to the             sales order, this sales order is assigned the  Pending Processing  status on the                 ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form until the payment is             validated.  If the sum of all prepayments is not enough to satisfy the defined             prepayment percent, the system assigns the  Awaiting Payment  status to the sales             order (see the following screenshot). In the sales orders with the  Awaiting               Payment  status, the  Create Shipment  action (the                Actions  menu) on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form is unavailable. If the required prepayment is greater than or equal to the defined prepayment percent           amount, the customer's credit limit is verified (if the verification is enabled). A sales order with the Awaiting Payment status Payments and prepayments with the cash, check, or credit card payment method can be         used to satisfy the prepayment percent requirement. Pre-authorized payments with the credit         card payment method can also be used to satisfy the requirement.  If the customer's         credit limit is exceeded when the credit limit is verified that is, if the verification is         enabled for a customer, and the  Hold Documents on Failed Credit Check          check box is selected on the   ([~/?ScreenId=SO201000|SO201000]) Order Types (SO201000) form,         the system assigns the  Credit Hold  status to the sales order.  If the sales order       passes all verifications, the system assigns the  Open  status to the sales order. The       user can create the shipment and process the sales order further. Changes in the Processing of Invoices When a user prepares an invoice for a shipment or directly for a sales order, payments and         prepayments that were applied to the sales order are transferred to the invoice. If the         sales order has a pre-authorized credit card payment, the payment is transferred to the         invoice and can be captured on the invoice level. When the user confirms a partial shipment and prepares an invoice for a sales order with         the  Back Order Allowed  shipping rule, the pre-authorized credit card payment is         partially transferred to the invoice, with the remainder applied to the sales order. If the         pre-authorized credit card payment with the amount equal to the invoice amount has been         captured for the invoice and the payment has no more balance applied to a sales order, the         system recalculates the application of the payment amount to the sales order. If the sum of         the total payment amount applied to the sales order and the total payment amount transferred         to invoices is less than prepayment amount of the sales order, the system assigns the            Awaiting Payment  status instead of the  Back Order  status to the sales         order. The invoice processing has been changed with regard to payments that are applied to the         invoice. When an invoice is created, the system checks the following conditions and performs         the noted action: If any payments applied to the invoice require validations, the system assigns the              Pending Processing  status to the invoice. If the payments applied to the invoice are payments with credit card payment method and           pre-authorized transactions, the system assigns the  Pending Processing  status to           the invoice. If the customer's credit limit has been exceeded, the system assigns the  Credit             Hold  status to the invoice. An invoice with the  Pending Processing  status cannot be released. When a pre-authorized credit card payment is transferred from a sales order to the invoice,         the invoice is created with the  Pending Processing  status. If the invoice is created         with the  On Hold  or  Balanced  status and a credit card payment with a         pre-authorized transaction is created or applied to the invoice, the invoice will         automatically receive the  Pending Processing  status. Pre-authorized credit card payments applied to an invoice can now be captured directly from         the  Applications  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form by means of the  Capture           CC Payment  button. If a pre-authorized credit card payment is captured         successfully, the system automatically releases the payment and assigns the  Open          status to the payment, therefore the invoice will receive the  Balanced  status (if the         customer's credit limit is not exceeded). If the capture of the pre-authorized credit card         payment fails, the invoice will receive the  Credit Hold  status (despite of the         customer's credit limit state). If there are several pre-authorized credit card payments         applied to a single invoice, and the capture of one of them was not successful, the invoice         will keep the  Pending Processing  status as long as at least one payment applied to         the invoice is a pre-authorized credit card payment.  If the amount that is applied to the invoice is less than pre-authorized payment amount,         when a user clicks the  Capture CC Payment  button, the amount applied         to the invoice will be captured. If the amount that is applied to the invoice is equal to         the pre-authorized payment amount, the pre-authorized payment amount will be captured.         Credit card payments that have multiple applications cannot be captured on the invoice         level. If the user tries to capture such payments, the corresponding error message will be         displayed. The following condition is valid only for invoices with prepayment percent requirement.         When the invoice has an applied prepayment that equals the prepayment required by the         customer's credit terms and the payment for the total sales order amount is transferred to         the invoice from a sales order, the invoice will be assigned the  Credit Hold  status         if the amount of the invoice is increased and the difference between the amount of the         original sales order and calculated amount of the invoice has not been recorded as the         write-off amount. The invoice will also be assigned the  Credit Hold  status on the failure of the         capture of a pre-authorized credit card payment that is transferred from sales order or         applied directly to the invoice. Mass Processing of Credit Card Payments for Sales Orders The   ([~/?ScreenId=SO507000|SO507000]) Credit Card Processing for Sales Orders (SO507000) form has been added to the            Processes  category of the  Sales Orders          workspace. On this form, the user can mass-process credit card payments that are applied to         sales orders and SO invoices. The following actions are available on the form (see the         following screenshot): Capture CC Payment Validate CC Payment Void Expired CC Payment Re-Authorize CC Payment Actions on the Credit Card Processing for Sales form The user can apply the  Capture CC Payment  action to the following credit card         payments: Payments in which the card number is specified Payments with the  Pending Processing  status that have transactions with the              Pre-authorized Processing  status Payments that are applied to a sales order or an SO invoice  If a credit card payment with a pre-authorized transaction is partially applied to a sales         order and is partially transferred to an invoice for this sales order, the part of the         payment applied to the invoice will be displayed on the   ([~/?ScreenId=SO507000|SO507000]) Credit Card Processing for Sales Orders form. When the  Capture CC Payment  action is         selected and processing occurs, the pre-authorized transaction will be captured with the         amount, which equals the value in the  Applied Amount  box on the            Credit Card Processing for Sales  form. The user can apply the  Validate CC Payment  action to the following credit card         payments:  Payments that require validation Payments that do not have transactions Payments with  Held for Review  status in the processing center Expired payments When the  Validate CC Payment  action is selected and processing occurs, the         transactions in credit card payments will be validated in the processing center and updated         to valid processing statuses. The user can apply the  Void Expired CC Payment  action to the following credit card         payments: Payments in which the card number is not empty Payments and prepayments with the  Pending Processing  status that have           transactions with the  Pre-Authorized  or  Pre-authorization Expired            status Payments for which a funds hold is expected to be expiring according the              Funds Hold Expiration Date  box value on the   ([~/?ScreenId=SO507000|SO507000]) Credit Card Processing for Sales Orders (SO507000) form Payments for which the number of reauthorization attempts is greater than zero When the  Void Expired CC Payment  action is selected and processing occurs, a         pre-authorized transaction will be voided. When the transaction is voided, the         reauthorization date for the payment will be set according to the settings of the            Reauthorization Delay  box on the  Processing           Centers  tab of the   ([~/?ScreenId=CA204000|CA204000]) Payment Methods (CA204000)         form and the allowed number of reauthorization attempts for the payment will be set         according to the settings of the processing center on the   ([~/?ScreenId=CA205000|CA205000]) Processing Centers (CA205000) form. The user can apply the  Re-Authorize CC Payment  action to the following credit card         payments: Payments with reauthorization date that is earlier than the current date Payments with a number of reauthorization attempts that is greater than zero Payments with the  Pending Processing  status Payments in which the card number is not empty When the  Re-Authorize CC Payment  action is selected and processing occurs, new         authorized transaction will be created and added to the payment. The credit card payment         will have a valid pre-authorize transaction, and the system will assign the            Processing  status to the payment. If the transaction reauthorization fails, the         system will try to authorize the transactions until the allowed number of reauthorization         attempts reaches zero.  ]]></column>
		</row>
		<row PageID="8967d3fb-a902-4a10-b673-9548468ba8b5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="729eca6f-4545-981a-d901-e5d27a9f954a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, several order management forms have been redesigned to provide a better experience for customers. [anchor|#section_onr_skh_2mb]
==UI Changes on the Sales Orders Form==
On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form, the '''Payment Settings''' tab has been removed. The following boxes have been moved to the '''Financial Settings''' tab ('''Payment Information''' section) of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form, as shown in the following screenshot:[anchor|#ul_fv1_qqh_2mb]
*'''Payment Method'''
* '''Card/Account No'''
* '''Cash Account'''
* '''Payment Ref.'''; this box appears on the tab for only sales orders of the ''CS (Cash Sale)'' or ''CR (Cash Return)'' order type
[anchor|#fig_g1h_p5h_2mb][anchor|#image_h1h_p5h_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Sales_Order_Cash_Financials.PNG|popup|The Financial Settings tab|450px]
Changes have also been made to the '''Payments''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form. In the table of this tab, the '''Proc. Status''' column has been added, which shows the processing status of the credit card payment for the payment line. For payments whose payment methods do not use credit cards, the new column is always empty (see the screenshot below).{br}

On the far right of the '''Payments''' tab, the following boxes have been added (also shown in the screenshot below):[anchor|#ul_p45_1c5_2mb]
*'''Not Released''': The sum of the payments that are applied to the sales order and that are not released yet
*'''Authorized''': The sum of all authorized credit card payments applied to the sales order
*'''Released''': The sum of all released payments applied to the sales order
*'''Total Paid''': The sum of all payments applied to the sales order
*'''Unpaid Balance''': The amount of the sales order that has not been paid yet
*'''Unbilled Balance''': The sum of the unbilled amounts for the sales order

On the table toolbar of the '''Payments''' tab, for credit card payment processing, the '''Capture CC Payment''', '''Void CC Payment''', and '''Import CC Payment''' buttons have been added (also shown in the following screenshot):[anchor|#ul_hhb_4nw_2mb]
*'''Capture CC Payment''': This button is available only if the user has first selected a row with a pre-authorized credit card payment in the table. When the user clicks this button, for the selected payment, the system captures the amount in the '''Applied to Order''' column for this row. 
*'''Void CC Payment''': This button is available only if the user has first selected a row with a pre-authorized or captured credit card payment in the table. When the user clicks this button, the system voids not only the transaction but also the payment.
*'''Import CC Payment''': When the user clicks this button, the system opens a dialog box for entering an external credit card transaction. The '''Import CC Payment''' button is available only in documents with credit card payment method.
[anchor|#fig_gst_vzh_2mb][anchor|#image_hst_vzh_2mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Sales_Order_Payments_Tab.PNG|popup|New column and boxes on the Payments tab|450px]
In the '''Import CC Payment''' dialog box (see the following screenshot), the user enters the identifier of the transaction assigned by the processing center in the '''External Tran. ID''' box and the identifier of the plug-in used for integration with the processing center in the '''Proc. Center ID''' box. When the user clicks the '''Create''' button, the system imports the external transaction, creates a payment, and applies the payment to the sales order.[anchor|#_33325b8d-7a82-4544-83b9-3b71b97fc960][anchor|#_d59e4e25-56ee-49d0-ac7b-d3141057dfba][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Sales_Order_IMport_CC_Payment_dialog_box.png|popup|The Import CC Payment dialog box|300px]{br}

Also, the '''Payment Total''' box on the '''Totals''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form was renamed to '''Total Paid''' (see the following screenshot). [anchor|#_3c33c3cc-b1e1-4ae0-8898-94d7307b73d1][anchor|#_85b2b7b1-3bd7-4b23-b4f4-3e9c39a037e7][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Sales_Order_Totals_Tab.png|popup|The Totals tab|400px][anchor|#section_un4_ykh_2mb]
==Limitations==
The following limitations apply to the '''Capture CC Payment''' and '''Void CC Payment''' buttons on the table toolbar of the '''Payments''' tab of the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form:[anchor|#ul_l2v_cpx_nmb]
*Credit card payments that are applied to multiple sales orders or invoices cannot be captured or voided on this tab. If user tries to capture or void such payments, a corresponding error message will be displayed by the system. These types of credit card payments need to be captured or voided on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.
*Credit card payments that are partially transferred to an invoice cannot be captured or voided by invoking these actions on this tab. These credit card payments can be captured or voided on the '''Applications''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form or on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] form. 

If any payments have been applied to a sales order, the sales order cannot be canceled. If the user attempts to cancel a sales order with at least one payment applied (by clicking '''Actions''' > '''Cancel Order''' in the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form), the system will display an error message. This limitation does not apply to payments with the ''Voided'' status. If the sales order has only payments with ''Voided'' status, the sales order can be canceled.[anchor|#section_nmt_xwx_mmb]
==UI Changes on the Invoices Form==
Changes have been made to the UI of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form. The '''Payment Information''' tab has been removed. The following boxes have been moved to the '''Financial Details''' tab ('''Payment Information''' section) of the [HelpRoot_FormReference\SO_30_30_00|Invoices] form, as shown in the following screenshot:[anchor|#ul_azr_1xx_mmb]
*'''Payment Method'''
* '''Card/Account No'''
* '''Cash Account'''
* '''Payment Ref.'''; this box appears only for invoices that are prepared for sales orders of the ''CS (Cash Sale)'' or ''CR (Cash Return)'' order types
[anchor|#fig_tk2_wyx_mmb][anchor|#image_uk2_wyx_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepaymentsr_Financial_Details_Invoices.png|popup|The Financial Details tab|450px]
Changes have also been made to the '''Applications''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] form. In the table of this tab, the '''Processing Status''' column has been added, which shows the processing status of the credit card payment for the payment line. For payments whose payment methods do not use credit cards, the new column is always empty (see the following screenshot).{br}

On the far right of the '''Payments''' tab, the following boxes have been added (also shown in the following screenshot):[anchor|#ul_avg_j4y_mmb]
*'''Not Released''': The total amount of all payments that are applied to the invoice and not released yet
*'''Authorized''': The total amount of all pre-authorized credit card payments applied to the invoice
*'''Released''': The total amount of all released payments applied to the invoice
*'''Total Paid''': The total amount of all payments applied to the invoice
*'''Unpaid Balance''': The invoice balance that has not been paid yet
[anchor|#fig_k34_54y_mmb][anchor|#image_l34_54y_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Applications_tab.png|popup|New column and boxes on the Applications tab|450px]
On the table toolbar of the '''Applications''' tab, for credit card payment processing, the '''Capture CC Payment''', '''Void CC Payment''', and '''Import CC Payment''' buttons have been added.[anchor|#ul_ycd_qvy_mmb]
*'''Capture CC Payment''': This button is available only if the user has first selected a row with a pre-authorized credit card payment in the table. When the user clicks this button, for the selected payment, the system captures the amount in the '''Amount Paid''' column for this row.
*'''Void CC Payment''': This button is available only if the user has first selected a row with a pre-authorized or captured credit card payment in the table. When the user clicks this button, the system voids not only the transaction but also the payment.
*'''Import CC Payment''': When the user clicks this button, the system opens a dialog box in which the user can import the external transaction and create a payment that is fully applied to the invoice. The '''Import CC Payment''' button is available only in documents with credit card payment method.
[anchor|#section_yz5_vnj_4mb]
==Limitations==
The following limitation applies to the '''Capture CC Payment''' and '''Void CC Payment''' buttons on the table toolbar of the '''Applications''' tab of the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form. Credit card payments that are applied to multiple sales orders or invoices cannot be captured or voided on this tab. If user tries to capture or void such payments, a corresponding error message will be displayed by the system. These types of credit card payments need to be captured or voided on the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form.[anchor|#section_k1d_kyy_mmb]
==UI Changes on the Process Orders and Process Invoices and Memos Forms==
On the [HelpRoot_FormReference\SO_50_10_00|Process Orders] ([~/?ScreenId=SO501000|SO501000]) form and the [HelpRoot_FormReference\SO_50_50_00|Process Invoices and Memos] ([~/?ScreenId=SO505000|SO505000]) forms, new actions have been added (in the '''Action''' box) to mass-process credit card payments.{br}

On the [HelpRoot_FormReference\SO_50_10_00|Process Orders] form, the ''Create and Authorize CC Payment'' and ''Create and Capture CC Payment'' actions have been added (see the following screenshot).[anchor|#fig_xkw_ggz_mmb][anchor|#image_ykw_ggz_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Process_Orders_actions.png|popup|New actions on the Process Orders form|450px]
A user can apply the new actions to sales orders on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form that have a credit card payment method and card number that are specified in the '''Payment Information''' section on the '''Financial Settings''' tab, and an unpaid balance greater than zero. When the ''Create and Authorize CC Payment'' action is selected and processing occurs, the credit card payments with pre-authorized transactions for an amount that equals the unpaid balance amount of the selected sales orders will be created and fully applied to sales orders. When the ''Create and Capture CC Payment'' action is selected and processing occurs, the credit card payments with captured transactions for an amount that equals the unpaid balance amounts of the selected sales orders will be created and fully applied to sales orders.{br}

On the [HelpRoot_FormReference\SO_50_50_00|Process Invoices and Memos] form, the ''Create and Capture CC Payment'' action has been added to the '''Action''' box (see the following screenshot).[anchor|#fig_o4d_5lz_mmb][anchor|#image_p4d_5lz_mmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_UI_Changes_Related_to_Payments_and_Prepayments_Process_Invoices_and_Memos_action.png|popup|New action on the Process Invoices and Memos form|450px]
The user can apply the new action to SO invoices on the [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form that have a credit card payment method and card number that are specified in the '''Payment Information''' section on the '''Financial Details''' tab, and an unpaid balance greater than zero. When the ''Create and Capture CC Payment '' action is selected and processing occurs, the credit card payments with captured transactions for amount that equals the unpaid balance amount of the invoices selected in the table will be created and fully applied to the invoices.]]></column>
			<column name="PlainText"><![CDATA[Order Management: UI Changes Related to Payments and Prepayments In  Acumatica ERP 2020 R2, several order management forms          have         been  redesigned to provide a better experience for customers.  UI Changes on the Sales Orders          F orm On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form, the  Payment           Settings  tab has been removed. The following boxes have been moved to the            Financial Settings  tab ( Payment Information          section) of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form, as shown in the following           screenshot: Payment Method Card/Account No Cash Account Payment Ref. ; this box appears on the tab for only sales orders             of the  CS (Cash Sale)  or  CR (Cash Return)  order type The Financial Settings tab Changes have also been made to the  Payments  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form. In the table of this tab, the            Proc. Status  column has been added, which shows the processing         status of the credit card payment for the payment line. For payments whose payment methods         do not use credit cards, the new column is always empty (see the screenshot below). On the far right of the  Payments  tab, the following boxes have been         added (also shown in the screenshot below): Not Released : The sum of the payments that are applied to the           sales order and that are not released yet Authorized : The sum of all authorized credit card payments           applied to the sales order Released : The sum of all released payments applied to the sales           order Total Paid : The sum of all payments applied to the sales           order Unpaid Balance : The amount of the sales order that has not been           paid yet Unbilled Balance : The sum of the unbilled amounts for the sales           order On the table toolbar of the  Payments  tab, for credit card payment         processing, the  Capture CC Payment ,  Void CC           Payment , and  Import CC Payment  buttons have been added         (also shown in the following screenshot): Capture CC Payment : This button is available only if the user has           first selected a row with a pre-authorized credit card payment in the table. When the user           clicks this button, for the selected payment, the system captures the amount in the              Applied to Order  column for this row.  Void CC Payment : This button is available only if the user has           first selected a row with a pre-authorized or captured credit card payment in the table.           When the user clicks this button, the system voids not only the transaction but also the           payment. Import CC Payment : When the user clicks this button, the system           opens a dialog box for entering an external credit card transaction. The  Import             CC Payment  button is available only in documents with credit card payment           method. New column and boxes on the Payments tab In the  Import CC Payment  dialog box (see the following screenshot),         the user enters the identifier of the transaction assigned by the processing center in the            External Tran. ID  box and the identifier of the plug-in used for         integration with the processing center in the  Proc. Center ID  box.         When the user clicks the  Create  button, the system imports the         external transaction, creates a         payment ,          and applies the payment to the sales order. The Import CC Payment dialog box Also, the  Payment Total  box on the  Totals  tab         of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form was renamed to  Total           Paid  (see the following screenshot).  The Totals tab Limitations The following limitations apply to the  Capture CC Payment  and            Void CC Payment  buttons on the table toolbar of the            Payments  tab of the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders         (SO301000) form: Credit card payments that are applied to multiple sales orders or invoices cannot be           captured or voided on this tab. If user tries to capture or void such payments, a           corresponding error message will be displayed by the system. These types of credit card           payments need to be captured or voided on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications           (AR302000) form. Credit card payments that are partially transferred to an invoice cannot be captured or           voided by invoking these actions on this tab. These credit card payments can be captured           or voided on the  Applications  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form or on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications form.  If any payments have been applied to a sales order, the sales order cannot be canceled. If         the user attempts to cancel a sales order with at least one payment applied (by clicking  Actions Cancel Order  in the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form), the system will         display an error message. This limitation does not apply to payments with the  Voided          status. If the sales order has only payments with  Voided  status, the sales order can         be canceled. UI Changes on the Invoices          F orm Changes have been made to the UI of the   ([~/?ScreenId=SO303000|SO303000]) Invoices         (SO303000) form. The  Payment Information  tab has been removed. The         following boxes have been moved to the  Financial Details  tab           ( Payment Information  section) of the   ([~/?ScreenId=SO303000|SO303000]) Invoices form, as shown in the following screenshot: Payment Method Card/Account No Cash Account Payment Ref. ; this box appears only for invoices that are           prepared for sales orders of the  CS (Cash Sale)  or  CR (Cash Return)  order           types The Financial Details tab Changes have also been made to the  Applications  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices form. In the table of this tab, the            Processing Status  column has been added, which shows the processing         status of the credit card payment for the payment line. For payments whose payment methods         do not use credit cards, the new column is always empty (see the following screenshot). On the far right of the  Payments  tab, the following boxes have been         added (also shown in the following screenshot): Not Released : The total amount of all payments that are applied           to the invoice and not released yet Authorized : The total amount of all pre-authorized credit card           payments applied to the invoice Released : The total amount of all released payments applied to           the invoice Total Paid : The total amount of all payments applied to the           invoice Unpaid Balance : The invoice balance that has not been paid           yet New column and boxes on the Applications tab On the table toolbar of the  Applications  tab, for credit card         payment processing, the  Capture CC Payment ,  Void CC           Payment , and  Import CC Payment  buttons have been         added. Capture CC Payment : This button is available only if the user has           first selected a row with a pre-authorized credit card payment in the table. When the user           clicks this button, for the selected payment, the system captures the amount in the              Amount Paid  column for this row. Void CC Payment : This button is available only if the user has           first selected a row with a pre-authorized or captured credit card payment in the table.           When the user clicks this button, the system voids not only the transaction but also the           payment. Import CC Payment : When the user clicks this button, the system           opens a dialog box in which the user can import the external transaction and create a           payment that is fully applied to the invoice. The  Import CC Payment            button is available only in documents with credit card payment method. Limitations The following limitation applies to the  Capture CC Payment  and            Void CC Payment  buttons on the table toolbar of the            Applications  tab of the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form. Credit card payments that are applied to multiple sales orders or         invoices cannot be captured or voided on this tab. If user tries to capture or void such         payments, a corresponding error message will be displayed by the system. These types of         credit card payments need to be captured or voided on the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form. UI Changes on the Process Orders and Process Invoices and Memos Forms On the   ([~/?ScreenId=SO501000|SO501000]) Process Orders (SO501000) form and the   ([~/?ScreenId=SO505000|SO505000]) Process Invoices and Memos (SO505000) forms, new actions have been added (in         the  Action  box) to mass-process credit card payments. On the   ([~/?ScreenId=SO501000|SO501000]) Process Orders form, the  Create and Authorize CC           Payment  and  Create and Capture CC Payment  actions have been added (see the         following screenshot). New actions on the Process Orders form A user can apply the new actions to sales orders on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form that have a credit card payment         method and card number that are specified in the  Payment Information          section on the  Financial Settings  tab, and an unpaid balance greater         than zero. When the  Create and Authorize CC Payment  action is selected and processing         occurs, the credit card payments with pre-authorized transactions for an amount that equals         the unpaid balance amount of the selected sales orders will be created and fully applied to         sales orders. When the  Create and Capture CC Payment  action is selected and         processing occurs, the credit card payments with captured transactions for an amount that         equals the unpaid balance amounts of the selected sales orders will be created and fully         applied to sales orders. On the   ([~/?ScreenId=SO505000|SO505000]) Process Invoices and Memos form, the  Create and Capture CC           Payment  action has been added to the  Action  box (see the         following screenshot). New action on the Process Invoices and Memos form The user can apply the new action to SO invoices on the   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form that have a credit card payment         method and card number that are specified in the  Payment Information          section on the  Financial Details  tab, and an unpaid balance greater         than zero. When the  Create and Capture CC Payment   action is selected and processing         occurs, the credit card payments with captured transactions for amount that equals the         unpaid balance amount of the invoices selected in the table will be created and fully         applied to the invoices. ]]></column>
		</row>
		<row PageID="b729d46f-bc2a-4a1e-a38a-8fb53f10abc3" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="25a5c563-51a2-bf63-ea0a-31ec9fd280d4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the processing of sales orders, shipments, and invoices has been redesigned to use the new workflow engine.{br}

The processes that are performed by using the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]), [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms work as they did as in the previous versions. The UI on these forms has been enhanced to support functionality of the new workflow engine.
==UI Enhancements==
On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]), [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms, the '''Hold''' check box has been removed and replaced with the '''Put on Hold''' and '''Release from Hold''' actions, which can be selected from the form toolbar.{br}

On these forms, the buttons representing the actions that are most relevant to the current status of the document opened on the form are displayed directly on the form toolbar in addition to being included as menu commands in the '''Actions''' menu. In the following screenshot, a sales order with the ''Open'' status on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] form is shown. The '''Quick Process''', '''Create Shipment''', and '''Put on Hold''' buttons are displayed on the form toolbar and the corresponding menu commands are included on the '''Actions''' menu.[anchor|#fig_vhv_1dy_nmb][anchor|#image_whv_1dy_nmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_New_Workflow_SO1.png|popup|A sales order with the Open status on the Sales Orders form|450px]
In the following screenshot, a shipment with the ''Open'' status on the [HelpRoot_FormReference\SO_30_20_00|Shipments] form is shown. The '''Confirm Shipment''' and '''Put on Hold''' buttons are displayed on the form toolbar and the corresponding menu commands are included on the '''Actions''' menu.[anchor|#_c58303f1-9fbf-4f3b-bdb4-fb29fe10a35f][anchor|#_498f61ca-3d16-4b5a-8462-e36e0bafb080][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_New_Workflow_Shipment1.png|popup|A shipment with the Open status on the Shipments form|450px]
In the following screenshot, an invoice with the ''Balanced'' status on the [HelpRoot_FormReference\SO_30_30_00|Invoices] form is shown. The '''Release''' and '''Put on Hold''' buttons are displayed on the form toolbar and the corresponding menu commands are included on the '''Actions''' menu.[anchor|#_aea5bb27-feaf-48d3-b8ca-8edec91fc48a][anchor|#_12d30bb1-cdb2-4f25-b406-4a84694f3f8c][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_New_Workflow_Invoice1.png|popup|Invoice with the Balanced status on the Invoices form|450px]
The following tables (a table is shown for each form) show the actions that are displayed as buttons on the form toolbar of the form for each document type and status. ((({S:Warn}Information in the following tables is relevant for the out-of-the-box installation of the system. 
)))[anchor|#table_uh4_f2y_nmb]
===Document types, Statuses and the Corresponding Actions on the Sales Orders form===
{| class="checklist" | width="100%" 
|- 
!width="33%" ! Document Type
!width="33%" ! Status
!width="33%" ! Action
|- 
| rowspan="8" | ''SO''
|  ''On Hold''
|  '''Release from Hold'''
|- 
|  ''Credit Hold''
|  '''Release from Credit Hold'''
|- 
|  ''Pending Processing''
|  '''Put on Hold'''
|- 
|  ''Awaiting Payment''
|  '''Put on Hold'''
|- 
|  ''Open''
| [anchor|#ul_lnk_t2y_nmb]
* '''Quick Process'''
* '''Create Shipment'''
* '''Put on Hold'''

|- 
|  ''Back Order''
| [anchor|#_10cc3cc0-0734-445a-a03a-a035ae217761]
* '''Open Order'''
* '''Create Shipment'''
* '''Quick Process'''

|- 
|  ''Completed''
|  '''Prepare Invoice'''
|- 
|  ''Canceled''
| [anchor|#_de1381a8-dfb1-4507-986a-3e3a0786acfc]
* '''Copy Order'''
* '''Reopen Order'''

|- 
| rowspan="3" |  ''QT''
|  ''On Hold''
|  '''Release from Hold'''
|- 
|  ''Open''
| [anchor|#_bbcded3d-e4f8-4bb5-bd46-6df40ae22216]
* '''Put on Hold'''
* '''Copy Order'''

|- 
|  ''Canceled''
| [anchor|#ul_av1_tgy_nmb]
* '''Copy Order'''
* '''Reopen Order'''

|- 
| rowspan="3" |  ''RM''
|  ''On Hold''
|  '''Release from Hold'''
|- 
|  ''Open''
| [anchor|#ul_wwh_vgy_nmb]
* '''Create Receipt'''
* '''Create Shipment'''

|- 
|  ''Completed''
|  '''Prepare Invoice'''
|- 
| rowspan="4" |  ''IN''
|  ''On Hold''
|  '''Release from Hold'''
|- 
|  ''Credit Hold''
|  '''Release from Credit Hold'''
|- 
|  ''Open''
| [anchor|#ul_ekd_2hy_nmb]
* '''Put on Hold'''
* '''Quick Process'''
* '''Prepare Invoice'''

|- 
|  ''Canceled''
| [anchor|#ul_cg1_ghy_nmb]
* '''Reopen Order'''
* '''Copy Order'''

|- 
| rowspan="2" |  ''CM''
|  ''On Hold''
|  '''Release from Hold'''
|- 
|  ''Open''
| [anchor|#ul_dmx_hhy_nmb]
* '''Put on Hold'''
* '''Prepare Invoice'''

|- 
| All types
| ''Pending Approval''
| [anchor|#ul_gl1_lhy_nmb]
* '''Put on Hold'''
* '''Approve'''
* '''Reject'''

|- 
| All types
| ''Rejected''
|  '''Put on Hold'''
|}[anchor|#_5253859e-2fbf-487a-8877-7658ac06d10d]
===Document Statuses and the Corresponding Actions on the Shipments form===
{| class="checklist" | width="100%" 
|- 
!width="50%" ! Status
!width="50%" ! Action
|- 
| '' On Hold''
|  '''Release from Hold'''
|- 
|  ''Open''
| [anchor|#_7139d154-bede-4fc6-b28c-38045990d83d]
* '''Release from Credit Hold'''
* '''Put on Hold'''

|- 
|  ''Confirmed''
| [anchor|#_3449a856-f744-4c48-a766-2f25ebd0a7ff]
* '''Prepare Invoice'''
* '''Update IN'''

|}[anchor|#_495e4c08-7868-45b4-a0f1-8dce88de13c2]
===Document Statuses and the Corresponding Actions on the Invoices form===
{| class="checklist" | width="100%" 
|- 
!width="50%" ! Status
!width="50%" ! Action
|- 
| ''Hold''
|  '''Release from Hold'''
|- 
|  ''Credit Hold''
| [anchor|#_e2edcc32-7390-4698-868a-03f2869d5f27]
* '''Release from Credit Hold'''
* '''Put on Hold'''

|- 
|  ''Balanced''
| [anchor|#_ace0a0ca-135c-480f-ae6b-537f8c5b69a6]
* '''Put on Hold'''
* '''Release'''

|- 
|  ''Pending Print''
|  '''Print Invoice'''
|- 
|  ''Pending Email''
|  '''Email Invoice'''
|}
==Automation Changes==
If the organization uses automation steps, import scenarios, or export scenarios for the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]), [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]), or [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form, users that work on customizations will need to redesign the automation of the processes related to the applicable forms by using the new workflow engine. For more information, see the [HelpRoot_Dev_Customization\CG_GL_Items_WorkflowConcept|Creating Workflows] chapter in the Acumatica ERP Customization Guide.]]></column>
			<column name="PlainText"><![CDATA[Order Management: New Workflow in Order Management Documents In  Acumatica ERP 2020 R2, the processing of sales orders, shipments, and invoices has been redesigned to use the         new workflow engine. The processes that are performed by using the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders         (SO301000),   ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) forms work as they did as in the         previous versions. The UI on these forms has been enhanced to support functionality of the         new workflow engine. UI Enhancements On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000),   ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) forms, the  Hold          check box has been removed and replaced with the  Put on Hold  and            Release from Hold  actions, which can be selected from the form         toolbar. On these forms, the buttons representing the actions that are most relevant to the current         status of the document opened on the form are displayed directly on the form toolbar in         addition to being included as menu commands in the  Actions  menu. In         the following screenshot, a sales order with the  Open  status on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders form is shown. The  Quick           Process ,  Create Shipment , and  Put on           Hold  buttons are displayed on the form toolbar and the corresponding menu         commands are included on the  Actions  menu. A sales order with the Open status on the Sales Orders form In the following screenshot, a shipment with the  Open  status on the   ([~/?ScreenId=SO302000|SO302000]) Shipments form is shown. The  Confirm           Shipment  and  Put on Hold  buttons are displayed on the         form toolbar and the corresponding menu commands are included on the            Actions  menu. A shipment with the Open status on the Shipments form In the following screenshot, an invoice with the  Balanced  status on the   ([~/?ScreenId=SO303000|SO303000]) Invoices form is shown. The  Release          and  Put on Hold  buttons are displayed on the form toolbar and the         corresponding menu commands are included on the  Actions  menu. Invoice with the Balanced status on the Invoices form The following tables (a table is shown for each form) show the actions that are displayed         as buttons on the form toolbar of the form for each document type and status.  Information in the following tables is relevant for the out-of-the-box installation of         the system.  Document types, Statuses and the Corresponding Actions on the Sales Orders           form Document Type Status Action SO On Hold Release from Hold Credit Hold Release from Credit Hold Pending Processing Put on Hold Awaiting Payment Put on Hold Open Quick Process Create Shipment Put on Hold Back Order Open Order Create Shipment Quick Process Completed Prepare Invoice Canceled Copy Order Reopen Order QT On Hold Release from Hold Open Put on Hold Copy Order Canceled Copy Order Reopen Order RM On Hold Release from Hold Open Create Receipt Create Shipment Completed Prepare Invoice IN On Hold Release from Hold Credit Hold Release from Credit Hold Open Put on Hold Quick Process Prepare Invoice Canceled Reopen Order Copy Order CM On Hold Release from Hold Open Put on Hold Prepare Invoice All types Pending Approval Put on Hold Approve Reject All types Rejected Put on Hold Document Statuses and the Corresponding Actions on the Shipments form Status Action  On Hold Release from Hold Open Release from Credit Hold Put on Hold Confirmed Prepare Invoice Update IN Document Statuses and the Corresponding Actions on the Invoices form Status Action Hold Release from Hold Credit Hold Release from Credit Hold Put on Hold Balanced Put on Hold Release Pending Print Print Invoice Pending Email Email Invoice Automation Changes If the organization uses automation steps, import scenarios, or export scenarios for the             ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000),   ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000), or   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form, users that work on customizations         will need to redesign the automation of the processes related to the applicable forms by         using the new workflow engine. For more information, see the  Creating Workflows chapter in the  Acumatica ERP Customization Guide. ]]></column>
		</row>
		<row PageID="c04066a3-0a1f-440d-8949-374b2e25f78c" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a933740a-9d04-9746-c3b7-683992a650e3" RecordSourceID="22377">
			<column name="Content"><![CDATA[[anchor|#section_h2n_klf_dmb]In Acumatica ERP 2020 R2, a user can now configure the validation of the accounts payable bill details to be sure that the billed amounts and quantities do not exceed the original ones agreed upon with the vendor in the purchase order.[anchor|#section_m4x_1mf_dmb]On the '''General Settings''' tab of the [HelpRoot_FormReference\PO_10_10_00|Purchase Orders Preferences] ([~/?ScreenId=PO101000|PO101000]) form, the new '''Bill Against Commitments''' box has been added, as shown in the following screenshot. This box indicates whether the system validates AP bills against purchase orders.[anchor|#section_yhj_b1j_2mb][anchor|#fig_ffc_3jf_dmb][anchor|#image_gfc_3jf_dmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_AP_Bill_Validation_PO_pref.PNG|The new Bill Against Commitments box on the General Settings tab|400px][anchor|#section_i2n_klf_dmb]If the ''No Validation'' option is selected in the '''Bill Against Commitments''' box, the system does not check the differences between the amounts and quantities of the AP bill and those in the purchase order. [anchor|#section_zhj_b1j_2mb]If the ''Validate with Warning'' option is selected, when the AP bill is saved, the system validates the AP bill against the purchase order by using the following rules: [anchor|#ul_a3j_b1j_2mb]
*The '''Unit Cost''' value of the AP bill on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form is validated against the '''Unit Cost''' value of the purchase order on the [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form.
*The '''Amount''' and '''Quantity''' values of the AP bill on the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form are validated against the '''Unbilled Amount''' and '''Unbilled Qty.''' values of the purchase order on the [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] form, which contain the amount and quantity that is not yet billed for the PO line.
If any value in the elements of the AP bill is larger than the corresponding value in the purchase order the bill is validated against, the system displays a warning in the title of the '''Document Details''' tab and in the related column of the bill line on this tab of the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] form for the AP bill (see the following screenshot). This can happen if the vendor provided more ordered items or items with higher prices than are noted in the purchase order.[anchor|#fig_ulz_tkf_dmb][anchor|#image_vlz_tkf_dmb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_AP_Bill_Validation_PO_warning.png|Warning in the AP bill line|400px]]]></column>
			<column name="PlainText"><![CDATA[Order Management: Validating Bills Against Purchase Orders In  Acumatica ERP 2020 R2, a user can now configure the validation of the accounts payable bill details to be sure       that the billed amounts and quantities do not exceed the original ones agreed upon with the       vendor in the purchase order. On the  General Settings  tab of the           ([~/?ScreenId=PO101000|PO101000]) Purchase Orders Preferences (PO101000) form, the new  Bill         Against Commitments  box has been added, as shown in the following screenshot.       This box indicates whether the system validates AP bills against purchase orders. The new Bill Against Commitments box on the General Settings tab If the  No Validation  option is selected in the          Bill Against Commitments  box, the system does not check the       differences between the amounts and quantities of the AP bill and those in the purchase order.  If the  Validate with Warning  option is selected, when       the AP bill is saved, the system validates the AP bill against the purchase order by using the       following rules:  The  Unit Cost  value of the AP bill on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form is validated against the              Unit Cost  value of the purchase order on the   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) form. The  Amount  and  Quantity  values of the AP           bill on the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form are validated against the              Unbilled Amount  and  Unbilled Qty.  values           of the purchase order on the   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders form, which           contain the amount and quantity that is not yet billed for the PO line. If any value in the elements of the AP bill is larger than the corresponding value in the       purchase order the bill is validated against, the system displays a warning in the title of       the  Document Details  tab and in the related column of the bill line on       this tab of the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments form for the AP bill (see the       following screenshot). This can happen if the vendor provided more ordered items or items with       higher prices than are noted in the purchase order. Warning in the AP bill line ]]></column>
		</row>
		<row PageID="d9fe96f8-259c-4530-99e8-950ccb6fa6f4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="9cd3cc39-6627-7360-2307-0a9fd04f4e23" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Previously, when the AP bill was created from the purchase receipt, to derive the unit cost value for the AP bill, the system used the unit cost value from the related purchase order. In Acumatica ERP 2020 R2, when an AP bill is created from the purchase order that has a purchase receipt or from the purchase receipt itself, to derive the unit cost value for the AP bill, the system uses the unit cost value from the purchase receipt. This new behavior will be of use in situations when the actual cost of purchased items changes by the time the purchase receipt is created. If the purchase order has only lines that do not require receipt, and the AP bill is created for such a purchase order, the system will use the unit cost values from purchase order lines.{br}

Also, the behavior of the '''Allow Changing Currency Rate on Receipt''' check box has been changed.[anchor|#section_enp_rrd_4mb]
==Changes in Modifying the Currency Rate==
Previously, the user could not change the currency rate for the AP bill from the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form. In Acumatica ERP 2020 R2, when the user changes the currency exchange rate on the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] form (see the following screenshot), releases the purchase receipt, and creates the AP bill by selecting '''Actions''' > '''Enter AP Bill''', the updated values of the '''Unit Cost''' and '''Ext. Cost''', '''Currency Rate Type''', and''' Currency Exchange Rate''' boxes are now transferred directly to the AP bill.((({S:Warn}On the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form, when the user creates a new AP bill for a purchase order with a released purchase receipt in which the currency rate is changed, the currency rate modification is not transferred to the AP bill.
)))[anchor|#fig_epy_1cf_4mb][anchor|#image_fpy_1cf_4mb][image:ReleaseNotes/Images/RN_2020_R2_OrderMgmt_Receipt_Cost_to_AP_Bill_Currency_section.png|popup|The Currency section on the Purchase Receipt form|450px]
Now the purchase receipt has its currency (previously it was always calculated in the base currency), that is, in the purchase receipt, the values of the '''Unit Cost''' and '''Ext. Cost''' boxes are displayed and edited in the currency of the purchase receipt. The value in the '''Estimated IN Ext. Cost''' box is still calculated in base currency only.{br}

The '''Currency''' boxes only appear if the '''Multi-Currency Accounting''' check box is selected on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form and the '''Allow Changing Currency Rate on Receipt''' check box is selected on the [HelpRoot_FormReference\PO_10_10_00|Purchase Orders Preferences] ([~/?ScreenId=PO101000|PO101000]) form. The user can change the currency rate only if the '''Enable Rate Override''' check box is selected on the [HelpRoot_FormReference\AP_30_30_00|Vendors] (AP3030000) form for the vendor for which the purchase order is created. ]]></column>
			<column name="PlainText"><![CDATA[Order Management: Transferring the Unit Cost from a Purchase Receipt to the AP Bill Previously, when the AP bill was created from the purchase receipt, to derive the unit cost         value for the AP bill, the system used the unit cost value from the related purchase order.         In  Acumatica ERP 2020 R2, when an AP bill is created from the purchase order that has a purchase receipt or from         the purchase receipt itself, to derive the unit cost value for the AP bill, the system uses         the unit cost value from the purchase receipt. This new behavior will be of use in         situations when the actual cost of purchased items changes by the time the purchase receipt         is created. If the purchase order has only lines that do not require receipt, and the AP         bill is created for such a purchase order, the system will use the unit cost values from         purchase order lines. Also, the behavior of the  Allow Changing Currency Rate on Receipt          check box has been changed. Changes in Modifying the Currency Rate Previously, the user could not change the currency rate for the AP bill from the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000) form. In  Acumatica ERP 2020 R2, when the user changes the currency exchange rate on the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts form (see the following screenshot), releases the         purchase receipt, and creates the AP bill by selecting  Actions Enter AP Bill , the updated values of the  Unit Cost  and            Ext. Cost ,  Currency Rate Type ,           and  Currency Exchange Rate  boxes are now transferred directly to         the AP bill. On the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form, when the user         creates a new AP bill for a purchase order with a released purchase receipt in which the         currency rate is changed, the currency rate modification is not transferred to the AP         bill. The Currency section on the Purchase Receipt form Now the purchase receipt has its currency (previously it was always calculated in the base         currency), that is, in the purchase receipt, the values of the  Unit           Cost  and  Ext. Cost  boxes are displayed and edited in         the currency of the purchase receipt. The value in the  Estimated IN Ext.           Cost  box is still calculated in base currency only. The  Currency  boxes only appear if the  Multi-Currency           Accounting  check box is selected on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form and the  Allow Changing           Currency Rate on Receipt  check box is selected on the   ([~/?ScreenId=PO101000|PO101000]) Purchase Orders Preferences (PO101000) form. The user can change the currency         rate only if the  Enable Rate Override  check box is selected on the             ([~/?ScreenId=AP303000|AP303000]) Vendors (AP3030000) form for the vendor for which the         purchase order is created.  ]]></column>
		</row>
		<row PageID="697bc086-7b03-4bac-87af-85bfd10b0ad5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="39185daf-a024-184f-4584-51f3fde9ea00" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, workgroups can be used for grouping employees by crew, and activity time can be reported, reviewed, or approved for an entire crew at a time.
==Changes to the Company Tree Form==
In previous versions of Acumatica ERP, only an employee with a user account could be selected as a workgroup member. Because not all employees—that is, all people in the organization with accounts defined on the [HelpRoot_FormReference\EP_20_30_00|Employees] ([~/?ScreenId=EP203000|EP203000]) form—necessarily have user accounts, this restriction has been removed in Acumatica ERP 2020 R2. As a result, any group of employees (which can be described as a ''crew''), can be defined as a workgroup and then used for group entry, approval, and release of time activities.{br}

In the '''Workgroup Details''' pane on the [HelpRoot_FormReference\EP_20_40_61|Company Tree] ([~/?ScreenId=EP204061|EP204061]) form (shown in the following screenshot), in the '''Members''' table, the '''User''' column has been removed, and the '''Employee Name''' column has been renamed to '''Contact''' and moved to the far left side of the table. Also, the '''Membership Type''' column (a required setting) has been added to the table. Its options indicate what kind of member, ''Permanent'' or ''Temporary'', the selected employee is in the workgroup.[anchor|#_147e2c8c-49cc-4583-9ada-677b42bc77b5][anchor|#_a8ff8894-c05c-49d4-b81e-ef468933d214][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Crew_Time_Entry.png|popup|Company Tree form|450px]
==Weekly Crew Time Entry Form==
A new form, ''Weekly Crew Time Entry (EP307100)'', which is shown in the following screenshot, has been introduced in Acumatica ERP 2020 R2. By using this form, a user can create a time entry for a selected workgroup (that is, crew) and, if needed, associate this entry with a project and project task. Each time entry created on this form spans a particular week.{br}

On the '''Time Activities''' tab of the form, which is also shown in the following screenshot, on the table toolbar, a user can click the '''Add Row''' button to create a time activity for a particular member of the workgroup or click '''Enter Bulk Time''' to open the '''Bulk Time Entry''' dialog box, where a user can enter time for the crew (that is, create multiple identical time activities for members of the selected workgroup). [anchor|#_9e52c761-d819-45e0-9494-4bcf12c49803][anchor|#_20b184e9-9486-4112-b7e3-44526a4cb6a2][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Crew_Time_Entry_2.png|popup|Weekly Crew Time Entry form|450px]
In the '''Bulk Time Entry''' dialog box (which is shown in the following screenshot), in the left pane, the user can select the members of the crew for whom time activities are to be created, and in the right pane, the user can enter all necessary time activities performed by the selected members during the week selected in the Summary area of the form. When the user clicks '''Add''' or '''Add and Close''' at the bottom of the dialog box, time activities identical to the time activities specified in the right pane of the dialog box are created for each selected member of the crew.((({S:Warn}Initially, the left pane lists all members of the workgroup selected in the Summary area of the form. By using this pane, the user can add to the list any employee registered in the system, which may be convenient if that employee also performed the same activities as the other members of the crew. This added employee has ''Ad Hoc'' inserted by the system in the '''Status''' column of the table, which indicates that the user is not a member of the selected workgroup. If the '''Show All Members''' check box is cleared, only the members of the selected workgroup are displayed in the list in this pane. If the check box is selected, all members of the workgroup and all ad hoc members are included in the list.
)))[anchor|#_34353f68-407e-48fa-8833-d761158d4e73][anchor|#_464f56ff-0f47-4898-b53d-f778f79add73][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Crew_Time_Entry_4.png|popup|Bulk Time Entry dialog box|450px]
On the '''Crew Members''' tab, which is shown in the following screenshot, the user can review the reported work hours of the crew members, including ad hoc members, broken down by the days of the week. In the Summary area of the tab, the '''Workgroup Members''' counter shows the total number of the crew members, including ad hoc members, and the '''Members with Activities''' counter shows the total number of the crew members who have time activities reported for the selected week.[anchor|#_4b2140b7-7c7f-44b6-8b42-8e6c60093a4a][anchor|#_fb0f5e1c-c853-4d03-8d59-b60ddcd5ab1a][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Crew_Time_Entry_3.png|popup|Workgroup Members tab|450px]
==Other Changes==
After time activities have been created in bulk for crew members, they can be processed as ordinary time activities can. To facilitate the processing of crew time activities, the '''Workgroup''' column has been added to the tables on the following forms:[anchor|#_1354ae70-e3e3-4a15-8c1e-802e47564fdc]
*[HelpRoot_FormReference\EP_30_70_00|Employee Time Activities] ([~/?ScreenId=EP307000|EP307000]): With the new column, a user can filter activities by workgroup and, if necessary, edit them if they have not been released yet.
*[HelpRoot_FormReference\EP_30_50_00|Employee Time Card] ([~/?ScreenId=EP305000|EP305000]), '''Details''' tab: By using this form, a user can now review employee activities associated with a workgroup.
*[HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]), '''Log''' tab: With the new column, a user can review log lines associated with a workgroup.
*[HelpRoot_FormReference\EP_50_70_10|Approve Time Activities] ([~/?ScreenId=EP507010|EP507010]): With the new column, a user can filter activities by workgroup and then mass-approve them by clicking '''Approve All''' on the form toolbar.
*[HelpRoot_FormReference\EP_50_70_20|Release Time Activities] ([~/?ScreenId=EP507020|EP507020]): With the new column, a user can filter activities by workgroup and then mass-release them by clicking '''Process All''' on the form toolbar.
]]></column>
			<column name="PlainText"><![CDATA[Payroll: Crew Time Entry Starting in  Acumatica ERP 2020 R2, workgroups can be used for grouping employees by crew, and activity time can be         reported, reviewed, or approved for an entire crew at a time. Changes to the Company Tree Form In previous versions of  Acumatica ERP, only an employee with a user account could be selected as a workgroup member. Because         not all employees—that is, all people in the organization with accounts defined on the   ([~/?ScreenId=EP203000|EP203000]) Employees (EP203000) form—necessarily have user accounts,         this restriction has been removed in  Acumatica ERP 2020 R2. As a result, any group of employees (which can be described as a  crew ), can be         defined as a workgroup and then used for group entry, approval, and release of time         activities. In the  Workgroup Details  pane on the   ([~/?ScreenId=EP204061|EP204061]) Company Tree (EP204061) form (shown in the following         screenshot), in the  Members  table, the  User          column has been removed, and the  Employee Name  column has been         renamed to  Contact  and moved to the far left side of the table. Also,         the  Membership Type  column (a required setting) has been added to the         table. Its options indicate what kind of member,  Permanent  or  Temporary , the         selected employee is in the workgroup. Company Tree form Weekly Crew Time Entry Form A new form,  Weekly Crew Time Entry (EP307100) , which is shown in the following         screenshot, has been introduced in  Acumatica ERP 2020 R2. By using this form, a user can create a time entry for a selected workgroup (that is,         crew) and, if needed, associate this entry with a project and project task. Each time entry         created on this form spans a particular week. On the  Time Activities  tab of the form, which is also shown in the         following screenshot, on the table toolbar, a user can click the  Add           Row  button to create a time activity for a particular member of the workgroup         or click  Enter Bulk Time  to open the  Bulk Time           Entry  dialog box, where a user can enter time for the crew (that is, create         multiple identical time activities for members of the selected workgroup).  Weekly Crew Time Entry form In the  Bulk Time Entry  dialog box (which is shown in the following         screenshot), in the left pane, the user can select the members of the crew for whom time         activities are to be created, and in the right pane, the user can enter all necessary time         activities performed by the selected members during the week selected in the Summary area of         the form. When the user clicks  Add  or  Add and           Close  at the bottom of the dialog box, time activities identical to the time         activities specified in the right pane of the dialog box are created for each selected         member of the crew. Initially, the left pane lists all members of the workgroup selected in the Summary area         of the form. By using this pane, the user can add to the list any employee registered in the         system, which may be convenient if that employee also performed the same activities as the         other members of the crew. This added employee has  Ad Hoc  inserted by the system in         the  Status  column of the table, which indicates that the user is not         a member of the selected workgroup. If the  Show All Members  check box         is cleared, only the members of the selected workgroup are displayed in the list in this         pane. If the check box is selected, all members of the workgroup and all ad hoc members are         included in the list. Bulk Time Entry dialog box On the  Crew Members  tab, which is shown in the following screenshot,         the user can review the reported work hours of the crew members, including ad hoc members,         broken down by the days of the week. In the Summary area of the tab, the            Workgroup Members  counter shows the total number of the crew         members, including ad hoc members, and the  Members with Activities          counter shows the total number of the crew members who have time activities reported for the         selected week. Workgroup Members tab Other Changes After time activities have been created in bulk for crew members, they can be processed as         ordinary time activities can. To facilitate the processing of crew time activities, the            Workgroup  column has been added to the tables on the following         forms:  ([~/?ScreenId=EP307000|EP307000]) Employee Time Activities (EP307000): With the new column, a user can           filter activities by workgroup and, if necessary, edit them if they have not been released           yet.  ([~/?ScreenId=EP305000|EP305000]) Employee Time Card (EP305000),  Details            tab: By using this form, a user can now review employee activities associated with a           workgroup.  ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200),  Log  tab:           With the new column, a user can review log lines associated with a workgroup.  ([~/?ScreenId=EP507010|EP507010]) Approve Time Activities (EP507010): With the new column, a user can           filter activities by workgroup and then mass-approve them by clicking  Approve             All  on the form toolbar.  ([~/?ScreenId=EP507020|EP507020]) Release Time Activities (EP507020): With the new column, a user can           filter activities by workgroup and then mass-release them by clicking  Process             All  on the form toolbar. ]]></column>
		</row>
		<row PageID="b1e8df4a-8844-420e-b2e1-8629329ac9c0" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="e0fe7cb1-4b91-034a-8a40-393b52644beb" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, deduction and benefit codes can be associated with only one source: employee settings, certified projects, unions, or workers’ compensation codes. With this capability, correct YTD, QTD, and MTD amounts of deductions and benefits associated with a particular union or certified project can be calculated for reports.{br}

To implement this capability, on the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] ([~/?ScreenId=PR101060|PR101060]) form, the '''Associated With''' box has been added (shown in the following screenshot), with the following options available in the drop-down list:[anchor|#_9bd705a1-0cf5-4fac-bf96-de3315e14d7a]
*''Employee Settings'': The code can be linked only to employee settings, which are created on the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form.
*''Certified Project'': The code can be linked only to certified projects, which are created on the [HelpRoot_FormReference\PR_20_99_00|Certified Projects] ([~/?ScreenId=PR209900|PR209900]) form.
*''Union'': The code can be linked only to unions, which are created on the [HelpRoot_FormReference\PR_20_97_00|Union Locals] ([~/?ScreenId=PR209700|PR209700]) form.
*''Work Class Compensation'': The code can be linked only to workers&rsquo; compensation codes, which are created on the [HelpRoot_FormReference\PR_20_98_00|Work Class Compensation Codes] ([~/?ScreenId=PR209800|PR209800]) form. In previous versions of Acumatica ERP, this option was available as the '''Is Workers’ Compensation''' check box in the Summary area of the form.
[anchor|#_af30d650-3628-4a66-9254-dc7fba2994af][anchor|#_c80a7383-28f9-447f-b0db-b9e8ff80e8af][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Deduction_Benefit_Source.png|popup|New setting on the Deduction and Benefit Codes form|450px]
For an existing deduction and benefit code, a user cannot modify the '''Associated With''' option specified for the code if the code is already associated with an entity or payment.
==Upgrade Notes==
As a result of an upgrade to Acumatica ERP 2020 R2, existing deduction and benefit codes will be updated as follows:[anchor|#_438368d5-a497-4819-936a-ac16940ad1c2]
*A code that was associated with only employee settings, unions, or certified projects will have the corresponding option specified in the '''Associated With''' box of the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] ([~/?ScreenId=PR101060|PR101060]) form.
*A code that had the '''Is Workers’ Compensation''' check box selected will have the ''Work Class Compensation'' option specified in the '''Associated With''' box of the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] form.
*A code that was associated with employee settings and unions will have the ''Employee Settings'' option specified in the '''Associated With''' box of the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] form. Also, a copy of that code will be created with the ''Union'' option specified in the '''Associated With''' box; the code that was specified for each existing union will be replaced with that copy.
*A code that was associated with employee settings and certified projects will have the ''Employee Settings'' option specified in the '''Associated With''' box of the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] form. Also, a copy of that code will be created with the ''Certified Project'' option specified in the '''Associated With''' box; the code that was specified for each existing certified project will be replaced with that copy.
*A code that was associated with employee settings, unions, and certified projects will have the ''Employee Settings'' option specified in the '''Associated With''' box of the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] form. Also, two copies of that code will be created, one with the ''Union'' option specified in the '''Associated With''' box and one with the ''Certified Project'' option specified in this box; the code that was specified for each existing union and each existing certified project will be replaced with the copy with the appropriate option.
]]></column>
			<column name="PlainText"><![CDATA[Payroll: Deduction and Benefit Code Source Starting in  Acumatica ERP 2020 R2, deduction and benefit codes can be associated with only one source: employee settings,         certified projects, unions, or workers’ compensation codes. With this capability, correct         YTD, QTD, and MTD amounts of deductions and benefits associated with a particular union or         certified project can be calculated for reports. To implement this capability, on the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes         (PR101060) form, the  Associated With  box has been added (shown in the         following screenshot), with the following options available in the drop-down list: Employee Settings : The code can be linked only to employee settings, which are           created on the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000) form. Certified Project : The code can be linked only to certified projects, which are           created on the   ([~/?ScreenId=PR209900|PR209900]) Certified Projects (PR209900) form. Union : The code can be linked only to unions, which are created on the   ([~/?ScreenId=PR209700|PR209700]) Union Locals (PR209700) form. Work Class Compensation : The code can be linked only to workers' compensation           codes, which are created on the   ([~/?ScreenId=PR209800|PR209800]) Work Class Compensation Codes (PR209800)           form. In previous versions of  Acumatica ERP, this option was available as the  Is Workers’ Compensation  check           box in the Summary area of the form. New setting on the Deduction and Benefit Codes form For an existing deduction and benefit code, a user cannot modify the  Associated           With  option specified for the code if the code is already associated with an         entity or payment. Upgrade Notes As a result of an upgrade to  Acumatica ERP 2020 R2, existing deduction and benefit codes will be updated as follows: A code that was associated with only employee settings, unions, or certified projects           will have the corresponding option specified in the  Associated With            box of the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes (PR101060) form. A code that had the  Is Workers’ Compensation  check box selected           will have the  Work Class Compensation  option specified in the  Associated             With  box of the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes form. A code that was associated with employee settings and unions will have the  Employee             Settings  option specified in the  Associated With  box of the               ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes form. Also, a copy of that code will be           created with the  Union  option specified in the  Associated             With  box; the code that was specified for each existing union will be           replaced with that copy. A code that was associated with employee settings and certified projects will have the              Employee Settings  option specified in the  Associated With            box of the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes form. Also, a copy of that code           will be created with the  Certified Project  option specified in the              Associated With  box; the code that was specified for each           existing certified project will be replaced with that copy. A code that was associated with employee settings, unions, and certified projects will           have the  Employee Settings  option specified in the  Associated             With  box of the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes form. Also, two           copies of that code will be created, one with the  Union  option specified in the              Associated With  box and one with the  Certified Project            option specified in this box; the code that was specified for each existing union and each           existing certified project will be replaced with the copy with the appropriate           option. ]]></column>
		</row>
		<row PageID="49d68ea7-97b0-4a43-bf23-f3ee9db6e303" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="ef90b0ff-624a-ceff-5b42-26f6befb468b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the calculation of deductions and benefits can be set up with greater flexibility than in previous versions. Now an administrator can specify what earning types may be used in the calculation, whether deductions or benefits should be calculated based on a custom applicable wage, and which payroll items may increase or decrease that applicable wage. {br}

To support these enhancements to the calculation of deductions and benefits, multiple changes have been made to the [HelpRoot_FormReference\PR_10_10_60|Deduction and Benefit Codes] ([~/?ScreenId=PR101060|PR101060]) form.
==Changes to the Deduction and Benefit Codes Form==
On the '''Employee Deduction Settings''' and '''Employer Contribution Settings''' tabs, the ''Percent of Custom'' option has been added to the drop-down list in the '''Calculation Method''' box, as shown in the following screenshot. This option indicates that the system uses the percent specified on the current tab and calculates the deduction or benefit as a percentage of the applicable wage. This option is available only if the '''Affects Tax Calculation''' check box in the Summary area of the form is cleared.[anchor|#_54c78812-3845-47ba-91d6-7ea403418d86][anchor|#_32d3d791-adca-4d1c-9737-3dd1d7c6f247][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Applicable_Wage.png|popup|New calculation method|450px]
If ''Percent of Custom'' is selected in the '''Calculation Method''' box on either of the tabs (or on both tabs), the '''Applicable Wage''' tab appears on the form. On the '''Applicable Wage''' tab, an administrator can define which payroll items may increase or decrease the applicable wage. Deductions and benefits with the ''Percent of Custom'' calculation method are calculated as a percentage of the applicable wage. If the calculated applicable wage is a negative amount, the resulting percentage will be zero.{br}

The '''Applicable Wage''' tab includes the following panes (shown in the screenshot below):[anchor|#_04c4ad4c-b018-44b5-8239-51fca11606f2]
*'''Earnings Increasing Applicable Wage''': By using this pane, the user can select the earning types that increase the applicable wage. 
*'''Benefits Increasing Applicable Wage''': On this pane, the user can select the benefits that increase the applicable wage. The user can select only benefits that affect tax calculation and that do not use the ''Percent of Net'' calculation method.
*'''Employer Taxes Increasing Applicable Wage''': On this pane, the user can select the employer taxes that increase the applicable wage.
*'''Deductions Decreasing Applicable Wage''': By using this pane, the user can select the deductions that decrease the applicable wage. The user can withhold from the applicable wage only deductions that affect tax calculation and that do not use the ''Percent of Net'' calculation method.
*'''Employee Taxes Decreasing Applicable Wage''': By using this pane, the user can select employee withholding taxes that decrease the applicable wage.

Each pane contains the '''Inclusion Type''' box, whose option indicates how items of the related type are selected for the calculation of the applicable wage. The following options are available:[anchor|#_40997a45-a9b7-412c-ba10-59a298be6610]
*''All'': All available items of the related type can affect the calculation of the applicable wage. With this option selected, the pane table is empty and cannot be edited.
*''None'': Items of the related type cannot affect the calculation of the applicable wage. With this option selected, the pane table is empty and cannot be edited.
*''All but Listed Below'': All items of the related type, except for the items listed in the pane table, can affect the calculation of the applicable wage.
*''None but Listed Below'': Only the items listed in the pane table can affect the calculation of the applicable wage.
[anchor|#_9edf46d7-4cd0-4b79-b9f9-a08b1b7ac87c][anchor|#_80653c08-f3ae-407c-ad10-bf9f9bde31df][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Applicable_Wage_3.png|popup|Applicable Wage tab|450px]
On the '''Employee Deduction Settings''' and '''Employer Contribution Settings''' tabs, the '''Applicable Earnings''' box has been also added, as shown in the following screenshot. The option in this box restricts the earning types that can be used in the calculation of employee deductions or employer contributions based on the categories of those earning types. The category of each earning type code is specified in the Summary area of the [HelpRoot_FormReference\PR_10_20_00|Earning Type Codes] ([~/?ScreenId=PR102000|PR102000]) form. The drop-down list in this box may include the following options:[anchor|#_59c736ef-c6df-48e9-a0b4-28228e3d4848]
*''Total Earnings'': Earning types of the ''Salary'', ''Overtime'', and ''Time Off'' categories can be used in the calculation. This option appears in the drop-down list only if the ''Percent of Gross'', ''Percent of Custom'', or ''Amount per Hour'' calculation method is specified on the tab.
*''Regular Earnings'': Only ''Salary'' earnings can be used for the calculation. This option appears in the drop-down list only if the ''Percent of Gross'' or ''Amount per Hour'' calculation method is specified on the tab.
*''Regular and OT Earnings'': Earning types of the ''Salary'' and ''Overtime'' categories can be used in the calculation. This option appears in the drop-down list only if the ''Percent of Gross'' or ''Amount per Hour'' calculation method is specified on the tab.
*''Straight Time Earnings'': Earning types of the ''Salary'' and ''Overtime'' categories can be used in the calculation. This option appears in the drop-down list only if the ''Percent of Gross'' or ''Percent of Custom'' calculation method is specified on the tab.
[anchor|#_d1af0b19-b2fa-4b45-b00a-fac5a17e28eb][anchor|#_66cdfd7f-b604-446f-9c87-e2c34bb3a7b9][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Applicable_Wage_2.png|popup|Applicable Earnings options|450px]]]></column>
			<column name="PlainText"><![CDATA[Payroll: Enhancements to the Calculation of Deductions and Benefits In  Acumatica ERP 2020 R2, the calculation of deductions and benefits can be set up with greater flexibility than         in previous versions. Now an administrator can specify what earning types may be used in the         calculation, whether deductions or benefits should be calculated based on a custom         applicable wage, and which payroll items may increase or decrease that applicable wage.  To support these enhancements to the calculation of deductions and benefits, multiple         changes have been made to the   ([~/?ScreenId=PR101060|PR101060]) Deduction and Benefit Codes (PR101060)         form. Changes to the Deduction and Benefit Codes Form On the  Employee Deduction Settings  and  Employer           Contribution Settings  tabs, the  Percent of Custom  option has been added         to the drop-down list in the  Calculation Method  box, as shown in the         following screenshot. This option indicates that the system uses the percent specified on         the current tab and calculates the deduction or benefit as a percentage of the applicable         wage. This option is available only if the  Affects Tax Calculation          check box in the Summary area of the form is cleared. New calculation method If  Percent of Custom  is selected in the  Calculation Method          box on either of the tabs (or on both tabs), the  Applicable Wage  tab         appears on the form. On the  Applicable Wage  tab, an administrator can         define which payroll items may increase or decrease the applicable wage. Deductions and         benefits with the  Percent of Custom  calculation method are calculated as a percentage         of the applicable wage. If the calculated applicable wage is a negative amount, the         resulting percentage will be zero. The  Applicable Wage  tab includes the following panes (shown in the         screenshot below): Earnings Increasing Applicable Wage : By using this pane, the user           can select the earning types that increase the applicable wage.            Benefits Increasing Applicable Wage : On this pane, the user can           select the benefits that increase the applicable wage. The user can select only benefits           that affect tax calculation and that do not use the  Percent of Net  calculation           method. Employer Taxes Increasing Applicable Wage : On this pane, the user           can select the employer taxes that increase the applicable wage. Deductions Decreasing Applicable Wage : By using this pane, the           user can select the deductions that decrease the applicable wage. The user can withhold           from the applicable wage only deductions that affect tax calculation and that do not use           the  Percent of Net  calculation method. Employee Taxes Decreasing Applicable Wage : By using this pane,           the user can select employee withholding taxes that decrease the applicable wage. Each pane contains the  Inclusion Type  box, whose option indicates         how items of the related type are selected for the calculation of the applicable wage. The         following options are available: All : All available items of the related type can affect the calculation of the           applicable wage. With this option selected, the pane table is empty and cannot be           edited. None : Items of the related type cannot affect the calculation of the applicable           wage. With this option selected, the pane table is empty and cannot be edited. All but Listed Below : All items of the related type, except for the items listed           in the pane table, can affect the calculation of the applicable wage. None but Listed Below : Only the items listed in the pane table can affect the           calculation of the applicable wage. Applicable Wage tab On the  Employee Deduction Settings  and  Employer           Contribution Settings  tabs, the  Applicable Earnings  box         has been also added, as shown in the following screenshot. The option in this box restricts         the earning types that can be used in the calculation of employee deductions or employer         contributions based on the categories of those earning types. The category of each earning         type code is specified in the Summary area of the   ([~/?ScreenId=PR102000|PR102000]) Earning Type Codes (PR102000) form. The drop-down list in this box may include the following options: Total Earnings : Earning types of the  Salary ,  Overtime , and  Time             Off  categories can be used in the calculation. This option appears in the drop-down           list only if the  Percent of Gross ,  Percent of Custom , or  Amount per             Hour  calculation method is specified on the tab. Regular Earnings : Only  Salary  earnings can be used for the calculation.           This option appears in the drop-down list only if the  Percent of Gross  or  Amount             per Hour  calculation method is specified on the tab. Regular and OT Earnings : Earning types of the  Salary  and  Overtime            categories can be used in the calculation. This option appears in the drop-down list only           if the  Percent of Gross  or  Amount per Hour  calculation method is specified           on the tab. Straight Time Earnings : Earning types of the  Salary  and  Overtime            categories can be used in the calculation. This option appears in the drop-down list only           if the  Percent of Gross  or  Percent of Custom  calculation method is specified           on the tab. Applicable Earnings options ]]></column>
		</row>
		<row PageID="d609b709-9772-41d3-8598-55ecae875b07" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6ffa6059-2ac8-3988-451e-c95728ce076e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, individual employees may be marked as exempt from certified reporting. With this capability, organizations can track the time these employees spend working on federal projects but exclude the employees from certified reports and deny them benefits from certified projects, which ensures that the company has accurate reports and does not overpay its employees.{br}

The following changes have been made in the system to support this capability.
==Changes to the Employee Payroll Settings Form==
On the '''General Info''' tab ('''General Info''' section) of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form, the '''Exempt from Certified Reporting''' check box has been added. If this check box is selected, none of the following will be applied to a new paycheck or adjustment created for the selected employee or a payroll batch generated for that employee:[anchor|#_64b0341d-7b04-4d04-b21b-63f3b1acb7b6]
*Earning rates associated with a certified project
*Fringe benefit rates
*Deductions or benefits from the deductions and benefits package specified for a certified project

Employees with the '''Exempt from Certified Reporting''' check box selected are not included in the certified reports generated through the ''Government Reporting (PR504000)'' form.{br}

The '''Use Class Default Value''' check box, which is related to (and adjacent to) the '''Exempt from Certified Reporting''' check box, has also been added to the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] form. If the '''Use Class Default Value''' check box is selected, the '''Exempt from Certified Reporting''' setting is copied from the employee class to which the employee belongs and cannot be modified by a user. If the '''Use Class Default Value''' check box is cleared, a user can select or clear the '''Exempt from Certified Reporting''' check box as needed.{br}

The new check boxes are shown in the following screenshot.[anchor|#_30603345-e2f0-445d-aaac-36b5967e7b0c][anchor|#_5fd3db46-0911-4e17-8bf8-7d25d3ca61da][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Exempt_from_Certified_Reporting_EmpSettings.png|popup|New check boxes on the Employee Payroll Settings form|450px]
==Changes to the Employee Class Form==
On the '''Payroll Settings''' tab of the [HelpRoot_FormReference\PR_20_20_00|Employee Class] ([~/?ScreenId=PR202000|PR202000]) form, the '''Exempt from Certified Reporting''' check box has been added, as shown in the following screenshot. This setting is used as the default setting for newly created employees that belong to the class. The default setting may be overridden on the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] form, as described in the previous section.[anchor|#_1c8cc156-4e6e-479c-93c7-103182bae6d2][anchor|#_7d751212-b929-4ec4-84f4-b14fcdd4ad88][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Exempt_from_Certified_Reporting_EmpClass.png|popup|The new check box on the Employee Class form|450px]
==Changes to the Pay Checks and Adjustments Form==
Users cannot edit any settings on the '''Certified Project''' tab of the [HelpRoot_FormReference\PR_30_20_00|Pay Checks and Adjustments] ([~/?ScreenId=PR302000|PR302000]) form for a paycheck or an adjustment created for an employee that is marked as exempt from certified reporting.]]></column>
			<column name="PlainText"><![CDATA[Payroll: Exemption of Employees from Certified Reporting In  Acumatica ERP 2020 R2, individual employees may be marked as exempt from certified reporting. With this         capability, organizations can track the time these employees spend working on federal         projects but exclude the employees from certified reports and deny them benefits from         certified projects, which ensures that the company has accurate reports and does not overpay         its employees. The following changes have been made in the system to support this capability. Changes to the Employee Payroll Settings Form On the  General Info  tab ( General Info          section) of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000) form, the            Exempt from Certified Reporting  check box has been added. If this         check box is selected, none of the following will be applied to a new paycheck or adjustment         created for the selected employee or a payroll batch generated for that employee: Earning rates associated with a certified project Fringe benefit rates Deductions or benefits from the deductions and benefits package specified for a           certified project Employees with the  Exempt from Certified Reporting  check box         selected are not included in the certified reports generated through the  Government           Reporting (PR504000)  form. The  Use Class Default Value  check box, which is related to (and         adjacent to) the  Exempt from Certified Reporting  check box, has also         been added to the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings form. If the  Use           Class Default Value  check box is selected, the  Exempt from           Certified Reporting  setting is copied from the employee class to which the         employee belongs and cannot be modified by a user. If the  Use Class Default           Value  check box is cleared, a user can select or clear the  Exempt           from Certified Reporting  check box as needed. The new check boxes are shown in the following screenshot. New check boxes on the Employee Payroll Settings form Changes to the Employee Class Form On the  Payroll Settings  tab of the   ([~/?ScreenId=PR202000|PR202000]) Employee Class (PR202000) form, the  Exempt from           Certified Reporting  check box has been added, as shown in the following         screenshot. This setting is used as the default setting for newly created employees that         belong to the class. The default setting may be overridden on the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings form, as described in the previous section. The new check box on the Employee Class form Changes to the Pay Checks and Adjustments Form Users cannot edit any settings on the  Certified Project  tab of the             ([~/?ScreenId=PR302000|PR302000]) Pay Checks and Adjustments (PR302000) form for a paycheck or an         adjustment created for an employee that is marked as exempt from certified reporting. ]]></column>
		</row>
		<row PageID="6ca2e95f-31cc-4ba0-ba67-8adcf3458010" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="500312b2-f75e-a4d8-aa0c-58d935e06324" RecordSourceID="22377">
			<column name="Content"><![CDATA[
On the '''General Info''' tab of the [HelpRoot_FormReference\PR_10_10_00|Payroll Preferences] ([~/?ScreenId=PR101000|PR101000]) form, in the '''Posting and Retention Settings''' section, an administrator can specify the sources from which the system selects the GL accounts and subaccounts when transactions that involve earnings, deduction liabilities, benefit expenses, benefit liabilities, tax expenses, or tax liabilities are posted to the general ledger.{br}

Starting in Acumatica ERP 2020 R2, if a source entity is specified for an account or subaccount on the [HelpRoot_FormReference\PR_10_10_00|Payroll Preferences] form, the system requires the corresponding account or subaccount to be specified on the maintenance form for the source entity.{br}

For example, suppose that on the [HelpRoot_FormReference\PR_10_10_00|Payroll Preferences] form, ''Earning Type'' is selected in the '''Use Earnings Account From''' box and ''TTT-TTT'' is specified in the '''Combine Earnings Sub. From''' box (as shown in the first screenshot below), meaning that the earnings subaccount of the earning type is to be used as the source of the segment values. In this case, the '''Earnings Account''' and''' Earnings Sub.''' settings on the '''GL Accounts''' tab of the [HelpRoot_FormReference\PR_10_20_00|Earning Type Codes] ([~/?ScreenId=PR102000|PR102000]) form (see the second screenshot below) become required settings.[anchor|#_831d795d-f4fa-4fd0-8fd2-bbea222e5251][anchor|#_6e53e661-46ac-43b6-a679-cf119e557fbd][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Required_GL_Accounts.png|popup|Posting settings on the Payroll Preferences form|450px][anchor|#_32336d6d-22f5-4d85-a39d-505cf432eb1d][anchor|#_612da787-69f8-420b-bb51-09fb314820b6][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Required_GL_Accounts_2.png|popup|GL accounts on the Earning Type Codes form|450px]]]></column>
			<column name="PlainText"><![CDATA[Payroll: GL Accounts Made Required Depending on Payroll Preferences On the  General Info  tab of the   ([~/?ScreenId=PR101000|PR101000]) Payroll Preferences (PR101000) form, in the  Posting and           Retention Settings  section, an administrator can specify the sources from         which the system selects the GL accounts and subaccounts when transactions that involve         earnings, deduction liabilities, benefit expenses, benefit liabilities, tax expenses, or tax         liabilities are posted to the general ledger. Starting in  Acumatica ERP 2020 R2, if a source entity is specified for an account or subaccount on the   ([~/?ScreenId=PR101000|PR101000]) Payroll Preferences form, the system requires the corresponding account         or subaccount to be specified on the maintenance form for the source entity. For example, suppose that on the   ([~/?ScreenId=PR101000|PR101000]) Payroll Preferences form,            Earning Type  is selected in the  Use Earnings Account From          box and  TTT-TTT  is specified in the  Combine Earnings Sub. From          box (as shown in the first screenshot below), meaning that the earnings subaccount of the         earning type is to be used as the source of the segment values. In this case, the            Earnings Account  and  Earnings Sub.  settings         on the  GL Accounts  tab of the   ([~/?ScreenId=PR102000|PR102000]) Earning Type Codes (PR102000) form (see the second screenshot below)         become required settings. Posting settings on the Payroll Preferences form GL accounts on the Earning Type Codes form ]]></column>
		</row>
		<row PageID="fab5866b-f998-43b1-987d-a40993a508b6" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f3327bec-a900-2f16-cc01-e963f3c188dd" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, granular licensing of the payroll functionality has been implemented.{br}

On the '''License''' tab of the [HelpRoot_FormReference\SM_60_40_00|License Monitoring Console] ([~/?ScreenId=SM604000|SM604000]) form, in the '''System Constraints''' section, the '''Maximum Number of Employees Paid by Month''' setting has been added (as shown in the following screenshot). This setting displays the license limit for the number of employees that can receive paychecks within any month.[anchor|#_f3d0c756-f917-4595-8810-df33ee1cf91e][anchor|#_83576170-acc1-416e-8733-e246b2535e5a][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Granular_Licensing_1.png|popup|The License tab of the License Monitoring Console form|450px]
On the '''Constraint History''' tab of the same form (shown in the following screenshot), the '''Employees Paid by Month (% of Limit)''' column has been added to the table. In this column, the number of employees paid during the current calendar month is displayed, with the percent of the license limit specified in parentheses. Each row in the table displays constraint details for one tenant as of a particular date.[anchor|#_6cbd1a5c-9119-421b-98ad-cf618dc3dd64][anchor|#_c374fa24-a5c2-486d-adb5-68ffd5dd8079][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Granular_Licensing_3.png|popup|The Constraint History tab of the License Monitoring Console form|450px]
When the number of paid employees is approaching or has exceeded the license limit, a warning or an error message is displayed next to the value in the '''Employees Paid by Month (% of Limit)''' column, as shown in the following screenshot.[anchor|#_af26a843-d7ea-449b-8499-bd4a6c77ef49][anchor|#_e8658fba-7a52-4f07-aab9-cca2efdc34c8][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Granular_Licensing_2.PNG|popup|An error message displayed on the Constraint History tab|450px]
These warnings are also listed on the '''Warnings''' tab of the same form, as shown in the following screenshot.[anchor|#_8ef0e282-3349-428a-b29f-27ebeb678f88][anchor|#_2c62d6e1-1264-4ffe-8afd-71e3ace6afdd][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Granular_Licensing_4.PNG|popup|A warning displayed on the Warnings tab|450px]]]></column>
			<column name="PlainText"><![CDATA[Payroll: Granular Licensing In  Acumatica ERP 2020 R2, granular licensing of the payroll functionality has been implemented. On the  License  tab of the   ([~/?ScreenId=SM604000|SM604000]) License Monitoring Console (SM604000) form, in the  System Constraints  section, the            Maximum Number of Employees Paid by Month  setting has been added         (as shown in the following screenshot). This setting displays the license limit for the         number of employees that can receive paychecks within any month. The License tab of the License Monitoring Console form On the  Constraint History  tab of the same form (shown in the         following screenshot), the  Employees Paid by Month (% of Limit)          column has been added to the table. In this column, the number of employees paid during the         current calendar month is displayed, with the percent of the license limit specified in         parentheses. Each row in the table displays constraint details for one tenant as of a         particular date. The Constraint History tab of the License Monitoring Console form When the number of paid employees is approaching or has exceeded the license limit, a         warning or an error message is displayed next to the value in the  Employees Paid           by Month (% of Limit)  column, as shown in the following screenshot. An error message displayed on the Constraint History tab These warnings are also listed on the  Warnings  tab of the same form,         as shown in the following screenshot. A warning displayed on the Warnings tab ]]></column>
		</row>
		<row PageID="628019c4-a700-41a0-acb0-87aac2407200" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="6d68fe1f-6931-0cc8-acf6-d90eb555bea7" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, tax management has been significantly improved so that the system now automatically creates and assigns the appropriate taxes to employees based on their work location or address.{br}

In the sections below, the related changes in the system are described in detail.
==Changes to the Payroll Preferences Form==
The following changes have been made to the [HelpRoot_FormReference\PR_10_10_00|Payroll Preferences] ([~/?ScreenId=PR101000|PR101000]) form:[anchor|#_9c781651-58a3-4789-941b-f1d98a4fe33c]
*The '''Update Tax Definition''' button has been removed from the form toolbar.
*The '''Tax Attributes''' tab has been moved to the new ''Tax Maintenance (PR208000)'' form, where it is now named '''Company Tax Settings'''.

==Changes to the Work Locations Form==
On the [HelpRoot_FormReference\PR_10_10_40|Work Locations] ([~/?ScreenId=PR101040|PR101040]) form, the '''Tax Location Info''' group of settings has been removed.
==Changes to the Employee Class Form==
On the '''Payroll Settings''' tab of the [HelpRoot_FormReference\PR_20_20_00|Employee Class] ([~/?ScreenId=PR202000|PR202000]) form, the '''Default Work Location''' box has been removed and the '''Work Locations''' table has been added (shown in the screenshot below) to replace and enhance the functionality provided by the box. By using the new table, a user can specify multiple work locations for an employee class and mark one of the specified work locations as the default. Only the work locations that are specified in the table will be available in an employee&rsquo;s paychecks and adjustments and in the related payroll batches if the '''Use Class Default Value''' check box is selected for the employee on the '''General Info''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form.[anchor|#_f20beb41-05a0-4420-8072-6a363f00bb70][anchor|#_a22f3f2f-3459-4e7d-846b-7a0439d477ce][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Tax_Management_1.png|popup|Work Locations table on the Employee Class form|450px]
==Changes to the Employee Payroll Settings Form==
On the '''General Info''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form, the following changes have been made:[anchor|#_fff0cf0f-4bf8-4764-aea0-7faf44a881f0]
*The '''Tax Location Info''' group of settings has been removed.
*The '''Default Work Location''' box in the '''General Info''' section has been removed.
*The '''Work Locations''' table and the '''Use Class Default Value''' check box have been added, as shown in the screenshot below.
*:If the '''Use Class Default Value''' check box is selected, the '''Work Locations''' table is filled in with the work locations specified for the employee class of the selected employee, and the values cannot be overridden. If the '''Use Class Default Value''' check box is cleared, a user can specify multiple work locations and select one default work location. Only the work locations that are listed in the table will be available for selection on the [HelpRoot_FormReference\PR_30_20_00|Pay Checks and Adjustments] ([~/?ScreenId=PR302000|PR302000]) form and in the '''Earning Details''' dialog box that can be opened on the [HelpRoot_FormReference\PR_30_10_00|Payroll Batches] ([~/?ScreenId=PR301000|PR301000]) form. 
[anchor|#_b1b93735-73ea-4ab4-a01f-5c23065c3439][anchor|#_47c23f75-6943-4fb7-9eff-a5426e1df2b5][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Tax_Management_2.png|popup|General Info tab on the Employee Payroll Settings form|450px]
On the '''Taxes''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] form, the '''Import Taxes''' button has been added to the table toolbar of the left pane, as shown in the following screenshot. If a user clicks this button, the system fills in the table in the left pane with the relevant taxes based on the work locations and the address specified for the employee.[anchor|#_25f8bd4d-1ee3-44f3-bf17-8d967e379ee0][anchor|#_b0ab97ed-64c9-441d-a52a-bc0abd135976][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Tax_Management_3.png|popup|Taxes tab on the Employee Payroll Settings form|450px]
==New Tax Maintenance Form==
The ''Tax Maintenance (PR208000)'' form, which is shown in the following screenshot, has been added to the system.[anchor|#_6d6d16bd-8688-4a90-b5d0-f87a47d64abb][anchor|#_d4dd0e93-cef6-4fb3-8906-6a5ddf39f1c0][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Tax_Management_4.png|popup|Tax Maintenance form|450px]
The form toolbar of the new form contains the following buttons:[anchor|#_8f91fe5e-1863-4f55-a325-049edaa9789a]
*'''Update Taxes''': Updates the tax information in the system by downloading the latest details from the Tax Symmetry engine, and creates tax codes related to all employee addresses and work locations stored in the system. As a result, the '''Tax Codes''' tab on this form becomes populated with data.
*'''Assign Taxes to Employees''': Assigns the relevant taxes to employees based on their addresses and work locations specified on the '''General Info''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form. 

On the '''Tax Codes''' tab of the ''Tax Maintenance'' form, in the row of each tax code whose settings need to be updated, a warning or an error icon will be displayed, depending on whether the setting is marked as required. The settings of the selected tax code are displayed in the '''Tax Settings''' table. By clicking '''View Tax Details''' on the table toolbar, a user can open the '''Tax Details''' dialog box (shown in the screenshot below), which displays the details of the selected tax.[anchor|#_3684280d-43d5-46ba-bac6-3677a3fecbb7][anchor|#_18695f55-2ba5-4e2f-af2c-97b7b4b17a66][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Tax_Management_5.png|popup|Tax Details dialog box|450px]
The '''Company Tax Settings''' tab of the ''Tax Maintenance'' form displays the same settings that were displayed on the '''Tax Attributes''' tab of the [HelpRoot_FormReference\PR_10_10_00|Payroll Preferences] form in previous versions of Acumatica ERP.
==Other Changes==
The ''Tax Codes (PR103000)'' form has been removed from the system.]]></column>
			<column name="PlainText"><![CDATA[Payroll: Improved Tax Management In  Acumatica ERP 2020 R2, tax management has been significantly improved so that the system now automatically         creates and assigns the appropriate taxes to employees based on their work location or         address. In the sections below, the related changes in the system are described in detail. Changes to the Payroll Preferences Form The following changes have been made to the   ([~/?ScreenId=PR101000|PR101000]) Payroll Preferences         (PR101000) form: The  Update Tax Definition  button has been removed from the form           toolbar. The  Tax Attributes  tab has been moved to the new  Tax             Maintenance (PR208000)  form, where it is now named  Company Tax             Settings . Changes to the Work Locations Form On the   ([~/?ScreenId=PR101040|PR101040]) Work Locations (PR101040) form, the  Tax           Location Info  group of settings has been removed. Changes to the Employee Class Form On the  Payroll Settings  tab of the   ([~/?ScreenId=PR202000|PR202000]) Employee Class (PR202000) form, the  Default Work           Location  box has been removed and the  Work Locations          table has been added (shown in the screenshot below) to replace and enhance the         functionality provided by the box. By using the new table, a user can specify multiple work         locations for an employee class and mark one of the specified work locations as the default.         Only the work locations that are specified in the table will be available in an employee's         paychecks and adjustments and in the related payroll batches if the  Use Class           Default Value  check box is selected for the employee on the  General           Info  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000)         form. Work Locations table on the Employee Class form Changes to the Employee Payroll Settings Form On the  General Info  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000) form, the following changes have been         made: The  Tax Location Info  group of settings has been removed. The  Default Work Location  box in the  General             Info  section has been removed. The  Work Locations  table and the  Use Class Default             Value  check box have been added, as shown in the screenshot below. If the                Use Class Default Value  check box is selected, the                Work Locations  table is filled in with the work locations             specified for the employee class of the selected employee, and the values cannot be             overridden. If the  Use Class Default Value  check box is cleared,             a user can specify multiple work locations and select one default work location. Only             the work locations that are listed in the table will be available for selection on the                 ([~/?ScreenId=PR302000|PR302000]) Pay Checks and Adjustments (PR302000) form and in the                Earning Details  dialog box that can be opened on the   ([~/?ScreenId=PR301000|PR301000]) Payroll Batches (PR301000) form.  General Info tab on the Employee Payroll Settings form On the  Taxes  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings         form, the  Import Taxes  button has been added to the table toolbar of         the left pane, as shown in the following screenshot. If a user clicks this button, the         system fills in the table in the left pane with the relevant taxes based on the work         locations and the address specified for the employee. Taxes tab on the Employee Payroll Settings form New Tax Maintenance Form The  Tax Maintenance (PR208000)  form, which is shown in the following screenshot, has         been added to the system. Tax Maintenance form The form toolbar of the new form contains the following buttons: Update Taxes : Updates the tax information in the system by           downloading the latest details from the Tax Symmetry engine, and creates tax codes related           to all employee addresses and work locations stored in the system. As a result, the              Tax Codes  tab on this form becomes populated with data. Assign Taxes to Employees : Assigns the relevant taxes to           employees based on their addresses and work locations specified on the  General             Info  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000)           form.  On the  Tax Codes  tab of the  Tax Maintenance  form, in the row         of each tax code whose settings need to be updated, a warning or an error icon will be         displayed, depending on whether the setting is marked as required. The settings of the         selected tax code are displayed in the  Tax Settings  table. By         clicking  View Tax Details  on the table toolbar, a user can open the            Tax Details  dialog box (shown in the screenshot below), which         displays the details of the selected tax. Tax Details dialog box The  Company Tax Settings  tab of the  Tax Maintenance  form         displays the same settings that were displayed on the  Tax Attributes          tab of the   ([~/?ScreenId=PR101000|PR101000]) Payroll Preferences form in previous versions of  Acumatica ERP. Other Changes The  Tax Codes (PR103000)  form has been removed from the system. ]]></column>
		</row>
		<row PageID="c58d7d6f-a01f-46d6-a2e3-f57efd4f8a07" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="fe5da408-e0af-525a-2cb5-8666be8b33a4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
The dates in the '''Hire Date''' and '''Termination Date''' boxes on the '''General Info''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form are now determined following improved logic.{br}

'''Hire Date''' is set to the start date of the latest uninterrupted period of active employment, as specified in the '''Start Date''' column on the '''Employment History''' tab of the [HelpRoot_FormReference\EP_20_30_00|Employees] ([~/?ScreenId=EP203000|EP203000]) form. For example, if two consecutive periods of employment are specified for an employee, and the most recent period of employment immediately follows the previous one, the hire date is set to the start date of the earliest period, as shown in the following screenshots.[anchor|#_1c011ec7-8417-4639-9d23-e331978322c5][anchor|#_e6e14e26-ccb0-43a5-9458-2021314dc37f][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_1.png|popup|Uninterrupted employment history on the Employees form|450px][anchor|#_0fda9325-a383-402a-a18b-af494b1e8fff][anchor|#_dab15ce6-d890-447c-a25b-ff9f318f2e6a][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_2.png|popup|Hire date on the Employee Payroll Settings form|450px]
If there is at least one day of interruption between the periods of employment (that is, between the start date of the most recent period and the end date of the previous period in this example), the hire date is set to the start date of the most recent active period of employment, as illustrated in the following screenshots (which use the previous example except that one day of interruption is added between employment periods).[anchor|#_726af4e7-4a38-4acd-8517-35e5ec1de72f][anchor|#_e8320e1b-9837-4d3a-9136-74f7b0def677][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_3.png|popup|Interrupted employment history|450px][anchor|#_11a739ce-88dc-4e8d-9519-9a1f313da034][anchor|#_180e6bd5-06c8-4ff6-90a5-f6c3bf3bb65a][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_4.png|popup|Later hire date on the Employee Payroll Settings form|450px]
'''Termination Date''' is set to the latest '''End Date''' specified on the '''Employment History''' tab of the [HelpRoot_FormReference\EP_20_30_00|Employees] form if the employee is not actively employed by the company or if an end date is specified for the employment that has the '''Active''' status, as shown in the following screenshots.[anchor|#_7ed15534-5afe-4a64-b7b8-311fa79db8cf][anchor|#_c4459c78-070c-4c3f-bc3a-7d91d9bb3795][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_5.png|popup|Active employment with an end date specified|450px][anchor|#_47363061-6d55-402d-bb19-3b992b185981][anchor|#_f90a30a6-864b-4803-bed1-86a7daa8d848][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Hire_Termination_Dates_6.png|popup|Termination date on the Employee Payroll Settings form|450px]
If the employee is actively employed with no '''End Date''' specified, the '''Termination Date''' box on the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] form is empty.]]></column>
			<column name="PlainText"><![CDATA[Payroll: Improved Logic for Determining Employees' Hire and Termination Dates The dates in the  Hire Date  and  Termination           Date  boxes on the  General Info  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000) form are now determined following         improved logic. Hire Date  is set to the start date of the latest uninterrupted         period of active employment, as specified in the  Start Date  column on         the  Employment History  tab of the   ([~/?ScreenId=EP203000|EP203000]) Employees (EP203000) form. For example, if two consecutive         periods of employment are specified for an employee, and the most recent period of         employment immediately follows the previous one, the hire date is set to the start date of         the earliest period, as shown in the following screenshots. Uninterrupted employment history on the Employees form Hire date on the Employee Payroll Settings form If there is at least one day of interruption between the periods of employment (that is,         between the start date of the most recent period and the end date of the previous period in         this example), the hire date is set to the start date of the most recent active period of         employment, as illustrated in the following screenshots (which use the previous example         except that one day of interruption is added between employment periods). Interrupted employment history Later hire date on the Employee Payroll Settings form Termination Date  is set to the latest  End           Date  specified on the  Employment History  tab of the             ([~/?ScreenId=EP203000|EP203000]) Employees form if the employee is not actively employed         by the company or if an end date is specified for the employment that has the            Active  status, as shown in the following screenshots. Active employment with an end date specified Termination date on the Employee Payroll Settings form If the employee is actively employed with no  End Date  specified, the            Termination Date  box on the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings form is empty. ]]></column>
		</row>
		<row PageID="028492e5-868b-446d-93b7-a4292f469dc5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a0ab4758-7498-eaa6-7abb-655e11da3233" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the capability of working with disbursement and carryover in PTO banks has been improved. Now users can decide whether they want to allow negative balances in paychecks, choose how they want to use carryover hours, and specify the start date individually for each PTO bank used by an employee in the employee payroll settings.
==Changes to the PTO Banks Form ==
In the Summary area of the [HelpRoot_FormReference\PR_20_40_00|PTO Banks] ([~/?ScreenId=PR204000|PR204000]) form, the following check boxes have been added, as shown in the screenshot below:[anchor|#_04a391f6-3f5f-4ef9-8b78-957ae690ef54]
*'''Allow Negative Balance''': If this check box is cleared and a paycheck is being created for an employee by using the disbursing earning type that is linked to the PTO bank, the system will display an error message if the disbursing amount is greater than the amount associated with the sum of the available and accrued hours. If the check box is selected, the system will not put restrictions on the disbursing amount. 
*'''Can Only Disburse from Carryover''': If this check box is selected, the user will be able to use only the carryover hours from the previous year. If the check box is cleared, the user will not be restricted to use only the carryover hours.
((({S:Warn}The '''Allow Negative Balance''' and '''Can Only Disburse from Carryover''' check boxes cannot be both selected at the same time.
)))[anchor|#_0edae908-2e44-4552-8d15-7b1592295985][anchor|#_20a52bad-0b66-4a4a-a0e7-fd354d9b429b][image:ReleaseNotes/Images/RN_2020_R2_Payroll_PTO_Banks_PTO_Banks_Form1.png|popup|New check boxes on the PTO Banks form|450px]
On the '''General Settings''' tab of the form, a new option, ''Paid After a Period of Time'', has been added to the drop-down list in the '''Carryover Type''' box, as shown in the following screenshot. [anchor|#_02d4652e-485a-41f9-8393-9c9b54883dde][anchor|#_e3cf3c5a-e539-4f54-bed0-a27bd13c5d77][image:ReleaseNotes/Images/RN_2020_R2_Payroll_PTO_Banks_PTO_Banks_Form2.png|popup|The drop-down list in the Carryover Type box|450px]
If this option is selected, the '''Pay Carryover After (Months)''' box becomes available on the tab, as shown in the following screenshot. All the hours not taken from a year will be carried over to the next year, and after the period of time specified in the '''Pay Carryover after (Months)''' box, the remainder of the carryover amount will be paid to the employee. [anchor|#_17f4c4cf-bab0-4dea-bda5-0c2f0840148a][anchor|#_9ccc2048-597d-4725-8bbd-d9cbb24f8167][image:ReleaseNotes/Images/RN_2020_R2_Payroll_PTO_Banks_PTO_Banks_Form3.png|popup|The new box on the General Settings tab|450px]
==Changes to the Employee Payroll Settings Form==
On the '''Paid Time Off''' tab of the [HelpRoot_FormReference\PR_20_30_00|Employee Payroll Settings] ([~/?ScreenId=PR203000|PR203000]) form, the following changes have been made (see the following screenshot):[anchor|#_d91962cc-1153-44c4-a448-edfec7fd4b73]
*The '''From''' and '''To''' boxes have been removed.
*The '''Accrual Rate %''', '''Hours Available in Bank''', and '''Hours Used from Bank''' columns have been renamed to '''Accrual %''', '''Hours Accrued''', and '''Hours Used''', respectively.
*The '''Start Date''' and '''Hours Available''' columns have been added. 
*:In the '''Start Date''' column, a user can specify a start date for each PTO bank linked to the employee.
*:The '''Hours Available''' column displays the number of hours the employee can actually take. If the '''Can Only Disburse from Carryover''' check box is selected for the PTO bank on the [HelpRoot_FormReference\PR_20_40_00|PTO Banks] form, only the remainder of the carryover amount will be displayed in this column, and for a PTO bank with the '''Can Only Disburse from Carryover''' check box cleared, the difference between the accrued and used hours will be displayed.
[anchor|#_2a5780f7-8660-46da-9422-d6a4a826b2ff][anchor|#_a04b3351-9fb0-4157-8256-2b2dc15d3037][image:ReleaseNotes/Images/RN_2020_R2_Payroll_PTO_Banks_Employee_Payroll_Settings_Form.png|popup|The Paid Time Off tab of the Employee Payroll Settings form|450px]
==Changes to the Pay Checks and Adjustments Form==
On the '''Paid Time Off''' tab of the [HelpRoot_FormReference\PR_30_20_00|Pay Checks and Adjustments] ([~/?ScreenId=PR302000|PR302000]) form, the following changes have been made, as shown in the screenshot below:[anchor|#_e8524dfb-07c6-4d1a-8f47-a9410986885a]
*The '''Pay Carryover if Applicable''' check box has been added. If the check box is selected, which is its default state, after the overtime calculation, an earning line will be added with the disbursing code from the bank to pay the remaining carryover hours from the previous year. If a user clears the check box and if the carryover has already been paid on that paycheck, the earning line will disappear from the paycheck and appear again in the next paycheck.
*The '''Total Accrual Hours''' and '''Total Disbursement Hours''' columns have been added.
*:The '''Total Accrual Hours''' column displays the total of '''Accrual Hours''', '''Front Loading Hours''', and '''Carryover Hours'''.
*:The '''Total Disbursement Hours''' column displays the total of '''Disbursement Hours''' and '''Paid Carryover Hours'''.
*The '''Accrual Hours''', '''Front Loading Hours''', '''Carryover Hours''', '''Disbursement Hours''', and '''Paid Carryover Hours''' columns have been added. By default, these columns are displayed for documents of the ''Adjustment'' type and hidden for documents of any other type.
[anchor|#_1ba659b1-2c83-4da2-b6e8-e557167f5b2c][anchor|#_7630ef7a-0aa4-4604-a987-164e4f6b52d8][image:ReleaseNotes/Images/RN_2020_R2_Payroll_PTO_Banks_Paychecks_Adjustments_Form1.png|popup|The Paid Time Off tab of the Pay Checks and Adjustments form|450px]]]></column>
			<column name="PlainText"><![CDATA[Payroll: Improvements to PTO Banks In  Acumatica ERP 2020 R2, the capability of working with disbursement and carryover in PTO banks has been         improved. Now users can decide whether they want to allow negative balances in paychecks,         choose how they want to use carryover hours, and specify the start date individually for         each PTO bank used by an employee in the employee payroll settings. Changes to the PTO Banks Form  In the Summary area of the   ([~/?ScreenId=PR204000|PR204000]) PTO Banks (PR204000) form,         the following check boxes have been added, as shown in the screenshot below: Allow Negative Balance : If this check box is cleared and a           paycheck is being created for an employee by using the disbursing earning type that is           linked to the PTO bank, the system will display an error message if the disbursing amount           is greater than the amount associated with the sum of the available and accrued hours. If           the check box is selected, the system will not put restrictions on the disbursing amount.  Can Only Disburse from Carryover : If this check box is selected,           the user will be able to use only the carryover hours from the previous year. If the check           box is cleared, the user will not be restricted to use only the carryover hours. The  Allow Negative Balance  and  Can Only Disburse from           Carryover  check boxes cannot be both selected at the same time. New check boxes on the PTO Banks form On the  General Settings  tab of the form, a new option,  Paid After           a Period of Time , has been added to the drop-down list in the  Carryover           Type  box, as shown in the following screenshot.  The drop-down list in the Carryover Type box If this option is selected, the  Pay Carryover After (Months)  box         becomes available on the tab, as shown in the following screenshot. All the hours not taken         from a year will be carried over to the next year, and after the period of time specified in         the  Pay Carryover after (Months)  box, the remainder of the carryover         amount will be paid to the employee.  The new box on the General Settings tab Changes to the Employee Payroll Settings Form On the  Paid Time Off  tab of the   ([~/?ScreenId=PR203000|PR203000]) Employee Payroll Settings (PR203000) form, the following changes have been         made (see the following screenshot): The  From  and  To  boxes have been           removed. The  Accrual Rate % ,  Hours Available in             Bank , and  Hours Used from Bank  columns have been           renamed to  Accrual % ,  Hours Accrued , and              Hours Used , respectively. The  Start Date  and  Hours Available  columns           have been added.  In the  Start Date  column, a user can specify a             start date for each PTO bank linked to the employee. The  Hours               Available  column displays the number of hours the employee can actually             take. If the  Can Only Disburse from Carryover  check box is             selected for the PTO bank on the   ([~/?ScreenId=PR204000|PR204000]) PTO Banks form, only             the remainder of the carryover amount will be displayed in this column, and for a PTO             bank with the  Can Only Disburse from Carryover  check box cleared,             the difference between the accrued and used hours will be displayed. The Paid Time Off tab of the Employee Payroll Settings form Changes to the Pay Checks and Adjustments Form On the  Paid Time Off  tab of the   ([~/?ScreenId=PR302000|PR302000]) Pay Checks and Adjustments (PR302000) form, the following changes have been         made, as shown in the screenshot below: The  Pay Carryover if Applicable  check box has been added. If the           check box is selected, which is its default state, after the overtime calculation, an           earning line will be added with the disbursing code from the bank to pay the remaining           carryover hours from the previous year. If a user clears the check box and if the           carryover has already been paid on that paycheck, the earning line will disappear from the           paycheck and appear again in the next paycheck. The  Total Accrual Hours  and  Total Disbursement             Hours  columns have been added. The  Total Accrual               Hours  column displays the total of  Accrual Hours ,                Front Loading Hours , and  Carryover             Hours . The  Total Disbursement Hours  column             displays the total of  Disbursement Hours  and  Paid               Carryover Hours . The  Accrual Hours ,  Front Loading Hours ,              Carryover Hours ,  Disbursement Hours , and              Paid Carryover Hours  columns have been added. By default, these           columns are displayed for documents of the  Adjustment  type and hidden for documents           of any other type. The Paid Time Off tab of the Pay Checks and Adjustments form ]]></column>
		</row>
		<row PageID="ba617b6a-ff73-4d96-9481-a4b7c510d46d" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c4db7a49-8fe4-27f1-df70-5038e40eaf5f" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, built-in user roles for the payroll functional area have been introduced. A system administrator can use these predefined roles to manage user access to the payroll functionality without spending extra time and effort.
==New Predefined User Roles==
 Acumatica ERP 2020 R2 provides the following predefined user roles for the payroll functional area (shown in the following screenshot):[anchor|#_c1e447c9-15a3-4afe-aff3-63444697cc0e]
*''PR Admin'': A user with this role has full access to payroll functions and settings, and read-only access to banking, payables, projects, finance, and configuration settings.
*''PR Clerk'': A user with this role has limited access to payroll functions, such as data entry and internal reporting, read-only access to payroll settings, and read-only access to banking, payables, projects, finance, and configuration settings.
*''PR Manager'': A user with this role has full access to payroll functions, read-only access to payroll settings, and read-only access to banking, payables, projects, finance, and configuration settings.
*''PR Viewer'': A user with this role has read-only access to payroll functions.
[anchor|#_408b67ad-6bff-4bf0-ae0d-e58409f80517][anchor|#_b411cfcc-3a8b-47d6-8e01-52754c0cf958][image:ReleaseNotes/Images/RN_2020_R2_Payroll_Predefined_User_Roles.png|popup|New predefined user roles for payroll|450px]
For each role, a set of access rights has been defined. A system administrator can use these predefined roles without changes or modify the access rights to better meet the organization&rsquo;s needs.
==Updated Predefined User Roles==
The ''Internal User'' and ''Internal Employee'' user roles have been updated with read-only access to payroll inquiries, such as personal pay stubs.]]></column>
			<column name="PlainText"><![CDATA[Payroll: Predefined User Roles In  Acumatica ERP 2020 R2, built-in user roles for the payroll functional area have been introduced. A system         administrator can use these predefined roles to manage user access to the payroll         functionality without spending extra time and effort. New Predefined User Roles  Acumatica ERP 2020 R2 provides the following predefined user roles for the payroll functional area (shown in         the following screenshot): PR Admin : A user with this role has full access to payroll functions and           settings, and read-only access to banking, payables, projects, finance, and configuration           settings. PR Clerk : A user with this role has limited access to payroll functions, such as           data entry and internal reporting, read-only access to payroll settings, and read-only           access to banking, payables, projects, finance, and configuration settings. PR Manager : A user with this role has full access to payroll functions, read-only           access to payroll settings, and read-only access to banking, payables, projects, finance,           and configuration settings. PR Viewer : A user with this role has read-only access to payroll functions. New predefined user roles for payroll For each role, a set of access rights has been defined. A system administrator can use         these predefined roles without changes or modify the access rights to better meet the         organization's needs. Updated Predefined User Roles The  Internal User  and  Internal Employee  user roles have been updated with         read-only access to payroll inquiries, such as personal pay stubs. ]]></column>
		</row>
		<row PageID="195edf72-f429-402c-a639-82b82dbfb93f" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="852a571d-4b39-dbd5-df6b-fd8343b04605" RecordSourceID="22377">
			<column name="Content"><![CDATA[
With previous versions of Acumatica ERP, if users received emails with attached invoices from vendors, they had to manually enter AP bills based on those invoices into the system, which had two major drawbacks: It was a time-consuming operation, and errors could be made during the manual entry of documents.{br}

Starting in Acumatica ERP 2020 R2, the system can be configured to automatically recognize invoices attached to incoming emails so that users can create AP bills from those recognized documents with a single click. For details see, [HelpRoot_Financials\Finance_Recognizing_AP_Documents_From_PDF_Mapref|Recognizing AP Documents From PDF].
==New Document Recognition Service Feature==
A new feature, ''Document Recognition Service'', has been added to the ''Third Party Integrations'' group of features on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, as shown in the following screenshot.[anchor|#_596ac31d-f3d8-45e6-9f3d-a9e58b2c9c48][anchor|#_ca3533a4-1c3d-45b0-a07c-edb9ece15540][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_Switch.png|popup|Third Party Integrations group of features|200px]
With this feature enabled, the new ''Incoming Documents (AP3011PL)'' and [HelpRoot_FormReference\AP_30_11_00|Incoming Documents] ([~/?ScreenId=AP301100|AP301100]) forms, which are described in the following section, can be used. Also, the following elements become available in the system:[anchor|#_034b5ed1-789e-48de-9bd0-54730d482c9a]
*The '''Submit to Incoming Documents''' check box on the '''Incoming Mail Processing''' tab of the [HelpRoot_FormReference\SM_20_40_02|System Email Accounts] ([~/?ScreenId=SM204002|SM204002]) form (shown in the first screenshot below)
*The '''Create AP Document''' button in the Acumatica add-in for Outlook (see the second screenshot below) that is available only for emails with PDF attachments

Also, this feature enables the system to connect to the external document recognition service by using the built-in connection key.[anchor|#_6c9e6b82-9a15-495d-84fe-f6be94b548ef][anchor|#_24ef17de-a5c3-4e84-9ce5-ffc9f3b53ede][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_IncomingMail.png|popup|Incoming mail processing settings|450px][anchor|#_901cc236-9336-4bd7-85c6-69427f89c02f][anchor|#_25bd6ac9-5bef-4eff-8b13-14fcc3559e74][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_Outlook.png|popup| Acumatica add-in for Outlook|200px]((({S:Warn}The ''Document Recognition Service'' feature is not available in trial mode and can be enabled only if it is included in the license that is applied to the Acumatica ERP instance.
)))
==New Forms for Incoming Documents ==
The following new forms have been added to the system:[anchor|#_80d339ec-65f5-4991-a179-7d4ba8552f4b]
*''Incoming Documents (AP3011PL)'': This form (shown in the first screenshot below) contains a list of records created as a result of document recognition. By default, this form is included in the '''Transactions''' category of the '''Payables''' workspace, as shown in the second screenshot below.
*''[HelpRoot_FormReference\AP_30_11_00|Incoming Documents] ([~/?ScreenId=AP301100|AP301100])'': This form (see the third screenshot below) can be used for submitting a document for recognition, reviewing a recognized document, and converting a validated document to an AP document. The Summary area of the form includes the minimum set of settings that are required for creating an AP document. The Preview area shows a preview of the document uploaded to the system for recognition. The Details area lists the detail lines of the recognized document (if any). 
[anchor|#_73210d64-a57b-4bba-abb1-b114e5c05daf][anchor|#_9fcc2704-d60a-40f4-aa62-138916ec6034][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_NewForm_2.png|popup|New Incoming Documents (AP3011PL) form|450px][anchor|#_571b1485-ef4f-474e-8daf-1561397ce449][anchor|#_e89d2fcf-f30d-48f2-9bb2-677bc9e01f71][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_Workspace.png|popup|Payables workspace|450px][anchor|#_9caa3d7b-f206-4108-b600-30edef8c8102][anchor|#_0172e4bc-caad-4862-9d67-ceaf4b3c30ef][image:ReleaseNotes/Images/RN_2020_R2_Platform_AP_Document_Recognition_NewForm.png|popup|New Incoming Documents (AP301100) form|450px]
==Ways of Submitting Incoming Documents for Recognition==
After the ''Document Recognition Service'' feature has been enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, a user can submit an invoice for recognition as a PDF file in any of the following ways:[anchor|#_0113701d-c2df-4aa7-8de7-9042e3b85e2e]
*The user can download a PDF attachment, drag the downloaded PDF file into the Preview area of the [HelpRoot_FormReference\AP_30_11_00|Incoming Documents] ([~/?ScreenId=AP301100|AP301100]) form, and then click '''Recognize''' on the form toolbar.
*:Initially, the uploaded document has the ''Pending Recognition'' status displayed in the Summary area of the form. If the document is successfully recognized, the system fills in the settings in the Summary area with the recognized values and changes the status of the document to ''Recognized''.
*The user can open the Acumatica add-in for Outlook for an email that contains a PDF attachment and click '''Create AP Document''' in the add-in.
*:After the document has been recognized, the '''View Document''' button appears in the add-in for the processed email. By clicking this button, the user can open the recognized document on the [HelpRoot_FormReference\AP_30_11_00|Incoming Documents] ([~/?ScreenId=AP301100|AP301100]) form.
*A system email account can be created on the [HelpRoot_FormReference\SM_20_40_02|System Email Accounts] ([~/?ScreenId=SM204002|SM204002]) form for the mailbox that receives emails with invoices, with incoming mail processing activated and the '''Submit to Incoming Documents''' check box selected on the '''Incoming Mail Processing''' tab.
*:In this case, all incoming emails in the mailbox are to be processed and any PDF attachment that is found is automatically submitted for recognition.
*:((({S:Hint}We recommend that a dedicated mailbox (or a dedicated root folder in a mailbox) is used for storing emails with invoices that need to be automatically processed and recognized.
)))

Recognized documents should be validated by users before they can be converted to AP bills.
==Validation of Recognized Documents==
A recognized document (that is, a document with the ''Recognized'' status) should be validated on the [HelpRoot_FormReference\AP_30_11_00|Incoming Documents] ([~/?ScreenId=AP301100|AP301100]) form. {br}

If any setting in the Summary area or any document line in the Details area has not been properly recognized by the document recognition service, the user can move the focus to the box that needs to be updated and then click the values in the Preview area so that the system maps those values to this box.{br}

When all necessary settings have been specified, the user can click '''Save and Continue''' on the form toolbar to convert the recognized document into an AP document of specified type. As a result, the [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form opens, with the settings filled with the values from the recognized document. The original PDF file with the document is added to the record as a file attachment.]]></column>
			<column name="PlainText"><![CDATA[Platform: AP Document Recognition With previous versions of  Acumatica ERP, if users received emails with attached invoices from vendors, they had to manually enter         AP bills based on those invoices into the system, which had two major drawbacks: It was a         time-consuming operation, and errors could be made during the manual entry of documents. Starting in  Acumatica ERP 2020 R2, the system can be configured to automatically recognize invoices attached to incoming         emails so that users can create AP bills from those recognized documents with a single         click. For details see,  Recognizing AP Documents From PDF. New Document Recognition Service Feature A new feature,  Document Recognition Service , has been added to the  Third Party           Integrations  group of features on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features         (CS100000) form, as shown in the following screenshot. Third Party Integrations group of features With this feature enabled, the new  Incoming Documents (AP3011PL)  and   ([~/?ScreenId=AP301100|AP301100]) Incoming Documents (AP301100) forms, which are described in the         following section, can be used. Also, the following elements become available in the         system: The  Submit to Incoming Documents  check box on the              Incoming Mail Processing  tab of the   ([~/?ScreenId=SM204002|SM204002]) System Email Accounts (SM204002) form (shown in the first screenshot           below) The  Create AP Document  button in the  Acumatica add-in for Outlook (see the second screenshot below) that is available only for emails           with PDF attachments Also, this feature enables the system to connect to the external document recognition         service by using the built-in connection key. Incoming mail processing settings  Acumatica add-in for Outlook The  Document Recognition Service  feature is not available in         trial mode and can be enabled only if it is included in the license that is applied to the            Acumatica ERP instance. New Forms for Incoming Documents  The following new forms have been added to the system: Incoming Documents (AP3011PL) : This form (shown in the first screenshot below)           contains a list of records created as a result of document recognition. By default, this           form is included in the  Transactions  category of the              Payables  workspace, as shown in the second screenshot below.  ([~/?ScreenId=AP301100|AP301100]) Incoming Documents (AP301100) : This form (see the third           screenshot below) can be used for submitting a document for recognition, reviewing a           recognized document, and converting a validated document to an AP document. The Summary           area of the form includes the minimum set of settings that are required for creating an AP           document. The Preview area shows a preview of the document uploaded to the system for           recognition. The Details area lists the detail lines of the recognized document (if any).            New Incoming Documents (AP3011PL) form Payables workspace New Incoming Documents (AP301100) form Ways of Submitting Incoming Documents for Recognition After the  Document Recognition Service  feature has been enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, a user can submit an invoice for recognition         as a PDF file in any of the following ways: The user can download a PDF attachment, drag the downloaded PDF file into the Preview           area of the   ([~/?ScreenId=AP301100|AP301100]) Incoming Documents (AP301100) form, and then click              Recognize  on the form toolbar. Initially, the uploaded document             has the  Pending Recognition  status displayed in the Summary area of the form. If             the document is successfully recognized, the system fills in the settings in the Summary             area with the recognized values and changes the status of the document to                Recognized . The user can open the  Acumatica add-in for Outlook for an email that contains a PDF attachment and click              Create AP Document  in the add-in. After the document has been             recognized, the  View Document  button appears in the add-in for             the processed email. By clicking this button, the user can open the recognized document             on the   ([~/?ScreenId=AP301100|AP301100]) Incoming Documents (AP301100) form. A system email account can be created on the   ([~/?ScreenId=SM204002|SM204002]) System Email Accounts (SM204002) form for the mailbox that receives emails with invoices, with incoming mail           processing activated and the  Submit to Incoming Documents  check box           selected on the  Incoming Mail Processing  tab. In this case, all             incoming emails in the mailbox are to be processed and any PDF attachment that is found             is automatically submitted for recognition. We recommend that a             dedicated mailbox (or a dedicated root folder in a mailbox) is used for storing emails             with invoices that need to be automatically processed and recognized. Recognized documents should be validated by users before they can be converted to AP         bills. Validation of Recognized Documents A recognized document (that is, a document with the  Recognized  status) should be         validated on the   ([~/?ScreenId=AP301100|AP301100]) Incoming Documents (AP301100) form.  If any setting in the Summary area or any document line in the Details area has not been         properly recognized by the document recognition service, the user can move the focus to the         box that needs to be updated and then click the values in the Preview area so that the         system maps those values to this box. When all necessary settings have been specified, the user can click  Save and           Continue  on the form toolbar to convert the recognized document into an AP         document of specified type. As a result, the   ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments         (AP301000) form opens, with the settings filled with the values from the recognized         document. The original PDF file with the document is added to the record as a file         attachment. ]]></column>
		</row>
		<row PageID="59d32d60-ccc5-471e-bb6a-b03ef60a3318" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2920ceb3-56bd-edd5-6859-8acf7c66f6da" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, business events have replaced notifications about changes on data entry forms. A user can view and create events in the '''Business Events''' dialog box for the data entry forms for which change notification functionality was previously available, for example, [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]), [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]), and [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]). The created business events act as notifications for the events on the forms. For details, see [HelpRoot_Administration\SA_Using_Business_Events_GeneralInfo|Business Events: General Information].{br}{TOC}
==Business Events==
To create business events for a data entry form, the user opens the form and clicks '''Business Events''' on the form title bar. This opens the '''Business Events''' dialog box (with the list of events configured for the form), which is shown in the following screenshot.[anchor|#_5b383975-49cc-4b44-8062-05ab25d78035][anchor|#_c5fca5ab-4489-4559-95f3-3bffeadd6622][image:ReleaseNotes/Images/RN_2020_R2_Entry_Screens_BusinessEventsWindow.png|popup|Business Events dialog box|250px]
In the '''Business Events''' dialog box, the user clicks '''Create Business Event''', enters the name for the event in the dialog box that opens, and clicks '''OK'''. The system closes the dialog box and opens the [HelpRoot_FormReference\SM_30_20_50|Business Events] ([~/?ScreenId=SM302050|SM302050]) form, with the data entry form selected in the '''Screen Name''' box, so that the user can enter the settings of the business event, as shown in the following screenshot[anchor|#_b20a37ac-3b5f-4ccf-9bc8-bb6c6ef70e4d][anchor|#_de5d5d2d-b8ca-4dc2-b486-043f48c1f0a1][image:ReleaseNotes/Images/RN_2020_R2_Entry_Screens_BusinessEventsForm.png|popup|The Business Events form|450px]
On the '''Trigger Conditions''' tab of the form (see the following screenshot), the user specifies the conditions that trigger the event.[anchor|#_043733e5-be6e-4dac-a41f-44587b21c2e4][anchor|#_1dddce38-47fe-40ea-b2d0-6f7360d0e4ba][image:ReleaseNotes/Images/RN_2020_R2_Entry_Screens_BusinessEventsTriggerConditions.png|Trigger Conditions tab of the Business Events form|450px]
On the '''Subscribers''' tab (see the following screenshot), the user adds existing or creates new subscribers to the event (using the '''Create Subscriber''' action on the table toolbar). A user can also click the identifier of any notification on this tab to view the settings of the notification on this form.[anchor|#_3d110c22-3f58-46cc-a921-9b298dcee589][anchor|#_2ba1ff32-1d8f-479a-827f-516457149c15][image:ReleaseNotes/Images/RN_2020_R2_Entry_Screens_BusinessEventsSubscribers.png|popup|Subscribers tab of the Business Events form|450px]
The following types of subscribers are supported.[anchor|#_e24f6f46-0346-4880-8a8e-d4e19bf94862]
*''Email Notification''
* ''Mobile Push Notifications''
* ''Mobile SMS Notifications''

For a notification templates used as subscriber of the ''Email Notification'' type, on the '''Attached Reports''' tab of the [HelpRoot_FormReference\SM_20_40_03|Notification Templates] form, the user can attached reports available under the '''Reports''' action on the form toolbar of the data-entry from specified in the '''Screen Name''' of the [HelpRoot_FormReference\SM_30_20_50|Business Events] form.{br}

For details, see [HelpRoot_Administration\SA_Using_Business_Events_Emails_Concept|Business Events: Email Notifications], [HelpRoot_Administration\SA_Using_Business_Events_Push_Concept|Business Events: Push Notifications], and [HelpRoot_Administration\SA_Using_Business_Events_SMS_Concept|Business Events: SMS Notifications].
==Business Events and Automatic Notifications==
In previous versions of Acumatica ERP, users may have created automatic notifications by using the [HelpRoot_FormReference\SM_20_50_40|Automation Notifications] ([~/?ScreenId=SM205040|SM205040]) form. These notifications are automatically converted to business events during the upgrade to 2020 R2. {br}

However, if a notification has conditions with specific values specified on the '''Conditions''' tab of the [HelpRoot_FormReference\SM_20_50_40|Automation Notifications] form (for example, a specific customer ID), during the upgrade, these conditions are not converted to conditions of the corresponding business event. For these business events, the user should manually add the conditions on the '''Trigger Conditions''' tab of the [HelpRoot_FormReference\SM_30_20_50|Business Events] ([~/?ScreenId=SM302050|SM302050]) form after the upgrade.((({S:Hint}If the user encounters problems after the upgrade to the new version, they can revert to use of automatic notifications by publishing a customization project. (For details, contact Acumatica support team.)
)))]]></column>
			<column name="PlainText"><![CDATA[Platform: Change Notification Replacement In  Acumatica ERP 2020 R2, business events have replaced notifications about changes on data entry forms. A user         can view and create events in the  Business Events  dialog box for the         data entry forms for which change notification functionality was previously available, for         example,   ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000),   ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000), and   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000). The created business events act as         notifications for the events on the forms. For details, see  Business Events: General Information. Business Events To create business events for a data entry form, the user opens the form and clicks            Business Events  on the form title bar. This opens the            Business Events  dialog box (with the list of events configured for         the form), which is shown in the following screenshot. Business Events dialog box In the  Business Events  dialog box, the user clicks  Create           Business Event , enters the name for the event in the dialog box that opens,         and clicks  OK . The system closes the dialog box and opens the   ([~/?ScreenId=SM302050|SM302050]) Business Events (SM302050) form, with the data entry form selected         in the  Screen Name  box, so that the user can enter the settings of         the business event, as shown in the following screenshot The Business Events form On the  Trigger Conditions  tab of the form (see the following         screenshot), the user specifies the conditions that trigger the event. Trigger Conditions tab of the Business Events form On the  Subscribers  tab (see the following screenshot), the user adds         existing or creates new subscribers to the event (using the  Create           Subscriber  action on the table toolbar). A user can also click the identifier         of any notification on this tab to view the settings of the notification on this form. Subscribers tab of the Business Events form The following types of subscribers are supported. Email Notification Mobile Push Notifications Mobile SMS Notifications For a notification templates used as subscriber of the  Email Notification  type, on         the  Attached Reports  tab of the   ([~/?ScreenId=SM204003|SM204003]) Notification Templates form, the user can attached reports available under         the  Reports  action on the form toolbar of the data-entry from         specified in the  Screen Name  of the   ([~/?ScreenId=SM302050|SM302050]) Business Events form. For details, see  Business Events: Email Notifications,            Business Events: Push Notifications, and  Business Events: SMS Notifications. Business Events and Automatic Notifications In previous versions of  Acumatica ERP, users may have created automatic notifications  by using the   ([~/?ScreenId=SM205040|SM205040]) Automation Notifications (SM205040) form. These notifications         are automatically converted to business events during the upgrade to  2020 R2.  However, if a notification has conditions with specific values specified on the            Conditions  tab of the   ([~/?ScreenId=SM205040|SM205040]) Automation Notifications form (for example, a specific customer ID), during the upgrade, these         conditions are not converted to conditions of the corresponding business event. For these         business events, the user should manually add the conditions on the  Trigger           Conditions  tab of the   ([~/?ScreenId=SM302050|SM302050]) Business Events (SM302050)         form after the upgrade. If the user encounters problems after the upgrade to the new version, they         can revert to use of automatic notifications by publishing a customization project. (For         details, contact  Acumatica support team.) ]]></column>
		</row>
		<row PageID="e7447d3d-2aaa-44a8-a3b0-688a11bba0ba" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="66245184-66f2-43ac-3f17-e86525c72ce9" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the following improvements have been implemented for import scenarios:[anchor|#_26fffaf2-441c-4094-aeba-81073aa999f8]
*The performance and internal logic of import scenarios have been revised and improved.
*On the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] ([~/?ScreenId=SM206036|SM206036]) form, if an error occurs when a data field is being imported, an error icon (which the user can hover over to view the detailed error message) is now shown in the cell corresponding to the data field. An example of such an error is shown in the following screenshot.[anchor|#_8c731fa8-9234-44ab-a03f-0da4c560129b][image:ReleaseNotes/Images/RN_2020_R2_Platform_ImportError.png|popup|The error on the Import by Scenario form|450px]
*Users can now use any date format within a formula. During import on the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] form, the date used as part of a formula is now analyzed according to the locale specified in the '''Format Locale''' box of the [HelpRoot_FormReference\SM_20_60_25|Import Scenarios] ([~/?ScreenId=SM206025|SM206025]) form.
*It is now possible to add a substitution for imported data on the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] form. For details, see [[#_1efa07d8-b37f-4c2c-bbb4-c27001775322|Adding a Substitution on the Import by Scenario Form].
*A user can now select a database table and its field for a substitution list. By specifying the table and data field, the user can select a value to be substituted from a list of possible field values. The updated [HelpRoot_FormReference\SM_20_60_26|Substitution Lists] ([~/?ScreenId=SM206026|SM206026]) form is shown in the following screenshot.[anchor|#_cc5e2434-0888-4ea2-aec6-d6792d63afc3][image:ReleaseNotes/Images/RN_2020_R2_Platform_Import_SubstitutionListTable.png|popup|The Substitution Lists form|300px]
{br}{TOC}[anchor|#_1efa07d8-b37f-4c2c-bbb4-c27001775322]
==Adding a Substitution on the Import by Scenario Form==
Suppose that a substitution list was configured for a field, but no substitution value was found for the current field value. Then on the [HelpRoot_FormReference\SM_20_60_36|Import by Scenario] ([~/?ScreenId=SM206036|SM206036]) form, a user can click '''Add Substitution''' on the table toolbar of the '''Prepared Data''' tab. In the '''Add Substitution''' dialog box, which opens, the user can specify a substitution value for the current field value, as shown in the following screenshot.[anchor|#_e52fc248-6f26-4ed6-a638-d8bf8780d891][anchor|#_ddeb288c-26bb-4f8f-994f-64286693ab4e][image:ReleaseNotes/Images/RN_2020_R2_Platform_Import_AddSubstitution.png|popup|The Add Substitution dialog box|450px]
After the user clicks '''Save''' and the dialog box is closed, the user can click '''Import''' on the form toolbar to apply the added substitution.{br}

The '''Add Substitution''' button is also available in the '''Prepared Data''' dialog box on the [HelpRoot_FormReference\SM_20_60_35|Process Import Scenarios] ([~/?ScreenId=SM206035|SM206035]) form. ]]></column>
			<column name="PlainText"><![CDATA[Platform: Improvements in Import Scenarios In  Acumatica ERP 2020 R2,     the following improvements have been implemented for import scenarios: The performance and internal logic of import scenarios have been revised and improved. On the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario (SM206036) form, if an error occurs when           a data field is being imported, an error icon (which the user can hover over to view the           detailed error message) is now shown in the cell corresponding to the data field. An           example of such an error is shown in the following screenshot. The error on the Import by Scenario form Users can now use any date format within a formula. During import on the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario form, the date used as part of a formula is now           analyzed according to the locale specified in the  Format Locale  box           of the   ([~/?ScreenId=SM206025|SM206025]) Import Scenarios (SM206025) form. It is now possible to add a substitution for imported data on the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario form. For details, see  Adding a Substitution on the Import by Scenario Form Adding a Substitution on the Import by Scenario Form. A user can now select a database table and its field for a substitution list. By           specifying the table and data field, the user can select a value to be substituted from a           list of possible field values. The updated   ([~/?ScreenId=SM206026|SM206026]) Substitution Lists           (SM206026) form is shown in the following screenshot. The Substitution Lists form Adding a Substitution on the Import by Scenario Form Suppose that a substitution list was configured for a field, but no substitution value was         found for the current field value. Then on the   ([~/?ScreenId=SM206036|SM206036]) Import by Scenario         (SM206036) form, a user can click  Add Substitution  on the table         toolbar of the  Prepared Data  tab. In the  Add           Substitution  dialog box, which opens, the user can specify a substitution         value for the current field value, as shown in the following screenshot. The Add Substitution dialog box After the user clicks  Save  and the dialog box is closed, the user         can click  Import  on the form toolbar to apply the added         substitution. The  Add Substitution  button is also available in the          Prepared Data  dialog box on the   ([~/?ScreenId=SM206035|SM206035]) Process Import Scenarios (SM206035)         form.  ]]></column>
		</row>
		<row PageID="ce1875eb-58b1-400c-9ae9-ca7bfcc37e62" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a861eb96-7e73-f40e-db99-8d7227645b34" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, several improvements have been made that affect generic inquiries and reports. These improvements are described in detail in the following sections.
==Ability to Change a Screen Identifier for a Generic Inquiry on the Generic Inquiry Form==
In response to requests from clients and partners, Acumatica ERP 2020 R2 introduces the capability to change a screen identifier for a generic inquiry on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form for both predefined generic inquiries and custom inquiries.{br}

In previous versions of Acumatica ERP, a user could change any screen ID, including that of a generic inquiry, on the [HelpRoot_FormReference\SM_20_05_20|Site Map] ([~/?ScreenId=SM200520|SM200520]) form as long as the user had access to this form. Starting in Acumatica ERP 2020 R2, a user can also change the screen ID of a generic inquiry directly on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form while designing the generic inquiry or modifying its design.{br}

In previous versions of Acumatica ERP as well as the current version, when a user creates and saves a generic inquiry on this form with the '''Make Visible on the UI''' check box selected in the Summary area, the system assigns the inquiry an automatically generated screen identifier in a format similar to that of the screen identifiers used in other forms in the system, with ''GI'' as the two-letter module code, followed by a six-digit number that is one greater than the numerical portion of the most recently assigned screen ID for a generic inquiry.{br}

To change the automatically assigned screen identifier of a generic inquiry, a user can now click the '''Change Screen ID''' button on the form toolbar of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form. In the dialog box that opens (shown in the following screenshot), the user enters the new screen ID for the selected generic inquiry. If this screen ID is not unique, the system displays an error and prompts the user to enter another screen ID.{br}

If a user changes a screen ID for a generic inquiry, the system changes this screen ID in all the system objects that are related to this generic inquiry.[anchor|#_eb5f6cfe-9db1-4cb7-9831-622b5f37edb5][anchor|#_d22c3330-35d7-4072-9b07-209c60d70189][image:ReleaseNotes/Images/RN_2020_R2_Platform_ScreenID_Change.png|popup|The dialog box to change the screen ID for a generic inquiry on the Generic Inquiry form|450px]
==Ability to Configure Navigation from a Generic Inquiry to Any Form==
In previous versions of Acumatica ERP, on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form, the user creating the generic inquiry could configure navigation from the generic inquiry form to another Acumatica ERP form as long as its key field or fields, which are used to identify a particular record, appeared on the UI (that is, it could not have hidden key fields).{br}

Starting in Acumatica ERP 2020 R2, on the '''Navigation''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form, a user can configure navigation from the generic inquiry form to any Acumatica ERP form. The following screenshots provide a closer look at this navigation as follows:[anchor|#ul_ewh_syh_4mb]
*The first screenshot shows how the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form is used to configure navigation for the ''SM-AllEmails'' generic inquiry (which has the ''All Emails '' site map title) to the [HelpRoot_FormReference\CR_30_60_15|Email Activity] ([~/?ScreenId=CR306015|CR306015]) form, which has a hidden key field.
*The second screenshot shows the resulting generic inquiry form with the email icon on the side panel. When the user clicks the icon, the system opens the side panel with the [HelpRoot_FormReference\CR_30_60_15|Email Activity] form for the currently selected email in ''All Emails''. (Unless the user clicks another row, the first row of the inquiry form is selected, so that email is initially shown.) The user clicks the row with the email to be viewed, which causes the system to open the [HelpRoot_FormReference\CR_30_60_15|Email Activity] form in the side panel with the selected email displayed.
[anchor|#_539ffc75-1c4a-48ca-83a6-861e948e2f69][anchor|#_69473c24-b5d9-456c-976a-d69e5f4f48b6][image:ReleaseNotes/Images/RN_2020_R2_Platform_Navigation_to_Any_Form_Customization.png|popup|Configuration of navigation to a form with a hidden key field|450px][anchor|#_db08cdd2-0874-43af-a1a8-7c688d0723fa][anchor|#_394af819-c4ae-43aa-9f15-89c3e101f7fe][image:ReleaseNotes/Images/RN_2020_R2_Platform_Navigation_to_Any_Form_Result.png|popup|Navigation in the generic inquiry form to a form with a hidden key field|450px]
==Usage of the DateDiff and DateAdd Functions in Formulas in Generic Inquiries and Reports==
In Acumatica ERP 2020 R2, new abbreviations for arguments have been added for the {{DateDiff}} and {{DateAdd}} functions. Functions are used in formulas that a user creates by using the [https://msk-app-001.int.adds.acumatica.com/tw-2020R1/(W(33))/Wiki/ShowWiki|Formula Editor Dialog Box], including the formulas used in generic inquiries and analytical reports.{br}

The {{DateDiff(interval, date1, date2)}} function returns the number of time intervals ({{interval}}) between the specified {{date1}} and {{date2}}. The returned number is an integer that can be positive or negative.{br}

The {{DateAdd(date, interval, number)}} function returns a new date, which the system calculates by adding the specified number ({{number}}) of time intervals ({{interval}}) to the date ({{date}}).{br}

The {{interval}} argument specifies the type of time interval. In addition to the set of options that was defined in previous versions of Acumatica ERP, as specified in [HelpRoot_ReportingTools\Using_Functions_in_Expressions|Using Functions in Expressions], the {{interval}} argument can be one of the following:[anchor|#_a53a7b3b-33bf-48bc-9dd0-8c978242bafe]
*{{'y'}}, {{'yy'}}, {{'yyyy'}}, or {{'year'}} for time intervals expressed in years
*{{'m'}}, {{'mm'}}, or {{'month'}} for time intervals expressed in months
*{{'d'}}, {{'dd'}}, or {{'day'}} for time intervals expressed in days
*{{'h'}}, {{'hh'}}, or {{'hour'}} for time intervals expressed in hours
*{{'n'}}, {{'mi'}}, or {{'minute'}} for time intervals expressed in minutes
*{{'s'}}, {{'ss'}}, or {{'second'}} for time intervals expressed in seconds
*{{'w'}}, {{'ww'}}, {{'wk'}}, or {{'week'}} for time intervals expressed in weeks
*{{'q'}}, {{'qq'}}, or {{'quarter'}} for time intervals expressed in quarters

If a user specifies incorrect arguments the system displays an error.
==Ability to Restrict Customer Visibility for Customers to a Company or a Branch in Generic Inquiries==
In Acumatica ERP 2020 R2, the capability to restrict access to customer accounts to only specific branches and companies has been added. This capability exists for the predefined generic inquiries that use the ''Customer'' or ''BAccount'' data access class, and the capability can be implemented in custom generic inquiries that use either or both of these data access classes.{br}

If multiple companies or branches are configured within the same tenant, it is possible to limit access to particular customers’ data to only employees of a particular company or a branch. To implement this capability, the following changes have been made:[anchor|#_97db99b6-57b2-4148-9bf5-ba3c05b23dfe]
*On the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, in the '''Financial Advanced''' section, the '''Customer Visibility Restriction''' check box, which an administrator selects to enable the corresponding feature, has been added. By default, the check box is cleared, indicating that this feature is disabled.
*On the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form, in all predefined generic inquiries that have the ''Customer'' or ''BAccount'' data access class listed on the '''Tables''' tab, the following changes have been made:
**On the '''Tables''' tab, ''PX.Objects.CX.FeaturesSet'' has been added to the list of tables. The following screenshot shows this change on this tab.[anchor|#_d62b561c-3543-43ff-9335-045ffdab6b4e][image:ReleaseNotes/Images/RN_2020_R2_Platform_Visibility_Restriction_Tables.png|popup|Changes on the Tables tab of the Generic Inquiry form|450px]
**On the '''Relations''' tab, the ''PX.Objects.AR.Customer'' table and the ''PX.Objects.CX.FeaturesSet'' table have been joined. The following screenshot shows the changes on this tab.[anchor|#_0188d605-f038-4835-95e1-3acfd6a7abb6][image:ReleaseNotes/Images/RN_2020_R2_Platform_Visibility_Restriction_Relations.png|popup|Changes on the Relations tab of the Generic Inquiry form|450px]
**On the '''Conditions''' tab, the conditions for the ''Customer.COrgBAccountID'' field and the ''Features.VisibilityRestriction'' field have been added. The following screenshot shows the changes on this tab.[anchor|#_a0823734-c4e4-4fbd-be6a-f0cec0eca8f3][image:ReleaseNotes/Images/RN_2020_R2_Platform_Visibility_Restriction_Conditions.png|popup|Changes on the Conditions tab of the Generic Inquiry form|450px]
**:The value of the ''Features.VisibilityRestriction'' field is based on whether the ''Customer Visibility Restriction'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form. If this feature is disabled, then the value in the ''Features.VisibilityRestriction'' field is ''0'', which means that visibility restrictions are not applicable, even though the changes (described above) on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form have been made.

If a user developing the generic inquiry wants to restrict access to customer data related only to the specific branch or the specific company to which the employee using the generic inquiry has access, the user should make the needed changes in all the custom generic inquiries in which the ''Customer'' data access class or the ''BAccount'' data access class is used. The changes to be made are similar to the changes that have been made to the ''AR-Customers'' generic inquiry (which has the ''Customers'' site map title); these changes are shown in the screenshots above.
==Ability to Preview the Generic Inquiry Form While Designing the Inquiry ==
Starting in Acumatica ERP 2020 R2, a user can preview generic inquiry results on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form without navigating away from the form, for improved usability.{br}

In previous versions of Acumatica ERP, a user could preview inquiry results by clicking the '''View Inquiry''' button on the toolbar of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form. Starting in Acumatica ERP 2020 R2, a user can also click the eye icon on the side panel (shown in the following screenshot) to preview inquiry results.[anchor|#_89a2ae9a-af4a-4d76-91f5-97556322c68b][anchor|#_6684461e-2551-4283-a857-72eed84d83d0][image:ReleaseNotes/Images/RN_2020_R2_Platform_Improvements_in_GIs_and_Reports_Preview_Inquiry.png|Eye icon to preview the inquiry results on the side panel of the Generic Inquiry form|450px]
When a user clicks the '''View Inquiry''' button, the system displays inquiry results in a new browser tab. To return to the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form, the user needs to return to its browser tab, thus performing an additional action; also, the user cannot view the generic inquiry settings and the resulting generic inquiry form at the same time. Conversely, when a user clicks the eye icon on the side panel on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form, the system displays the resulting generic inquiry form on the panel in the same browser tab, as shown in the following screenshot. The user does not need to perform additional actions to return to the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form. The inquiry results are updated automatically when the user saves any changes made on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form.[anchor|#_4ffeb405-5e68-46dd-890d-353cc4e4c392][anchor|#_acc6d2b4-d3d1-4732-b71a-9bf3706c84fe][image:ReleaseNotes/Images/RN_2020_R2_Platform_Improvements_in_GIs_and_Reports_Preview_Inquiry_Results.png|popup|The resulting generic inquiry form on the side panel|450px]
==Automatic Suggestion of Table Joins on the Generic Inquiry Form==
In previous versions of Acumatica ERP, a user designing a generic inquiry had to manually find information about the data access classes and data fields by which the tables are linked. Then based on this information, the user had to manually configure relations between the tables—that is, to set up a join type and to set up data field links.{br}

In the '''Related Tables''' dialog box of Acumatica ERP 2020 R2, when a user specifies a pair of tables—that is, a parent table and a child table—the system automatically inserts a statement in the '''Relation''' box that represents the relation between the parent table and child table.{br}

To simplify the process of specifying table relations, the following changes have been made on the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form:[anchor|#_5b9c76ca-87a3-4825-b2c5-ae9d76c39cbe]
*On the '''Tables''' tab, the '''Description''' column has been added. The column contains the data access class description, as shown in the following screenshot.[anchor|#_f49d61b1-11c5-4ec1-980c-3ae6971d484a][image:ReleaseNotes/Images/RN_2020_R2_Platform_Improvements_in_GIs_and_Reports_Auto_Join_Descr_Column.png|popup|Description column on the Tables tab of the Generic Inquiry form|450px]
*On the '''Tables''' tab, the '''Add Related Table''' button has been added. If a user clicks this button, the system opens the '''Related Tables''' dialog box, as shown in the following screenshot.
*On the '''Relations''' tab, on the table toolbar of the '''Table Relations''' table, the '''Add Related Table''' button has been added. If a user clicks this button, the system opens the '''Related Tables''' dialog box, as shown in the following screenshot.[anchor|#_4dadbb40-0c45-43d6-a970-674b94d8dd96][image:ReleaseNotes/Images/RN_2020_R2_Platform_Improvements_in_GIs_and_Reports_Auto_Join_Related_Tables.png|popup|Related Tables dialog box to configure table relations on the Generic Inquiry form|450px]
*On the '''Relations''' tab, on the table toolbar of the '''Data Field Links for Active Relations''' table, the '''Browse for Relations''' button has been added. At any time after the relation between tables has been configured, the user can view the relation by clicking the '''Browse for Relations''' button on the table toolbar of the '''Data Field Links for Active Relation''' table on the '''Relations''' tab. In this case, the system displays the '''Related Tables''' dialog box with the boxes filled in with values, as the following screenshot demonstrates.[anchor|#_8d64de15-897a-488c-801b-428a039ebe29][image:ReleaseNotes/Images/RN_2020_R2_Platform_Improvements_in_GIs_and_Reports_Auto_Join_Related_Tables_filled.png|popup|Related Tables dialog box with the boxes filled in with values|450px]

The '''Related Tables''' dialog box can be used for the following:[anchor|#_6a8c6f3c-dc07-46ea-8044-227ca8cb04c3]
*To configure relations between a pair of tables when this dialog box is opened by a user clicking the '''Add Related Table''' button on the '''Tables''' tab or on the '''Relations''' tab.
*To view configured relations between a pair of tables when this dialog box is opened by a user clicking the '''Browse for Relations''' button on the '''Relations''' tab. But even when the '''Related Tables''' dialog box is opened by clicking the '''Browse for Relations''' button on the '''Relations''' tab, it can also be used to configure the relation between a new pair of tables.

In the '''Related Tables''' dialog box, a user should specify the following:[anchor|#_56db6ee2-5940-462f-94c6-60242f1b7c84]
*A parent table: A user selects a parent table in the list of tables and then clicks the '''Select Parent Table''' button above the list. To find the necessary parent table in the list, the user can use the search box below the list. If the user opened the '''Related Tables''' dialog box (by clicking the '''Add Related Table''' button on the table toolbar on the '''Tables''' tab) when a table was first selected on the '''Tables''' tab, then the name of this table is already selected as a value in the '''Parent Table''' box.
*A child table: A user can select a child table only after selecting a parent table. A user selects a child table in the list of tables and then clicks the '''Select Child Table''' button above the list. The list of child tables includes only the tables that can be linked to the selected parent table. As with a parent table, to find the necessary child table in the list, the user can use the search box below the list.

In the '''Related Tables''' dialog box, a user can select the '''Include Hidden Tables''' check box to include hidden tables in the list of tables to for selecting a parent or child table.{br}

When a parent table and a child table are selected, the system does the following:[anchor|#_6c86dda7-fec9-413b-8a61-ba52ffff9b91]
*Automatically assigns and displays aliases for the tables, in the '''Alias''' box next to the '''Parent Table''' box and the '''Child Table''' box.
*Displays the relation between the parent table and the child table in the '''Relation''' box. The relation is described as a part of the SQL statement. By default, the ''Inner'' join type is used.

To approve the specified configuration and close the '''Related Tables''' dialog box, the user clicks the '''Add''' button. As a result, the system does the following:[anchor|#_e68c76c4-b4c4-4792-8427-ae4611abfc62]
*Adds the parent and the child tables on the '''Table''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form
*Adds the relation on the '''Relations''' tab of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] form

After the relation between tables has been configured, on the '''Relations''' tab, the user can change the join type and data filed links that have been inserted by the system.]]></column>
			<column name="PlainText"><![CDATA[Platform: Improvements to Generic Inquiries and Reports In  Acumatica ERP 2020 R2, several improvements have been made that affect generic inquiries and reports. These         improvements are described in detail in the following sections. Ability to Change a Screen Identifier for a Generic Inquiry on the Generic Inquiry         Form In response to requests from clients and partners,  Acumatica ERP 2020 R2 introduces the capability to change a screen identifier for a generic inquiry on the             ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form for both predefined generic         inquiries and custom inquiries. In previous versions of  Acumatica ERP, a user could change any screen ID, including that of a generic inquiry, on the   ([~/?ScreenId=SM200520|SM200520]) Site Map (SM200520) form as long as the user had access to         this form. Starting in  Acumatica ERP 2020 R2, a user can also change the screen ID of a generic inquiry directly on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form while designing the generic inquiry or         modifying its design. In previous versions of  Acumatica ERP as well as the current version, when a user creates and saves a generic inquiry on this         form with the  Make Visible on the UI  check box selected in the         Summary area, the system assigns the inquiry an automatically generated screen identifier in         a format similar to that of the screen identifiers used in other forms in the system, with            GI  as the two-letter module code, followed by a six-digit number that is one         greater than the numerical portion of the most recently assigned screen ID for a generic         inquiry. To change the automatically assigned screen identifier of a generic inquiry, a user can now         click the  Change Screen ID  button on the form toolbar of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form. In the dialog box that opens (shown in the         following screenshot), the user enters the new screen ID for the selected generic inquiry.         If this screen ID is not unique, the system displays an error and prompts the user to enter         another screen ID. If a user changes a screen ID for a generic inquiry, the system changes this screen ID in         all the system objects that are related to this generic inquiry. The dialog box to change the screen ID for a generic inquiry on the Generic Inquiry           form Ability to Configure Navigation from a Generic Inquiry to Any Form In previous versions of  Acumatica ERP, on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form, the user creating         the generic inquiry could configure navigation from the generic inquiry form to another  Acumatica ERP form as long as its key field or fields, which are used to identify a particular record,         appeared on the UI (that is, it could not have hidden key fields). Starting in  Acumatica ERP 2020 R2, on the  Navigation  tab of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form, a user can configure navigation from the         generic inquiry form to any  Acumatica ERP form. The following screenshots provide a closer look at this navigation as follows: The first screenshot shows how the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form is           used to configure navigation for the  SM-AllEmails  generic inquiry (which has the              All Emails   site map title) to the   ([~/?ScreenId=CR306015|CR306015]) Email Activity           (CR306015) form, which has a hidden key field. The second screenshot shows the resulting generic inquiry form with the email icon on           the side panel. When the user clicks the icon, the system opens the side panel with the               ([~/?ScreenId=CR306015|CR306015]) Email Activity form for the currently selected email in              All Emails . (Unless the user clicks another row, the first row of the inquiry           form is selected, so that email is initially shown.) The user clicks the row with the           email to be viewed, which causes the system to open the   ([~/?ScreenId=CR306015|CR306015]) Email Activity form in the side panel with the selected email           displayed. Configuration of navigation to a form with a hidden key field Navigation in the generic inquiry form to a form with a hidden key field Usage of the DateDiff and DateAdd Functions in Formulas in Generic Inquiries and         Reports In  Acumatica ERP 2020 R2, new abbreviations for arguments have been added for the  DateDiff  and            DateAdd  functions. Functions are used in formulas that a user creates by         using the  Formula Editor Dialog Box Formula Editor Dialog Box, including the formulas         used in generic inquiries and analytical reports. The  DateDiff(interval, date1, date2)  function returns the number of time         intervals ( interval ) between the specified  date1  and            date2 . The returned number is an integer that can be positive or         negative. The  DateAdd(date, interval, number)  function returns a new date, which the         system calculates by adding the specified number ( number ) of time intervals           ( interval ) to the date ( date ). The  interval  argument specifies the type of time interval. In addition to         the set of options that was defined in previous versions of  Acumatica ERP, as specified in  Using Functions in Expressions, the            interval  argument can be one of the following: 'y' ,  'yy' ,  'yyyy' , or              'year'  for time intervals expressed in years 'm' ,  'mm' , or  'month'  for time           intervals expressed in months 'd' ,  'dd' , or  'day'  for time           intervals expressed in days 'h' ,  'hh' , or  'hour'  for time           intervals expressed in hours 'n' ,  'mi' , or  'minute'  for time           intervals expressed in minutes 's' ,  'ss' , or  'second'  for time           intervals expressed in seconds 'w' ,  'ww' ,  'wk' , or              'week'  for time intervals expressed in weeks 'q' ,  'qq' , or  'quarter'  for time           intervals expressed in quarters If a user specifies incorrect arguments the system displays an error. Ability to Restrict Customer Visibility for Customers to a Company or a Branch in         Generic Inquiries In  Acumatica ERP 2020 R2, the capability to restrict access to customer accounts to only specific branches and         companies has been added. This capability exists for the predefined generic inquiries that         use the  Customer  or  BAccount  data access class, and the capability can be         implemented in custom generic inquiries that use either or both of these data access         classes. If multiple companies or branches are configured within the same tenant, it is possible to         limit access to particular customers’ data to only employees of a particular company or a         branch. To implement this capability, the following changes have been made: On the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, in the              Financial Advanced  section, the  Customer Visibility             Restriction  check box, which an administrator selects to enable the           corresponding feature, has been added. By default, the check box is cleared, indicating           that this feature is disabled. On the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form, in all predefined           generic inquiries that have the  Customer  or  BAccount  data access class           listed on the  Tables  tab, the following changes have been made: On the  Tables  tab,  PX.Objects.CX.FeaturesSet  has been               added to the list of tables. The following screenshot shows this change on this                 tab. Changes on the Tables tab of the Generic Inquiry form On the  Relations  tab, the  PX.Objects.AR.Customer  table               and the  PX.Objects.CX.FeaturesSet  table have been joined. The following               screenshot shows the changes on this tab. Changes on the Relations tab of the Generic Inquiry form On the  Conditions  tab, the conditions for the                  Customer.COrgBAccountID  field and the  Features.VisibilityRestriction                field have been added. The following screenshot shows the changes on this tab. Changes on the Conditions tab of the Generic Inquiry form The value of the  Features.VisibilityRestriction  field is based on                 whether the  Customer Visibility Restriction  feature is enabled on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form. If this feature is disabled, then the                 value in the  Features.VisibilityRestriction  field is  0 , which means                 that visibility restrictions are not applicable, even though the changes (described                 above) on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form have been               made. If a user developing the generic inquiry wants to restrict access to customer data related         only to the specific branch or the specific company to which the employee using the generic         inquiry has access, the user should make the needed changes in all the custom generic         inquiries in which the  Customer  data access class or the  BAccount  data access         class is used. The changes to be made are similar to the changes that have been made to the            AR-Customers  generic inquiry (which has the  Customers  site map title); these         changes are shown in the screenshots above. Ability to Preview the Generic Inquiry Form While Designing the Inquiry  Starting in  Acumatica ERP 2020 R2, a user can preview generic inquiry results on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form without navigating away from the         form, for improved usability. In previous versions of  Acumatica ERP, a user could preview inquiry results by clicking the  View Inquiry          button on the toolbar of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form. Starting in            Acumatica ERP 2020 R2, a user can also click the eye icon on the side panel (shown in the following screenshot)         to preview inquiry results. Eye icon to preview the inquiry results on the side panel of the Generic Inquiry           form When a user clicks the  View Inquiry  button, the system displays         inquiry results in a new browser tab. To return to the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form, the user needs to return to its browser tab,         thus performing an additional action; also, the user cannot view the generic inquiry         settings and the resulting generic inquiry form at the same time. Conversely, when a user         clicks the eye icon on the side panel on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry         form, the system displays the resulting generic inquiry form on the panel in the same         browser tab, as shown in the following screenshot. The user does not need to perform         additional actions to return to the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form. The         inquiry results are updated automatically when the user saves any changes made on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form. The resulting generic inquiry form on the side panel Automatic Suggestion of Table Joins on the Generic Inquiry Form In previous versions of  Acumatica ERP, a user designing a generic inquiry had to manually find information about the data         access classes and data fields by which the tables are linked. Then based on this         information, the user had to manually configure relations between the tables—that is,         to set up a join type and to set up data field links. In the  Related Tables  dialog box of  Acumatica ERP 2020 R2, when a user specifies a pair of tables—that is, a parent table and a child         table—the system automatically inserts a statement in the            Relation  box that represents the relation between the parent table         and child table. To simplify the process of specifying table relations, the following changes have been made         on the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form: On the  Tables  tab, the  Description  column           has been added. The column contains the data access class description, as shown in the           following screenshot. Description column on the Tables tab of the Generic Inquiry form On the  Tables  tab, the  Add Related Table            button has been added. If a user clicks this button, the system opens the              Related Tables  dialog box, as shown in the following           screenshot. On the  Relations  tab, on the table toolbar of the              Table Relations  table, the  Add Related             Table  button has been added. If a user clicks this button, the system opens           the  Related Tables  dialog box, as shown in the following             screenshot. Related Tables dialog box to configure table relations on the Generic Inquiry               form On the  Relations  tab, on the table toolbar of the  Data             Field Links for Active Relations  table, the  Browse for             Relations  button has been added. At any time after the relation between           tables has been configured, the user can view the relation by clicking the              Browse for Relations  button on the table toolbar of the              Data Field Links for Active Relation  table on the              Relations  tab. In this case, the system displays the              Related Tables  dialog box with the boxes filled in with values,           as the following screenshot demonstrates. Related Tables dialog box with the boxes filled in with values The  Related Tables  dialog box can be used for the following: To configure relations between a pair of tables when this dialog box is opened by a user           clicking the  Add Related Table  button on the              Tables  tab or on the  Relations  tab. To view configured relations between a pair of tables when this dialog box is opened by           a user clicking the  Browse for Relations  button on the              Relations  tab. But even when the  Related             Tables  dialog box is opened by clicking the  Browse for             Relations  button on the  Relations  tab, it can also be           used to configure the relation between a new pair of tables. In the  Related Tables  dialog box, a user should specify the         following: A parent table: A user selects a parent table in the list of tables and then clicks the              Select Parent Table  button above the list. To find the necessary           parent table in the list, the user can use the search box below the list. If the user           opened the  Related Tables  dialog box (by clicking the              Add Related Table  button on the table toolbar on the              Tables  tab) when a table was first selected on the              Tables  tab, then the name of this table is already selected as a           value in the  Parent Table  box. A child table: A user can select a child table only after selecting a parent table. A           user selects a child table in the list of tables and then clicks the  Select             Child Table  button above the list. The list of child tables includes only           the tables that can be linked to the selected parent table. As with a parent table, to           find the necessary child table in the list, the user can use the search box below the           list. In the  Related Tables  dialog box, a user can select the            Include Hidden Tables  check box to include hidden tables in the         list of tables to for selecting a parent or child table. When a parent table and a child table are selected, the system does the following: Automatically assigns and displays aliases for the tables, in the              Alias  box next to the  Parent Table  box and           the  Child Table  box. Displays the relation between the parent table and the child table in the              Relation  box. The relation is described as a part of the SQL           statement. By default, the  Inner  join type is used. To approve the specified configuration and close the  Related Tables          dialog box, the user clicks the  Add  button. As a result, the system         does the following: Adds the parent and the child tables on the  Table  tab of the               ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form Adds the relation on the  Relations  tab of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry form After the relation between tables has been configured, on the            Relations  tab, the user can change the join type and data filed         links that have been inserted by the system. ]]></column>
		</row>
		<row PageID="70e310ba-e030-4f4e-81e7-9866b2b9e0b4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="615f5404-27d6-1cb6-e39d-5ee18befbb9b" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a customizer can open the''' State Diagram''' window for particular entry forms. In the '''State Diagram''' window, the customizer can see all possible states of the entry form, as well as transitions between the states. Also, the customizer can open the Customization Project Editor from the '''State Diagram''' window.
==State Diagram Window==
The feature is supported for the following entry forms:{br}

The '''State Diagram''' window can be opened for the following entry forms:[anchor|#_bb6d4ee8-8105-4acc-af7e-1ff68246c4dc]
*[HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form
*[HelpRoot_FormReference\CR_30_60_00|Cases] ([~/?ScreenId=CR306000|CR306000]) form
*[HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form
*[HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form
*[HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]) form
*[HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form
*[HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form

To open the '''State Diagram''' window, the customizer opens the entry form and clicks '''Customization''' > ''' State Diagram''' on the form title bar.{br}

The '''State Diagram''' window is shown in the following screenshot. It displays the states of the form, the transitions between the states, the actions that the user performs to change the states, and the event handlers that trigger the transitions between the states.[anchor|#_71f9b086-e52a-4e84-9275-40ec82bb502c][anchor|#_fd308ca0-8b21-4be6-a761-a5f57a24710d][image:ReleaseNotes/Images/RN_2020_R2_Customization_State_diagram.png|popup|The State Diagram window|250px]
The '''State Diagram''' window contains the following elements for the selected form (that is, the form from which you opened the window):[anchor|#_36490c50-2ebc-4d2d-ae10-546316426688]
*Boxes that contain the names of the states of an entity created on the form and the names of the actions and event handlers.
*Lines that show the connections between the states. For example, the screenshot above shows a line that is a transition from the '''New''' state to the '''Won''' state of an opportunity (see Item 1).
*An arrow (Item 2) that the customizer can click to expand or collapse the list of actions or event handlers specified for this state.
*The '''Customize Workflow''' button (Item 3), which opens the Customization Project Editor.
*The following buttons on the right of the diagram: '''Zoom In''' or '''Zoom Out''' (Item 4), '''Reset Scale to 100%''' (Item 5), '''Fit Screen''' (Item 6), and '''Collapse All/Expand All''' (Item 7). '''Zoom Out''' (Item 4), '''Reset Scale to 100%''' (Item 5), '''Fit Screen''' (Item 6), and '''Collapse All/Expand All''' (Item 7).
{br}

For details on how to customize a workflow by using the Customization Project Editor, see [HelpRoot_ReleaseNotes\RN_2020_R2_Developer_Workflows_DiagramView|Customization: The Workflow Visual                             Editor].]]></column>
			<column name="PlainText"><![CDATA[Platform: The State Diagram In  Acumatica ERP 2020 R2, a customizer can open the  State Diagram  window for particular         entry forms. In the  State Diagram  window, the customizer can see all         possible states of the entry form, as well as transitions between the states. Also, the         customizer can open the  Customization Project Editor         from the  State Diagram  window. State Diagram Window The feature is supported for the following entry forms: The            State Diagram  window can be opened  for the         following entry forms:  ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form  ([~/?ScreenId=CR306000|CR306000]) Cases (CR306000) form  ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000) form  ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form  ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000) form  ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form  ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form To open the  State Diagram  window, the customizer opens the entry         form and clicks  Customization  State Diagram  on the form title bar. The  State Diagram  window is shown in the following screenshot. It         displays the states of the form, the transitions between the states, the actions that the         user performs to change the states, and the event handlers that trigger the transitions         between the states. The State Diagram window The  State Diagram  window contains the following elements for the         selected form (that is, the form from which you opened the window): Boxes that contain the names of the states of an entity created on the form and the             names of the actions and event handlers. Lines that show the connections between the states. For example, the screenshot above             shows a line that is a transition from the  New  state to the                Won  state of an opportunity (see Item 1). An arrow (Item 2) that the customizer can click to expand or collapse the list of             actions or event handlers specified for this state. The  Customize Workflow  button (Item 3), which opens the  Customization Project Editor. The following buttons on the right of the diagram:  Zoom In  or                Zoom Out  (Item 4),  Reset Scale to 100%              (Item 5),  Fit Screen  (Item 6), and  Collapse All/Expand               All  (Item 7).  Zoom Out  (Item 4),  Reset               Scale to 100%  (Item 5),  Fit Screen  (Item 6), and                Collapse All/Expand All  (Item 7). For details on how to customize a workflow by using the  Customization Project Editor, see  Customization: The Workflow Visual                             Editor. ]]></column>
		</row>
		<row PageID="6511b1b0-312a-d398-ab67-87f160372f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="590e6b0b-0287-ad6e-5e4e-c6e743fd402e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP, the mechanism of retrieving the unit rate for project budget lines has been improved.{br}

When a user selects an inventory item in a project budget line, the system automatically populates the unit rate of the line. The mechanism of retrieving the unit rate depends on the budget line type and is supported on the following forms: [HelpRoot_FormReference\PM_30_10_00|Projects] ([~/?ScreenId=PM301000|PM301000]), [HelpRoot_FormReference\PM_20_80_00|Project Templates] ([~/?ScreenId=PM208000|PM208000]), [HelpRoot_FormReference\PM_30_80_00|Change Orders] ([~/?ScreenId=PM308000|PM308000]), [HelpRoot_FormReference\PM_30_85_00|Change Requests] ([~/?ScreenId=PM308500|PM308500]), [HelpRoot_FormReference\PM_30_45_00|Project Quotes] ([~/?ScreenId=PM304500|PM304500]), and [HelpRoot_FormReference\PM_30_90_00|Project Budget] ([~/?ScreenId=PM309000|PM309000]).
==Retrieving the Unit Rate for a Revenue Budget Line==
When a user selects an inventory item in a revenue budget line—that is, a line with the account group of the income type—the system automatically fills in the unit rate of the line with the item price. The system searches for an applicable price of the inventory item that is effective on the start date of the project or the document date among the sales prices existing in the system. For more details on how the system searches for the price, see [HelpRoot_PricesAndDiscounts\PriceDiscount_Sales_Price_Selection_GeneralInfo|Automatic Price Selection: Rules of Price Selection].
==Retrieving the Unit Rate for a Cost Budget Line==
When a user selects an inventory item in a cost budget line—that is, a line with the account group of the expense type, the system automatically fills in the unit rate of the line with the item cost.{br}

If the type of the selected inventory item of the budget line is labor—that is, the ''Labor'' option is selected for the item in the '''Type''' box in the '''Item Defaults''' section on the '''General Settings''' tab of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form—then on the [HelpRoot_FormReference\PM_20_99_00|Labor Cost Rates] ([~/?ScreenId=PM209900|PM209900]) form, the system retrieves the labor cost rate of the ''Labor Item'' type that is associated with the same inventory item and that has an effective date that satisfies the start date of project or the document date.{br}

If no labor cost rate is found or the type of the selected inventory item of the budget line is not ''Labor'', the system retrieves the following costs depending on the type of the inventory item:[anchor|#ul_plz_xvn_x2b]
*For a stock item: The '''Average Cost''' of the item from the '''Price/Cost Info''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form
*For a non-stock item: The '''Current Cost''' of the item from the '''Price/Cost Information''' tab of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form

The following diagram illustrates the logic the system uses to select the cost for an inventory item.[anchor|#_3a903e16-5b56-4d12-ae1d-be7c6d910794][anchor|#_f471f8e3-fc92-4c91-b110-552f948033ec][image:ReleaseNotes/Images/RN_2020_R2_Projects_Unit_Rate.png|popup|450px]]]></column>
			<column name="PlainText"><![CDATA[Projects: Enhancements in Retrieving the Unit Rate In  Acumatica ERP, the mechanism of retrieving the unit rate for project budget lines has been         improved. When a user selects an inventory item in a project budget line, the system automatically         populates the unit rate of the line. The mechanism of retrieving the unit rate depends on         the budget line type and is supported on the following forms:   ([~/?ScreenId=PM301000|PM301000]) Projects (PM301000),   ([~/?ScreenId=PM208000|PM208000]) Project Templates (PM208000),   ([~/?ScreenId=PM308000|PM308000]) Change Orders (PM308000),   ([~/?ScreenId=PM308500|PM308500]) Change Requests (PM308500),   ([~/?ScreenId=PM304500|PM304500]) Project Quotes (PM304500), and   ([~/?ScreenId=PM309000|PM309000]) Project Budget (PM309000). Retrieving the Unit Rate for a Revenue Budget Line When a user selects an inventory item in a revenue budget line—that is, a line with the         account group of the income type—the system automatically fills in the unit rate of the line         with the item price. The system searches for an applicable price of the inventory item that         is effective on the start date of the project or the document date among the sales prices         existing in the system. For more details on how the system searches for the price, see  Automatic Price Selection: Rules of Price Selection. Retrieving the Unit Rate for a Cost Budget Line When a user selects an inventory item in a cost budget line—that is, a line with the         account group of the expense type, the system automatically fills in the unit rate of the         line with the item cost. If the type of the selected inventory item of the budget line is labor—that is, the            Labor  option is selected for the item in the  Type  box in the            Item Defaults  section on the  General           Settings  tab of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000)         form—then on the   ([~/?ScreenId=PM209900|PM209900]) Labor Cost Rates (PM209900) form, the system         retrieves the labor cost rate of the  Labor Item  type that is associated with the same         inventory item and that has an effective date that satisfies the start date of project or         the document date. If no labor cost rate is found or the type of the selected inventory item of the budget         line is not  Labor , the system retrieves the following costs depending on the type of         the inventory item: For a stock item: The  Average Cost  of the item from the            Price/Cost Info  tab of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items           (IN202500) form For a non-stock item: The  Current Cost  of the item from the            Price/Cost Information  tab of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items           (IN202000) form The following diagram illustrates the logic the system uses to select the cost for an         inventory item. ]]></column>
		</row>
		<row PageID="6511b1b0-442a-4a98-bb22-874420372f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="5b1d184b-afd1-ee6d-012d-d7c66c8647b3" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, if a purchase receipt had a project specified in a line on the '''Document Details''' tab of the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form, as shown in the following screenshot, a user needed to map the PO accrual account of the item selected in the line to an account group on the [HelpRoot_FormReference\PM_20_10_00|Account Groups] ([~/?ScreenId=PM201000|PM201000]) form to be able to process the purchase receipt.[anchor|#fig_zkp_wrq_mmb][anchor|#image_alp_wrq_mmb][image:ReleaseNotes/Images/RN_2020_R2_Projects_Processing_Purchase_Receipts.png|popup|A purchase receipt with a line related to a project|450px]
 Acumatica ERP 2020 R2 no longer requires a user to map to an account group the PO accrual account of items to be able to receive these items for a project with purchase receipts.((({S:Warn}The purchase of an inventory item for a project affects the actual values of the project budget on processing the applicable purchase receipt only if the inventory or expense account of the item is included in an account group.
)))
The current processing of the purchase receipt differs depending on whether the PO accrual account is mapped to an account group, as described below.
==Processing for a PO Accrual Account Not in an Account Group==
If the PO accrual account of an item selected in a project-related line of a purchase receipt is not included in any account group, on release of the inventory receipt created for the purchase receipt, the system creates a general ledger transaction that credits the PO accrual account. The created GL transaction has the non-project code (''X'') specified instead of the project that was specified for the purchase receipt line. As a result, no project transaction is created for this account.{br}

When the purchase receipt is billed, on release of the created accounts payable bill, the system clears the PO accrual account—that is, it creates a general ledger transaction that debits the PO accrual account. The created GL transaction also has the non-project code (''X'') specified instead of the project, and no corresponding project transaction is created.
==Processing for a PO Accrual Account in an Account Group==
If the PO accrual account of an item selected in a project-related line of a purchase receipt is included in an account group, on release of the inventory receipt created for the purchase receipt, the system creates a general ledger transaction that credits the PO accrual account. The created transaction has the project specified that was selected in the purchase receipt line. As a result, the corresponding project transaction is created and posted to the account group associated with the PO accrual account.{br}

When the purchase receipt is billed, on release of the created accounts payable bill, the system clears the PO accrual account—that is, it creates a general ledger transaction that debits the PO accrual account. The created GL transaction also has the project specified, and the corresponding project transaction is created.]]></column>
			<column name="PlainText"><![CDATA[Projects: Processing Purchase Receipts In previous versions of  Acumatica ERP, if a purchase receipt had a project specified in a line on the  Document           Details  tab of the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000)         form, as shown in the following screenshot, a user needed to map the PO accrual account of         the item selected in the line to an account group on the   ([~/?ScreenId=PM201000|PM201000]) Account Groups (PM201000) form to be able to process the purchase         receipt. A purchase receipt with a line related to a project  Acumatica ERP 2020 R2 no longer requires a user to map to an account group the PO accrual account of items to         be able to receive these items for a project with purchase receipts. The purchase of an inventory item for a project affects the actual         values of the project budget on processing the applicable purchase receipt only if the         inventory or expense account of the item is included in an account group. The current processing of the purchase receipt differs depending on whether the PO accrual         account is mapped to an account group, as described below. Processing for a PO Accrual Account Not in an Account Group If the PO accrual account of an item selected in a project-related line of a purchase         receipt is not included in any account group, on release of the inventory receipt created         for the purchase receipt, the system creates a general ledger transaction that credits the         PO accrual account. The created GL transaction has the non-project code ( X ) specified         instead of the project that was specified for the purchase receipt line. As a result, no         project transaction is created for this account. When the purchase receipt is billed, on release of the created accounts payable bill, the         system clears the PO accrual account—that is, it creates a general ledger transaction that         debits the PO accrual account. The created GL transaction also has the non-project code           ( X ) specified instead of the project, and no corresponding project transaction is         created. Processing for a PO Accrual Account in an Account Group If the PO accrual account of an item selected in a project-related line of a purchase         receipt is included in an account group, on release of the inventory receipt created for the         purchase receipt, the system creates a general ledger transaction that credits the PO         accrual account. The created transaction has the project specified that was selected in the         purchase receipt line. As a result, the corresponding project transaction is created and         posted to the account group associated with the PO accrual account. When the purchase receipt is billed, on release of the created accounts payable bill, the         system clears the PO accrual account—that is, it creates a general ledger transaction that         debits the PO accrual account. The created GL transaction also has the project specified,         and the corresponding project transaction is created. ]]></column>
		</row>
		<row PageID="6511b1b0-312a-4a98-bb22-87f160372f74" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="afd81e6b-5356-8226-7e7c-ca619b4785b9" RecordSourceID="22377">
			<column name="Content"><![CDATA[
 Acumatica ERP 2020 R2 introduces the ability to post unbilled remainders to particular accounts and subaccounts.{br}

An unbilled remainder is the difference between the amounts in the '''Billed Amount''' and '''Amount to Invoice''' columns of a pro forma invoice line for which ''Hold Remainder'' is selected in the '''Status''' column on the '''Time and Material''' tab of the [HelpRoot_FormReference\PM_30_70_00|Pro Forma Invoices] ([~/?ScreenId=PM307000|PM307000]) form. On release of the corresponding accounts receivable invoice that contains the line from which the unbilled remainder originates, the system generates a project transaction for the unbilled remainder.((({S:Warn}I think we should also add info on posting the unbilled remainders to GL. PM transactions with Orig. Doc. Type = Unbilled Remainder, Unbilled Remainder Reversal are to be posted to GL if the original PM transaction from which this remainder is left was posted to GL
)))
To make the system post unbilled remainders to particular accounts and subaccounts, a user specifies the following settings in the new '''Unbilled Remainders''' section of the '''General Settings''' tab of the [HelpRoot_FormReference\PM_10_10_00|Projects Preferences] ([~/?ScreenId=PM101000|PM101000]) form:[anchor|#_3697b6cf-eec2-4018-8b6d-1858ba14003b]
*Debit account
*Debit subaccount
*Credit account
*Credit subaccount

The main attributes of the project transaction created for an unbilled remainder—such as the project, project task, inventory item, cost code, and account group—are the same as those of the original project transaction from which this unbilled remainder originates. The original document type of this transaction is ''Unbilled Remainder''. The accounts and subaccounts are populated from the '''Unbilled Remainders''' section of the [HelpRoot_FormReference\PM_10_10_00|Projects Preferences] form. If no settings are specified on this form, the system uses the accounts and subaccounts of the original transaction.((({S:Warn}When the debit account and the credit account are defined in the '''Unbilled Remainders''' section on the [HelpRoot_FormReference\PM_10_10_00|Projects Preferences] form, and if the project transaction from which an unbilled remainder originates has only the debit account specified, in the ''Unbilled Remainder'' transaction created for the unbilled remainder, the system overrides only the original debit account with the debit account from the project preferences and does not populate the credit account.
)))
The system also generates the reversing project transaction for an unbilled remainder in the following cases:[anchor|#_ed85031c-7215-4975-9f57-c418b45db3d5]
*When the unbilled remainder was billed and the accounts receivable invoice that contains the unbilled remainder is released
*When the unbilled remainder is written off with a pro forma invoice line during project billing
*When the corresponding accounts receivable invoice that contains the line from which the unbilled remainder originates is reversed with a credit memo.

The main attributes of the reversing transaction for an unbilled remainder are the same as those of the original project transaction of the unbilled remainder. The original document type of the reversing transaction is ''Unbilled Remainder Reversal''.{br}

If the project transaction from which an unbilled remainder originates is posted to general ledger—that is, the transaction has both the debit account and the credit account specified—the ''Unbilled Remainder'' and ''Unbilled Remainder Reversal'' transactions for the unbilled remainder are also posted to general ledger.]]></column>
			<column name="PlainText"><![CDATA[Projects: Processing Unbilled Remainders  Acumatica ERP 2020 R2 introduces the ability to post unbilled remainders to particular accounts and         subaccounts. An unbilled remainder is the difference between the amounts in the  Billed           Amount  and  Amount to Invoice  columns of a pro forma         invoice line for which  Hold Remainder  is selected in the            Status  column on the  Time and Material  tab         of the   ([~/?ScreenId=PM307000|PM307000]) Pro Forma Invoices (PM307000) form. On release of the         corresponding accounts receivable invoice that contains the line from which the unbilled         remainder originates, the system generates a project transaction for the unbilled         remainder. I think we should also add info on posting the unbilled remainders to         GL. PM transactions with Orig. Doc. Type = Unbilled Remainder, Unbilled Remainder Reversal         are to be posted to GL if the original PM transaction from which this remainder is left was         posted to GL To make the system post unbilled remainders to particular accounts and subaccounts, a user         specifies the following settings in the new  Unbilled Remainders          section of the  General Settings  tab of the   ([~/?ScreenId=PM101000|PM101000]) Projects Preferences (PM101000) form: Debit account Debit subaccount Credit account Credit subaccount The main attributes of the project transaction created for an unbilled remainder—such         as the project, project task, inventory item, cost code, and account group—are the         same as those of the original project transaction from which this unbilled remainder         originates. The original document type of this transaction is  Unbilled Remainder . The         accounts and subaccounts are populated from the  Unbilled Remainders          section of the   ([~/?ScreenId=PM101000|PM101000]) Projects Preferences form. If no settings are         specified on this form, the system uses the accounts and subaccounts of the original         transaction. When the debit account and the credit account are defined in the            Unbilled Remainders  section on the   ([~/?ScreenId=PM101000|PM101000]) Projects Preferences form, and if the project transaction from which an         unbilled remainder originates has only the debit account specified, in the  Unbilled           Remainder  transaction created for the unbilled remainder, the system overrides only         the original debit account with the debit account from the project preferences and does not         populate the credit account. The system also generates the reversing project transaction for an unbilled remainder in         the following cases: When the unbilled remainder was billed and the accounts receivable invoice that contains           the unbilled remainder is released When the unbilled remainder is written off with a pro forma invoice line during project           billing When the corresponding accounts receivable invoice that contains the line from which the           unbilled remainder originates is reversed with a credit memo. The main attributes of the reversing transaction for an unbilled remainder are the same as         those of the original project transaction of the unbilled remainder. The original document         type of the reversing transaction is  Unbilled Remainder Reversal . If the project transaction from which an unbilled remainder originates is posted to general         ledger—that is, the transaction has both the debit account and the credit account         specified—the  Unbilled Remainder  and  Unbilled Remainder Reversal  transactions         for the unbilled remainder are also posted to general ledger. ]]></column>
		</row>
		<row PageID="f8a4af23-9555-41c4-bcda-01be966d6df9" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="8b05d3d4-9e19-235a-133b-7bfc86e08845" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, changes have been made to the licensing related to the field service functionality. The features related to the staff member and vehicle packs have been removed from the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form, as shown in the following screenshot.[anchor|#_ec789abc-f35b-42b0-bdac-4d000692b1eb][anchor|#_06eb0d3a-c7c8-47b9-bd37-0220121920da][image:ReleaseNotes/Images/RN_2020_R2_Services_Licensing.png|popup|The field service feature switches|250px]
Instead, the maximum number of staff members, vehicles, and appointments per month for an instance can now be specified in a license. The values are shown in the new '''Maximum Number of Staff Members and Vehicles''' and '''Maximum Number of Appointments per Month''' boxes on the '''License''' tab ('''System Constraints''' section) of the [HelpRoot_FormReference\SM_60_40_00|License Monitoring Console] ([~/?ScreenId=SM604000|SM604000]) form (see the following screenshot).[anchor|#_25b63d06-d029-4242-a645-c833d5a617d8][anchor|#_b7c085e7-8f44-4307-8076-3c07d6c1edc0][image:ReleaseNotes/Images/RN_2020_R2_Services_Licensing_2.png|popup|New boxes for maximum numbers of staff members, vehicles, and appointments|350px]
If a user attempts to create an entity on the respective data entry form when the maximum value has been reached, the system warns the user about exceeding the maximum specified value.((({S:Warn}During the upgrade to Acumatica ERP 2020 R2, the system fills in the '''Maximum Number of Staff Members and Vehicles''' box with the sum of the numbers in the staff member pack and vehicle pack features selected in the previous version. For example, if the features for the ''10 Staff Members'' and ''10 Vehicles'' packs were selected for the instance on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form, after the upgrade, ''20'' will be inserted in the '''Maximum Number of Staff Members and Vehicles''' box on the [HelpRoot_FormReference\SM_60_40_00|License Monitoring Console] form.
If the ''Unlimited Staff Members'' or ''Unlimited Vehicles'' feature is selected (or both features are selected) on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] form before the upgrade, then after the upgrade, the system will insert ''0'' in the '''Maximum Number of Staff Members and Vehicles''' box. This setting means that the system does not enforce any maximum for these entities.{br}

The '''Maximum Number of Appointments per Month''' will not be restricted after the upgrade. That is, the system will not take any specified maximum into account, and users can create any number of appointments per month.
)))]]></column>
			<column name="PlainText"><![CDATA[Services: New Licensing for Field Services In  Acumatica ERP 2020 R2,    changes have been made to the licensing related to the field service functionality. The features    related to the staff member and vehicle packs have been removed from the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features (CS100000) form, as    shown in the following screenshot. The field service feature switches Instead, the maximum number of staff members, vehicles, and appointments per month for an    instance can now be specified in a license. The values are shown in the new  Maximum     Number of Staff Members and Vehicles  and  Maximum Number of Appointments     per Month  boxes on the  License  tab ( System     Constraints  section) of the   ([~/?ScreenId=SM604000|SM604000]) License Monitoring Console (SM604000) form    (see the following screenshot). New boxes for maximum numbers of staff members, vehicles, and appointments If a user attempts to create an entity on the respective data entry form when the maximum value    has been reached, the system warns the user about exceeding the maximum specified value. During the upgrade to  Acumatica ERP 2020 R2,    the system fills in the  Maximum Number of Staff Members and Vehicles  box    with the sum of the numbers in the staff member pack and vehicle pack features selected in the    previous version. For example, if the features for the  10 Staff Members  and  10     Vehicles  packs were selected for the instance on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form, after the    upgrade,  20  will be inserted in the  Maximum Number of Staff Members and     Vehicles  box on the   ([~/?ScreenId=SM604000|SM604000]) License Monitoring Console form. If the       Unlimited Staff Members  or  Unlimited Vehicles  feature is selected (or both     features are selected) on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features form before the     upgrade, then after the upgrade, the system will insert  0  in the  Maximum      Number of Staff Members and Vehicles  box. This setting means that the system does     not enforce any maximum for these entities. The  Maximum Number of Appointments      per Month  will not be restricted after the upgrade. That is, the system will not     take any specified maximum into account, and users can create any number of appointments per     month. ]]></column>
		</row>
		<row PageID="33c01d2a-4347-48f6-b555-99df2cbccd15" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="77be6342-7395-060e-c8dc-2ed9f93d4198" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, staff members can put an appointment on pause and resume it later; they can also pause and resume specific services. For example, the staff member can pause a service for a meal break and resume it after the meal break, or the staff member can pause an appointment at the end of the day and resume it the next day.{br}{TOC}
==Pausing and Resuming an Appointment==
In the '''Actions''' menu of the form toolbar of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the '''Pause Appointment''' and '''Resume Appointment''' menu commands have been added, as the following screenshot shows.[anchor|#_63d673c5-6d72-4e9a-9394-039576a1a90c][anchor|#_1312ee8f-b3bc-4a9c-8ccc-49d97e77ed3c][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments.png|popup|The Pause Appointment and Resume Appointment actions|350px]
When the user invokes the '''Pause Appointment''' action, the system does the following (see the screenshot below):[anchor|#_bc507788-9f1a-458a-b048-f33483d2e902]
*Changes the status of the appointment to ''Paused''
*On the '''Log''' tab, changes the status of all lines with the ''In Process'' status to ''Paused''
*In the '''End Time''' box on the '''Log''' tab, inserts the current time for all paused lines
[anchor|#_4cdf235e-d1a5-4d61-bbde-da1830317d95][anchor|#_908062b6-a1cd-4934-95a4-3a05b1f7e50d][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_2.png|popup|Paused appointment|450px]
If the status of the appointment is ''Paused'', the user can do the following:[anchor|#_d4099c59-9eca-467e-921f-94ee5e3d78a5]
*Resume the appointment
*Start travel
*Complete travel
*Complete the appointment

To continue working on a paused appointment, the user invokes the '''Resume Appointment''' action. The system does the following (see the screenshot below):[anchor|#_4ca8da8b-39e1-45d0-afc3-299f07fde929]
*Changes the status of the appointment to ''In Process''
*On the '''Log''' tab, changes the status of all lines with the ''Paused'' status to ''Completed''
*On the '''Log''' tab, for each resumed line, creates a new line with the ''In Process'' status and inserts the current time in the '''Start Time''' column
[anchor|#_9780e0a0-cf86-4b41-92d5-8b0c130e4996][anchor|#_10d2349d-b2c1-4fda-b246-ffbf0eb7c037][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_3.png|popup|Resumed appointment|450px]
If the user does not need to resume work on the appointment, the user can complete the paused appointment by invoking the '''Complete Appointment''' action. The system changes the status of the appointment and the status of the paused lines on the '''Log''' tab to ''Completed''.
==Pausing and Resuming Services==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, on the table toolbar of the '''Details''' tab, the '''Actions''' menu has been added with the following menu commands, as the following screenshot shows:[anchor|#_ae04a261-f47a-4eaf-9b58-c44f8067e767]
*'''Start''' (the former '''Start''' button, which was moved from the '''Details''' tab toolbar to this menu)
*'''Pause'''
* '''Resume'''
* '''Complete''' (the former '''Complete''' button, which was moved from the '''Details''' tab toolbar to this menu)
*'''Cancel''' (the former '''Cancel''' button, which was moved from the '''Details''' tab toolbar to this menu)
[anchor|#_76d20f34-5d19-4154-b7ce-3dc6693c1752][anchor|#_147d2024-750d-42aa-bdae-65f0d2fabad4][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_4.png|popup|The menu commands of the Actions menu on the Details tab|350px]
Suppose that a user is performing a service and wants to pause it for some time. To do so, the user clicks the service to be paused on the '''Details''' tab and invokes the '''Pause''' action on the table toolbar. The system opens the '''Perform Action''' dialog box with the ''Pause'' action and the ''Service'' logging option selected, as the following screenshot shows. The system populates the dialog box with all staff members assigned to services that have the ''In Process'' status. In this dialog box, the user can modify the date and time when the service is paused and select the unlabeled check boxes in the table for the staff members for which the service is paused. By default, these check boxes are selected for all staff members assigned to the selected service.[anchor|#_6b23ee63-9fea-4a46-94bf-7489ffcf25f4][anchor|#_cc769fbd-570e-4dd5-89de-0da5f8b93fe4][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_5.png|popup|The Perform Action dialog box for pausing a specific service|450px]
When the user clicks '''OK''', the system closes the dialog box; on the '''Log''' tab, it also changes the status of the related log line or lines to ''Paused'' and inserts the specified time and date in the '''End Time''' and '''End Date''' columns (see the following screenshot).[anchor|#_916fef8f-18cc-448c-a342-473a241d8a89][anchor|#_056d40e1-91bc-4509-81e1-2411b585d9fd][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_6.png|popup|A paused service on the Log tab|450px]
To resume the service, the user clicks the service on the '''Details''' tab and invokes the '''Resume''' action on the table toolbar. The system opens the '''Perform Action''' dialog box with the ''Resume'' action and the ''Service'' logging option selected, as the following screenshot shows. The system populates the dialog box with all staff members for whom any services were paused. In this dialog box, the user can modify the date and time when the service is resumed and select the unlabeled check boxes in the table for the staff members for which the service is resumed. By default, these check boxes are selected for all staff members for which the service was paused.[anchor|#_8e2b01ea-2e86-431b-9c67-6270391d9d09][anchor|#_bf620491-dc8e-44de-ae2f-98e7fa86108c][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_7.png|popup|The Perform Action dialog box for resuming a specific service|450px]
When the user clicks '''OK''', the system closes the dialog box and does the following on the '''Log''' tab:[anchor|#_22a1a4b5-b6f2-4b05-857a-60e8084db3c0]
*Changes the status of the service log line from ''Paused'' to ''Completed''
*Creates a new log line with the ''In Process'' status for the service and inserts the current time in the '''Start Time''' column

Similarly, a travel item can be paused and resumed by using these actions. Also, the user can pause and resume a non-stock item. In this case, the system does not open '''Perform Action''' dialog box but modifies the log lines on the '''Log''' tab as it modifies them for a service. {br}

On the '''Staff''' tab, the '''Start''' and '''Complete''' buttons have been removed. Instead, the '''Actions''' menu has been added with the '''Start''', '''Pause''', '''Resume''', and '''Complete''' menu commands.
==Completing Appointments with Paused Lines==
If a user completes an appointment that has lines with the ''Paused'' status on the '''Log''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the system specifies the status of these lines based on the option specified in the '''Status to Set for In Process Items''' box of the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form as follows:[anchor|#_73c8c0ab-99f1-44ac-bbf2-7d2f18b26d28]
*If ''Not Finished'' is selected in the box, on the '''Log''' tab, the status of the paused lines is changed to ''Completed'', and on the '''Details''' tab, the status of the lines related to the paused log lines is changed to ''Not Finished''.
*If ''Completed'' is selected in the box, on the '''Log''' tab, the status of the paused lines is changed to ''Completed'', and on the '''Details''' tab, the status of the lines related to the paused log lines is changed to ''Completed''.
*If ''In Process'' is selected in the box, on the '''Log''' and '''Details''' tabs, the statuses are not changed.

==Creating Time Activities for Staff Members==
In previous versions of Acumatica ERP, if integration with time activities was configured, the time activities for staff member logs were created on the [HelpRoot_FormReference\EP_30_70_00|Employee Time Activities] ([~/?ScreenId=EP307000|EP307000]) form when an appointment was completed. Now the time activities are created for the log lines with the '''Track Time''' check box selected on the '''Log''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form when the lines’ status is changed to ''Completed'' or ''Paused'', even if the status of the appointment is ''In Process''.
==Specifying Calendar Settings for the Paused Appointments==
On the [HelpRoot_FormReference\FS_10_02_00|Calendar Preferences] ([~/?ScreenId=FS100200|FS100200]) form, the user can specify the color of the appointment area and of the text for the paused appointments on the calendar forms, as shown in the following screenshot. The user can also select the '''Hide''' check box to specify that the paused appointments should not be shown on the calendar forms.[anchor|#_a0b630ba-fcce-4a70-95e1-c52fb8004174][anchor|#_c95220fa-9ed1-41cc-bb5f-39109bf1fd59][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_8.png|popup|Calendar settings|250px]
==Pausing and Resuming Appointments in the Mobile App==
In the Acumatica ERP mobile app, it is now also possible to use the actions that have been implemented in the current web version of Acumatica ERP. The '''Pause Appointment''' and '''Resume Appointment''' actions have been added to the menu of the ''Appointments List'' screen, as the following screenshot shows.[anchor|#_b0a089c7-bf7c-4b4a-aa3f-da02c5761725][anchor|#_53b77477-3688-4d34-ad1b-401d7470dd03][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_10.PNG|popup|The Pause Appointment action in the mobile app|150px]
Also, the '''Pause Service''' and '''Resume Service''' actions have been added to the menu of the '''Details''' tab. To perform an action for any number of services or travel items, a user selects the necessary line or lines and then selects the action on the menu (see the following screenshot).[anchor|#_80a4fc67-5ef7-4cc7-ab8a-57dcd015cf8b][anchor|#_6693ea36-ad29-4bdf-92ff-4f6dac9c166b][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_11.PNG|popup|The Pause Service and Resume Service actions in the mobile app|150px]
When the user invokes the action, the ''Appointments Action Pause Travel/Service'' screen appears, on which the user can change the default values and specify additional values that are necessary to perform the action. After the necessary data has been entered, the user processes the action by selecting the '''Process''', '''Process All''', or '''Process All for Me''' action in the menu.]]></column>
			<column name="PlainText"><![CDATA[Services: Ability to Pause and Resume an Appointment and Services In  Acumatica ERP 2020 R2, staff members can put an appointment on pause and resume it later; they can also pause         and resume specific services. For example, the staff member can pause a service for a meal         break and resume it after the meal break, or the staff member can pause an appointment at         the end of the day and resume it the next day. Pausing and Resuming an Appointment In the  Actions  menu of the form toolbar of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form, the  Pause Appointment  and  Resume           Appointment  menu commands have been added, as the following screenshot         shows. The Pause Appointment and Resume Appointment actions When the user invokes the  Pause Appointment  action, the system does         the following (see the screenshot below): Changes the status of the appointment to  Paused On the  Log  tab, changes the status of all lines with the  In             Process  status to  Paused In the  End Time  box on the  Log  tab,           inserts the current time for all paused lines Paused appointment If the status of the appointment is  Paused , the user can do the following: Resume the appointment Start travel Complete travel Complete the appointment To continue working on a paused appointment, the user invokes the  Resume           Appointment  action. The system does the following (see the screenshot         below): Changes the status of the appointment to  In Process On the  Log  tab, changes the status of all lines with the              Paused  status to  Completed On the  Log  tab, for each resumed line, creates a new line with           the  In Process  status and inserts the current time in the  Start             Time  column Resumed appointment If the user does not need to resume work on the appointment, the user can complete the         paused appointment by invoking the  Complete Appointment  action. The         system changes the status of the appointment and the status of the paused lines on the            Log  tab to  Completed . Pausing and Resuming Services On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, on the table toolbar of the  Details  tab, the            Actions  menu has been added with the following menu commands, as         the following screenshot shows: Start  (the former  Start  button, which was           moved from the  Details  tab toolbar to this menu) Pause Resume Complete  (the former  Complete  button,           which was moved from the  Details  tab toolbar to this menu) Cancel  (the former  Cancel  button, which           was moved from the  Details  tab toolbar to this menu) The menu commands of the Actions menu on the Details tab Suppose that a user is performing a service and wants to pause it for some time. To do so,         the user clicks the service to be paused on the  Details  tab and         invokes the  Pause  action on the table toolbar. The system opens the            Perform Action  dialog box with the  Pause  action and the            Service  logging option selected, as the following screenshot shows. The system         populates the dialog box with all staff members assigned to services that have the  In           Process  status. In this dialog box, the user can modify the date and time when the         service is paused and select the unlabeled check boxes in the table for the staff members         for which the service is paused. By default, these check boxes are selected for all staff         members assigned to the selected service. The Perform Action dialog box for pausing a specific service When the user clicks  OK , the system closes the dialog box; on the            Log  tab, it also changes the status of the related log line or         lines to  Paused  and inserts the specified time and date in the  End           Time  and  End Date  columns (see the following         screenshot). A paused service on the Log tab To resume the service, the user clicks the service on the  Details          tab and invokes the  Resume  action on the table toolbar. The system         opens the  Perform Action  dialog box with the  Resume  action and         the  Service  logging option selected, as the following screenshot shows. The system         populates the dialog box with all staff members for whom any services were paused. In this         dialog box, the user can modify the date and time when the service is resumed and select the         unlabeled check boxes in the table for the staff members for which the service is resumed.         By default, these check boxes are selected for all staff members for which the service was         paused. The Perform Action dialog box for resuming a specific service When the user clicks  OK , the system closes the dialog box and does         the following on the  Log  tab: Changes the status of the service log line from  Paused  to  Completed Creates a new log line with the  In Process  status for the service and inserts the           current time in the  Start Time  column Similarly, a travel item can be paused and resumed by using these actions. Also, the user         can pause and resume a non-stock item. In this case, the system does not open            Perform Action  dialog box but modifies the log lines on the            Log  tab as it modifies them for a service.  On the  Staff  tab, the  Start  and            Complete  buttons have been removed. Instead, the            Actions  menu has been added with the  Start ,            Pause ,  Resume , and            Complete  menu commands. Completing Appointments with Paused Lines If a user completes an appointment that has lines with the  Paused  status on the            Log  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form, the system specifies the status of these lines based on the option specified in the            Status to Set for In Process Items  box of the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300)         form as follows: If  Not Finished  is selected in the box, on the  Log  tab,           the status of the paused lines is changed to  Completed , and on the              Details  tab, the status of the lines related to the paused log           lines is changed to  Not Finished . If  Completed  is selected in the box, on the  Log  tab, the           status of the paused lines is changed to  Completed , and on the              Details  tab, the status of the lines related to the paused log           lines is changed to  Completed . If  In Process  is selected in the box, on the  Log  and              Details  tabs, the statuses are not changed. Creating Time Activities for Staff Members In previous versions of  Acumatica ERP, if integration with time activities was configured, the time activities for staff member         logs were created on the   ([~/?ScreenId=EP307000|EP307000]) Employee Time Activities (EP307000)         form when an appointment was completed. Now the time activities are created for the log         lines with the  Track Time  check box selected on the            Log  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form when the lines’ status is changed to  Completed  or  Paused , even if the         status of the appointment is  In Process . Specifying Calendar Settings for the Paused Appointments On the   ([~/?ScreenId=FS100200|FS100200]) Calendar Preferences         (FS100200) form, the user can specify the color of the appointment area and of the text for         the paused appointments on the calendar forms, as shown in the following screenshot. The         user can also select the  Hide  check box to specify that the paused         appointments should not be shown on the calendar forms. Calendar settings Pausing and Resuming Appointments in the Mobile App In the  Acumatica ERP mobile app, it is now also possible to use the actions that have been implemented in the         current web version of  Acumatica ERP. The  Pause Appointment  and  Resume           Appointment  actions have been added to the menu of the  Appointments           List  screen, as the following screenshot shows. The Pause Appointment action in the mobile app Also, the  Pause Service  and  Resume Service          actions have been added to the menu of the  Details  tab. To perform an         action for any number of services or travel items, a user selects the necessary line or         lines and then selects the action on the menu (see the following screenshot). The Pause Service and Resume Service actions in the mobile app When the user invokes the action, the  Appointments Action Pause Travel/Service          screen appears, on which the user can change the default values and specify additional         values that are necessary to perform the action. After the necessary data has been entered,         the user processes the action by selecting the  Process ,            Process All , or  Process All for Me  action in         the menu. ]]></column>
		</row>
		<row PageID="1d212222-46f4-4c13-b1e8-2fa476274206" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="1739a515-11a2-be9f-fad8-71583fecbda0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, it is now possible to create and process multiday appointments (that is, appointments that start on one day and end on another day). This topic describes the changes that have been made to Acumatica ERP forms to make it possible to process these appointments.{br}{TOC}
==Changes on the Appointments Form==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, some elements have been renamed. In the Summary area, the boxes have been renamed as follows (see the screenshot below):[anchor|#_8e3b9955-6cdf-4c54-9c0e-e6fe3585afa8]
*'''Estimated Duration''' to '''Estimated Service Duration'''
* '''Actual Duration''' to '''Actual Service Duration'''

On the '''Settings''' tab, in the '''Scheduled Date and Time''' and '''Actual Date and Time''' sections, the following changes have been made (also see the screenshot below):[anchor|#_0660d80e-e27c-4c68-8128-59c5e27e5702]
*The '''Scheduled Date''' box has been renamed to '''Scheduled Start Date''', and it now shows both the start date and the start time.
*The '''Scheduled End Time''' box has been renamed to '''Scheduled End Date''', and it now shows both the end date and the end time.
*The '''Scheduled Duration''' box has been added; its value is calculated as the difference between '''Scheduled End Date''' and '''Scheduled Start Date''', expressed in hours and minutes.
*The '''Actual Date''' box has been renamed to '''Actual Start Date''', and it now shows both the start date and the start time.
*The '''Actual End Time''' box has been renamed to '''Actual End Date''', and it now shows both the end date and the end time.
*The '''Actual Duration''' box has been added; its value is calculated as the difference between '''Actual End Date''' and '''Actual Start Date''', expressed in hours and minutes.
[anchor|#_505c415c-2b26-4306-a6b5-63d81c6688e4][anchor|#_38de5ce3-ee36-47c0-a9dd-ec38ef152897][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment.png|popup|Changes on the Appointments form|350px]
Similar changes have been made on the '''Summary''' tab of the ''Appointments List'' screen in the mobile app.{br}

In the '''Perform Action''' dialog box, the '''Time''' box has been renamed to '''Date''' and displays the date and time (see the following screenshot).[anchor|#_2e8b8da6-a419-4a93-ac34-b5da5d455287][anchor|#_6d9b4b3d-6c54-4530-9d4d-a7790931ca37][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_4.png|popup|Change in the Perform Action dialog box|250px]
On the '''Log''' tab, the '''Start Date''' and '''End Date''' columns have been added (see the screenshots below), and it is now possible to add services that last more than 24 hours. Similar changes have been made on the '''Log''' tab of the ''Appointments List'' screen in the mobile app.{br}

If on the '''Log''' tab, the '''Track Time''' check box is selected for a line that was in process for multiple days, when the line is completed, the system divides this log line into separate log lines for each particular day. For example, if a service lasts for 52 hours, when the service is completed, the system creates three log lines instead of one that was created when the service was started: one for each day of work. The first screenshot below shows the '''Log''' tab while the item (that is, the service) is in progress, and the second screenshot shows the '''Log''' tab after completion of the 52-hour service. The creation of the separate logs for each day provides the ability to create time activities for multiday appointments.[anchor|#_f20bdb43-4ef4-4443-8f5f-3ba31201b0d5][anchor|#_ced34f3c-f0e7-4677-b1be-54851a7e3324][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_3.png|popup|Time log for an item in process|450px][anchor|#_37634b7f-f74c-4ad2-acda-51b2cbc55b5a][anchor|#_7758e4ee-4cd7-4ae6-8c00-c68ffd17af96][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_5.png|popup|Time log for a completed item |450px]
==Changes on the Service Orders Form==
On the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form, the following changes have been made on the '''Appointments''' tab, as the following screenshot shows:[anchor|#_542b4fb3-54fc-4cd3-a571-d2d56462c4db]
*The '''Scheduled End Date''' column has been added.
*The '''Scheduled Date''' column has been renamed to '''Scheduled Start Date'''.
[anchor|#_352d7b64-f1c8-4da5-ac9e-a01f3c46552b][anchor|#_649e0bc4-4b16-49fd-9d32-7b36ef050db5][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_2.png|popup|Changes on the Service Orders form|300px]
==Changes on the Service Order Types Form==
On the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form, the following changes have been made on the '''Time Behavior''' tab:[anchor|#_936be7c1-d998-49db-a304-39f66ea61cb7]
*If the '''Set Start Time to Appointment''' check box is selected in the '''Appointment Starting Settings''' section, when a user invokes the '''Start Appointment''' action on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, in addition to inserting the current time, the system also inserts the current business date in the '''Actual Start Date''' box on the '''Settings''' tab.
*If the '''Set Start Time to Appointment''' check box is cleared in the '''Appointment Starting Settings''' section, when the user invokes the '''Start Appointment''' action on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system leaves the '''Actual Start Date''' box empty on the '''Settings''' tab.
*If the '''Set End Time to Appointment''' check box is selected in the '''Appointment Completion Settings''' section, when the user invokes the '''End Appointment''' action on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, in addition to inserting the current time, the system also inserts the current business date in the '''Actual End Date''' box on the '''Settings''' tab.
*If the '''Set End Time to Appointment''' check box is cleared in the '''Appointment Completion Settings''' section, when the user invokes the '''End Appointment''' action on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the system leaves the '''Actual End Date''' box empty on the '''Settings''' tab.

==Changes on Calendar and Map Forms==
On the [HelpRoot_FormReference\FS_30_03_00|Calendar Board] ([~/?ScreenId=FS300300|FS300300]), [HelpRoot_FormReference\FS_30_04_00| Staff Calendar Board] ([~/?ScreenId=FS300400|FS300400]), and [HelpRoot_FormReference\FS_30_07_00|Room Calendar Board] ([~/?ScreenId=FS300700|FS300700]) forms, a multiday appointment is shown for each day it takes place. The first screenshot below shows the first day of the two-day appointment for Michal Hampejs in the '''Day''' view on the [HelpRoot_FormReference\FS_30_03_00|Calendar Board] form. The second screenshot shows the second day of the two-day appointment for Michal Hampejs in the '''Day''' view on the [HelpRoot_FormReference\FS_30_03_00|Calendar Board] form. [anchor|#_30c79c26-dc44-4b2a-b58b-7b022d0f1a1b][anchor|#_bbd0587a-1bfb-431f-85ef-ef142d823f7e][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_9.png|popup|The first day of the multiday appointment shown in the Day view on the Calendar Board form|450px][anchor|#_6b72089d-a149-4304-a234-e2d05794ff84][anchor|#_fcc9797c-0148-47fb-8ec9-14ab9e8d993a][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_10.png|popup|The second day of the multiday appointment shown in the Day view on the Calendar Board form|450px]
On the [HelpRoot_FormReference\FS_30_12_00|Appointment History on Map] ([~/?ScreenId=FS301200|FS301200]), [HelpRoot_FormReference\FS_30_09_00|Routes on Map] ([~/?ScreenId=FS300900|FS300900]), [HelpRoot_FormReference\FS_30_11_00|Staff Appointments on Map] ([~/?ScreenId=FS301100|FS301100]), and [HelpRoot_FormReference\FS_30_10_00|Staff Routes on Map] ([~/?ScreenId=FS301000|FS301000]) forms, the following changes have been made (as shown in the following screenshot):[anchor|#_57b34b3c-a317-4188-9c14-ff274cca0c74]
*The appointment tooltip now also shows the start and end date, along with the start and end time.
*The '''Estimated Start Time''' and '''Estimated End Time''' columns have been added to the '''Appointments''' tab, which show start and end date and time, respectively.
*The '''Actual Start Time''' and '''Actual End Time''' columns now also show the start and end date along with the start and end time.
[anchor|#_2153d808-991f-4a9b-a7b8-2cacc7afc604][anchor|#_1a31cbb2-d219-4050-bc3c-9b77b5de8d96][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_6.png|popup|Changes on the Appointment History on Map form|450px]
==Changes on the Clone Appointments Form==
On the [HelpRoot_FormReference\FS_50_02_01| Clone Appointments] ([~/?ScreenId=FS500201|FS500201]) form, the following changes have been made (as shown in the screenshot below):[anchor|#_7da51f2e-529f-461d-b441-c396f0431e56]
*The '''Appointment Details''' section has been added with the following elements:
**'''Scheduled Start Time''', which was formerly called '''Start Time''' and has been moved from the '''Cloning Details''' section
**'''Scheduled Duration''', which is, by default, the same as the scheduled duration of the appointment to be cloned
**'''Override''', which is a check box that the user selects to make the '''Scheduled Duration''' box available for editing
**:If the '''Override''' check box is selected, the scheduled end time of the created appointments is the start time plus the scheduled duration, and the '''Handle Manually''' check box is selected in the '''Scheduled Date and Time''' section of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form. If the '''Override''' check box is cleared, the system copies the schedule duration from the original appointment and the '''Handle Manually''' check box inherits the state of this check box in the original appointment.
*In the '''Cloning Details''' section, the '''End Time''' box is no longer exists.
[anchor|#_7976a328-456a-47e5-936c-8d6bf74e4a96][anchor|#_c5e921c7-5223-4367-8a8a-146b289f1546][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_7.png|popup|Changes on the Clone Appointments form|350px]
If multiple appointments are cloned from the original appointment, the system can create overlapping appointments. For example, if an appointment that lasts 48 hours is cloned for three consecutive days (for instance, Monday, Tuesday, and Wednesday), three 48 hour-long appointments are created. The first one is from Monday to Tuesday, the second one is from Tuesday to Wednesday, and the third one is from Wednesday to Thursday.
==Changes on the Schedule Forms==
On the [HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100]) and [HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600]) forms, the following changes have been made on the '''Details''' tab (as shown in the screenshot below):[anchor|#_924cbf9b-4d7d-47eb-8e03-d94bdfb9d5e2]
*The '''Quantity''' column has been renamed to '''Estimated Quantity'''.
*The '''Equipment ID''' column has been renamed to '''Target Equipment ID'''.
*The '''Estimated Duration''' column has been added to give users the ability to specify and change the duration of a service or non-stock item.
*The '''Estimated Quantity''' column is now unavailable for editing if the line type is ''Service'' and the billing rule is ''Time''. With these line settings, the system calculates the value based on the value in the '''Estimated Duration''' column. For example, if the estimated duration is 30 minutes, the estimated quantity is ''0.5''.

Also, in the Summary area of the forms, the '''Schedule Duration''' box has been added. If the '''Override''' check box (next to this box) is cleared, the box is read-only and is calculated as a sum of all values in the '''Estimated Duration''' column on the '''Details''' tab, as the following screenshot shows. If the check box is selected, the user can edit the value in the '''Schedule Duration''' box.[anchor|#_e57b0efc-f0f0-46bc-925b-2decd775a39e][anchor|#_8c2a6149-c8ee-4911-bf75-876575079561][image:ReleaseNotes/Images/RN_2020_R2_Services_Pausing_Resuming_Appointments_9.png|popup|Changes on the Service Contract Schedules form|450px]
If multiple appointments are scheduled for consecutive days, the system can create overlapping appointments, as it does when multiple appointments are cloned. 
==Changes on the Route Document Details Form==
On the [HelpRoot_FormReference\FS_30_40_00|Route Document Details] ([~/?ScreenId=FS304000|FS304000]) form, the following changes have been made (see the following screenshot):[anchor|#_00893ef4-eb19-4cb5-9c71-22e4147a64fb]
*The '''Date''' box has been renamed to '''Scheduled Start Date''', and now shows the scheduled start time and date.
*The '''Actual Start Time''' box has been renamed to '''Actual Start Date''', and now shows the actual start time and date.
*The '''Actual End Time''' box has been renamed to '''Actual End Date''', and now shows the actual end time and date.
*The '''Actual Duration''' box has been added, which is calculated as the difference between '''Actual End Date''' and '''Actual Start Date'''.
[anchor|#_148e579d-40b4-4610-96e0-e9e1dbfbf6b5][anchor|#_905c51c4-af79-4cb2-ab97-c1799db56e53][image:ReleaseNotes/Images/RN_2020_R2_Services_Multiday_Appointment_8.png|popup|Changes on the Route Document Details Form|450px]
==Changes on Other Forms and in Reports==
On the [HelpRoot_FormReference\FS_50_01_00|Run Appointment Billing] ([~/?ScreenId=FS500100|FS500100]) form, the '''Up to Date''' box can be used to filter the records in the table based on their actual end date. Also, the actual end date is used to calculate the date in the '''Cut-Off Date''' column.{br}

In the [HelpRoot_ReportReference\FS_64_20_00|Appointment] ([~/?ScreenId=FS642000|FS642000]) report, the '''Actual Start Date''' and '''Actual End Date''' elements have been added to show the actual start and end date and time of a particular appointment. In the [HelpRoot_ReportReference\FS_64_10_00|Service Order] ([~/?ScreenId=FS641000|FS641000]) and [HelpRoot_ReportReference\FS_64_25_00|Appointments in Service Order] ([~/?ScreenId=FS642500|FS642500]) reports, the start and end date and time of a particular service order are shown in the '''Start Date''' and '''End Date''' elements. ]]></column>
			<column name="PlainText"><![CDATA[Services: Multiday Appointment In  Acumatica ERP 2020 R2, it is now possible to create and process multiday appointments (that is, appointments         that start on one day and end on another day). This topic describes the changes that have         been made to  Acumatica ERP forms to make it possible to process these appointments. Changes on the Appointments Form On the   ([~/?ScreenId=FS300200|FS300200]) Appointments     (FS300200) form, some elements have been renamed. In the Summary area, the boxes have been     renamed as follows (see the screenshot below): Estimated Duration  to  Estimated Service       Duration Actual Duration  to  Actual Service      Duration On the  Settings  tab, in the  Scheduled Date and      Time  and  Actual Date and Time  sections, the following     changes have been made (also see the screenshot below): The  Scheduled Date  box has been renamed to  Scheduled Start             Date , and it now shows both the start date and the start time. The  Scheduled End Time  box has been renamed to  Scheduled             End Date , and it now shows both the end date and the end time. The  Scheduled Duration  box has been added; its value is calculated as           the difference between  Scheduled End Date  and  Scheduled             Start Date , expressed in hours and minutes. The  Actual Date  box has been renamed to  Actual Start             Date , and it now shows both the start date and the start time. The  Actual End Time  box has been renamed to  Actual End             Date , and it now shows both the end date and the end time. The  Actual Duration  box has been added; its value is calculated as           the difference between  Actual End Date  and  Actual Start             Date , expressed in hours and minutes. Changes on the Appointments form Similar changes have been made on the  Summary  tab of the            Appointments List  screen in the mobile app. In the  Perform Action  dialog box, the  Time  box         has been renamed to  Date  and displays the date and time (see the         following screenshot). Change in the Perform Action dialog box On the  Log  tab, the  Start Date  and            End Date  columns have been added (see the screenshots below), and         it is now possible to add services that last more than 24 hours. Similar changes have been         made on the  Log  tab of the  Appointments List  screen in the         mobile app. If on the  Log  tab, the  Track Time  check box is         selected for a line that was in process for multiple days, when the line is completed, the         system divides this log line into separate log lines for each particular day. For example,         if a service lasts for 52 hours, when the service is completed, the system creates three log         lines instead of one that was created when the service was started: one for each day of         work. The first screenshot below shows the  Log  tab while the item         (that is, the service) is in progress, and the second screenshot shows the            Log  tab after completion of the 52-hour service. The creation of         the separate logs for each day provides the ability to create time activities for multiday         appointments. Time log for an item in process Time log for a completed item  Changes on the Service Orders Form On the   ([~/?ScreenId=FS300100|FS300100]) Service Orders     (FS300100) form, the following changes have been made on the  Appointments      tab, as the following screenshot shows: The  Scheduled End Date  column has been added. The  Scheduled Date  column has been renamed to  Scheduled             Start Date . Changes on the Service Orders form Changes on the Service Order Types Form On the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types     (FS202300) form, the following changes have been made on the  Time      Behavior  tab: If the  Set Start Time to Appointment  check box is selected in the              Appointment Starting Settings  section, when a user invokes the              Start Appointment  action on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)           form, in addition to inserting the current time, the system also inserts the current           business date in the  Actual Start Date  box on the              Settings  tab. If the  Set Start Time to Appointment  check box is cleared in the              Appointment Starting Settings  section, when the user invokes the              Start Appointment  action on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system leaves the  Actual Start Date  box empty on the              Settings  tab. If the  Set End Time to Appointment  check box is selected in the              Appointment Completion Settings  section, when the user invokes           the  End Appointment  action on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, in           addition to inserting the current time, the system also inserts the current business date           in the  Actual End Date  box on the  Settings            tab. If the  Set End Time to Appointment  check box is cleared in the              Appointment Completion Settings  section, when the user invokes           the  End Appointment  action on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the           system leaves the  Actual End Date  box empty on the              Settings  tab. Changes on Calendar and Map Forms On the   ([~/?ScreenId=FS300300|FS300300]) Calendar Board (FS300300),   ([~/?ScreenId=FS300400|FS300400])  Staff Calendar Board (FS300400), and   ([~/?ScreenId=FS300700|FS300700]) Room Calendar Board (FS300700) forms, a multiday appointment is shown         for each day it takes place. The first screenshot below shows the first day of the two-day         appointment for Michal Hampejs in the  Day  view on the   ([~/?ScreenId=FS300300|FS300300]) Calendar Board form. The second screenshot shows the second day of         the two-day appointment for Michal Hampejs in the  Day  view on the             ([~/?ScreenId=FS300300|FS300300]) Calendar Board form.  The first day of the multiday appointment shown in the Day view on the Calendar Board           form The second day of the multiday appointment shown in the Day view on the Calendar           Board form On the   ([~/?ScreenId=FS301200|FS301200]) Appointment History on Map (FS301200),   ([~/?ScreenId=FS300900|FS300900]) Routes on Map (FS300900),   ([~/?ScreenId=FS301100|FS301100]) Staff Appointments on Map (FS301100), and   ([~/?ScreenId=FS301000|FS301000]) Staff Routes on Map (FS301000) forms, the following changes have been         made (as shown in the following screenshot): The appointment tooltip now also shows the start and end date, along with the start and           end time. The  Estimated Start Time  and  Estimated End             Time  columns have been added to the  Appointments  tab,           which show start and end date and time, respectively. The  Actual Start Time  and  Actual End Time            columns now also show the start and end date along with the start and end time. Changes on the Appointment History on Map form Changes on the Clone Appointments Form On the   ([~/?ScreenId=FS500201|FS500201])  Clone Appointments (FS500201) form, the following changes         have been made (as shown in the screenshot below): The  Appointment Details  section has been added with the following             elements: Scheduled Start Time , which was formerly called                  Start Time  and has been moved from the  Cloning                 Details  section Scheduled Duration , which is, by default, the same as the               scheduled duration of the appointment to be cloned Override , which is a check box that the user selects to make               the  Scheduled Duration  box available for editing If the                    Override  check box is selected, the scheduled end time of                 the created appointments is the start time plus the scheduled duration, and the                    Handle Manually  check box is selected in the                    Scheduled Date and Time  section of the   ([~/?ScreenId=FS300200|FS300200]) Appointments                 (FS300200) form. If the  Override  check box is cleared, the                 system copies the schedule duration from the original appointment and the                    Handle Manually  check box inherits the state of this check                 box in the original appointment. In the  Cloning Details  section, the  End             Time  box is no longer exists. Changes on the Clone Appointments form If multiple appointments are cloned from the original appointment, the system can create         overlapping appointments. For example, if an appointment that lasts 48 hours is cloned for         three consecutive days (for instance, Monday, Tuesday, and Wednesday), three 48 hour-long         appointments are created. The first one is from Monday to Tuesday, the second one is from         Tuesday to Wednesday, and the third one is from Wednesday to Thursday. Changes on the Schedule Forms On the   ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules         (FS305100) and   ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules (FS305600)         forms, the following changes have been made on the  Details  tab (as         shown in the screenshot below): The  Quantity  column has been renamed to  Estimated             Quantity . The  Equipment ID  column has been renamed to  Target             Equipment ID . The  Estimated Duration  column has been added to give users the           ability to specify and change the duration of a service or non-stock item. The  Estimated Quantity  column is now unavailable for editing if           the line type is  Service  and the billing rule is  Time . With these line           settings, the system calculates the value based on the value in the  Estimated             Duration  column. For example, if the estimated duration is 30 minutes, the           estimated quantity is  0.5 . Also, in the Summary area of the forms, the  Schedule Duration  box         has been added. If the  Override  check box (next to this box) is         cleared, the box is read-only and is calculated as a sum of all values in the            Estimated Duration  column on the  Details          tab, as the following screenshot shows. If the check box is selected, the user can edit the         value in the  Schedule Duration  box. Changes on the Service Contract Schedules form If multiple appointments are scheduled for consecutive days, the system can create         overlapping appointments, as it does when multiple appointments are cloned.  Changes on the Route Document Details Form On the   ([~/?ScreenId=FS304000|FS304000]) Route Document Details (FS304000) form, the following changes     have been made (see the following screenshot): The  Date  box has been renamed to  Scheduled Start       Date , and now shows the scheduled start time and date. The  Actual Start Time  box has been renamed to  Actual Start       Date , and now shows the actual start time and date. The  Actual End Time  box has been renamed to  Actual End       Date , and now shows the actual end time and date. The  Actual Duration  box has been added, which is calculated as the      difference between  Actual End Date  and  Actual Start       Date . Changes on the Route Document Details Form Changes on Other Forms and in Reports On the   ([~/?ScreenId=FS500100|FS500100]) Run Appointment Billing (FS500100) form, the  Up to           Date  box can be used to filter the records in the table based on their actual         end date. Also, the actual end date is used to calculate the date in the  Cut-Off           Date  column. In the   ([~/?ScreenId=FS642000|FS642000]) Appointment (FS642000) report, the  Actual           Start Date  and  Actual End Date  elements have been added         to show the actual start and end date and time of a particular appointment. In the   ([~/?ScreenId=FS641000|FS641000]) Service Order (FS641000) and   ([~/?ScreenId=FS642500|FS642500]) Appointments in Service Order (FS642500) reports, the start and end date and time         of a particular service order are shown in the  Start Date  and            End Date  elements.  ]]></column>
		</row>
		<row PageID="0c1cd94d-ce12-4488-8df4-fa4b049ffb21" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4688d8c3-604e-41ed-2cbe-c9e8db58d38a" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, users can now view the availability of stock items to be added to an appointment, service order, or contract schedule; they can also add multiple inventory items at once. For these purpose, the '''Add Items''' button has been added to the table toolbar of the '''Details''' tab of the following forms, as the following screenshot shows:[anchor|#_cb97e8d1-f49e-4383-8d30-1dcd47084195]
*[HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100])
*[HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200])
*[HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100])
*[HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600])
[anchor|#_1e1bb218-25e8-486c-932a-95312c570a37][anchor|#_dc8836c7-aebd-4e8e-a840-87b89dda1a9a][image:ReleaseNotes/Images/RN_2020_R2_Services_Adding_Inventory_Items.png|popup|The Add Items button on the Details tab of the Appointments form|350px]
When a user clicks the '''Add Items''' button, the system opens the '''Inventory Lookup''' dialog box (see the screenshot below), in which the user can do the following:[anchor|#_b95b2c99-5623-4977-8242-ea96e0adee94]
*Select stock items, non-stock items, and services to be added to the document, and specify their quantities
*View the stock items’ availability information for various warehouses

The dialog box has a Selection area with elements that the user can use to specify criteria for searching the items in the table, such as line type, inventory ID and name, barcode, warehouse, and item class. The user can also search for items sold after a particular date or for items available at warehouses.[anchor|#_ba21d171-6483-4431-b0a5-7ee139ab29a9][anchor|#_633331a8-411b-4bca-b0a1-512651a62582][image:ReleaseNotes/Images/RN_2020_R2_Services_Adding_Inventory_Items_2.png|popup|The Inventory Lookup dialog box|450px]
When the user finds the item to be added to the document, the user selects the unlabeled check box for this item and, if necessary, changes the default quantity or duration as follows:[anchor|#_16818103-8394-40f3-8c52-7cbba71945ba]
*If the selected item is a non-stock item, stock item, or service with the ''Flat Rate'' or ''None'' billing rule, the user changes the quantity in the '''Qty. Selected''' column. By default, ''1'' is selected in this column.
*If the selected item is a service with the ''Time'' billing rule, the user changes the duration in the '''Duration Selected''' column. By default, the duration specified in the '''Estimated Duration''' box of the [HelpRoot_FormReference\IN_20_20_00|Non-Stock Items] ([~/?ScreenId=IN202000|IN202000]) form for the item is selected in the '''Duration Selected''' column.

The user can then click '''Add''' to add the selected item to the document and continue selecting items in the dialog box. The user can also click '''Add & Close''' after all the items have been selected in the dialog box to add them to the document and close the dialog box.{br}

Because the '''Add Items''' button has been added to the '''Details''' tab, the '''Add Services''' button has been removed. ]]></column>
			<column name="PlainText"><![CDATA[Services: Improvements to Adding Inventory Items In  Acumatica ERP 2020 R2,     users can now view the availability of stock items to be added to an appointment, service order,     or contract schedule; they can also add multiple inventory items at once. For these purpose, the       Add Items  button has been added to the table toolbar of the       Details  tab of the following forms, as the following screenshot     shows:  ([~/?ScreenId=FS300100|FS300100]) Service Orders      (FS300100)  ([~/?ScreenId=FS300200|FS300200]) Appointments      (FS300200)  ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules      (FS305100)  ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules      (FS305600) The Add Items button on the Details tab of the Appointments form When a user clicks the  Add Items  button, the system opens the       Inventory Lookup  dialog box (see the screenshot below), in which the     user can do the following: Select stock items, non-stock items, and services to be added to the document, and specify      their quantities View the stock items’ availability information for various warehouses The dialog box has a Selection area with elements that the user can use to specify criteria     for searching the items in the table, such as line type, inventory ID and name, barcode,     warehouse, and item class. The user can also search for items sold after a particular date or     for items available at warehouses. The Inventory Lookup dialog box When the user finds the item to be added to the document, the user selects the unlabeled check     box for this item and, if necessary, changes the default quantity or duration as follows: If the selected item is a non-stock item, stock item, or service with the  Flat Rate       or  None  billing rule, the user changes the quantity in the  Qty.       Selected  column. By default,  1  is selected in this column. If the selected item is a service with the  Time  billing rule, the user changes the      duration in the  Duration Selected  column. By default, the duration      specified in the  Estimated Duration  box of the   ([~/?ScreenId=IN202000|IN202000]) Non-Stock Items (IN202000) form      for the item is selected in the  Duration Selected  column. The user can then click  Add  to add the selected item to the document     and continue selecting items in the dialog box. The user can also click  Add &      Close  after all the items have been selected in the dialog box to add them to the     document and close the dialog box. Because the  Add Items  button has been added to the       Details  tab, the  Add Services  button has been     removed.  ]]></column>
		</row>
		<row PageID="f6b9c1b8-d3b2-43a6-be68-c37b256e2b89" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4eb363a8-5bcf-2e57-059a-ebdf9bc06ef0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, improvements for the specification of lot or serial numbers in appointments have been made, as described in this topic.{br}{TOC}
==Changes on the Appointments Form==
On the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the new '''Lot/Serial Nbrs''' button has been added to the table toolbar, as the following screenshot shows. By using this button, the user can now specify multiple lot or serial numbers for a line with a quantity of more than one.[anchor|#_7be14e93-e32e-4f40-922e-dbc3f8c46c95][anchor|#_31f9312a-78e9-4528-b78f-a978074a03b8][image:ReleaseNotes/Images/RN_2020_R2_Services_LotSerial_Numbers_2.png|popup|The Lot/Serial Nbrs button on the Details tab|450px]
When the user clicks the line with the inventory item for which the lot or serial numbers must be specified and then clicks the '''Lot/Serial Nbrs''' button, the system opens the '''Lot/Serial Nbrs''' dialog box (shown in the following screenshot), in which the user can specify the lot or serial numbers for the quantity of the item specified in the appointment line. For each unit of the item, the user selects the warehouse and location (if multiple locations are supported in the system) and selects the lot or serial number.[anchor|#_c82c1162-ec64-445b-82e0-57fa8309cbee][anchor|#_b33dc513-9f74-40d4-8c3a-196c3a864983][image:ReleaseNotes/Images/RN_2020_R2_Services_LotSerial_Numbers.png|popup|The Lot/Serial Nbrs dialog box|450px]
When the user clicks '''OK''' in the dialog box, the system specifies one of the following in the '''Lot/Serial Nbr.''' column for the item:[anchor|#ul_adp_4gq_mmb]
*The lot or serial number if the quantity of the item is ''1''
* ''&lt;SPLIT&gt;'' if quantity of the item is more than ''1''
{br}

Similar changes have been made in the mobile app. The '''Lot/Serial Nbrs''' command has been added to the action menu of the ''Details'' screen for appointment lines. When the user invokes this action, the system opens the ''Allocations'' screen, where the user can select the lot or serial numbers for the item.
==Changes on the Service Order Types Form==
On the [HelpRoot_FormReference\FS_20_23_00|Service Order Types] ([~/?ScreenId=FS202300|FS202300]) form, the '''Copy Lot/Serial Nbrs to Appointment from Service Order''' check box has been added to the '''Default Settings''' section of the '''Preferences''' tab (see the following screenshot). If this check box is selected, for an item that was added to a service order of this service order type, the system copies the lot or serial numbers specified on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form to the appointment to which this item relates. If this check box is cleared, the system does not copy the lot or serial numbers from the service order to the appointment. {br}

By default, for newly created service order types, this check box is selected.[anchor|#_a0e7188d-7e1c-4b04-aaaf-68a002f03704][anchor|#_e992691b-0d44-40a6-8270-1ec03051c38f][image:ReleaseNotes/Images/RN_2020_R2_Services_LotSerial_Numbers_3.png|popup|The new check box on the Service Order Types form|350px]
This setting is available only for service order types for which the ''Sales Order'', ''SO Invoice'', or ''Project Transactions'' option is selected in the '''Generated Billing Documents''' box.]]></column>
			<column name="PlainText"><![CDATA[Services: Improvements to the Specification of Lot and Serial Numbers in     Appointments In  Acumatica ERP 2020 R2, improvements for the specification of lot or serial numbers in appointments have been         made, as described in this topic. Changes on the Appointments Form On the  Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form, the new  Lot/Serial Nbrs  button has been added to         the table toolbar, as the following screenshot shows. By using this button, the user can now         specify multiple lot or serial numbers for a line with a quantity of more than one. The Lot/Serial Nbrs button on the Details tab When the user clicks the line with the inventory item for which the lot or serial numbers         must be specified and then clicks the  Lot/Serial Nbrs  button, the         system opens the  Lot/Serial Nbrs  dialog box (shown in the following         screenshot), in which the user can specify the lot or serial numbers for the quantity of the         item specified in the appointment line. For each unit of the item, the user selects the         warehouse and location (if multiple locations are supported in the system) and selects the         lot or serial number. The Lot/Serial Nbrs dialog box When the user clicks  OK  in the dialog box, the system specifies one         of the following in the  Lot/Serial Nbr.  column for the item: The lot or serial number if the quantity of the item is  1 <SPLIT>  if quantity of the item is more than  1 Similar changes have been made in the mobile app. The  Lot/Serial           Nbrs  command has been added to the action menu of the  Details  screen         for appointment lines. When the user invokes this action, the system opens the            Allocations  screen, where the user can select the lot or serial numbers for the         item. Changes on the Service Order Types Form On the   ([~/?ScreenId=FS202300|FS202300]) Service Order Types (FS202300) form, the  Copy           Lot/Serial Nbrs to Appointment from Service Order  check box has been added to         the  Default Settings  section of the            Preferences  tab (see the following screenshot). If this check box         is selected, for an item that was added to a service order of this service order type, the         system copies the lot or serial numbers specified on the   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300200) form to the appointment to which this         item relates. If this check box is cleared, the system does not copy the lot or serial         numbers from the service order to the appointment.  By default, for newly created service order types, this check box is selected. The new check box on the Service Order Types form This setting is available only for service order types for which the  Sales Order ,            SO Invoice , or  Project Transactions  option is selected in the            Generated Billing Documents  box. ]]></column>
		</row>
		<row PageID="acdc49c1-2a53-4558-8040-43fa20bdf7ed" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c3586617-1ef9-e0a5-e2c6-08d1dc022413" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, users can now specify on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form that particular items need to be purchased; they can also create purchase orders from appointments. This topic describes the changes that have been made in the system.{br}{TOC}
==Ability to Specify that a Purchase Is Required on the Appointments Form==
To give users the ability to create a purchase order from an appointment, the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form has been changed. The '''Mark for PO''' check box on the '''Details''' tab is now editable (in previous versions of the product, this check box was read-only and its state was copied from the related service order) so that a user can select it to specify that the item has to be purchased. {br}

Also, the following new columns have been added to the '''Details''' tab, as shown in the screenshot below:[anchor|#_4d39a972-ec73-4ba7-b6e6-aa96569ebe6c]
*'''PO Source''': An indicator of whether the item is required for the currently selected appointment or for a follow-up appointment. The user selects one of the following options:
**''Purchase to Service Order'': The item is not used during the current appointment; it will instead be used at a follow-up appointment of the same service order. The purchase order can be created only for the service order on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form.
**''Purchase to Appointment'': The item is going to be used during the current appointment. The purchase order can be created for the appointment on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form or for the related service order on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] form.
*'''Vendor ID''': The vendor that provides the item. By default, the system inserts the default vendor specified on the '''Vendor Details''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form for the item.
*'''Vendor Location ID''': The location of the vendor that provides the item. By default, the system inserts the location specified on the '''Vendor Details''' tab of the [HelpRoot_FormReference\IN_20_25_00|Stock Items] ([~/?ScreenId=IN202500|IN202500]) form for the default vendor of the item.
*'''PO Number''': The number of the purchase order related to the item. The system fills in this box when the purchase order is created and saved on the [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form.
*'''PO Status''': The status of the purchase order related to the item.
[anchor|#_0a9d757f-8b9f-4bff-8e6a-5c9835bd98eb][anchor|#_722c8d50-bb06-4293-b288-40e466b3780e][image:ReleaseNotes/Images/RN_2020_R2_Services_PO_from_Appointment_7.png|popup|New columns on the Details tab of the Appointments form|450px]
==A Purchase for a Follow-Up Appointment==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form for an appointment, to specify that a purchase of an item is necessary for a follow-up appointment, the user adds the item to the '''Details''' tab, selects ''Purchase to Service Order'' in the '''PO Source''' column of the row, and selects the check box in the '''Mark for PO''' column of the row. The system inserts the ''Requiring Purchase'' status for the line (as shown in the following screenshot) and selects the '''Mark for PO''' check box for the item in the related service order on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form. [anchor|#_1d12b36a-7312-4db3-9b24-bec0f5c8d3be][anchor|#_e30aa90f-b0d2-4a10-b8ec-dc0354078eda][image:ReleaseNotes/Images/RN_2020_R2_Services_PO_from_Appointment_4.png|popup|The Requiring Purchase status on the Details tab of the Appointments form|450px]
The ''Requiring Purchase'' status indicates that the item the item is neither used for the appointment nor billed as part of it and that a purchase is required for the service order; thus, a follow-up appointment is necessary.{br}

Once the current appointment is saved with these settings, the user can create the purchase order from the service order. When the purchase receipt with the item is released on the [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form, the system inserts the ''Requiring Scheduling'' status for the related line in the service order and clears the '''Mark for PO''' check box in both the service order and the appointment. The new appointment with this item should be created on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form.
==A Purchase for the Selected Appointment==
To specify that a purchase of an item is necessary for the appointment that is currently selected on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the user adds the item to the '''Details''' tab, selects ''Purchase to Appointment'' in the '''PO Source''' column of the row, and selects the check box in the '''Mark for PO''' column of the row. The system inserts the ''Waiting for Purchased Items'' status for the line (as shown in the following screenshot) and selects the '''Mark for PO''' check box for the item in the related service order on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form. [anchor|#_d6fdf377-d340-472e-9e0f-b86050bbd370][anchor|#_195661ba-57b7-4135-a2b6-39d5b02dec87][image:ReleaseNotes/Images/RN_2020_R2_Services_PO_from_Appointment_5.png|popup|The Waiting for Purchased Items status on the Details tab of the Appointments form|450px]
The ''Waiting for Purchased Items'' status indicates that the item is going to be used during the appointment but it has not been received yet. The purchase order for this item can be created from either the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form or the [HelpRoot_FormReference\FS_30_02_00|Appointments] form. To create the purchase order from the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the user clicks '''Actions''' > '''Create Purchase Order''' on the form toolbar, as shown in the following screenshot.[anchor|#_193e9030-e830-42e5-acf3-9f2d401066a7][anchor|#_3c9c0f72-57a6-4171-be3b-73dc80323bef][image:ReleaseNotes/Images/RN_2020_R2_Services_PO_from_Appointment_6.png|popup|The Create Purchase Order menu command on the Appointments form|450px]
When the user invokes this action, the system opens the [HelpRoot_FormReference\PO_50_50_00|Create Purchase Orders] ([~/?ScreenId=PO505000|PO505000]) form with the lines of the appointment for which the '''Mark for PO''' check box is selected. The user can then create and process a purchase order from this form.{br}

A line with the ''Waiting for Purchased Items'' status cannot be started and completed until the status is changed to ''Not Started'' when the item is received.
==Changes in the Mobile App==
The '''Purchase Order''' section has been added to the ''Details'' screen of appointment, as shown in the following screenshot. The section contains the following boxes:[anchor|#_8478b2f3-8197-4bc7-a127-eb4f6e05e4bc]
*'''Mark for PO'''
* '''PO Source'''
* '''Vendor ID'''
* '''Vendor Location ID'''
* '''PO Nbr.'''
[anchor|#_54c649fb-97c8-43cc-b418-e8a21179dee2][anchor|#_d70c49e8-8601-4ae2-aa60-e5a5ceb482ee][image:ReleaseNotes/Images/RN_2020_R2_Services_PO_from_Appointment_8.jpg|popup|The Purchase Order section of the Details screen|100px]]]></column>
			<column name="PlainText"><![CDATA[Services: Creation of Purchase Orders from Appointments In  Acumatica ERP 2020 R2,     users can now specify on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form that     particular items need to be purchased; they can also create purchase orders from appointments.     This topic describes the changes that have been made in the system. Ability to Specify that a Purchase Is Required on the Appointments Form To give users the ability to create a purchase order from an appointment, the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form has been changed. The  Mark      for PO  check box on the  Details  tab is now editable (in     previous versions of the product, this check box was read-only and its state was copied from the     related service order) so that a user can select it to specify that the item has to be     purchased.  Also, the following new columns have been added to the  Details  tab, as     shown in the screenshot below: PO Source : An indicator of whether the item is required for the      currently selected appointment or for a follow-up appointment. The user selects one of the      following options: Purchase to Service Order : The item is not used during the current appointment; it        will instead be used at a follow-up appointment of the same service order. The purchase order        can be created only for the service order on the   ([~/?ScreenId=FS300100|FS300100]) Service Orders        (FS300100) form. Purchase to Appointment : The item is going to be used during the current        appointment. The purchase order can be created for the appointment on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form or for the related service order on        the   ([~/?ScreenId=FS300100|FS300100]) Service Orders form. Vendor ID : The vendor that provides the item. By default, the system      inserts the default vendor specified on the  Vendor Details  tab of the         ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500)      form for the item. Vendor Location ID : The location of the vendor that provides the      item. By default, the system inserts the location specified on the  Vendor       Details  tab of the   ([~/?ScreenId=IN202500|IN202500]) Stock Items (IN202500) form      for the default vendor of the item. PO Number : The number of the purchase order related to the item. The      system fills in this box when the purchase order is created and saved on the   ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000)      form. PO Status : The status of the purchase order related to the item. New columns on the Details tab of the Appointments form A Purchase for a Follow-Up Appointment On the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form for an appointment, to     specify that a purchase of an item is necessary for a follow-up appointment, the user adds the     item to the  Details  tab, selects  Purchase to Service Order  in the       PO Source  column of the row, and selects the check box in the       Mark for PO  column of the row. The system inserts the  Requiring      Purchase  status for the line (as shown in the following screenshot) and selects the       Mark for PO  check box for the item in the related service order on the        ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) form.  The Requiring Purchase status on the Details tab of the Appointments form The  Requiring Purchase  status indicates that the item the item is neither used for the     appointment nor billed as part of it and that a purchase is required for the service order;     thus, a follow-up appointment is necessary. Once the current appointment is saved with these settings, the user can create the purchase     order from the service order. When the purchase receipt with the item is released on the   ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000) form,     the system inserts the  Requiring Scheduling  status for the related line in the service     order and clears the  Mark for PO  check box in both the service order and     the appointment. The new appointment with this item should be created on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form. A Purchase for the Selected Appointment To specify that a purchase of an item is necessary for the appointment that is currently     selected on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form, the user adds the     item to the  Details  tab, selects  Purchase to Appointment  in the       PO Source  column of the row, and selects the check box in the       Mark for PO  column of the row. The system inserts the  Waiting for      Purchased Items  status for the line (as shown in the following screenshot) and selects the       Mark for PO  check box for the item in the related service order on the        ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) form.  The Waiting for Purchased Items status on the Details tab of the Appointments      form The  Waiting for Purchased Items  status indicates that the item is going to be used     during the appointment but it has not been received yet. The purchase order for this item can be     created from either the   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) form or the        ([~/?ScreenId=FS300200|FS300200]) Appointments form. To create the purchase order from the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the user clicks  Actions Create Purchase Order  on the form toolbar, as shown in the following screenshot. The Create Purchase Order menu command on the Appointments form When the user invokes this action, the system opens the   ([~/?ScreenId=PO505000|PO505000]) Create Purchase Orders (PO505000) form     with the lines of the appointment for which the  Mark for PO  check box is     selected. The user can then create and process a purchase order from this form. A line with the  Waiting for Purchased Items  status cannot be started and completed     until the status is changed to  Not Started  when the item is received. Changes in the Mobile App The  Purchase Order  section has been added to the  Details  screen     of appointment, as shown in the following screenshot. The section contains the following     boxes: Mark for PO PO Source Vendor ID Vendor Location ID PO Nbr. The Purchase Order section of the Details screen ]]></column>
		</row>
		<row PageID="dcaeb2fb-e75a-4a04-91f0-a093470059a9" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c60574ff-b754-7636-dca5-bc4db486cb99" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, it is now possible to bill a staff member&rsquo;s expenses with appointments and service orders. On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms, some improvements have been made to give users the ability to create an expense receipt linked to a service order or appointment and bill it with the service order or appointment. This topic describes the changes made in the system to implement this functionality.((({S:Warn}The functionality is available only if the ''Expense Management'' feature is enabled on the [HelpRoot_FormReference\CS_10_00_00|Enable/Disable Features] ([~/?ScreenId=CS100000|CS100000]) form.
))){br}{TOC}
==Ability to Create an Expense Receipt from Appointment or Service Order==
On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms, a user can now initiate the creation of an expense receipt related to the document. For this purpose, the '''Create Expense Receipt''' button has been added to the table toolbar of the '''Details''' tab on both forms. (The following screenshot shows this button on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form.)[anchor|#_d8d13b89-197c-4691-9994-2e05ef39dfd5][anchor|#_2458d3f7-4637-4b3c-9fdb-55779156f382][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts.png|popup|The Expense Receipt button on the Appointments form|450px]
When the user clicks this button, the system opens the [HelpRoot_FormReference\EP_30_10_20|Expense Receipt] ([~/?ScreenId=EP301020|EP301020]) form with the appropriate settings of the appointment (such as date and customer) inserted into the new expense receipt. The system also fills in the new '''Field Service Details''' section on the '''Receipt Details '''tab of the [HelpRoot_FormReference\EP_30_10_20|Expense Receipt] form (shown in the screenshot below) as follows:[anchor|#_3e93dd65-c05f-473d-a3a1-366e126a5e33]
*'''Doc. Type''': The type of the document for which this expense receipt has been created. Depending on the form the expense receipt has been created from, the system inserts ''Appointment'' or ''Service Order''.
*'''Reference Nbr.''': The applicable service order type and the reference number of the appointment or service order for which this expense receipt has been created.

The user then specifies the details of the expense receipt, such as the expense item (that is, the non-stock item of the particular expense, such as transportation) and description, and saves the expense receipt. The user can also select the '''Billable on Field Service''' check box (also shown in the following screenshot) to specify that the expense item should be billed along with the appointment or service order. If the expense receipt should be billed separately, the user leaves this check box cleared.[anchor|#_0a05c932-5777-44af-8b45-7192703ca5e5][anchor|#_5436fa90-e1d7-486a-8850-d1593a6b2ae9][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts2.png|popup|The Field Service Details section on the Expense Receipt form|400px]
The system adds a line with the expense item (from the expense receipt) on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] or [HelpRoot_FormReference\FS_30_01_00|Service Orders] form for the associated appointment or service order, respectively.((({S:Warn}When an expense receipt is saved for the service order or appointment, the system always creates a new line in the document from which the expense receipt was created regardless of whether the same item has already been added to the document. For example, suppose that the user has already added the ''MEAL'' item to the appointment on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, and then created the expense receipt with the'' MEAL'' expense item. In the '''Field Service Details '''section of the '''Receipt Details''' tab of the form, the user has selected the ''Appointment'' document type and the reference number of the appointment. When the expense receipt is saved, the system adds a new line with the ''MEAL'' item to the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form for the appointment; thus, the appointment contains two lines with this item.
)))
==Ability to Link an Expense Receipt to an Appointment or a Service Order==
A user can now associate an existing expense receipt with an appointment or a service order. To do so, while viewing the existing expense receipt on the [HelpRoot_FormReference\EP_30_10_20|Expense Receipt] ([~/?ScreenId=EP301020|EP301020]) form, the user selects the document type (''Appointment'' or ''Service Order'') with which the expense receipt is associated in the '''Doc. Type''' box of the '''Field Service Details''' section ('''Receipt Details''' tab). The user then selects the document from the list in the '''Reference Nbr.''' box. If the expense item is going to be billed along with the appointment, the user selects the''' Billable on Field Service''' check box. If the expense receipt is going to be billed separately, the user leaves this check box cleared. The user then saves the expense receipt. The system adds the line with the expense item from the expense receipt on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) or [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form.((({S:Warn}The system does not support the linking of an item in an existing expense receipt to an item in the existing appointment or service order. For example, if the user has created an expense receipt with the ''MEAL'' item on the [HelpRoot_FormReference\EP_30_10_20|Expense Receipt] form and linked this expense receipt to an appointment that contains the ''MEAL'' item on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form. The system adds the second '' MEAL'' item to the appointment and the appointment contains two lines with this item.
)))
==Changes to the Billable Column==
In previous versions of Acumatica ERP, on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms, items for which the check box in the '''Billable''' column of the '''Details''' tab was cleared were actually billed with a price of zero. That is, the items were treated as free items.{br}

 In Acumatica ERP 2020 R2, the previous '''Billable''' column has been renamed to '''Free Item''' (see the screenshot below). {br}

For each line for which the '''Free Item''' check box is selected, the system inserts ''0.00'' in the following columns:''' Unit Price''', '''Discount Percent''', '''Discount Amount''', and '''Ext. Price'''. {br}

On the '''Details''' tab, the new '''Billable''' column has been added on the [HelpRoot_FormReference\FS_30_02_00|Appointments] and [HelpRoot_FormReference\FS_30_01_00|Service Orders] forms (see the following screenshot). If this check box is cleared, the item is not included in the related billing document, but its cost is specified in the related appointment on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form. [anchor|#_0ffd6178-42d8-4b34-8908-2bf808b209bd][anchor|#_c48b1972-095d-4840-9266-d2c4c42f6efc][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_3.png|popup|The Free Item and Billable columns on the Service Orders form|450px]((({S:Warn}[anchor|#_f4d7ff97-05f5-43c8-bdd3-ad294d4a8c98]
*Because the inventory is updated when the billing document is released, for inventory items, the '''Billable''' check box is selected and read-only. 
*If the document is associated with a project, for the items related to expense receipts, the '''Billable''' check box is cleared and read-only.
)))
==Synchronization Between the Expense Receipt and the Related Appointment or Service Order==
The users will not be able to change the details of the expense receipt item on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) or [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form. To change the details, they have to open the expense receipt on the [HelpRoot_FormReference\EP_30_10_20|Expense Receipt] ([~/?ScreenId=EP301020|EP301020]) form and make the necessary correction there. The system updates the related appointment or service order with the changes on the expense receipt.{br}

It is possible to add an expense receipt to an appointment or a service order with the ''Closed'' status. In this case, the item of the expense receipt has the '''Billable''' check box cleared on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] or [HelpRoot_FormReference\FS_30_01_00|Service Orders] form in the related appointment or service order; the item affects only the cost of the appointment or service order but is not reflected in the billing document. ((({S:Warn}In this case, to bill the customer for the expense item, a user could create a billing document for the expense receipt or delete the billing document for the appointment or service order, select the '''Billable''' check box for the item on the '''Details''' tab, and generate the billing document again.
)))
==Changes to the Cost-Related Columns==
In previous versions of Acumatica ERP, on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms, the '''Unit Cost''' column of the '''Details''' tab showed a value only if the '''Mark for PO''' check box was selected for the line. Now the '''Unit Cost''' column shows the cost of the item and if the '''Mark for PO''' check box is selected for the line, the user can edit the cost of the item in this column. ((({S:Warn}The unit cost continues to work as it did in previous versions—that is, the modified cost will be used for the purchase order when the item is ordered, but after the item is received and billed, the actual cost will cause the system to update the appointment or service order.
)))
On the''' Details''' tab, the new '''Ext. Cost''' column has been added, as the following screenshot shows. The system calculates the value in this column as '''Unit Cost''' multiplied by '''Actual Quantity''' on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, and as '''Unit Cost''' multiplied by '''Estimated Quantity''' on the [HelpRoot_FormReference\FS_30_01_00|Service Orders] form.[anchor|#_b63e662e-dd9b-4469-84b3-f649f15e4f8b][anchor|#_4f89eb71-6fd3-4ceb-8842-0957b32dc1a0][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_4.png|popup|The Ext. Cost column on the Details tab of the Appointments form|450px]
On the '''Profitability''' tab on the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the following changes have been made (see the following screenshot):[anchor|#_f34e5b53-c03c-44cd-9005-3d2715676d92]
*The new '''Estimated Cost''' column has been added; its value is calculated as '''Unit Cost''' multiplied by '''Estimated Quantity'''.
*The '''Total Cost''' column has been renamed to '''Ext. Cost''', and the value in the column is now calculated as '''Unit Cost''' multiplied by '''Actual Quantity'''.
[anchor|#_667716de-16fb-4d8f-b7f4-281909098f4b][anchor|#_b0eece6b-aae5-41b6-9e65-c2a8bb80f936][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_5.png|popup|Columns on the Profitability tab|450px]
In the Summary area of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the '''Cost Total''' box now shows the actual cost. That is, it does not show the estimated cost for an appointment with the ''Not Started'' status.{br}

On the '''Totals''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form, the '''Estimated Cost Total''' box has been added, as shown in the following screenshot. Its value is calculated as a sum of the values in the '''Estimated Cost''' column on the '''Profitability''' tab.[anchor|#_83118251-309f-4bf3-afc0-e6886b9471b2][anchor|#_5d69dd4e-666a-4bbb-b0d5-9e6076d99cea][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_6.png|popup|The Estimated Cost Total box on the Totals tab|450px]
==Changes on Columns with Information on Related Documents==
In previous versions of Acumatica ERP, on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, the '''Details''' tab had the '''Sales Order Ref. Nbr.''' column, which contained the link to the sales order from which the line was added. Because now lines can also be added to this tab from expense receipts, the following changes have been made on the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] and [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) forms: [anchor|#_3e392dec-bff0-4dff-b042-5e5efdbdaf6c]
*The new''' Related Doc. Type''' column has been added. The system specifies the type of the document to which the item is related, which is one of the following: ''Sales Order'' or ''Expense Receipt''.
*The new '''Related Doc. Nbr.''' column has been added. It contains a link with the reference number of the document to which the item is related.
[anchor|#_f0f7a64a-62ec-4644-8939-eab200e9a34b][anchor|#_45f366cd-0337-4a30-9155-9ca3eea886ce][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_7.png|popup|The Related Doc. Type and Related Doc. Nbr. columns on the Appointments form|450px]
The '''Sales Order Ref. Nbr.''' column has been removed from the '''Details''' tab of the [HelpRoot_FormReference\FS_30_02_00|Appointments] form.
==Changes in the Mobile App==
On the '''Details''' tab of the ''Appointments'' screen, the following changes have been made:[anchor|#_c2b044b6-e4b7-432a-b2b4-cb0eecd23b0a]
*The '''Create Expense Receipt''' action has been added to the Actions menu to give users the ability to create expense receipts related to an appointment from the mobile app, as the following screenshot shows.[anchor|#_84a85038-2e89-436a-9c33-53248852ea04][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_8.jpg|popup|The Create Expense Receipt action|100px]
*The '''Billable''',''' Free Items''', '''Unit Cost''', and '''Ext. Cost''' boxes have been added to the '''Billing Information''' section, as shown in the following screenshot.[anchor|#_7254ceba-0d95-4639-8eab-89aea44b36ce][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_9.jpg|popup|New boxes in the Billing Information section|100px]
*The new '''Related Document''' section has been added with the '''Related Doc. Type''' and '''Related Doc. Nbr.''' boxes. A user can now open the related document by tapping '''View Linked Document''' (see the following screenshot).[anchor|#_3b74caf9-f9a4-4913-a0d2-1b66b4530124][image:ReleaseNotes/Images/RN_2020_R2_Services_Expense_Receipts_10.jpg|popup|The Related Document section|100px]

On the '''Total''' tab, the '''Estimated Cost Total''' and '''Cost Total''' boxes have been added to the '''Appointment Totals'''.]]></column>
			<column name="PlainText"><![CDATA[Services: Expense Receipts in Appointments and Service Orders In  Acumatica ERP 2020 R2, it is now possible to bill a staff member's expenses with appointments and service         orders. On the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) and   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) forms, some improvements have been made         to give users the ability to create an expense receipt linked to a service order or         appointment and bill it with the service order or appointment. This topic describes the         changes made in the system to implement this functionality. The functionality is available only if the  Expense Management  feature is enabled         on the   ([~/?ScreenId=CS100000|CS100000]) Enable/Disable Features         (CS100000) form. Ability to Create an Expense Receipt from Appointment or Service Order On the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) and   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) forms, a user can now initiate the         creation of an expense receipt related to the document. For this purpose, the            Create Expense Receipt  button has been added to the table toolbar         of the  Details  tab on both forms. (The following screenshot shows         this button on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form.) The Expense Receipt button on the Appointments form When the user clicks this button, the system opens the   ([~/?ScreenId=EP301020|EP301020]) Expense Receipt (EP301020)         form with the appropriate settings of the appointment (such as date and customer) inserted         into the new expense receipt. The system also fills in the new  Field Service           Details  section on the  Receipt Details  tab of the   ([~/?ScreenId=EP301020|EP301020]) Expense Receipt form (shown         in the screenshot below) as follows: Doc. Type : The type of the document for which this expense           receipt has been created. Depending on the form the expense receipt has been created from,           the system inserts  Appointment  or  Service Order . Reference Nbr. : The applicable service order type and the           reference number of the appointment or service order for which this expense receipt has           been created. The user then specifies the details of the expense receipt, such as the expense item (that         is, the non-stock item of the particular expense, such as transportation) and description,         and saves the expense receipt. The user can also select the  Billable on Field           Service  check box (also shown in the following screenshot) to specify that the         expense item should be billed along with the appointment or service order. If the expense         receipt should be billed separately, the user leaves this check box cleared. The Field Service Details section on the Expense Receipt form The system adds a line with the expense item (from the expense receipt) on the            Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments or             ([~/?ScreenId=FS300100|FS300100]) Service Orders form for the associated appointment or         service order, respectively. When an expense receipt is saved for the service order or appointment, the system always         creates a new line in the document from which the expense receipt was created regardless of         whether the same item has already been added to the document. For example, suppose that the         user has already added the  MEAL  item to the appointment on the            Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments         form, and then created the expense receipt with the  MEAL  expense item. In the            Field Service Details  section of the  Receipt           Details  tab of the form, the user has selected the  Appointment  document         type and the reference number of the appointment. When the expense receipt is saved, the         system adds a new line with the  MEAL  item to the  Details  tab         of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form for the appointment; thus, the         appointment contains two lines with this item. Ability to Link an Expense Receipt to an Appointment or a Service Order A user can now associate an existing expense receipt with an appointment or a service         order. To do so, while viewing the existing expense receipt on the   ([~/?ScreenId=EP301020|EP301020]) Expense Receipt (EP301020)         form, the user selects the document type ( Appointment  or  Service Order ) with         which the expense receipt is associated in the  Doc. Type  box of the            Field Service Details  section ( Receipt           Details  tab). The user then selects the document from the list in the            Reference Nbr.  box. If the expense item is going to be billed along         with the appointment, the user selects the  Billable on Field Service          check box. If the expense receipt is going to be billed separately, the user leaves this         check box cleared. The user then saves the expense receipt. The system adds the line with         the expense item from the expense receipt on the  Details  tab of the             ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) or   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) form. The system does not support the linking of an item in an existing expense receipt to an         item in the existing appointment or service order. For example, if the user has created an         expense receipt with the  MEAL  item on the   ([~/?ScreenId=EP301020|EP301020]) Expense Receipt form and         linked this expense receipt to an appointment that contains the  MEAL  item on the             ([~/?ScreenId=FS300200|FS300200]) Appointments form. The system adds the second   MEAL          item to the appointment and the appointment contains two lines with this item. Changes to the Billable Column In previous versions of  Acumatica ERP, on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) and   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) forms, items for which the check box in         the  Billable  column of the  Details  tab was         cleared were actually billed with a price of zero. That is, the items were treated as free         items.  In  Acumatica ERP 2020 R2, the previous  Billable  column has been renamed to  Free           Item  (see the screenshot below).  For each line for which the  Free Item  check box is selected, the         system inserts  0.00  in the following columns:  Unit Price ,            Discount Percent ,  Discount Amount , and            Ext. Price .  On the  Details  tab, the new  Billable  column         has been added on the   ([~/?ScreenId=FS300200|FS300200]) Appointments and   ([~/?ScreenId=FS300100|FS300100]) Service Orders forms (see the following screenshot). If this check         box is cleared, the item is not included in the related billing document, but its cost is         specified in the related appointment on the   ([~/?ScreenId=FS300200|FS300200]) Appointments         form.  The Free Item and Billable columns on the Service Orders form Because the inventory is updated when the billing document is released, for inventory             items, the  Billable  check box is selected and read-only.  If the document is associated with a project, for the items related to expense             receipts, the  Billable  check box is cleared and read-only. Synchronization Between the Expense Receipt and the Related Appointment or Service         Order The users will not be able to change the details of the expense receipt item on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) or   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) form. To change the details, they have         to open the expense receipt on the   ([~/?ScreenId=EP301020|EP301020]) Expense Receipt (EP301020)         form and make the necessary correction there. The system updates the related appointment or         service order with the changes on the expense receipt. It is possible to add an expense receipt to an appointment or a service order with the            Closed  status. In this case, the item of the expense receipt has the            Billable  check box cleared on the  Details          tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments or   ([~/?ScreenId=FS300100|FS300100]) Service Orders form in the related appointment or service order;         the item affects only the cost of the appointment or service order but is not reflected in         the billing document.  In this case, to bill the customer for the expense item, a user could create a billing         document for the expense receipt or delete the billing document for the appointment or         service order, select the  Billable  check box for the item on the            Details  tab, and generate the billing document again. Changes to the Cost-Related Columns In previous versions of  Acumatica ERP, on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) and   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) forms, the  Unit           Cost  column of the  Details  tab showed a value only if         the  Mark for PO  check box was selected for the line. Now the            Unit Cost  column shows the cost of the item and if the            Mark for PO  check box is selected for the line, the user can edit         the cost of the item in this column.  The unit cost continues to work as it did in previous versions—that is, the         modified cost will be used for the purchase order when the item is ordered, but after the         item is received and billed, the actual cost will cause the system to update the appointment         or service order. On the  Details  tab, the new  Ext. Cost  column         has been added, as the following screenshot shows. The system calculates the value in this         column as  Unit Cost  multiplied by  Actual           Quantity  on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, and as            Unit Cost  multiplied by  Estimated Quantity          on the   ([~/?ScreenId=FS300100|FS300100]) Service Orders form. The Ext. Cost column on the Details tab of the Appointments form On the  Profitability  tab on the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the following changes have been made (see the         following screenshot): The new  Estimated Cost  column has been added; its value is           calculated as  Unit Cost  multiplied by  Estimated             Quantity . The  Total Cost  column has been renamed to  Ext.             Cost , and the value in the column is now calculated as  Unit             Cost  multiplied by  Actual Quantity . Columns on the Profitability tab In the Summary area of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the            Cost Total  box now shows the actual cost. That is, it does not show         the estimated cost for an appointment with the  Not Started  status. On the  Totals  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments form, the  Estimated Cost Total  box has been added, as shown in the         following screenshot. Its value is calculated as a sum of the values in the            Estimated Cost  column on the  Profitability          tab. The Estimated Cost Total box on the Totals tab Changes on Columns with Information on Related Documents In previous versions of  Acumatica ERP, on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form, the            Details  tab had the  Sales Order Ref. Nbr.          column, which contained the link to the sales order from which the line was added. Because         now lines can also be added to this tab from expense receipts, the following changes have         been made on the  Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments and   ([~/?ScreenId=FS300100|FS300100]) Service Orders         (FS300100) forms:  The new  Related Doc. Type  column has been added. The system           specifies the type of the document to which the item is related, which is one of the           following:  Sales Order  or  Expense Receipt . The new  Related Doc. Nbr.  column has been added. It contains a           link with the reference number of the document to which the item is related. The Related Doc. Type and Related Doc. Nbr. columns on the Appointments form The  Sales Order Ref. Nbr.  column has been removed from the            Details  tab of the   ([~/?ScreenId=FS300200|FS300200]) Appointments         form. Changes in the Mobile App On the  Details  tab of the  Appointments  screen, the following         changes have been made: The  Create Expense Receipt  action has been added to the Actions           menu to give users the ability to create expense receipts related to an appointment from           the mobile app, as the following screenshot shows. The Create Expense Receipt action The  Billable ,  Free Items ,  Unit             Cost , and  Ext. Cost  boxes have been added to the              Billing Information  section, as shown in the following             screenshot. New boxes in the Billing Information section The new  Related Document  section has been added with the              Related Doc. Type  and  Related Doc. Nbr.            boxes. A user can now open the related document by tapping  View Linked             Document  (see the following screenshot). The Related Document section On the  Total  tab, the  Estimated Cost Total          and  Cost Total  boxes have been added to the  Appointment           Totals . ]]></column>
		</row>
		<row PageID="f5877128-9493-445c-83f7-fc5a162eafd6" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="24c5675d-942f-83c6-fc77-fb2e25f0d588" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the following capabilities have been added:[anchor|#_6e6c6997-648b-492d-b03b-6c0db8e39871]
*To filter records and add new ones in some of the lookup tables on some of the field service forms
*To select an item without selecting a line type first in appointments, service orders, and contract schedules
*To select a staff member without saving a service line first in appointments

Also, billing for service contracts has been improved and some elements have been renamed on various forms.{br}

This topic describes the details of these enhancements.{br}{TOC}
==Filtering of Records and Addition of New Ones in the Lookup Tables==
The '''Filter Settings''' and '''Add Row''' buttons have been added to the table toolbars of the lookup tables for the following boxes, as shown in the screenshot below:[anchor|#_71614c32-13aa-4bc2-87c8-3aba7fc8f722]
*On the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) and [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) forms:
**'''Customer'''
** '''Billing Customer'''
** '''Service Contract'''
*On the [HelpRoot_FormReference\FS_30_57_00|Service Contracts] ([~/?ScreenId=FS305700|FS305700]) and [HelpRoot_FormReference\FS_30_08_00|Route Service Contracts] ([~/?ScreenId=FS300800|FS300800]) forms:
**'''Customer'''
** '''Billing Customer'''
** '''Project'''
*On the [HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100]) and [HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600]) forms, '''Service Contract'''
*On the [HelpRoot_FormReference\FS_20_50_00|Equipment] ([~/?ScreenId=FS205000|FS205000]) form, '''Customer''' ('''Owner''' and '''Location''' sections of the Summary area)
[anchor|#_ae37d6c6-254c-4991-9a93-b96b5b1f9aca][anchor|#_d90dcdce-94f1-467d-bb6b-c1f8290787e7][image:ReleaseNotes/Images/RN_2020_R2_Services_Other_Improvements.png|popup|The Filter Settings and Add Row buttons|300px]
==Item Selection Without Line Type Selection==
In previous versions of Acumatica ERP, when a user added an item, the user had to first select a line type. Now the user can select the item without selecting its line type on the '''Details''' tab of the following forms:[anchor|#_a521b671-5445-4e3f-9881-e646e3f53b01]
*[HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100])
*[HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200])
*[HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100])
*[HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600])

If the user leaves the '''Line Type''' column cleared and specifies the inventory ID in the '''Inventory ID''' column, the system automatically selects the related line type in the '''Line Type''' column. If the user leaves the '''Line Type''' and '''Inventory ID''' columns cleared and types a description in the '''Description''' column, the system specifies the ''Instruction'' line type in the '''Line Type''' column.{br}

If the user selects the line type first, the system works as it did before. That is, it filters the options in the '''Inventory ID''' lookup table based on the selected line type, or if the ''Comment'' or ''Instruction'' line type is selected, the system leaves the '''Description''' box for editing and disables most of the other columns.{br}

Similar changes have been made in the mobile app.
==Selection of a Staff Member Without Saving a Service Line First==
In previous versions of Acumatica ERP, on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, when a user created a new line with a service, the user had to save the line after selecting a staff member for the line by using the '''Add Staff''' dialog box to see the selected staff member in the '''Staff Member ID''' column. In Acumatica ERP 2020 R2, when the user selects the staff member for the not-yet-saved line, the system displays the staff member ID in the '''Staff Member ID''' column, and the user can change the ID before saving the line.
==Renamed Elements==
To follow Acumatica ERP standards, ''Line Ref.'' has been changed to ''Ref. Nbr.'' in the elements that contained the ''Line Ref'' phrase.{br}

On the [HelpRoot_FormReference\FS_30_01_00|Service Orders] ([~/?ScreenId=FS300100|FS300100]) form, on the '''Details''' tab, the columns have been renamed as follows:[anchor|#_f9f96d5c-ed55-4b2b-8fce-149f7b61d104]
*On the '''Details''' tab:
**'''Line Ref.''' to '''Ref. Nbr.'''
** '''Model Equipment Line Ref.''' to '''Model Equipment Ref. Nbr.'''
** '''Component Line Ref.''' to '''Component Ref. Nbr.'''
*In the '''Add Staff''' dialog box, '''Service Line Ref.''' to '''Service Ref. Nbr.'''
*On the '''Default Staff''' tab, '''Details Line Ref.''' to '''Details Ref. Nbr.'''

On the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form, on the '''Details''' tab, the columns have been renamed as follows:[anchor|#_127dea8b-d6eb-4868-9795-58fb157a23d9]
*On the '''Details''' tab:
**'''Line Ref.''' to '''Ref. Nbr.'''
** '''Model Equipment Line Ref.''' to '''Model Equipment Ref. Nbr.'''
** '''Component Line Ref.''' to '''Component Ref. Nbr.'''
** '''Pickup/Delivery Line Ref.''' to '''Pickup/Delivery Ref. Nbr.'''
** '''Service Order Line Ref.''' to '''Service Order Details Ref. Nbr.'''
*In the '''Add Staff''' dialog box, '''Service Line Ref.''' to '''Service Ref. Nbr.'''
*On the '''Staff''' tab:
**'''Line Ref.''' to '''Ref. Nbr.'''
** '''Details Line Ref.''' to '''Details Ref. Nbr.'''
*On the '''Log''' tab:
**'''Log Line Ref.''' to '''Log Ref. Nbr.'''
** '''Details Line Ref.''' to '''Details Ref. Nbr.'''
*On the '''Profitability''' tab, '''Line Ref.''' to '''Ref. Nbr.'''

On the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms, on the '''Document Details''' tab, the columns have been renamed as follows:[anchor|#_6fef5723-7e61-4ad8-8b6e-e75029a304e0]
*'''Model Equipment Line Ref.''' to '''Model Equipment Ref. Nbr.'''
* '''Component Line Ref.''' to '''Component Ref. Nbr.'''

On the [HelpRoot_FormReference\FS_30_51_00|Service Contract Schedules] ([~/?ScreenId=FS305100|FS305100]) and [HelpRoot_FormReference\FS_30_56_00|Route Service Contract Schedules] ([~/?ScreenId=FS305600|FS305600]) forms, on the '''Details''' tab, the '''Component Line Ref.''' column has been renamed to '''Component Ref. Nbr.'''{br}

On the [HelpRoot_FormReference\FS_20_50_00|Equipment] ([~/?ScreenId=FS205000|FS205000]) form, on the '''Component and Warranties''' tab, the '''Line Ref.''' column has been renamed to '''Ref. Nbr.'''
==Improvements to the Billing of Service Contracts==
In previous versions of Acumatica ERP, for the service contracts for which the ''Standardized Plus Usage/Overage Billing'' option was selected in the '''Billing Type''' box of the [HelpRoot_FormReference\FS_30_57_00|Service Contracts] ([~/?ScreenId=FS305700|FS305700]) form, on the '''Services Per Period''' tab, the '''Add Row''' button was unavailable if the following conditions were met:[anchor|#_a38fdbfa-1fcf-44de-9239-0daa67589860]
*The ''Expiring'' option was selected in the '''Expiration Type''' box.
*The date in the '''Expiration Date '''box did not fall within the first billing period of the service contract.

In addition, if the '''Expiration Date''' of the service contract did not fall within the first period and was not on the immediate date after the period, then the last bill could not be generated. For instance, suppose that a service had the conditions noted in the previous list and the following settings:[anchor|#_ab725e57-fe2d-4b5a-84a8-844c17b9ec46]
*'''Start Date''': ''01/01/2019''
* '''End Date''': ''12/15/2020''
* '''Period''' ''Monthly''

The last period (from December 1, 2020 through December 15, 2020) could not be billed.{br}

In Acumatica ERP 2020 R2, the end time of the period now relates to the last billing period. That is, it is no longer required that the end date be the immediate date after the last period. Users can now create and activate a service contract if the expiration date is not in the first period. Also, users can now run billing for the last period even if it is not a complete period. For instance, if a service contract has the same settings described above, the last period for which this service contract is billed is the period from December 1, 2020 through December 15, 2020.
==Removed Warning==
The following warning no longer appears when a user adds or modifies the lines on the '''Details''' tab on the [HelpRoot_FormReference\FS_30_02_00|Appointments] ([~/?ScreenId=FS300200|FS300200]) form of the web application or on the ''Appointments List'' screen of the mobile app: ''The end time has been updated based on the Estimated duration total of the appointment because the services have been modified.'']]></column>
			<column name="PlainText"><![CDATA[Services: Other Improvements In  Acumatica ERP 2020 R2, the following capabilities have been added: To filter records and add new ones in some of the lookup tables on some of the field           service forms To select an item without selecting a line type first in appointments, service orders,           and contract schedules To select a staff member without saving a service line first in appointments Also, billing for service contracts has been improved and some elements have been renamed         on various forms. This topic describes the details of these enhancements. Filtering of Records and Addition of New Ones in the Lookup Tables The  Filter Settings  and  Add Row  buttons have         been added to the table toolbars of the lookup tables for the following boxes, as shown in         the screenshot below: On the   ([~/?ScreenId=FS300100|FS300100]) Service Orders (FS300100) and   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)             forms: Customer Billing Customer Service Contract On the   ([~/?ScreenId=FS305700|FS305700]) Service Contracts (FS305700) and   ([~/?ScreenId=FS300800|FS300800]) Route Service Contracts (FS300800)             forms: Customer Billing Customer Project On the   ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules (FS305100) and   ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules (FS305600)           forms,  Service Contract On the   ([~/?ScreenId=FS205000|FS205000]) Equipment (FS205000) form,  Customer  ( Owner  and              Location  sections of the Summary area) The Filter Settings and Add Row buttons Item Selection Without Line Type Selection In previous versions of  Acumatica ERP, when a user added an item, the user had to first select a line type. Now the user can         select the item without selecting its line type on the  Details  tab of         the following forms:  ([~/?ScreenId=FS300100|FS300100]) Service Orders           (FS300100)  ([~/?ScreenId=FS300200|FS300200]) Appointments           (FS300200)  ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules           (FS305100)  ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules           (FS305600) If the user leaves the  Line Type  column cleared and specifies the         inventory ID in the  Inventory ID  column, the system automatically         selects the related line type in the  Line Type  column. If the user         leaves the  Line Type  and  Inventory ID  columns         cleared and types a description in the  Description  column, the system         specifies the  Instruction  line type in the  Line Type          column. If the user selects the line type first, the system works as it did before. That is, it         filters the options in the  Inventory ID  lookup table based on the         selected line type, or if the  Comment  or  Instruction  line type is selected,         the system leaves the  Description  box for editing and disables most         of the other columns. Similar changes have been made in the mobile app. Selection of a Staff Member Without Saving a Service Line First In previous versions of  Acumatica ERP, on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200) form, when a user created a new line with a service, the user had to save the         line after selecting a staff member for the line by using the  Add           Staff  dialog box to see the selected staff member in the  Staff           Member ID  column. In  Acumatica ERP 2020 R2, when the user selects the staff member for the not-yet-saved line, the system displays         the staff member ID in the  Staff Member ID  column, and the user can         change the ID before saving the line. Renamed Elements To follow  Acumatica ERP standards,  Line Ref.  has been changed to  Ref. Nbr.  in the elements that         contained the  Line Ref  phrase. On the   ([~/?ScreenId=FS300100|FS300100]) Service Orders         (FS300100) form, on the  Details  tab, the columns have been renamed as         follows: On the  Details  tab: Line Ref.  to  Ref. Nbr. Model Equipment Line Ref.  to  Model Equipment Ref.                 Nbr. Component Line Ref.  to  Component Ref.                 Nbr. In the  Add Staff  dialog box,  Service Line             Ref.  to  Service Ref. Nbr. On the  Default Staff  tab,  Details Line             Ref.  to  Details Ref. Nbr. On the   ([~/?ScreenId=FS300200|FS300200]) Appointments         (FS300200) form, on the  Details  tab, the columns have been renamed as         follows: On the  Details  tab: Line Ref.  to  Ref. Nbr. Model Equipment Line Ref.  to  Model Equipment Ref.                 Nbr. Component Line Ref.  to  Component Ref.                 Nbr. Pickup/Delivery Line Ref.  to  Pickup/Delivery Ref.                 Nbr. Service Order Line Ref.  to  Service Order Details                 Ref. Nbr. In the  Add Staff  dialog box,  Service Line             Ref.  to  Service Ref. Nbr. On the  Staff  tab: Line Ref.  to  Ref. Nbr. Details Line Ref.  to  Details Ref.               Nbr. On the  Log  tab: Log Line Ref.  to  Log Ref. Nbr. Details Line Ref.  to  Details Ref.               Nbr. On the  Profitability  tab,  Line Ref.  to              Ref. Nbr. On the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders         (SO301000) and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000)         forms, on the  Document Details  tab, the columns have been renamed as         follows: Model Equipment Line Ref.  to  Model Equipment Ref.             Nbr. Component Line Ref.  to  Component Ref.           Nbr. On the   ([~/?ScreenId=FS305100|FS305100]) Service Contract Schedules         (FS305100) and   ([~/?ScreenId=FS305600|FS305600]) Route Service Contract Schedules (FS305600)         forms, on the  Details  tab, the  Component Line           Ref.  column has been renamed to  Component Ref. Nbr. On the   ([~/?ScreenId=FS205000|FS205000]) Equipment         (FS205000) form, on the  Component and Warranties  tab, the            Line Ref.  column has been renamed to  Ref.           Nbr. Improvements to the Billing of Service Contracts In previous versions of  Acumatica ERP, for the service contracts for which the  Standardized Plus Usage/Overage Billing          option was selected in the  Billing Type  box of the   ([~/?ScreenId=FS305700|FS305700]) Service Contracts (FS305700) form, on the  Services Per           Period  tab, the  Add Row  button was unavailable          if the following conditions were         met: The  Expiring  option was selected in the  Expiration Type            box. The date in the  Expiration Date  box did not fall within the first           billing period of the service contract. In addition, if the  Expiration Date  of the service contract did not         fall within the first period and was not on the immediate date after the period, then the         last bill could not be generated. For instance, suppose that a service had the conditions         noted in the previous list and the following settings: Start Date :  01/01/2019 End Date :  12/15/2020 Period Monthly The last period (from December 1, 2020 through December 15, 2020) could not be billed. In  Acumatica ERP 2020 R2, the end time of the period now relates to the last billing period. That is, it is no         longer required that the end date be the immediate date after the last period. Users can now         create and activate a service contract if the expiration date is not in the first period.         Also, users can now run billing for the last period even if it is not a complete period. For         instance, if a service contract has the same settings described above, the last period for         which this service contract is billed is the period from December 1, 2020 through December         15, 2020. Removed Warning The following warning no longer appears when a user adds or modifies the lines on the            Details  tab on the   ([~/?ScreenId=FS300200|FS300200]) Appointments (FS300200)         form of the web application or on the  Appointments List  screen of the mobile app:            The end time has been updated based on the Estimated duration total of the appointment           because the services have been modified. ]]></column>
		</row>
		<row PageID="629e5fcd-7f9d-4db1-a527-59f5c2fad9be" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="67d7a4d8-3953-c43f-d302-439f35dc17e0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the '''System Events''' tab has been added to the [HelpRoot_FormReference\SM_20_15_30|System Monitor] ([~/?ScreenId=SM201530|SM201530]) form. The tab lists log records for multiple system events; a system administrator can explore the log for errors, warnings, or operations that consume excessive resources. For details, see [HelpRoot_Administration\SA_Monitoring_System_Health_Mapref|Monitoring System Health].
==Exploration of the System Events==
By using the elements in the Selection area of the '''System Events''' tab of the [HelpRoot_FormReference\SM_20_15_30|System Monitor] ([~/?ScreenId=SM201530|SM201530]) form, the system administrator can narrow the list of events by the sources of the event, the severity level of the event, and the date range, as shown in the screenshot below.[anchor|#_4940272a-5fc7-41a0-8886-66f143463011][anchor|#_c3904d05-08be-4fff-85bf-ae33ee86b29a][image:ReleaseNotes/Images/RN_2020_R2_SysAdmin_SystemEventsTab.png|popup|Selection area of the System Events tab|450px]
To view the details of an event, the system administrator selects the event in the table; the system displays these details in the bottom pane of the form.
==Event Sources==
On the '''System Events''' tab of the [HelpRoot_FormReference\SM_20_15_30|System Monitor] ([~/?ScreenId=SM201530|SM201530]) form, the system logs events triggered by the following sources:[anchor|#_e5883aaf-ccd2-4bca-9ed0-c98b7e797c99]
*Customization
*License
*Push notifications
*Resource governor
*Scheduler
*System

By using the '''Source''' multi-select drop-down box in the Selection area of the tab, a system administrator may narrow the list of events by selecting one source or multiple sources. By default, the ''All'' option is selected, as shown in the screenshot below.[anchor|#_5d0d0871-a25d-409a-9d61-bc9429109972][anchor|#_edef06ef-ef6e-4fb6-81dd-6fb8f81cbd65][image:ReleaseNotes/Images/RN_2020_R2_SysAdmin_SystemEventsSource.png|popup|Selection of the event source|450px]
==Event Severity Levels==
A system administrator can use the '''Level''' drop-down box in the Selection area of the '''System Events''' tab of the [HelpRoot_FormReference\SM_20_15_30|System Monitor] ([~/?ScreenId=SM201530|SM201530]) form to narrow the list of events by severity level. When an administrator selects any severity level, the system narrows the list to only events with the selected level and higher (that is, more severe) severity levels. The box contains the following options, which are listed from the least to most severe (see the screenshot below):[anchor|#ul_ewk_dgj_5lb]
*''Information'' (default): Events of all levels are shown in the table; this is the least severe level.
*''Warning'': The table displays events with the selected severity and with the higher levels, which are ''Error'' and ''Fatal''.
*''Error'': Events of only the ''Error'' and ''Fatal'' levels are listed in the table.
*''Fatal'': The table shows only events with the ''Fatal'' level.
[anchor|#_5775b3df-6a44-459c-87a3-d44ceb10e913][anchor|#_4831887f-aac5-45e2-9bfc-75e2aa2dce4b][image:ReleaseNotes/Images/RN_2020_R2_SysAdmin_SystemEventsSeverity.png|popup|Selection of the event severity level|450px]
==Storage of Event Logs==
Logged event details are stored in database. All events older that 30 days are removed from the database. The built-in removal process launches automatically every day and when a website is restarted.{br}

The default frequency can be changed by modifying value for the <tt>SystemEventDBSink:CleansingPeriod</tt> key in the <tt>web.config</tt> file. The value should be set in the <tt>TimeSpan</tt> format, for example, 0.1:0:0 stands for cleaning database every hour.]]></column>
			<column name="PlainText"><![CDATA[System Administration: Improvements to System Event Monitoring In  Acumatica ERP 2020 R2, the  System Events  tab has been added to the   ([~/?ScreenId=SM201530|SM201530]) System Monitor (SM201530) form. The tab lists log records for         multiple system events; a system administrator can explore the log for errors, warnings, or         operations that consume excessive resources. For details, see  Monitoring System Health. Exploration of the System Events By using the elements in the Selection area of the  System Events  tab         of the   ([~/?ScreenId=SM201530|SM201530]) System Monitor (SM201530) form, the system         administrator can narrow the list of events by the sources of the event, the severity level         of the event, and the date range, as shown in the screenshot below. Selection area of the System Events tab To view the details of an event, the system administrator selects the event in the table;         the system displays these details in the bottom pane of the form. Event Sources On the  System Events  tab of the   ([~/?ScreenId=SM201530|SM201530]) System Monitor (SM201530) form, the system logs events triggered         by the following sources: Customization License Push notifications Resource governor Scheduler System By using the  Source  multi-select drop-down box in the Selection area         of the tab, a system administrator may narrow the list of events by selecting one source or         multiple sources. By default, the  All  option is selected, as shown in the screenshot         below. Selection of the event source Event Severity Levels A system administrator can use the  Level  drop-down box in the         Selection area of the  System Events  tab of the   ([~/?ScreenId=SM201530|SM201530]) System Monitor (SM201530) form to narrow the list of events by         severity level. When an administrator selects any severity level, the system narrows the         list to only events with the selected level and higher (that is, more severe) severity         levels. The box contains the following options, which are listed from the least to most         severe (see the screenshot below): Information  (default): Events of all levels are shown in the table; this is the             least severe level. Warning : The table displays events with the selected severity and with the             higher levels, which are  Error  and  Fatal . Error : Events of only the  Error  and  Fatal  levels are listed in             the table. Fatal : The table shows only events with the  Fatal  level. Selection of the event severity level Storage of Event Logs Logged event details are stored in database. All events older that 30 days are removed from         the database. The built-in removal process launches automatically every day and when a         website is restarted. The default frequency can be changed by modifying value for the            SystemEventDBSink:CleansingPeriod  key in the            web.config  file. The value should be set in the            TimeSpan  format, for example, 0.1:0:0 stands for cleaning database         every hour. ]]></column>
		</row>
		<row PageID="ed82588b-3e6a-4d99-bc51-69ff49123264" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="927c3b2a-55dc-10fb-8b9d-283d018fadd1" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, a system administrator could view details only for commercial transactions by clicking '''Commercial Transaction Details''' on the table toolbar of the '''Statistics''' tab of the [HelpRoot_FormReference\SM_60_40_00|License Monitoring Console] ([~/?ScreenId=SM604000|SM604000]) form. With the 2020 R2 version, a system administrator can view transaction details for both commercial transactions and ERP transactions.
==Viewing Transaction Details==
On the '''Statistics''' tab of the [HelpRoot_FormReference\SM_60_40_00|License Monitoring Console] ([~/?ScreenId=SM604000|SM604000]) form, the new '''Transaction Details''' dialog box has replaced the '''Commercial Transaction Details''' one. The new dialog box is opened by clicking the number of transactions (which is a link now) in the '''Commercial Transactions''' or '''ERP Transactions''' column of the Monthly Statistics or Daily Statistics table. {br}

In the Selection area of the dialog box, the system inserts default values for the period type and transaction type. For example, if a user clicks the number of ERP transactions in the Monthly Statistics table of the form, the system inserts the ''Monthly'' option in the '''Period Type''' box and inserts the ''ERP'' option in the '''Transaction Type''' box, as shown in the following screenshot.[anchor|#_79124b03-b115-44b2-80cb-1a0f8f5c1ea5][anchor|#_e5db92ae-8ea4-47c9-a241-b1ba46b14075][image:ReleaseNotes/Images/RN_2020_R2_SysAdmin_TransactionDetails.png|popup|The Transaction Details dialog box|350px]
A user can change values in the Selection area and view details for any type of transaction and for any period of time, without closing the dialog box.]]></column>
			<column name="PlainText"><![CDATA[System Administration: Detailed View for ERP Transactions In previous versions of  Acumatica ERP, a system administrator could view details only for commercial transactions by clicking            Commercial Transaction Details  on the table toolbar of the            Statistics  tab of the   ([~/?ScreenId=SM604000|SM604000]) License Monitoring Console         (SM604000) form. With the  2020 R2 version, a system administrator can view transaction details for both commercial         transactions and ERP transactions. Viewing Transaction Details On the  Statistics  tab of the   ([~/?ScreenId=SM604000|SM604000]) License Monitoring Console (SM604000) form, the new  Transaction           Details  dialog box has replaced the  Commercial Transaction           Details  one. The new dialog box is opened by clicking the number of         transactions (which is a link now) in the  Commercial Transactions  or            ERP Transactions  column of the Monthly Statistics or Daily         Statistics table.  In the Selection area of the dialog box, the system inserts default values for the period         type and transaction type. For example, if a user clicks the number of ERP transactions in         the Monthly Statistics table of the form, the system inserts the  Monthly  option in         the  Period Type  box and inserts the  ERP  option in the            Transaction Type  box, as shown in the following screenshot. The Transaction Details dialog box A user can change values in the Selection area and view details for any type of transaction         and for any period of time, without closing the dialog box. ]]></column>
		</row>
		<row PageID="e62fa305-539d-436c-bb81-c92cef1260a1" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="b5f53371-b478-b12a-9b12-452e9db59eee" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In fast-growing companies, it is important to organize employees&rsquo; work so that all the needed information is at hand. This makes the work processes run smoothly and quickly. With the new recently viewed functionality, which has been introduced in Acumatica ERP 2020 R2, users can easily navigate to the records they have recently used (or viewed) if they need to work with them again.{br}

The recently viewed functionality is specific to each individual user. The system keeps the last 500 records a user has interacted with and displays them in the '''Recently Viewed''' workspace, which appears when a user clicks the Recently Viewed button. The system stores only those records that have been created and opened on data entry forms. The frequently viewed records are placed at the top of the list so that users have easy access to them. {br}

A user can also add some records to the '''Favorite Records''' list. This will make the records available on this workspace anytime, regardless of when the user last interacted with the record.{br}{TOC}
==The Recently Viewed Button==
To open the workspace showing a user’s recently viewed records, the user clicks the Recently Viewed button, which is located right of the Search box, as shown in the following screenshot. Each time a user clicks the button, the system uses the data it has collected and refreshes the workspace to show the most recently used records.[anchor|#_914ec52c-e064-4319-b473-975b6d558f5e][anchor|#_54cc6576-9464-4894-a0ca-35007604498c][image:ReleaseNotes/Images/RN_2020_R2_UI_Recently_Viewed_Icon.png|popup|The location of the Recently Viewed button|200px]
Clicking the button opens the '''Recently Viewed''' workspace (see the following screenshot), which is placed over the working area of the screen. [anchor|#_3658f859-568a-47d5-b273-9320fdd3564c][anchor|#_44bb0336-dce6-46b2-a633-d46b4eea4ad5][image:ReleaseNotes/Images/RN_2020_R2_UI_Recently_Viewed_Workspace.png|popup|The '''Recently Viewed''' workspace|550px]
This workspace includes the following lists: [anchor|#_1c5404da-6762-4208-ab42-7092d1174ba4]
*'''Record Types''': This list can be used to filter records by their type. By default, the system displays all records (the '''All''' record type). If needed, a user can select another record type to view records of only the selected type in the '''Records''' and '''Favorite Records''' lists. Record types are predefined, and the system adds the appropriate record types to the '''Recently Viewed''' workspace automatically each time a user opens the workspace.
*'''Records''': This list displays the last 500 records the user has interacted with. If the user has selected a record type other than '''All''', the system filters the records and displays in this list only records of the selected record type.
*'''Favorite Records''': This displays the records the user has marked as favorites for easy access to them, regardless of when they were last accessed. 

==Favorite Records==
When a user works with specific records frequently, the user can add them to '''Favorite Records''' in the '''Recently Viewed''' workspace. This won&rsquo;t remove them from the '''Records''' list; the record will be listed under both '''Records''' and '''Favorite Records'''.{br}

To add a record to the list of favorite records, in the '''Records''' list, the user should hover over the needed record, and when the star icon appears, click the icon. The yellow color of the star indicates that the record has been added to the list of favorites. (The user needs to refresh the workspace to reflect these changes.) 
==Search for the Recently Viewed Records==
Users can utilize the standard Search functionality to search among the recently viewed records. When the '''Recently Viewed''' workspace is open, the system runs the search only among the last 500 records a user has interacted with. If this workspace is closed, then the system runs the system-wide search and displays all records that correspond to the user search request.]]></column>
			<column name="PlainText"><![CDATA[User Interface: List of the Recently Viewed Records in the System In fast-growing companies, it is important to organize employees' work so that all the needed     information is at hand. This makes the work processes run smoothly and quickly. With the new     recently viewed functionality, which has been introduced in  Acumatica ERP 2020 R2,     users can easily navigate to the records they have recently used (or viewed) if they need to     work with them again. The recently viewed functionality is specific to each individual user. The system keeps the     last 500 records a user has interacted with and displays them in the  Recently      Viewed  workspace, which appears when a user clicks the Recently Viewed button. The     system stores only those records that have been created and opened on data entry forms. The     frequently viewed records are placed at the top of the list so that users have easy access to     them.  A user can also add some records to the  Favorite Records  list. This     will make the records available on this workspace anytime, regardless of when the user last     interacted with the record. The Recently Viewed Button To open the workspace showing a user’s recently viewed records, the user clicks the Recently     Viewed button, which is located right of the Search box, as shown in the following screenshot.     Each time a user clicks the button, the system uses the data it has collected and refreshes the     workspace to show the most recently used records. The location of the Recently Viewed button Clicking the button opens the  Recently Viewed  workspace (see the     following screenshot), which is placed over the working area of the screen.  The  Recently Viewed  workspace This workspace includes the following lists:  Record Types : This list can be used to filter records by their type.      By default, the system displays all records (the  All  record type). If      needed, a user can select another record type to view records of only the selected type in the        Records  and  Favorite Records  lists. Record types      are predefined, and the system adds the appropriate record types to the  Recently       Viewed  workspace automatically each time a user opens the workspace. Records : This list displays the last 500 records the user has      interacted with. If the user has selected a record type other than  All ,      the system filters the records and displays in this list only records of the selected record      type. Favorite Records : This displays the records the user has marked as      favorites for easy access to them, regardless of when they were last accessed.  Favorite Records When a user works with specific records frequently, the user can add them to       Favorite Records  in the  Recently Viewed      workspace. This won't remove them from the  Records  list; the record will     be listed under both  Records  and  Favorite     Records . To add a record to the list of favorite records, in the  Records  list,     the user should hover over the needed record, and when the star icon appears, click the icon.     The yellow color of the star indicates that the record has been added to the list of favorites.     (The user needs to refresh the workspace to reflect these changes.)  Search for the Recently Viewed Records Users can utilize the standard Search functionality to search among the recently viewed     records. When the  Recently Viewed  workspace is open, the system runs the     search only among the last 500 records a user has interacted with. If this workspace is closed,     then the system runs the system-wide search and displays all records that correspond to the user     search request. ]]></column>
		</row>
		<row PageID="7b51331b-0fef-468c-997b-d291970ec7e5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="a1f6c35b-4d39-d83a-265b-605de65cc588" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Starting in Acumatica ERP 2020 R2, for each form that has user-defined fields configured, a user can specify whether each user-defined field is hidden, as well as whether it is required.
==Specifying Visibility Options==
To specify the visibility options of user-defined fields, the user opens a form where user-defined fields are available (see the table [[#_35338562-b6f9-4f29-a5f8-645d1eb4b451|below]) and then selects '''Customization''' > '''Manage User-Defined Fields''' on the form title toolbar. In the [HelpRoot_FormReference\cs_20_50_20|Edit User Defined Fields] (CR302000) form, which is opened, the user opens the '''Visibility''' tab (shown in the following screenshot).[anchor|#_725b8a42-bfd7-4e90-8d90-b847c0659374][anchor|#_ae900316-68d3-41ac-b99f-c4c38c84231e][image:ReleaseNotes/Images/RN_2020_R2_Customization_User_Defined_Fields_Visibility_tab.png|popup|Edit User Defined Fields form: Visibility tab|400px]
In the '''Document''' box, the user selects the document type to which the visibility settings should be applied. In the table, the user then selects or clears each of the following check boxes for the user-defined attribute in each row:[anchor|#_69b970f3-66f5-4f05-92f5-347a4409c085]
*'''Hidden''', which is selected if the user-defined field should not be displayed on the form
*'''Required''', which is selected if the user-defined field should be mandatory

The following screenshot shows the '''Visibility''' tab with the ''Invoice'' document type selected and the '''Hidden''' and '''Required''' check boxes selected and cleared, as needed, for each user-defined field. Here, the check box states apply to the user-defined fields only if the selected document has the ''Invoice'' document type.[anchor|#_ddca6f92-617b-499e-ae34-1091c0cbfec9][anchor|#_26c92cb4-0569-4321-9b56-196491fc19a4][image:ReleaseNotes/Images/RN_2020_R2_Customization_User_Defined_Fields_Select_doc_type.png|popup|Edit User Defined Fields form: Document box|400px]
==Selecting the Document Type==
The options in the '''Document''' box depend on the specific form from which the [HelpRoot_FormReference\cs_20_50_20|Edit User Defined Fields] (CR302000) form is invoked. The following table lists the forms that support user-defined fields and the name of the box on each form that determines the list of values in the '''Document''' box. (The exception to this rule is the ''&lt;All&gt;'' option, which always appears in the Document box along with the form-specific options.)[anchor|#_35338562-b6f9-4f29-a5f8-645d1eb4b451]
===Forms with User-Defined Fields and Corresponding Box Names===
{| class="checklist" | width="100%" 
|- 
!width="48%" ! Form
!width="51%" ! Box That Determines Document Options
|- 
| 
[HelpRoot_FormReference\GL_30_10_00|Journal Transactions] ([~/?ScreenId=GL301000|GL301000]) form
| '''Module'''
|- 
| 
 [HelpRoot_FormReference\CA_30_40_00|Transactions] ([~/?ScreenId=CA304000|CA304000]) form
| '''Transaction Type'''
|- 
| 
 [HelpRoot_FormReference\CA_30_50_00|Bank Deposits] ([~/?ScreenId=CA305000|CA305000]) form
| '''Transaction Type'''
|- 
| 
 [HelpRoot_FormReference\AP_30_10_00|Bills and Adjustments] ([~/?ScreenId=AP301000|AP301000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AP_30_20_00|Checks and Payments] ([~/?ScreenId=AP302000|AP302000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AP_30_40_00|Quick Checks] ([~/?ScreenId=AP304000|AP304000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AP_30_30_00|Vendors] ([~/?ScreenId=AP303000|AP303000]) form
| '''Vendor Class'''
|- 
| 
 [HelpRoot_FormReference\AR_30_10_00|Invoices and Memos] ([~/?ScreenId=AR301000|AR301000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AR_30_40_00|Cash Sales] ([~/?ScreenId=AR304000|AR304000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\AR_30_30_00|Customers] ([~/?ScreenId=AR303000|AR303000]) form
| '''Customer Class'''
|- 
| 
 [HelpRoot_FormReference\FA_30_30_00|Fixed Assets] ([~/?ScreenId=FA303000|FA303000]) form
| '''Asset Class'''
|- 
| 
 [HelpRoot_FormReference\TX_30_30_00|Tax Bills and Adjustments] ([~/?ScreenId=TX303000|TX303000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\TX_30_10_00|Tax Adjustments] ([~/?ScreenId=TX301000|TX301000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\TX_20_50_00|Taxes] ([~/?ScreenId=TX205000|TX205000]) form
| '''Tax Type'''
|- 
| 
 [HelpRoot_FormReference\IN_30_70_00|Kit Assembly] ([~/?ScreenId=IN307000|IN307000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form
| '''Order Type'''
|- 
|  [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\PO_30_10_00|Purchase Orders] ([~/?ScreenId=PO301000|PO301000]) form
| '''Type'''
|- 
| 
 [HelpRoot_FormReference\PO_30_20_00|Purchase Receipts] ([~/?ScreenId=PO302000|PO302000]) form
| '''Type'''
|- 
|  [HelpRoot_FormReference\RQ_30_10_00|Requests] ([~/?ScreenId=RQ301000|RQ301000]) form
| '''Request Class'''
|- 
| 
 [HelpRoot_FormReference\PM_30_80_00|Change Orders] ([~/?ScreenId=PM308000|PM308000]) form
| '''Class'''
|- 
| 
 [HelpRoot_FormReference\CR_30_10_00|Leads] ([~/?ScreenId=CR301000|CR301000]) form
| '''Lead Class'''
|- 
| 
 [HelpRoot_FormReference\CR_30_20_00|Contacts] ([~/?ScreenId=CR302000|CR302000]) form
| '''Contact Class'''
|- 
| 
 [HelpRoot_FormReference\CR_30_30_00|Business Accounts] ([~/?ScreenId=CR303000|CR303000]) form
| '''Class ID'''
|- 
| 
 [HelpRoot_FormReference\CR_30_40_00|Opportunities] ([~/?ScreenId=CR304000|CR304000]) form
| '''Class ID'''
|- 
| 
 [HelpRoot_FormReference\CR_30_60_00|Cases] ([~/?ScreenId=CR306000|CR306000]) form
| '''Class ID'''
|- 
| 
 [HelpRoot_FormReference\CR_20_20_00|Marketing Campaigns] ([~/?ScreenId=CR202000|CR202000]) form
| '''Campaign Class'''
|}
For the particular form for which the user is editing user-defined fields on the [HelpRoot_FormReference\cs_20_50_20|Edit User Defined Fields] form, the states of the '''Hidden''' and '''Required''' check boxes for all listed fields are saved for the selected document type only. If the user selects ''&lt;All&gt;'' in the '''Document''' box, the new settings the user specifies in the table override any specific settings that have been used for certain document types.{br}

After the user has specified the appropriate settings for the form and document type (or types, if ''&lt;All&gt;'' is selected) on the [HelpRoot_FormReference\cs_20_50_20|Edit User Defined Fields] form, the user then clicks the Back arrow button on the form toolbar to save the changes and go back to the form that supports user-defined fields.
==Displaying the User-Defined Fields of the Document==
On the '''User-Defined Fields''' tab of the form to which the user returns, the fields for which the user has selected the '''Required''' check box are now marked with an asterisk (&#42;), as shown in the following screenshot for '''Contract type''' and '''Phone number'''. The fields for which the '''Hidden''' check box has been selected are not displayed on the tab.[anchor|#_9d580287-6063-485b-8364-f639ebc6d25a][anchor|#_0cf2b1c5-4486-4cbb-b394-285ce09b039d][image:ReleaseNotes/Images/RN_2020_R2_Customization_User_Defined_Fields_Displayed_fields.png|popup|User-Defined Fields: Displayed fields|400px]]]></column>
			<column name="PlainText"><![CDATA[Customization: Visibility of User-Defined Fields Starting in  Acumatica ERP 2020 R2, for each form that has user-defined fields configured, a user can specify whether each         user-defined field is hidden, as well as whether it is required. Specifying Visibility Options To specify the visibility options of user-defined fields, the user opens a form where         user-defined fields are available (see the table  below below) and then selects  Customization Manage User-Defined Fields  on the form title toolbar. In the  Edit User Defined Fields (CR302000) form, which is opened, the user opens the  Visibility          tab (shown in the following screenshot). Edit User Defined Fields form: Visibility tab In the  Document  box, the user selects the document type to which the         visibility settings should be applied. In the table, the user then selects or clears each of         the following check boxes for the user-defined attribute in each row: Hidden , which is selected if the user-defined field should not be           displayed on the form Required , which is selected if the user-defined field should be           mandatory The following screenshot shows the  Visibility  tab with the            Invoice  document type selected and the  Hidden  and            Required  check boxes selected and cleared, as needed, for each         user-defined field. Here, the check box states apply to the user-defined fields only if the         selected document has the  Invoice  document type. Edit User Defined Fields form: Document box Selecting the Document Type The options in the  Document  box depend on the specific form from         which the  Edit User Defined Fields (CR302000) form is invoked. The         following table lists the forms that support user-defined fields and the name of the box on         each form that determines the list of values in the  Document  box.         (The exception to this rule is the  <All>  option, which always appears in the         Document box along with the form-specific options.) Forms with User-Defined Fields and Corresponding Box Names Form Box That Determines Document Options  ([~/?ScreenId=GL301000|GL301000]) Journal Transactions (GL301000) form Module  ([~/?ScreenId=CA304000|CA304000]) Transactions (CA304000) form Transaction Type  ([~/?ScreenId=CA305000|CA305000]) Bank Deposits (CA305000) form Transaction Type  ([~/?ScreenId=AP301000|AP301000]) Bills and Adjustments (AP301000) form Type  ([~/?ScreenId=AP302000|AP302000]) Checks and Payments (AP302000) form Type  ([~/?ScreenId=AP304000|AP304000]) Quick Checks (AP304000) form Type  ([~/?ScreenId=AP303000|AP303000]) Vendors (AP303000) form Vendor Class  ([~/?ScreenId=AR301000|AR301000]) Invoices and Memos (AR301000) form Type  ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form Type  ([~/?ScreenId=AR304000|AR304000]) Cash Sales (AR304000) form Type  ([~/?ScreenId=AR303000|AR303000]) Customers (AR303000) form Customer Class  ([~/?ScreenId=FA303000|FA303000]) Fixed Assets (FA303000) form Asset Class  ([~/?ScreenId=TX303000|TX303000]) Tax Bills and Adjustments (TX303000) form Type  ([~/?ScreenId=TX301000|TX301000]) Tax Adjustments (TX301000) form Type  ([~/?ScreenId=TX205000|TX205000]) Taxes (TX205000) form Tax Type  ([~/?ScreenId=IN307000|IN307000]) Kit Assembly (IN307000) form Type  ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000) form Order Type  ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000) form Type  ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) form Type  ([~/?ScreenId=PO301000|PO301000]) Purchase Orders (PO301000) form Type  ([~/?ScreenId=PO302000|PO302000]) Purchase Receipts (PO302000) form Type  ([~/?ScreenId=RQ301000|RQ301000]) Requests (RQ301000) form Request Class  ([~/?ScreenId=PM308000|PM308000]) Change Orders (PM308000) form Class  ([~/?ScreenId=CR301000|CR301000]) Leads (CR301000) form Lead Class  ([~/?ScreenId=CR302000|CR302000]) Contacts (CR302000) form Contact Class  ([~/?ScreenId=CR303000|CR303000]) Business Accounts (CR303000) form Class ID  ([~/?ScreenId=CR304000|CR304000]) Opportunities (CR304000) form Class ID  ([~/?ScreenId=CR306000|CR306000]) Cases (CR306000) form Class ID  ([~/?ScreenId=CR202000|CR202000]) Marketing Campaigns (CR202000) form Campaign Class For the particular form for which the user is editing user-defined fields on the  Edit User Defined Fields form, the states of the            Hidden  and  Required  check boxes for all         listed fields are saved for the selected document type only. If the user selects            <All>  in the  Document  box, the new settings the user         specifies in the table override any specific settings that have been used for certain         document types. After the user has specified the appropriate settings for the form and document type (or         types, if  <All>  is selected) on the  Edit User Defined Fields         form, the user then clicks the Back arrow button on the form toolbar to save the changes and         go back to the form that supports user-defined fields. Displaying the User-Defined Fields of the Document On the  User-Defined Fields  tab of the form to which the user         returns, the fields for which the user has selected the  Required          check box are now marked with an asterisk (*), as shown in the following screenshot for            Contract type  and  Phone number . The fields         for which the  Hidden  check box has been selected are not displayed on         the tab. User-Defined Fields: Displayed fields ]]></column>
		</row>
		<row PageID="0723bc14-3ae1-4d8b-8b79-fad265fd8be7" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c4bf8bcb-8e9e-4680-3ddf-6d17f3d5a95c" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, two new forms have been introduced where a customizer can view reference information about data access classes (DACs): the [HelpRoot_FormReference\SM_40_10_00|DAC Relations] ([~/?ScreenId=SM401000|SM401000]) form and the [HelpRoot_FormReference\SM_40_20_00|Merged DAC Relations] ([~/?ScreenId=SM402000|SM402000]) form. {br}

On the [HelpRoot_FormReference\SM_40_10_00|DAC Relations] form, a customizer can view the details of the DACs defined in the system and the relations between them. An example of the information displayed on the form is shown in the following screenshot.[anchor|#_9a95ba5c-2bdb-4e45-98c3-1983b259d63b][anchor|#_9682ff62-13ce-4d33-b132-61f7fac28ec2][image:ReleaseNotes/Images/RN_2020_R2_Customization_DACRelations.png|popup|The DAC Relations form|450px]
On the [HelpRoot_FormReference\SM_40_20_00|Merged DAC Relations] form, a customizer can view the details of the merged DACs defined in the system and the relations between them. The form displays references for the merged DAC—that is the selected DAC and its aliases defined in different namespaces. An example of the information displayed on the form is shown in the following screenshot.[anchor|#_bfe35a8a-c1e3-4794-9ceb-66faaf4ee546][anchor|#_fb80cabc-9e47-4dfc-8307-f6b535338d68][image:ReleaseNotes/Images/RN_2020_R2_Customization_MergedDACRelations.png|popup|The Merged DAC Relations form|450px]
In the '''DAC Full Name''' box, a user can select a DAC that references or is referenced by any other DAC (defined in the <tt>PX.Data</tt> and <tt>PX.Objects</tt> namespaces, or in the published customization projects). DACs that do not have references or are not referenced by other DACs are not displayed.{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Customization: Displaying Information about DAC Relations In  Acumatica ERP 2020 R2,     two new forms have been introduced where a customizer can view reference information about data     access classes (DACs): the   ([~/?ScreenId=SM401000|SM401000]) DAC Relations (SM401000) form and the        ([~/?ScreenId=SM402000|SM402000]) Merged DAC Relations (SM402000) form.  On the   ([~/?ScreenId=SM401000|SM401000]) DAC Relations form, a customizer can view the details of     the DACs defined in the system and the relations between them. An example of the information     displayed on the form is shown in the following screenshot. The DAC Relations form On the   ([~/?ScreenId=SM402000|SM402000]) Merged DAC Relations form, a customizer can view the details of     the merged DACs defined in the system and the relations between them. The form displays     references for the merged DAC—that is the selected DAC and its aliases defined in     different namespaces. An example of the information displayed on the form is shown in the     following screenshot. The Merged DAC Relations form In the  DAC Full Name  box, a user can select a DAC that references or is     referenced by any other DAC (defined in the  PX.Data  and       PX.Objects  namespaces, or in the published customization projects). DACs     that do not have references or are not referenced by other DACs are not displayed. ]]></column>
		</row>
		<row PageID="60114408-efae-4128-a019-7236533adef8" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="9ff61144-dae9-e698-a267-fd64485c5016" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the workflow engine has been improved, and workflows for the [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Sales Orders] (SO301000), [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Shipments] (SO302000), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms have been redesigned. [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Shipments] (SO302000), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms have been redesigned.{br}{TOC}
==Support of Event Handlers==
In Acumatica ERP 2020 R2, the workflow engine has been updated to support events and event handlers for workflows that interact with multiple forms. When an event is raised on one form, another form&rsquo;s workflow can handle it and trigger some transition or field update procedure.{br}

Also, in Acumatica ERP 2020 R2, in the Customization Project Editor, a customizer can now perform the following operations:[anchor|#_34a2e408-0354-4faa-9446-542345b42910]
*View and customize existing transitions
*Create new transitions
*View and customize existing event handlers
*Create new event handlers
*Specify the fields that should be updated after an event is processed
*View these elements as a diagram in the Workflow Visual                             Editor

==Sales Order, Shipment, and Invoice Workflows==
The processing of sales orders has been redesigned to use the workflow engine. {br}

Developers can customize workflows or create new workflows for the [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Sales Orders] (SO301000), [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Shipments] (SO302000), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms. Developers can customize existing workflows in Customization Project Editor or by extending graphs and workflows in the <tt>PX.Objects.SO</tt> namespace. For an example of customizing a predefined workflow in code, see [https://help-2020r1.acumatica.com/Help?ScreenId=ShowWiki&pageid=bf8fc578-a6b7-447a-b913-1cfa8d56b73d|Customize a Predefined Workflow from Code].{br}

A developer can also use the workflow actions of these new workflows through the contract-based APIs.((({S:Danger}The [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Sales Orders] (SO301000), [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Shipments] (SO302000), and [HelpRoot_FormReference\SO_30_30_00|Invoices] ([~/?ScreenId=SO303000|SO303000]) forms do not support automation steps anymore. If a customization contains changes to the automation steps of these forms, developers should rewrite this customization to use the new automation workflows. Changes to these forms also affect any import and export scenarios that have been created for these forms. Developers should modify the scenario mappings to use workflow actions for modification of the statuses.
)))]]></column>
			<column name="PlainText"><![CDATA[Customization: Improvements in the Workflow Engine In  Acumatica ERP 2020 R2, the workflow engine has been improved, and workflows for the  Sales Orders Sales Orders (SO301000),  Shipments Shipments         (SO302000) , and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000)  forms have been         redesigned.        Shipments Shipments (SO302000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) forms have been redesigned. Support of Event Handlers In  Acumatica ERP 2020 R2, the workflow engine has been updated to support events and event handlers for workflows         that interact with multiple forms. When an event is raised on one form, another form's         workflow can handle it and trigger some transition or field update procedure. Also, in  Acumatica ERP 2020 R2, in the  Customization Project Editor, a customizer can now perform the following operations: View and customize existing transitions Create new transitions View and customize existing event handlers Create new event handlers Specify the fields that should be updated after an event is processed View these elements as a diagram in the  Workflow Visual                             EditorSales Order, Shipment, and Invoice Workflows The processing of sales orders has been redesigned to use the workflow engine.  Developers can customize workflows or create new workflows for the  Sales Orders Sales Orders (SO301000),  Shipments Shipments (SO302000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) forms. Developers can customize existing         workflows in  Customization Project Editor         or by extending graphs and workflows in the  PX.Objects.SO  namespace. For         an example of customizing a predefined workflow in code, see  Customize a Predefined Workflow from Code Customize a Predefined Workflow from Code. A developer can also use the workflow actions of these new workflows through the         contract-based APIs. The  Sales Orders Sales Orders (SO301000),  Shipments Shipments (SO302000), and   ([~/?ScreenId=SO303000|SO303000]) Invoices (SO303000) forms do not support automation steps         anymore. If a customization contains changes to the automation steps of these forms,         developers should rewrite this customization to use the new automation workflows. Changes to         these forms also affect any import and export scenarios that have been created for these         forms. Developers should modify the scenario mappings to use workflow actions for         modification of the statuses. ]]></column>
		</row>
		<row PageID="4ce338a6-be0b-49af-a620-6f12a90c8df2" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="96ab4d01-cfec-26a8-45b6-de0a372f2ad3" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Markup for primary and foreign keys has been added to the most essential DACs of Acumatica ERP 2020 R2. An example of the marked-up <tt>SOLine</tt> DAC is shown in the following code.{{{{[System.SerializableAttribute()]
[System.SerializableAttribute()]
[PXCacheName(Messages.SOLine)]
public partial class SOLine : PX.Data.IBqlTable, ILSPrimary, IHasMinGrossProfit, 
                              ISortOrder, IMatrixItemLine
{
  #region Keys
  public class PK : PrimaryKeyOf&lt;SOLine&gt;.By&lt;orderType, orderNbr, lineNbr&gt;
  {
    public static SOLine Find(PXGraph graph, string orderType, string orderNbr, int? lineNbr) 
        =&gt; FindBy(graph, orderType, orderNbr, lineNbr);
  }
  public static class FK
  {
    public class Order : SOOrder.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;orderType, orderNbr&gt; { }
    public class OrderType : SOOrderType.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;orderType&gt; { }
    public class InventoryItem : IN.InventoryItem.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;inventoryID&gt; { }
    public class OrigLine : SOLine.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;origOrderType, origOrderNbr, 
        origLineNbr&gt; { }
    public class POSite : INSite.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;pOSiteID&gt; { }
    public class OrderTypeOperation : SOOrderTypeOperation.PK.ForeignKeyOf&lt;SOLine&gt;.
        By&lt;orderType, operation&gt; { }
    public class Site : INSite.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;siteID&gt; { }
    public class ReasonCode : CS.ReasonCode.PK.ForeignKeyOf&lt;SOLine&gt;.By&lt;reasonCode&gt; { }
  }
  #endregion
  	
  ...
}
}}}}
The information based on this markup can help customizers to construct generic inquiries and OData Version 4 <tt>$expand</tt> requests. Also, the new markup simplifies the customization of system DACs: A developer can understand how the DACs are related and refer to primary or foreign key classes in complex BQL queries instead of referring to other DAC fields. An example of a fluent BQL query that uses this approach is shown in the following code.{{{{var rows =
    SelectFrom&lt;SOOrder&gt;.
    InnerJoin&lt;SOLine&gt;.On&lt;SOLine.FK.SOOrder&gt;.
    //              On&lt;
    //                  SOLine.orderType.IsEqual&lt;SOOrder.orderType&gt;.
    //                  And&lt;SOLine.orderNbr.IsEqual&lt;SOOrder.orderNbr&gt;&gt;&gt;
    InnerJoin&lt;SOLineSplit&gt;.On&lt;SOLineSplit.FK.SOLine&gt;.
    //              On&lt;
    //                  SOLineSplit.orderType.IsEqual&lt;SOLine.orderType&gt;.
    //                  And&lt;SOLineSplit.orderNbr.IsEqual&lt;SOLine.orderNbr&gt;&gt;.
    //                  And&lt;SOLineSplit.lineNbr.IsEqual&lt;SOLine.lineNbr&gt;&gt;&gt;
    InnerJoin&lt;InventoryItem&gt;.On&lt;SOLine.FK.Inventory&gt;.
    //              On&lt;SOLine.inventoryID.IsEqual&lt;InventoryItem.inventoryID&gt;&gt;
    Where&lt;
        SOOrder.orderType.IsEqual&lt;@P.AsString&gt;.
        And&lt;SOOrder.orderNbr.IsEqual&lt;@P.AsString&gt;&gt;&gt;.
    View.Select(this, "SO", "SO000001");
}}}}
((({S:Hint}The commented lines show the request without foreign keys being used.
))){br}

The information based on the markup is displayed in the following locations:[anchor|#_b920beef-288b-4a24-81b1-f689bfb4939e]
*In the '''Name''' column of the '''Related Tables''' dialog box, which can be opened on the '''Tables''' and '''Relations''' tabs of the [HelpRoot_FormReference\SM_20_80_00|Generic Inquiry] ([~/?ScreenId=SM208000|SM208000]) form. For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_Platform_Improvements_in_GIs_and_Reports|Platform: Improvements to Generic Inquiries and Reports].
*In the '''Achieved By''' column on the '''Incoming References''' and '''Outgoing References '''tabs of the [HelpRoot_FormReference\SM_40_10_00|DAC Relations] ([~/?ScreenId=SM401000|SM401000]) form and the [HelpRoot_FormReference\SM_40_20_00|Merged DAC Relations] ([~/?ScreenId=SM402000|SM402000]) form. An example is shown in the following screenshot.[anchor|#_66897731-b061-431a-b301-d961cef71df1][image:ReleaseNotes/../ReleaseNotes/Images/RN_2020_R2_Customization_FKAnnotation.png|popup|Foreign key annotation on the Incoming References tab|450px]
*:For details, see [HelpRoot_ReleaseNotes\RN_2020_R2_Customization_DACRelations|Customization: Displaying Information about DAC Relations].

A customizer can also get DACs that are related to a selected DAC by foreign key when using OData Version 4.{br}{TOC}
==Related Articles==
*[HelpRoot_Dev_Platform\DA__con_Primary_Key|Primary Key]
*[HelpRoot_Dev_Platform\DA__con_Foreign_Keys|Foreign Keys and Nullable Columns]]]></column>
			<column name="PlainText"><![CDATA[Customization: Markup for Primary and Foreign Keys Markup for primary and foreign keys has been added to the most essential DACs of  Acumatica ERP 2020 R2. An example of the marked-up  SOLine  DAC is shown in the following         code. [System.SerializableAttribute()]
[System.SerializableAttribute()]
[PXCacheName(Messages.SOLine)]
public partial class SOLine : PX.Data.IBqlTable, ILSPrimary, IHasMinGrossProfit, 
                              ISortOrder, IMatrixItemLine
{
  #region Keys
  public class PK : PrimaryKeyOf<SOLine>.By<orderType, orderNbr, lineNbr>
  {
    public static SOLine Find(PXGraph graph, string orderType, string orderNbr, int? lineNbr) 
        => FindBy(graph, orderType, orderNbr, lineNbr);
  }
  public static class FK
  {
    public class Order : SOOrder.PK.ForeignKeyOf<SOLine>.By<orderType, orderNbr> { }
    public class OrderType : SOOrderType.PK.ForeignKeyOf<SOLine>.By<orderType> { }
    public class InventoryItem : IN.InventoryItem.PK.ForeignKeyOf<SOLine>.By<inventoryID> { }
    public class OrigLine : SOLine.PK.ForeignKeyOf<SOLine>.By<origOrderType, origOrderNbr, 
        origLineNbr> { }
    public class POSite : INSite.PK.ForeignKeyOf<SOLine>.By<pOSiteID> { }
    public class OrderTypeOperation : SOOrderTypeOperation.PK.ForeignKeyOf<SOLine>.
        By<orderType, operation> { }
    public class Site : INSite.PK.ForeignKeyOf<SOLine>.By<siteID> { }
    public class ReasonCode : CS.ReasonCode.PK.ForeignKeyOf<SOLine>.By<reasonCode> { }
  }
  #endregion
  	
  ...
} The information based on this markup can help customizers to construct generic inquiries and         OData Version 4  $expand  requests. Also, the new markup simplifies the         customization of system DACs: A developer can understand how the DACs are related and refer         to primary or foreign key classes in complex BQL queries instead of referring to other DAC         fields. An example of a fluent BQL query that uses this approach is shown in the following         code. var rows =
    SelectFrom<SOOrder>.
    InnerJoin<SOLine>.On<SOLine.FK.SOOrder>.
    //              On<
    //                  SOLine.orderType.IsEqual<SOOrder.orderType>.
    //                  And<SOLine.orderNbr.IsEqual<SOOrder.orderNbr>>>
    InnerJoin<SOLineSplit>.On<SOLineSplit.FK.SOLine>.
    //              On<
    //                  SOLineSplit.orderType.IsEqual<SOLine.orderType>.
    //                  And<SOLineSplit.orderNbr.IsEqual<SOLine.orderNbr>>.
    //                  And<SOLineSplit.lineNbr.IsEqual<SOLine.lineNbr>>>
    InnerJoin<InventoryItem>.On<SOLine.FK.Inventory>.
    //              On<SOLine.inventoryID.IsEqual<InventoryItem.inventoryID>>
    Where<
        SOOrder.orderType.IsEqual<@P.AsString>.
        And<SOOrder.orderNbr.IsEqual<@P.AsString>>>.
    View.Select(this, "SO", "SO000001"); The commented lines show the request without foreign keys being used. The information based on the markup is displayed in the following locations: In the  Name  column of the  Related Tables            dialog box, which can be opened on the  Tables  and              Relations  tabs of the   ([~/?ScreenId=SM208000|SM208000]) Generic Inquiry (SM208000) form. For details, see  Platform: Improvements to Generic Inquiries and Reports. In the  Achieved By  column on the  Incoming             References  and  Outgoing References  tabs of the   ([~/?ScreenId=SM401000|SM401000]) DAC Relations (SM401000) form and the   ([~/?ScreenId=SM402000|SM402000]) Merged DAC Relations (SM402000) form. An example is shown in the           following screenshot. Foreign key annotation on the Incoming References tab For details, see  Customization: Displaying Information about DAC Relations. A customizer can also get DACs that are related to a selected DAC by foreign key when using         OData Version 4. ]]></column>
		</row>
		<row PageID="e2b3ed40-bc67-4572-98cb-609954e1d532" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="cae0aea7-6f4a-6726-b0ec-4ceb45034374" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a customizer can define a workflow by using the new Workflow Visual                             Editor in the Customization Project Editor.{br}{TOC}
==The Workflow Visual                             Editor==
To define a workflow, the customizer opens the Customization Project Editor, clicks '''Workflows''' under the screen node that needs to be modified, selects the required workflow, and clicks '''Diagram View''' on the page toolbar. This opens the Workflow Visual                             Editor for the selected workflow, which is shown in the following screenshot.[anchor|#_44196387-1cd1-489f-b89b-2affb568cd40][anchor|#_6f1519ff-4f45-4687-b70b-73bc81a33ef9][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_DiagramViewGeneral.png|popup|The Workflow Visual                             Editor|450px]((({S:Warn}It is not possible to modify the default workflow. Instead, the customizer should create a new workflow based on the default one, or create a new workflow from scratch.
)))
In the Workflow Visual                             Editor, the customizer adds boxes, which represent the states of an entity, and connects the boxes with arrows, which represent transitions between the states. Each box with a state contains smaller boxes with actions and event handlers that appear after the customizer creates a transition and specifies the source and target states.{br}

Available actions and event handlers for the current state are not displayed if they do not trigger any transitions.{br}

If a transition has a condition (that is, if the transition is performed only when the condition is fulfilled), a diamond is displayed above the transition (see Item 1 in the screenshot below).{br}

If an action with a transition contains an auto-run condition (that is, if the action is triggered automatically when the condition is fulfilled), a lightning rod is displayed above the transition (Item 2).{br}

The transition lines are of the same color as the states they originate from, which makes it easier to distinguish between transitions. Also, each transition has a dot that indicates the direction of a transition and that is of the same color as the target state (Item 3).[anchor|#_39b36ffd-6933-47c6-a579-c182abb5ca05][anchor|#_d244a1f8-f318-4087-94be-4d2c58a0ef92][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_DiagramView_WithConditions.png|popup|Conditions for the transitions|450px]
==Elements of the Workflow Visual                             Editor==
The Workflow Visual                             Editor contains buttons and control elements similar to those on the main Workflows page (see [HelpRoot_Dev_Customization\CG_Platform_Tools_Editor_WorkflowEditor|Workflow Editor] for details). Also, as needed, the customizer can click any of the following buttons on the right of the diagram: '''Zoom In''' or '''Zoom Out''' (see Item 1 in the following screenshot), '''Reset Scale to 100%''' (Item 2), '''Fit Screen''' (Item 3), and '''Collapse All/Expand All''' (Item 4).[anchor|#_fa2258b2-0438-4341-813c-16a6c02aee33][anchor|#_c6987a89-7d33-4360-b418-f27b3f1c8928][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_DiagramView.png|popup|The Workflow Visual                             Editor elements|450px]
A box with a state contains the following elements:[anchor|#_447e77be-8ed2-4cd4-b40d-1ea4933eeacd]
*An arrow, which the customizer clicks to expand or collapse, respectively, the list of actions or event handlers that trigger transitions for this state (see Item 5 in the screenshot above)
*An ellipsis (Item 6 in the screenshot above), which the customizer clicks to invoke a context menu with the following commands:
**'''Edit State''': Opens the '''State''' dialog box, which the customizer can use to modify the state (see the screenshot below). The dialog box lists the fields, actions, and event handlers available for the state.[anchor|#_4374becf-ee99-4337-8026-f572a9504f7e][image:ReleaseNotes/Images/RN_2020_R2_RTW_Developer_Workflows_EditStateWindow.png|popup|The State dialog box|350px]
**'''Add Transition''': Opens the '''Add Transition''' dialog box, which the customizer can use to add a transition from the current state to another state (see the following screenshot). In the dialog box, the customizer selects the cause of the transition (either an action or an event handler) and specifies the '''Trigger Name''' and the '''Target State'''.[anchor|#_8fe0c28a-e8d2-415f-8f88-f1b53f8cf589][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_AddTransitionWindow.png|popup|The Add Transition dialog box|250px]
**'''Delete State''': Deletes the state.
*A plus button (Item 7 in the screenshot titled ''The Workflow Visual                             Editor elements''), which the customizer clicks to manually draw a transition line for an action or an event handler that does not have any outgoing transitions from the current state yet. This opens the '''Add Transition''' dialog box with the '''Target State''' box already filled in (see the following screenshot).[anchor|#_91f83770-1fb4-4910-8f02-8603e407a516][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_AddTransitionWindowTargetFilled.png|popup|Add Transition dialog box with Target State filled in|250px]
*:When the transition is created, the action or the event handler that triggers it is added to the box with the current state, with the name the customizer has specified in the '''Trigger Name''' box of the '''Add Transition''' dialog box.

To create a transition for an action or an event handler that already has some outgoing transitions for the current state, the customizer clicks the action or the event handler and draws a line from it to the required state.((({S:Warn}To add a new state to the workflow, the customizer uses the '''Add State''' button on the page toolbar.
)))
The context menu of a transition, which is displayed when the customizer selects the transition, contains two commands:[anchor|#_20264578-1360-4986-b509-e5813e997ed0]
*'''Edit Transition''': Opens the '''Transition''' dialog box (see the following screenshot)[anchor|#_c478e3b1-f602-4d0d-8eb1-f85ab10960b9][image:ReleaseNotes/Images/RN_2020_R2_Beta_Developer_Workflows_EditTransitionWindow.png|popup|The Transition dialog box|350px]
*:In the dialog box, the customizer can specify the fields that should be updated after the transition.
*'''Delete Transition''': Deletes the selected transition
]]></column>
			<column name="PlainText"><![CDATA[Customization: The  Workflow Visual                             EditorIn  Acumatica ERP 2020 R2, a customizer can define a workflow by using the new  Workflow Visual                             Editor in the  Customization Project Editor. The  Workflow Visual                             EditorTo define a workflow, the customizer opens the  Customization Project Editor, clicks  Workflows  under the screen node that needs to be modified,         selects the required workflow, and clicks  Diagram View  on the page         toolbar. This opens the  Workflow Visual                             Editor for the selected workflow, which is shown in the following screenshot. The  Workflow Visual                             EditorIt is not possible to modify the default workflow. Instead, the customizer should create         a new workflow based on the default one, or create a new workflow from scratch. In the  Workflow Visual                             Editor, the customizer adds boxes, which represent the states of an entity, and connects the         boxes with arrows, which represent transitions between the states. Each box with a state         contains smaller boxes with actions and event handlers that appear after the customizer         creates a transition and specifies the source and target states. Available actions and event handlers for the current state are not displayed if they do not         trigger any transitions. If a transition has a condition (that is, if the transition is performed only when the         condition is fulfilled), a diamond is displayed above the transition (see Item 1 in the         screenshot below). If an action with a transition contains an auto-run condition (that is, if the action is         triggered automatically when the condition is fulfilled), a lightning rod is displayed above         the transition (Item 2). The transition lines are of the same color as the states they originate from, which makes         it easier to distinguish between transitions. Also, each transition has a dot that indicates         the direction of a transition and that is of the same color as the target state (Item         3). Conditions for the transitions Elements of the  Workflow Visual                             EditorThe  Workflow Visual                             Editor contains buttons and control elements similar to those on the main Workflows page (see            Workflow Editor for         details). Also, as needed, the customizer can click any of the following buttons on the         right of the diagram:  Zoom In  or  Zoom Out  (see         Item 1 in the following screenshot),  Reset Scale to 100%  (Item 2),            Fit Screen  (Item 3), and  Collapse All/Expand           All  (Item 4). The  Workflow Visual                             Editor elements A box with a state contains the following elements: An arrow, which the customizer clicks to expand or collapse, respectively, the list of           actions or event handlers that trigger transitions for this state (see Item 5 in the           screenshot above) An ellipsis (Item 6 in the screenshot above), which the customizer clicks to invoke a           context menu with the following commands: Edit State : Opens the  State  dialog               box, which the customizer can use to modify the state               ( see               the screenshot below ). The dialog box lists the fields, actions,               and event handlers available for the state. The State dialog box Add Transition : Opens the  Add                 Transition  dialog box, which the customizer can use to add a transition               from the current state to another state (see the following screenshot). In the dialog               box, the customizer selects the cause of the transition (either an action or an event               handler) and specifies the  Trigger Name  and the                  Target State . The Add Transition dialog box Delete State : Deletes the state. A plus button (Item 7 in the screenshot titled  The  Workflow Visual                             Editor elements ), which the customizer clicks to manually draw a transition line for an           action or an event handler that does not have any outgoing transitions from the current           state yet. This opens the  Add Transition  dialog box with the              Target State  box already filled in (see the following             screenshot). Add Transition dialog box with Target State filled in When the transition is created, the action or the event handler that triggers it             is added to the box with the current state, with the name the customizer has specified             in the  Trigger Name  box of the  Add               Transition  dialog box. To create a transition for an action or an event handler that already has some outgoing         transitions for the current state, the customizer clicks the action or the event handler and         draws a line from it to the required state. To add a new state to the workflow, the customizer uses the  Add           State  button on the page toolbar. The context menu of a transition, which is displayed when the customizer selects the         transition, contains two commands: Edit Transition : Opens the  Transition            dialog box (see the following screenshot) The Transition dialog box In the dialog box, the customizer can specify the fields that should be updated             after the transition. Delete Transition : Deletes the selected transition ]]></column>
		</row>
		<row PageID="82fde210-b301-4a79-bf6e-c11153d64521" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="2cbf480d-f371-fd83-0cf0-cc88b911ac30" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a customizer can create and modify event handlers in the Customization Project Editor.
==Event Handler Editor==
A customizer opens the Event Handler Editor by clicking '''Event Handlers''' under the screen ID (of the form on which the customizer is adding or modifying event handlers) in the navigation pane of the Customization Project Editor.{br}

The Event Handler Editor contains the list of event handlers from the predefined workflows, as well as event handlers created by the customizer. Predefined event handlers have the ''Inherited'' status, and the event handlers that the customizer has added have the ''New'' status. The following screenshot shows the event handlers of the [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]) screen.[anchor|#_a129dbbb-f5be-42b1-a73e-1fe48324dbc0][anchor|#_26db1839-9f16-4406-b847-bc13ae4b74b3][image:ReleaseNotes/Images/RN_2020_R2_Developer_Workflows_EventHandlerEditor.png|Event Handler Editor|450px]
To create an event handler, the customizer clicks '''Add New Record''' on the page toolbar. In the '''Event Handler Properties''' dialog box, which opens, the customizer specifies the parameters of the event handler (see the following screenshot).[anchor|#_b6bb0ca5-a326-452d-b273-be5b0c2f6b01][anchor|#_1c79a352-63c5-44cb-a603-3cb0ad060cd9][image:ReleaseNotes/Images/RN_2020_R2_Developer_Workflows_EventHandlerProperties.png|Event Handler Properties dialog box|450px]
For each event handler, the customizer can specify the '''Display Name''', which is displayed in the Workflow Visual                             Editor. The customizer can also specify the fields that should be updated after an event has been processed.{br}

The following screenshot shows the workflow of an order of the ''RM'' type created on the [HelpRoot_FormReference\SO_30_10_00|Sales Orders] ([~/?ScreenId=SO301000|SO301000]) form, with the ''Shipment Confirmed'' event handler highlighted.[anchor|#_fee1a679-cdce-4866-a8a1-0ed422ccc280][anchor|#_67ed7e0c-fdc2-4205-b59e-b4f94af6f07b][image:ReleaseNotes/Images/RN_2020_R2_Developer_Workflows_EventHandler_DisplayName.png|Display Name of the Event Handler|450px]
To add an existing event handler to a state in the Workflow Visual                             Editor, in the box with the required state, the customizer clicks '''…''' > ''' Edit State'''. On the '''Handlers''' tab of the '''State''' dialog box, which opens, the customizer clicks '''Add Row''' and selects the event handler from the drop-down list (see the following screenshot).[anchor|#_953286ee-7bc7-48f1-bae1-4fd7acc48372][anchor|#_b265b60d-cc2c-4498-bf8a-4f46e860a653][image:ReleaseNotes/Images/RN_2020_R2_RTW_Developer_Workflows_EditStateWindow_Handlers.png|The State dialog box|350px]

To add an existing event handler to a state in the tree view, the customizer selects the required state on the '''States and Transitions''' pane. On the '''Handlers''' tab, the customizer clicks '''Add Row''' and selects the event handler from the drop-down list in the added row (see the following screenshot).[anchor|#_d7c8a69a-e7e1-4553-a8d5-7077e6ca46b6][anchor|#_dc2e0f15-f349-450a-9d02-9954aaacd962][image:ReleaseNotes/Images/RN_2020_R2_RTW_Developer_Workflows_HandlersTab.png|The Handlers tab|450px]]]></column>
			<column name="PlainText"><![CDATA[Customization: Supporting Event Handlers in UI In  Acumatica ERP 2020 R2, a customizer can create and modify event handlers in the  Customization Project Editor. Event Handler Editor A customizer opens the Event Handler Editor by clicking  Event           Handlers  under the screen ID (of the form on which the customizer is adding or         modifying event handlers) in the navigation pane of the  Customization Project Editor. The Event Handler Editor contains the list of event handlers from the predefined workflows,         as well as event handlers created by the customizer. Predefined event handlers have the            Inherited  status, and the event handlers that the customizer has added have the            New  status. The following screenshot shows the event handlers of the   ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000) screen. Event Handler Editor To create an event handler, the customizer clicks  Add New Record  on         the page toolbar. In the  Event Handler Properties  dialog box, which         opens, the customizer specifies the parameters of the event handler (see the following         screenshot). Event Handler Properties dialog box For each event handler, the customizer can specify the  Display Name ,         which is displayed in the  Workflow Visual                             Editor. The customizer can also specify the fields that should be updated after an event has         been processed. The following screenshot shows          the         workflow of an order of the  RM  type created on the   ([~/?ScreenId=SO301000|SO301000]) Sales Orders (SO301000)  form, with the            Shipment Confirmed  event handler highlighted. Display Name of the Event Handler To add an existing event handler to a state in the  Workflow Visual                             Editor, in the box with the required state, the customizer clicks  …  Edit State . On the  Handlers  tab of the            State  dialog box, which opens, the customizer clicks  Add           Row  and selects the event handler from the drop-down list (see the following         screenshot). The State dialog box To add an existing event handler to a state in the tree view, the customizer selects the         required state on the  States and Transitions  pane. On the            Handlers  tab, the customizer clicks  Add Row          and selects the event handler from the drop-down list in the added row (see the following         screenshot). The Handlers tab ]]></column>
		</row>
		<row PageID="b0cc7da5-ccb7-49ce-bc32-b1cf315b67f7" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="07847a98-53d4-7de3-f7ca-147e61cdfa0e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, the {{Action}} method of the [https://help-2020r1.acumatica.com/Wiki/ShowWiki|Sales Orders] (SO301000) and [HelpRoot_FormReference\SO_30_20_00|Shipments] ([~/?ScreenId=SO302000|SO302000]) forms has been split into separate methods each performing its own function.
==Action Improvements==
In the previous versions of Acumatica ERP, the {{SOOrderEntry}} and {{SOShipmentEntry}} graphs contained the {{Action}} method, which had the {{Switch}} operator in it. Depending on what action the user had selected, the {{Switch}} operator ran a certain code. In the new version, several actions have been added to replace this combined method for each operation the user performs (for example, ''Create Shipment'', ''Create Invoice'', and ''Create Purchase Order'').((({S:Danger}If a customization contains the combined method, it may not work as expected after the upgrade. We recommend that the developers rewrite the customization to include the new dedicated methods instead.
)))]]></column>
			<column name="PlainText"><![CDATA[Customization: Splitting Combined Methods In  Acumatica ERP 2020 R2, the  Action  method of the  Sales Orders Sales Orders (SO301000) and   ([~/?ScreenId=SO302000|SO302000]) Shipments (SO302000)          forms          has been split into separate methods each performing its own function. Action Improvements In the previous versions of  Acumatica ERP, the  SOOrderEntry  and  SOShipmentEntry  graphs contained         the  Action  method, which had the  Switch  operator in it.         Depending on what action the user had selected, the  Switch  operator ran a         certain code. In the new version, several actions have been added to replace this combined         method for each operation the user performs         ( for         example,  Create Shipment ,  Create Invoice , and  Create Purchase         Order ). If a customization contains the combined method, it may not work as         expected after the upgrade. We recommend that the developers rewrite the customization to         include the new dedicated methods instead. ]]></column>
		</row>
		<row PageID="8f4af647-affc-419e-a366-acfa75b2a45c" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="66d11e90-f765-7812-7353-c94fb8f3f1be" RecordSourceID="22377">
			<column name="Content"><![CDATA[
Previous versions of Acumatica ERP used the Avalara SOAP API to communicate with Avalara. In 2016, Avalara decided to create a REST API to replace the Avalara SOAP API (see [https://developer.avalara.com/avatax/soap-or-rest/]). The Avalara REST API now has the same functionality that the existing Avalara SOAP API has. But unlike the SOAP API, the REST API will be actively developed. In Acumatica ERP 2020 R2, a plug-in has been created that uses the Avalara REST API to communicate with Avalara. We recommend that the new plug-in be used in place of the old one so that the Avalara SOAP API is not used.{br}

When an Acumatica ERP instance is upgraded to Version 2020 R2, the use of the SOAP API is replaced with the use of the REST API as follows:[anchor|#_40ebd2a8-b4fa-4ca8-b1fc-176711ba2a99]
*For each tax provider, if the '''Plug-In (Type)''' box on the ''Tax Providers (TX102000)'' form contains ''PX.TaxProvider.AvalaraSoap.AvalaraSoapTaxProvider'', this value is changed to ''PX.TaxProvider.AvalaraRest.AvalaraRestTaxProvider'', and the value of the '''ENDPOINT''' parameter on the '''Plug-In Parameters''' tab is changed to the URL to which the REST API must connect.
*For each provider of address validation, if the '''Plug-In (Type)''' box on the ''Address Validation Providers (CS103000)'' form contains ''PX.AddressValidator.AvalaraSoap.AvalaraSoapAddressValidator'', this value is changed to ''PX.AddressValidator.AvalaraRest.AvalaraRestAddressValidator'', and the value of the '''ENDPOINT''' parameter on the '''Plug-In Parameters''' tab is changed to the URL to which the REST API must connect.
{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Integration: Migration from the Use of the Avalara SOAP API to the Use of the Avalara         REST API Previous versions of  Acumatica ERP used the Avalara SOAP API to communicate with Avalara. In 2016, Avalara decided                 to create a REST API to replace the Avalara SOAP API (see  ). The Avalara REST API now has the same functionality that                 the existing Avalara SOAP API has. But unlike the SOAP API, the REST API will be                 actively developed. In  Acumatica ERP 2020 R2, a plug-in has been created that uses the Avalara REST API to communicate with                 Avalara. We recommend that the new plug-in be used in place of the old one so that                 the Avalara SOAP API is not used. When an  Acumatica ERP instance is upgraded to Version  2020 R2, the use of the SOAP API is replaced with the use of the REST API as follows: For each tax provider, if the  Plug-In (Type)  box on                         the  Tax Providers (TX102000)  form contains                              PX.TaxProvider.AvalaraSoap.AvalaraSoapTaxProvider , this value is                         changed to  PX.TaxProvider.AvalaraRest.AvalaraRestTaxProvider , and the                         value of the  ENDPOINT  parameter on the                              Plug-In Parameters  tab is changed to the URL to                         which the REST API must connect. For each provider of address validation, if the  Plug-In                             (Type)  box on the  Address Validation Providers                             (CS103000)  form contains                              PX.AddressValidator.AvalaraSoap.AvalaraSoapAddressValidator , this                         value is changed to                              PX.AddressValidator.AvalaraRest.AvalaraRestAddressValidator , and                         the value of the  ENDPOINT  parameter on the                              Plug-In Parameters  tab is changed to the URL to                         which the REST API must connect. ]]></column>
		</row>
		<row PageID="a1718b57-7051-4588-9638-2115ba7c2782" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="4253c4ad-9aa1-7399-b362-35e3244d6e5e" RecordSourceID="22377">
			<column name="Content"><![CDATA[
 Acumatica ERP 2020 R2 introduces a new version of the system contract: the contract Version 4. The contract Version 4 has the following differences compared to the previous version:[anchor|#_8b6798ab-da14-4550-b405-2c6ab004ba8c]
*Validation errors have been returned in the entity fields. An example of such an error is provided in the following code snippet.{{{{"CustomerID": {
 "value": "ABARTENDE1",
 "error": "'Customer' cannot be found in the system."
 }
}}}}
*Notes work as common fields.
*Files can be retrieved by using the {{$expand=Files}} construction for top-level entities and the {{$expand=Details/Files}} construction for detail or linked entities.
*The <tt>NoteID</tt> field (if it exists) is used as an entity identifier. The same behavior is implemented for the previous version of the contract.
*Calls of the contract Version 4 are case-insensitive. The same behavior is implemented for the previous version of the contract.
*The <tt>Company</tt> parameter of the login method has been renamed to <tt>tenant</tt>.
*A method has been added that returns the build version, database version, and list of endpoints.
*The SOAP protocol has been disabled.
*The execution of actions has been unified.
((({S:Hint}The SOAP protocol is still available in the previous versions of the contract.
))){br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Web Services: Introduction of the Contract Version 4  Acumatica ERP 2020 R2 introduces a new version of the system contract: the contract Version 4. The                 contract Version 4 has the following differences compared to the previous                 version: Validation errors have been returned in the entity fields. An example of such an                     error is provided in the following code                     snippet. "CustomerID": {
 "value": "ABARTENDE1",
 "error": "'Customer' cannot be found in the system."
 } Notes work as common fields. Files can be retrieved by using the  $expand=Files  construction                     for top-level entities and the  $expand=Details/Files                      construction for detail or linked entities. The  NoteID  field (if it exists) is used as an entity                     identifier. The same behavior is implemented for the previous version of the                     contract. Calls of the contract Version 4 are case-insensitive. The same behavior is                     implemented for the previous version of the contract. The  Company  parameter of the login method has been renamed to                          tenant . A method has been added that returns the build version, database version, and                     list of endpoints. The SOAP protocol has been disabled. The execution of actions has been unified. The SOAP protocol is still available in the previous versions of the                 contract. ]]></column>
		</row>
		<row PageID="15bdbbc6-384f-4a16-a15a-c301a117dcdb" Language="en-US" PageRevisionID="1" Content="&#xA;In previous versions of Acumatica ERP, in some cases, values to be used in filters had to be passed in inner format that was different from the format in which values were retrieved. In Acumatica ERP 2020 R2, values used in filters must be in the same format as they are retrieved.{br}&#xA;&#xA;For example, in filters by fields containing the financial period, values must be in format {{MMYYYY}}, which is the same as retrieved by Acumatica ERP. In previous versions of Acumatica ERP, values had to be in format {{YYYYMM}}.{br}{TOC}" PlainText="Web Services: Filtering using OData Version 3 was fixed In previous versions of  Acumatica ERP, in some cases, values to be used in filters had to be passed in inner format                 that was different from the format in which values were retrieved. In  Acumatica ERP 2020 R2, values used in filters must be in the same format as they are retrieved. For example, in filters by fields containing the financial period, values must be in                 format  MMYYYY , which is the same as retrieved by  Acumatica ERP. In previous versions of  Acumatica ERP, values had to be in format  YYYYMM . " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="15201ba3-f3a5-6f2b-8251-6cf372c2351f" RecordSourceID="22377" />
		<row PageID="5c771be6-803a-4a21-bc18-9b27e9b52112" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="471224dd-b138-2d78-6f30-d3afac5cf7da" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, a user could invoke only actions for which mapped actions were defined on the [HelpRoot_FormReference\SM_20_70_60|Web Service Endpoints] ([~/?ScreenId=SM207060|SM207060]) form. In Acumatica ERP 2020 R2, a user can also invoke actions that are not mapped in the endpoint.{br}{TOC}
==Invocation of a Custom Action==
The following URL is used to invoke a custom action.{{{{http://&lt;Acumatica ERP instance URL&gt;/entity/Default/20.200.001/&lt;EntityName&gt;/&lt;ActionName&gt;
}}}}{br}

The URL has the following components:[anchor|#_0327805b-9e39-4c1f-9863-869b38e9e8a3]
*{{<EntityName>}}: The name of the entity for which the user needs to invoke the custom or workflow action that is not mapped in the endpoint
*{{<ActionName>}}: The system name of the custom action added to the workflow
{br}

For invocation of a custom action, the {{POST}} HTTP method and an HTTP body with the following pattern are used.{{{{{
    "entity": {
        "id": "&lt;entity id&gt;"
    },
    "parameters": {
        "custom": {
            ...
        }
    }    
}
}}}}{br}

In this pattern, the {{custom}} collection contains the parameters of the action that are normally entered in a dialog box that the system displays upon the execution of the action. The following example contains the HTTP body for the ''Close'' action of the ''Case'' entity with the ''Reason'' parameter.{{{{{
    "entity": {
        "id": "e3f46a39-1a14-e911-816f-bc920a5e0ac8"
    },
    "parameters": {
        "custom": {
            "FilterPreview": {
                "Reason": {
                    "type" : "CustomStringField", 
                    "value" : "Abandoned"
                }
            }
        }
    }    
}
}}}}{br}

If an incorrect action name is passed, the HTTP request returns ''404''.]]></column>
			<column name="PlainText"><![CDATA[Web Services: Supporting Custom Workflow Actions in the Contract Version 4 In previous versions of  Acumatica ERP, a user could invoke only actions for which mapped actions were defined on the                       ([~/?ScreenId=SM207060|SM207060]) Web Service Endpoints (SM207060) form. In  Acumatica ERP 2020 R2, a user can also invoke actions that are not mapped in the endpoint. Invocation of a Custom Action The following URL is used to invoke a custom                 action. http://<Acumatica ERP instance URL>/entity/Default/20.200.001/<EntityName>/<ActionName> The URL has the following components: <EntityName> : The name of the entity for which the user                         needs to invoke the custom or workflow action that is not mapped in the                         endpoint <ActionName> : The system name of the custom action added                         to the workflow For invocation of a custom action, the  POST  HTTP method and an HTTP                 body with the following pattern are                 used. {
    "entity": {
        "id": "<entity id>"
    },
    "parameters": {
        "custom": {
            ...
        }
    }    
} In this pattern, the  custom  collection contains the parameters of                 the action that are normally entered in a dialog box that the system displays upon                 the execution of the action. The following example contains the HTTP body for the                      Close  action of the  Case  entity with the  Reason                  parameter. {
    "entity": {
        "id": "e3f46a39-1a14-e911-816f-bc920a5e0ac8"
    },
    "parameters": {
        "custom": {
            "FilterPreview": {
                "Reason": {
                    "type" : "CustomStringField", 
                    "value" : "Abandoned"
                }
            }
        }
    }    
} If an incorrect action name is passed, the HTTP request returns  404 . ]]></column>
		</row>
		<row PageID="447b1ccf-56ed-410d-8fe7-cf8134509886" Language="en-US" PageRevisionID="1" Content="&#xA;In Acumatica ERP 2020 R2, the ''Default/20.200.001'' endpoint has been introduced. See the following topics for a detailed description of the changes made to the ''Default'' endpoint in comparison with Version ''18.200.001'' of the endpoint:[anchor|#_cb7b2427-cce5-4983-b6f5-9b043a123a69]&#xA;*[HelpRoot_ReleaseNotes\RN_2020_R2_Developer_Financial_API|Web Services: Changes in the Financial API]&#xA;*[HelpRoot_ReleaseNotes\RN_2020_R2_Developer_Service_Management_API|Web Services: Changes in the Service Management API]&#xA;*[HelpRoot_ReleaseNotes\RN_2020_R2_Developer_Commerce_API|Web Services: Changes in the Payment API]&#xA;*[HelpRoot_ReleaseNotes\RN_2020_R2_Developer_CRM_CB_API_4|Web Services: CRM-Related Part of Contract Version 4]&#xA;{br}{TOC}" PlainText="Web Services: Changes in the Default Endpoint In  Acumatica ERP 2020 R2, the  Default/20.200.001  endpoint has been introduced. See the following topics for         a detailed description of the changes made to the  Default  endpoint in comparison with         Version  18.200.001  of the endpoint: Web Services: Changes in the Financial APIWeb Services: Changes in the Service Management APIWeb Services: Changes in the Payment APIWeb Services: CRM-Related Part of Contract Version 4" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="c7b5d1eb-a528-6710-146d-f1a7ed9619b8" RecordSourceID="22377" />
		<row PageID="e4bdf9c3-e96d-49ba-9050-a87c2e631bd5" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="abc69209-a4f7-a4c6-b999-dadbacb92bfc" RecordSourceID="22377">
			<column name="Content"><![CDATA[
The financial functional area of the ''Default/20.200.001'' endpoint of Acumatica ERP has the following differences in comparison with the previous version of the system.{br}

The following entities have been introduced:[anchor|#_bca770e3-b1fe-4c8b-9b82-2aafc47db033]
*The <tt>CompaniesStructure</tt> entity. It corresponds to the ''Company Branch (CS401000)'' form, which is a generic inquiry with the ''API-CompanyBranch'' inquiry title. This form, which is hidden by default, presents the organizational structure of a tenant.
*The <tt>AccountDetailsForPeriodInquiry</tt> entity. It corresponds to the ''Account Details for Period (GL404001)'' form, which is a generic inquiry with the ''API-AccountDetails'' inquiry title. This form, which is hidden by default, displays the transaction history for an account.
*The <tt>Ledger</tt> entity. It corresponds to the [HelpRoot_FormReference\GL_20_15_00|Ledgers] ([~/?ScreenId=GL201500|GL201500]) form, which makes it possible for a user to enter and maintain information about financial ledgers used in the system.
*The <tt>Budget</tt> entity. It corresponds to the [HelpRoot_FormReference\GL_30_20_10|Budgets] ([~/?ScreenId=GL302010|GL302010]) form, which makes it possible for a user to import budgets.
{br}

Also, the <tt>Void</tt> action has been introduced in the <tt>Check</tt> entity (corresponds to the [HelpRoot_FormReference\AP_30_20_00|Checks and Payments] ([~/?ScreenId=AP302000|AP302000]) form) and the <tt>Payment</tt> entity (corresponds to the [HelpRoot_FormReference\AR_30_20_00|Payments and Applications] ([~/?ScreenId=AR302000|AR302000]) form).{br}

The following entities have been removed from the endpoint:[anchor|#_949a4309-cab7-44ad-ab6e-b333f7d50022]
*<tt>VoucherEntryCode</tt>
* <tt>JournalVoucher</tt>
* <tt>ManageFinancialPeriods</tt>
* <tt>InterBranchAccountMapping</tt>
* <tt>AccountByPeriodInquiry</tt>
* <tt>AccountBySubaccountInquiry</tt>
* <tt>AccountLocation</tt>
* <tt>AccountDetailsInquiry</tt>
{br}

The following actions have been removed from the endpoint:[anchor|#_0a4d6c55-e0b6-44ab-ac34-bfeca6ddeb3b]
*The <tt>GeneratePeriod</tt> action of the <tt>FinancialPeriod</tt> entity
*The <tt>ReverseInvoice</tt> action of the <tt>Invoice</tt> entity
*The <tt>PaymentLoadDocuments</tt> action of the <tt>Payment</tt> entity
*The <tt>PaymentLoadOrders</tt> action of the <tt>Payment</tt> entity
*The <tt>TrialBalanceProcess</tt> action of the <tt>TrialBalance</tt> entity
*The <tt>TrialBalanceProcessAll</tt> action of the <tt>TrialBalance</tt> entity
*The <tt>ReleaseTrialBalance</tt> action of the <tt>TrialBalance</tt> entity
{br}

 In the endpoint, <tt>ReportingSettings</tt> entity has been renamed to <tt>TaxReportingSettings</tt>.{br}{TOC}]]></column>
			<column name="PlainText"><![CDATA[Web Services: Changes in the Financial API The financial functional area of the  Default/20.200.001  endpoint of  Acumatica ERP has the following differences in comparison with the previous                                 version of the system. The following entities have been introduced: The  CompaniesStructure  entity. It                                                 corresponds to the  Company Branch (CS401000)                                                  form, which is a generic inquiry with the                                                    API-CompanyBranch  inquiry title. This form,                                                 which is hidden by default, presents the                                                 organizational structure of a tenant. The  AccountDetailsForPeriodInquiry                                                  entity. It corresponds to the  Account Details for                                                   Period (GL404001)  form, which is a generic                                                 inquiry with the  API-AccountDetails  inquiry                                                 title. This form, which is hidden by default,                                                 displays the transaction history for an                                                 account. The  Ledger  entity. It corresponds to                                                 the   ([~/?ScreenId=GL201500|GL201500]) Ledgers                                                 (GL201500) form, which makes it possible for a user                                                 to enter and maintain information about financial                                                 ledgers used in the system. The  Budget  entity. It corresponds to                                                 the   ([~/?ScreenId=GL302010|GL302010]) Budgets                                                 (GL302010) form, which makes it possible for a user                                                 to import budgets. Also, the  Void  action has been introduced in the                                          Check  entity (corresponds to the   ([~/?ScreenId=AP302000|AP302000]) Checks and Payments (AP302000) form) and                                 the  Payment  entity (corresponds to the   ([~/?ScreenId=AR302000|AR302000]) Payments and Applications (AR302000) form). The following entities have been removed from the endpoint: VoucherEntryCode JournalVoucher ManageFinancialPeriods InterBranchAccountMapping AccountByPeriodInquiry AccountBySubaccountInquiry AccountLocation AccountDetailsInquiry The following actions have been removed from the endpoint: The  GeneratePeriod  action of the                              FinancialPeriod  entity The  ReverseInvoice  action of the                              Invoice  entity The  PaymentLoadDocuments  action of the                              Payment  entity The  PaymentLoadOrders  action of the                              Payment  entity The  TrialBalanceProcess  action of the                              TrialBalance  entity The  TrialBalanceProcessAll  action of the                              TrialBalance  entity The  ReleaseTrialBalance  action of the                              TrialBalance  entity  In the endpoint,  ReportingSettings  entity has been renamed to                                          TaxReportingSettings . ]]></column>
		</row>
		<row PageID="89700ef8-7030-4494-8fd1-570a98dcb263" Language="en-US" PageRevisionID="1" Content="&#xA;The service management functional area of the ''Default/20.200.001'' endpoint of Acumatica ERP has the following differences in comparison with the previous version of the system.{br}&#xA;&#xA;The following entities have been introduced:[anchor|#_bca770e3-b1fe-4c8b-9b82-2aafc47db033]&#xA;*The &lt;tt&gt;ServiceOrder&lt;/tt&gt; entity. It corresponds to the ''Service Orders (FS300100)'' form, which makes it possible for a user to enter and maintain information about service orders&#xA;*The &lt;tt&gt;Appointment&lt;/tt&gt; entity. It corresponds to the ''Appointments (FS300200)'' form, which makes it possible for a user to enter and maintain information about appointments&#xA;{br}{TOC}" PlainText="Web Services: Changes in the Service Management API The service management functional area of the  Default/20.200.001                                  endpoint of  Acumatica ERP has the following differences in comparison with the previous                                 version of the system. The following entities have been introduced: The  ServiceOrder  entity. It                                                 corresponds to the  Service Orders (FS300100)                                                  form, which makes it possible for a user to enter                                                 and maintain information about service orders The  Appointment  entity. It                                                 corresponds to the  Appointments (FS300200)                                                  form, which makes it possible for a user to enter                                                 and maintain information about appointments " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="815e0b7c-e28d-a276-a988-41b5c1ab3bf7" RecordSourceID="22377" />
		<row PageID="02568d25-9eda-42bd-adce-05bee765d8b5" Language="en-US" PageRevisionID="1" Content="&#xA;The &lt;tt&gt;Payment&lt;/tt&gt; entity of the ''Default/20.200.001'' endpoint of Acumatica ERP has the following differences in comparison with the previous version of the system:[anchor|#_48d8bdea-bb83-4a30-9d88-6d7b46b7e6c5]&#xA;*The &lt;tt&gt;CreditCardTransactionInfo&lt;/tt&gt; field has been added to the &lt;tt&gt;Payment&lt;/tt&gt; entity of the ''Default/20.200.001'' endpoint so that a developer can specify external transaction details for credit card processing.&#xA;*The &lt;tt&gt;SaveCard&lt;/tt&gt;, &lt;tt&gt;ProcessingCenterID&lt;/tt&gt;, and &lt;tt&gt;LastModifiedDateTime&lt;/tt&gt; fields have been added to the &lt;tt&gt;Payment&lt;/tt&gt; entity of the ''Default/20.200.001'' endpoint.&#xA;{br}{TOC}" PlainText="Web Services: Changes in the Payment API The  Payment  entity of the  Default/20.200.001  endpoint of  Acumatica ERP has the following differences in comparison with the previous version of the system: The  CreditCardTransactionInfo  field has been added to the              Payment  entity of the  Default/20.200.001  endpoint so that a           developer can specify external transaction details for credit card processing. The  SaveCard ,  ProcessingCenterID , and              LastModifiedDateTime  fields have been added to the              Payment  entity of the  Default/20.200.001  endpoint. " ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="78db5967-a632-3814-9615-18e42b75e3dc" RecordSourceID="22377" />
		<row PageID="eaf96530-5d46-40ad-b192-1532832f8d64" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f633bc10-aa4d-4622-bf46-234d09d42f99" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In Acumatica ERP 2020 R2, a sales order with payments can been created in one REST API call. A sales order with payments is created by using the URL, HTTP method, HTTP body, and HTTP headers described below.{br}{TOC}
==URL==
For the creation of a sales order, the following URL is used.{{{{http://&lt;Acumatica ERP instance URL&gt;/entity/&lt;Endpoint name&gt;/&lt;Endpoint version&gt;/SalesOrder
}}}}{br}

For example, to create a sales order in a local Acumatica ERP instance with the name ''AcumaticaDB'' by using a system endpoint with the ''Default'' name and the ''20.200.001'' version, the following URL is used: ''http://localhost/AcumaticaDB/entity/Default/20.200.001/SalesOrder''.
==HTTP Headers==
The following headers can be specified in a request.[anchor|#_cae055d2-8aa2-4da7-b82e-d70b7d69b108]
{| class="checklist" | width="100%" 
|- 
!width="50%" ! Header
!width="50%" ! Description
|- 
| {{Accept}}
| Specifies the format of the response body, which can have the {{application/json}} value.
|- 
| {{Content-Type}}
| Specifies the format of the request body, which can have the {{application/json}} value.
|}
==HTTP Method==
For the creation of a sales order, the {{PUT}} HTTP method is used.
==HTTP Body==
Below is an example of an HTTP body for the creation of a sales order with a cash payment and a credit card payment.{{{{{
    "OrderType": {
        "value": "SO"
    },
    "CustomerID": {
        "value": "WIDGETCC"
    },
    "LocationID": {
        "value": "MAIN"
    },
    "Description": {
        "value": "BigCommerce Order #196 R"
    },
    "Branch": {
        "value": "PRODWHOLE"
    },
    "CurrencyID": {
        "value": "USD"
    },
    "Date": {
        "value": "2020-01-25T13:07:40Z"
    },
    "DisableAutomaticDiscountUpdate": {
        "value": true
    },
    "ExternalReference": {
        "value": "196"
    },
    "Hold": {
        "value": false
    },
    "RequestedOn": {
        "value": "2020-01-25T13:07:40Z"
    },
    "ShipVia": {
        "value": "LOCAL"
    },
    "Payments": [
        {
            "PaymentRef": {
                "value": "ABCA4"
            },
            "ApplicationDate": {
                "value": "2020-01-25T13:07:40Z"
            },
            "PaymentMethod": {
                "value": "CASH"
            },
            "CashAccount": {
                "value": "10100"
            },
            "PaymentAmount": {
                "value": 20
            },
            "AppliedToOrder": {
                "value": 6
            },
            "Description": {
                "value": "CASH payment"
            }
        },
        {
            "ApplicationDate": {
                "value": "06-30-2020"
            },
            "PaymentMethod": {
                "value": "VISATOK"
            },
            "CashAccount": {
                "value": "10600"
            },
            "SaveCard": {
                "value": true
            },
            "PaymentAmount": {
                "value": "100"
            },
            "ProcessingCenterID": {
                "value": "AUTHNETAPI"
            },
            "AppliedToOrder": {
                "value": 90
            },
            "CreditCardTransactionInfo": [
                {
                    "TranType": {
                        "value": "AAC"
                    },
                    "TranNbr": {
                        "value": "40050474125"
                    },
                    "AuthNbr": {
                        "value": ""
                    },
                    "ExtProfileId": {
                        "value": "345"
                    },
                    "TranDate": {
                        "value": "2020-06-30T10:32:27.1+03:00"
                    },
                    "NeedValidation": {
                        "value": true
                    }
                }
            ]
        }
    ],
    "Details": [
        {
            "Branch": {
                "value": "PRODWHOLE "
            },
            "DiscountAmount": {
                "value": 10
            },
            "ExtendedPrice": {
                "value": 500
            },
            "FreeItem": {
                "value": false
            },
            "ManualPrice": {
                "value": true
            },
            "InventoryID": {
                "value": "AACOMPUT01"
            },
            "LineDescription": {
                "value": "Acer Laptop Computer EC"
            },
            "OrderQty": {
                "value": 1
            },
            "UnitPrice": {
                "value": 500
            }
        }
    ],
    ...
}
}}}}]]></column>
			<column name="PlainText"><![CDATA[Web Services: Creation of a Sales Order with Payments in One REST API Call In  Acumatica ERP 2020 R2, a sales order with payments can been created in one REST API call. A sales order                 with payments is created by using the URL, HTTP method, HTTP body, and HTTP headers                 described below. URL For the creation of a sales order, the following URL is                 used. http://<Acumatica ERP instance URL>/entity/<Endpoint name>/<Endpoint version>/SalesOrder For example, to create a sales order in a local Acumatica ERP instance with the name                      AcumaticaDB  by using a system endpoint with the  Default  name and                 the  20.200.001  version, the following URL is used:                      http://localhost/AcumaticaDB/entity/Default/20.200.001/SalesOrder . HTTP Headers The following headers can be specified in a request. Header Description Accept Specifies the format of the response body, which can have the                                          application/json  value. Content-Type Specifies the format of the request body, which can have the                                          application/json  value. HTTP Method For the creation of a sales order, the  PUT  HTTP method is used. HTTP Body Below is an example of an HTTP body for the creation of a sales order with a cash                 payment and a credit card                 payment. {
    "OrderType": {
        "value": "SO"
    },
    "CustomerID": {
        "value": "WIDGETCC"
    },
    "LocationID": {
        "value": "MAIN"
    },
    "Description": {
        "value": "BigCommerce Order #196 R"
    },
    "Branch": {
        "value": "PRODWHOLE"
    },
    "CurrencyID": {
        "value": "USD"
    },
    "Date": {
        "value": "2020-01-25T13:07:40Z"
    },
    "DisableAutomaticDiscountUpdate": {
        "value": true
    },
    "ExternalReference": {
        "value": "196"
    },
    "Hold": {
        "value": false
    },
    "RequestedOn": {
        "value": "2020-01-25T13:07:40Z"
    },
    "ShipVia": {
        "value": "LOCAL"
    },
    "Payments": [
        {
            "PaymentRef": {
                "value": "ABCA4"
            },
            "ApplicationDate": {
                "value": "2020-01-25T13:07:40Z"
            },
            "PaymentMethod": {
                "value": "CASH"
            },
            "CashAccount": {
                "value": "10100"
            },
            "PaymentAmount": {
                "value": 20
            },
            "AppliedToOrder": {
                "value": 6
            },
            "Description": {
                "value": "CASH payment"
            }
        },
        {
            "ApplicationDate": {
                "value": "06-30-2020"
            },
            "PaymentMethod": {
                "value": "VISATOK"
            },
            "CashAccount": {
                "value": "10600"
            },
            "SaveCard": {
                "value": true
            },
            "PaymentAmount": {
                "value": "100"
            },
            "ProcessingCenterID": {
                "value": "AUTHNETAPI"
            },
            "AppliedToOrder": {
                "value": 90
            },
            "CreditCardTransactionInfo": [
                {
                    "TranType": {
                        "value": "AAC"
                    },
                    "TranNbr": {
                        "value": "40050474125"
                    },
                    "AuthNbr": {
                        "value": ""
                    },
                    "ExtProfileId": {
                        "value": "345"
                    },
                    "TranDate": {
                        "value": "2020-06-30T10:32:27.1+03:00"
                    },
                    "NeedValidation": {
                        "value": true
                    }
                }
            ]
        }
    ],
    "Details": [
        {
            "Branch": {
                "value": "PRODWHOLE "
            },
            "DiscountAmount": {
                "value": 10
            },
            "ExtendedPrice": {
                "value": 500
            },
            "FreeItem": {
                "value": false
            },
            "ManualPrice": {
                "value": true
            },
            "InventoryID": {
                "value": "AACOMPUT01"
            },
            "LineDescription": {
                "value": "Acer Laptop Computer EC"
            },
            "OrderQty": {
                "value": 1
            },
            "UnitPrice": {
                "value": 500
            }
        }
    ],
    ...
} ]]></column>
		</row>
		<row PageID="93ee88b9-7f38-4ab3-9154-09bd81179aa0" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="faccc696-89bc-4535-5cbf-18cb3f7848b0" RecordSourceID="22377">
			<column name="Content"><![CDATA[
 Acumatica ERP 2020 R2 presents the contract Version 4.0. The part of the contract related to CRM has the following differences in comparison with its previous version.{br}{TOC}
==Changes in Attributes==
The attributes of top-level entities are exposed in the <tt>AttributeValue</tt> entities (instead of the <tt>AttributeDetail</tt> entity) that have the following fields:[anchor|#_2ca010ec-6c6c-4aa8-9f01-b17d051027cd]
*<tt>AttributeID</tt> is the attribute identifier. Both internal values and external values can be used to set this field, but only the internal value can be retrieved.
*<tt>AttributeDescription</tt> is the external value of the attribute identifier. The field is read-only.
*<tt>Value</tt> is the attribute value. When the value is retrieved, the internal value is returned. To set the value, the internal value and, for control types other than multiselect combo boxes, the external value can be used. For multiselect combo boxes, an external value can be accepted only if it contains a single value without commas. For various control types, the following rules apply to the <tt>Value</tt> field:
**For check boxes, ''0'' is returned if the check box is not selected, and ''1'' is returned if the check box is selected. For setting a value, ''0'', ''1'', ''false'' (case-insensitive), or ''true'' (case-insensitive) can be used.
**For multiselect combo boxes, the values separated by commas (namely, ''Value1,Value2,Value3'') compose the internal value.
**For selectors, the values are set and retrieved in the same way as they are for text boxes.
**For date edit boxes, the internal values must be parseable by using the <tt>System.Globalization.CultureInfo.InvariantCulture</tt> Microsoft .NET object.
**For combo boxes of all types, date edit boxes, and check boxes, an error message is written to the <tt>error</tt> field when an attempt is made to set an unsupported value.
*<tt>ValueDescription</tt> is the external value of the attribute. The field is read-only. For various control types, the external value means the following:
**For text boxes and date edit boxes, the external value is the same as the internal value.
**For check boxes, the external value can be either ''True'' or ''False''.
**For combo boxes, the label is used as the external value.
**For multiselect combo boxes, the labels separated by commas and spaces after commas (namely, ''Label1, Label2, Label3'') compose the external value.
*<tt>Required</tt> (not changed).
*<tt>RefNoteID</tt> (not changed).

==Introduced Relationship Between Entities==
The following fields are added to the <tt>Activity</tt> entity that allows the user to establish the relationship of <tt>Activity</tt>, <tt>Event</tt>, <tt>Task</tt>, and <tt>Email</tt> objects with other objects:[anchor|#_caeec219-2c60-4ea8-aea6-a0c69092bc7b]
*<tt>RelatedEntityNoteID</tt>: The <tt>NoteID</tt> value of the object with which the relationship is established.
*<tt>RelatedEntityType</tt>: The full name of the type of the object with which the relationship is established (for example, <tt>PX.Objects.CR.Contact</tt>). This field is optional, but we recommend using it. The field can be omitted only if the object with which the relationship is established has a persisting note record in the database (<tt>BusinessAccount</tt> objects always have such records, while <tt>Contact</tt> and <tt>Lead</tt> objects do not).
*<tt>RelatedEntityDescription</tt>: The description of the related object. This field is read-only.
((({S:Warn}The object with which the relationship is established by means of the fields listed above must have the <tt>NoteID</tt> field decorated with the <tt>PXNoteAttribute</tt> attribute; also, the <tt>ShowInReferenceSelector</tt> property must be set to ''true''. (These are the same requirements on the object to make it visible in a selector control.) If an object does not meet these requirements, the relationship cannot be established.
)))]]></column>
			<column name="PlainText"><![CDATA[Web Services: CRM-Related Part of Contract Version 4  Acumatica ERP 2020 R2 presents the contract Version 4.0. The part of the contract                                 related to CRM has the following differences in comparison with its                                 previous version. Changes in Attributes The attributes of top-level entities are exposed in the                                          AttributeValue  entities (instead of the                                          AttributeDetail  entity) that have the                                 following fields: AttributeID  is the attribute                                                 identifier. Both internal values and external values                                                 can be used to set this field, but only the internal                                                 value can be retrieved. AttributeDescription  is the external                                                 value of the attribute identifier. The field is                                                 read-only. Value  is the attribute value. When                                                 the value is retrieved, the internal value is                                                 returned. To set the value, the internal value and,                                                 for control types other than multiselect combo                                                 boxes, the external value can be used. For                                                 multiselect combo boxes, an external value can be                                                 accepted only if it contains a single value without                                                 commas. For various control types, the following                                                 rules apply to the  Value                                                    field: For check boxes,  0  is returned if the                                                   check box is not selected, and  1  is                                                   returned if the check box is selected. For setting                                                   a value,  0 ,  1 ,  false                                                    (case-insensitive), or  true                                                    (case-insensitive) can be used. For multiselect combo boxes, the values                                                   separated by commas (namely,                                                    Value1,Value2,Value3 ) compose the internal                                                   value. For selectors, the values are set and                                                   retrieved in the same way as they are for text                                                   boxes. For date edit boxes, the internal values must                                                   be parseable by using the                                                    System.Globalization.CultureInfo.InvariantCulture                                                    Microsoft .NET object. For combo boxes of all types, date edit boxes,                                                   and check boxes, an error message is written to                                                   the  error  field when an attempt                                                   is made to set an unsupported value. ValueDescription  is the external                                                 value of the attribute. The field is read-only. For                                                 various control types, the external value means the                                                   following: For text boxes and date edit boxes, the                                                   external value is the same as the internal                                                   value. For check boxes, the external value can be                                                   either  True  or  False . For combo boxes, the label is used as the                                                   external value. For multiselect combo boxes, the labels                                                   separated by commas and spaces after commas                                                   (namely,  Label1, Label2, Label3 ) compose                                                   the external value. Required  (not changed). RefNoteID  (not changed). Introduced Relationship Between Entities The following fields are added to the  Activity  entity                                 that allows the user to establish the relationship of                                          Activity ,  Event ,                                          Task , and  Email                                  objects with other objects: RelatedEntityNoteID : The                                                    NoteID  value of the object with                                                 which the relationship is established. RelatedEntityType : The full name of                                                 the type of the object with which the relationship                                                 is established (for example,                                                    PX.Objects.CR.Contact ). This                                                 field is optional, but we recommend using it. The                                                 field can be omitted only if the object with which                                                 the relationship is established has a persisting                                                 note record in the database                                                   ( BusinessAccount  objects always                                                 have such records, while  Contact                                                  and  Lead  objects do not). RelatedEntityDescription : The                                                 description of the related object. This field is                                                 read-only. The object with which the relationship is established by means of the                                 fields listed above must have the  NoteID  field                                 decorated with the  PXNoteAttribute  attribute;                                 also, the  ShowInReferenceSelector  property must                                 be set to  true . (These are the same requirements on the                                 object to make it visible in a selector control.) If an object does                                 not meet these requirements, the relationship cannot be                                 established. ]]></column>
		</row>
		<row PageID="0c312484-cbdd-4940-9796-1c85f3cf64d4" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="f3b6694f-8fd3-fa11-d291-28d2f36a7ff4" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, a developer could use the OData interface based on the OData Version 3.0 protocol to access the business functionality and data of Acumatica ERP. This interface makes it possible for a developer to request data from generic inquiries that are configured in Acumatica ERP.{br}

 Acumatica ERP 2020 R2 introduces a new OData interface based on the [https://www.odata.org/documentation/|OData Version 4.0] protocol. Also, a developer can request data from Acumatica ERP by directly accessing DACs without configuring any generic inquiry.((({S:Warn}Password fields are retrieved encrypted.
))){br}{TOC}
==Retrieval of the Full Set of Metadata of the Instance==
The following URL can be used to get the full list of DACs, their fields, the fields&rsquo; types, and the navigation properties of DACs, which are relationships between the DACs.{{{{https://&lt;Acumatica ERP instance URL&gt;/odata4/&lt;tenant&gt;/$metadata
}}}}((({S:Warn}In this URL and other URLs presented in this topic, the tenant can be omitted if the Acumatica ERP instance has only one tenant.
)))
The navigation properties contain detail entities in the {{<detail_entity_type>Collection}} format and related entities in the {{<related_entity_type>By<master_entity_field>}} format. For example, the definition of the {{PX.Objects.SO.SOOrder}} DAC has the {{SOLineCollection}} navigation property, which states that the {{PX.Objects.SO.SOLine}} DAC is a detail entity. It also has the {{BAccountByCustomerID}} navigation property, which links the {{CustomerID}} field of the {{PX.Objects.SO.SOOrder}} DAC with the {{BAccountID}} field of the {{PX.Objects.CR.BAccount}} DAC.
==Retrieval of All Records of a DAC==
The following URL can be used to get all records of a DAC.{{{{https://&lt;Acumatica ERP instance URL&gt;/odata4/&lt;tenant&gt;/&lt;DAC&gt;
}}}}In this URL, the DAC is specified by its fully qualified name, by its display name, or by its short name (which does not include the namespace). For example, the use of either of the following URLs leads to the same result of receiving the contents of the <tt>SOOrder</tt> entity;[anchor|#_c68159a6-4928-4a60-88fc-8db23a6bb7f5]
*''https://localhost/AcumaticaERP/odata4/SOOrder''
* ''https://localhost/AcumaticaERP/odata4/PX&#95;Objects&#95;SO&#95;SOOrder''

==Retrieval of a Record by the Key Fields==
A developer can retrieve a record with certain values of key fields by specifying these fields and their values in the URL.{br}

The following sample URL retrieves the sales order whose {{OrderType}} field value is {{'SO'}} and whose {{OrderNbr}} field value is {{'000058'}}: ''https://localhost/AcumaticaERP/odata4/SOOrder(OrderType=&rsquo;SO&rsquo;,OrderNbr=&rsquo;000058&rsquo;)''.
==Specification of a Filter==
A developer can obtain records that meet a certain filter by specifying this filter in the URL.{br}

The following sample URL retrieves the sales orders whose {{OrderType}} field value is {{'IN'}}: ''https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq &rsquo;IN&rsquo;)''.
==Retrieval of Related Data==
If an entity has a detail entity, a developer can obtain the records of a master entity along with their details in a single query by using the <tt>$expand</tt> parameter.{br}

The following sample URL retrieves sales orders along with their detail information: ''https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq &rsquo;IN&rsquo;)&$expand=SOLineCollection''.{br}

The following sample URL retrieves sales orders along with their customers’ information: ''https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq &rsquo;IN&rsquo;)&$expand=BAccountByCustomerID''.
==Restriction of Data Access to the New Role==
In Acumatica ERP 2020 R2, a new ''ODatav4 User'' role has been introduced that has the following description: ''Access to data exposed via OData v4''. A user is allowed to retrieve data by using the OData Version 4 interface only if the user has the ''ODatav4 User'' role.
==Other Rules that Restrict Data Access==
 Acumatica ERP 2020 R2 applies the following rules for restricting access to objects by using the OData Version 4 interface:[anchor|#_017c40ae-6b2f-41f5-8676-7e1f5dcdf8ae]
*Existing row-level security rules
*Rules that are set by the <tt>GITables.xml</tt> file located in the <tt>App&#95;Data</tt> folder of the website, in which visible and hidden groups of DACs are specified
]]></column>
			<column name="PlainText"><![CDATA[Web Services: Introduction of the OData Version 4 Interface In previous versions of  Acumatica ERP, a developer could use the OData interface based on the OData Version 3.0                 protocol to access the business functionality and data of  Acumatica ERP. This interface makes it possible for a developer to request data from generic                 inquiries that are configured in  Acumatica ERP.  Acumatica ERP 2020 R2 introduces a new OData interface based on the  OData                     Version 4.0 OData Version 4.0 protocol. Also, a developer can request data from  Acumatica ERP by directly accessing DACs without configuring any generic inquiry. Password fields are retrieved encrypted. Retrieval of the Full Set of Metadata of the Instance The following URL can be used to get the full list of DACs, their fields, the fields'                 types, and the navigation properties of DACs, which are relationships between the                 DACs. https://<Acumatica ERP instance URL>/odata4/<tenant>/$metadata In this URL and other URLs presented in this topic, the tenant can be omitted if                 the  Acumatica ERP instance has only one tenant. The navigation properties contain detail entities in the                      <detail_entity_type>Collection  format and related entities                 in the  <related_entity_type>By<master_entity_field>  format.                 For example, the definition of the  PX.Objects.SO.SOOrder  DAC has                 the  SOLineCollection  navigation property, which states that the                      PX.Objects.SO.SOLine  DAC is a detail entity. It also has the                      BAccountByCustomerID  navigation property, which links the                      CustomerID  field of the  PX.Objects.SO.SOOrder                  DAC with the  BAccountID  field of the                      PX.Objects.CR.BAccount  DAC. Retrieval of All Records of a DAC The following URL can be used to get all records of a                 DAC. https://<Acumatica ERP instance URL>/odata4/<tenant>/<DAC> In                 this URL, the DAC is specified by its fully qualified name, by its display name, or                 by its short name (which does not include the namespace). For example, the use of                 either of the following URLs leads to the same result of receiving the contents of                 the  SOOrder  entity; https://localhost/AcumaticaERP/odata4/SOOrder https://localhost/AcumaticaERP/odata4/PX_Objects_SO_SOOrder Retrieval of a Record by the Key Fields A developer can retrieve a record with certain values of key fields by specifying                 these fields and their values in the URL. The following sample URL retrieves the sales order whose  OrderType                  field value is                      'SO'                  and whose  OrderNbr  field value is  '000058' :                      https://localhost/AcumaticaERP/odata4/SOOrder(OrderType='SO',OrderNbr='000058') . Specification of a Filter A developer can obtain records that meet a certain filter by specifying this filter                 in the URL. The following sample URL retrieves the sales orders whose  OrderType                  field value is  'IN' :                      https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq                 'IN') . Retrieval of Related Data If an entity has a detail entity, a developer can obtain the records of a master                 entity along with their details in a single query by using the                      $expand  parameter. The following sample URL retrieves sales orders along with their detail information:                      https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq                     'IN')&$expand=SOLineCollection . The following sample URL retrieves sales orders along with their customers’                 information:  https://localhost/AcumaticaERP/odata4/SOOrder?$filter=(OrderType eq                     'IN')&$expand=BAccountByCustomerID . Restriction of Data Access to the New Role In  Acumatica ERP 2020 R2, a new  ODatav4 User  role has been introduced that has the following                 description:  Access to data exposed via OData v4 . A user is allowed to                 retrieve data by using the OData Version 4 interface only if the user has the                      ODatav4 User  role. Other Rules that Restrict Data Access  Acumatica ERP 2020 R2 applies the following rules for restricting access to objects by using the OData                 Version 4 interface: Existing row-level security rules Rules that are set by the  GITables.xml                          file                          located in the  App_Data  folder of the                         website , in which visible and hidden groups of DACs are                         specified ]]></column>
		</row>
		<row PageID="19ec53fa-3a1d-4915-9392-6db125bbccb7" Language="en-US" PageRevisionID="1" ApprovalByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" ApprovalDateTime="1970-01-23 00:00:00" CreatedByID="b5344897-037e-4d58-b5c3-1bdfd0f47bf9" CreatedDateTime="1970-01-23 00:00:00" UID="d7abab33-0327-cd67-da90-0b1685940877" RecordSourceID="22377">
			<column name="Content"><![CDATA[
In previous versions of Acumatica ERP, mapping a generic inquiry to an endpoint entity could be made manually. Acumatica ERP 2020 R2 automates this process.{br}{TOC}
==Algorithm of the Automated Mapping of Generic Inquiries to Endpoint Entities==
Automatic mapping of a generic inquiry to an endpoint entity is performed as follows:[anchor|#_c92f01a4-3fc4-47ab-ba2b-b6ec6652c8a5]
#When a new entity is created in a new or extended endpoint and is linked with a generic inquiry screen, all fields from the generic inquiry filter are copied automatically to this entity. If no filter is specified in the generic inquiry, no field is added to the top-level entity.
#A nested entity is created with the following properties:
#*Name: ''&lt;Top-level entity name&gt;Details''
#*Object Name: ''&lt;Top-level entity name&gt;Detail''
#*Object Type: ''Detail''
#:The nested entity is populated with all fields from the '''Results''' grid of the generic inquiry except the <tt>Selected</tt> and <tt>Row Number</tt> fields.
]]></column>
			<column name="PlainText"><![CDATA[Web Services: Mapping of Generic Inquiries to Endpoint Entities Is Automated In previous versions of  Acumatica ERP, mapping a generic inquiry to an endpoint entity could be made manually.  Acumatica ERP 2020 R2 automates this process. Algorithm of the Automated Mapping of Generic Inquiries to Endpoint                 Entities Automatic mapping of a generic inquiry to an endpoint entity is performed as                     follows: When a new entity is created in a new or extended endpoint and is linked                         with a generic inquiry screen, all fields from the generic inquiry filter                         are copied automatically to this entity. If no filter is specified in the                         generic inquiry, no field is added to the top-level entity. A nested entity is created with the following properties: Name:  <Top-level entity name>Details Object Name:  <Top-level entity name>Detail Object Type:  Detail The nested entity is populated with all fields from the                                  Results  grid of the generic inquiry except the                                  Selected  and  Row Number                              fields. ]]></column>
		</row>
	</rows>
</data>