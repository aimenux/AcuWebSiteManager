define("controls/gojs-workflow/index",["require","exports","./workflow-diagram/workflow-diagram"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function o(e){e.globalResources([i.QPWorkflowDiagramCustomElement])}t.configure=o}));define("controls/gojs-workflow/workflow-diagram/helpers/context-menu",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContextMenu=void 0;var i=function(){function e(e){this.cxElementNode=document.getElementById(e);document.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}e.prototype.showContextMenu=function(t,i,o){if(i===void 0){i=e.OPENMENU_COLUMN_CLASSNAME}if(o===void 0){o={x:-100,y:5}}if(!this.cxElementNode)return;switch(i.toLowerCase()){case"row":i=e.OPENMENU_ROW_CLASSNAME;break;case"column":i=e.OPENMENU_COLUMN_CLASSNAME;break}this.cxElementNode.classList.add(i);var r=t;this.cxElementNode.style.left=r.x+o.x+"px";this.cxElementNode.style.top=r.y+o.y+"px"};e.prototype.hideContextMenu=function(){if(!this.cxElementNode)return;this.cxElementNode.classList.remove(e.OPENMENU_COLUMN_CLASSNAME);this.cxElementNode.classList.remove(e.OPENMENU_ROW_CLASSNAME)};e.OPENMENU_COLUMN_CLASSNAME="dia-show-menu-column";e.OPENMENU_ROW_CLASSNAME="dia-show-menu-row";return e}();t.ContextMenu=i}));define("controls/gojs-workflow/workflow-diagram/helpers/diagram-config",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true})}));define("controls/gojs-workflow/workflow-diagram/helpers/diagram-properties",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DiagramProperties=void 0;t.DiagramProperties={LicenseKey:"73f947e0b26531b700ca0d2b113f69ed1bb37f3b9ed41ef35e5041f2ef0e6d463089ef7a01db8bc9dafa1aff1879c18dd4cd6c2a9f1b013ce130d3d840e484ade13377b6061841dbf4052691c9fb38b1ff7972f3ddb568a1df",link:"link",node:"node",opacitySetting:{normal:1,linkOpacity:{"opaсity":.24,selected:1,highlighted:1},nodeOpacity:{"opaсity":.5,selected:1,highlighted:1}},nodeColor:{startColor:"#cdf2cc",defaultColor:"#eeeeee"},strings:{waitAnswer:"waitAnswer",confirmTextRemoveState:"Are you sure you want to delete the state?",confirmTextRemoveTransition:"Are you sure you want to delete the transition?"},transactionNames:{highlight:"highlight"},callBackNames:{showTransition:"showTransition",showStates:"showStates",addTransition:"addTransition",new_predifined_node:"new predifined node",new_node:"new node",AddTransitionNode:"AddTransitionNode"},colors:{font:"white",selectedStroke:"black",item:{background:"rgba(0, 0, 0, 0.2)"},highlighted:"rgba(0,90,156,0.3)",main:[{node:"#CA57F2",link:"#A146C2"},{node:"#964B00",link:"#783C00"},{node:"#4FD0B1",link:"#3FA68E"},{node:"#EA0610",link:"#BB050D"},{node:"#F6C244",link:"#C6A554"},{node:"#53A451",link:"#428341"},{node:"#027ACC",link:"#0262A3"},{node:"#8E30ED",link:"#7226BE"},{node:"#5E5E5E",link:"#4B4B4B"}]}}}));define("controls/gojs-workflow/workflow-diagram/helpers/event-args-message",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EventArgsMessage=t.EventNames=void 0;t.EventNames={updateDiagram:"updateDiagram",changedSelection:"changedSelection"};var i=function(){function e(){}return e}();t.EventArgsMessage=i}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,o){if(o===undefined)o=i;Object.defineProperty(e,o,{enumerable:true,get:function(){return t[i]}})}:function(e,t,i,o){if(o===undefined)o=i;e[o]=t[i]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.hasOwnProperty.call(e,i))__createBinding(t,e,i);__setModuleDefault(t,e);return t};define("controls/gojs-workflow/workflow-diagram/helpers/go-wrapper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GoWrapper=void 0;var i=function(){function t(){var t=this;var i,o;this.ready=new Promise((function(e,t){i=e,o=t}));new Promise((function(t,i){e(["gojs"],t,i)})).then(__importStar).then((function(e){t.go=e;t.goMake=e.GraphObject.make;i()}))}return t}();t.GoWrapper=i}));define("controls/gojs-workflow/workflow-diagram/helpers/workflow-diagram-confirm",["require","exports","tslib","aurelia-framework"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkflowDiagramConfirm=void 0;var r=function(){function e(){this.data=undefined;this.value=undefined}e.prototype.ok=function(){this.value="ok"};e.prototype.cancel=function(){this.value="cancel"};i.__decorate([o.bindable,i.__metadata("design:type",Object)],e.prototype,"data",void 0);i.__decorate([o.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);return e}();t.WorkflowDiagramConfirm=r}));define("text!controls/gojs-workflow/workflow-diagram/helpers/workflow-diagram-confirm.css",[],(function(){return".dia-confirm-modal {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: #0003;\n    z-index: 1000;\n}\n\n.dia-confirm-container {\n    user-select: none;\n    width: 400px;\n    height: 100px;\n    position: absolute;\n    top: 30%;\n    left: 40%;\n    z-index: 10;\n    background: white;\n    border: 1px solid lightgray;\n    border-radius: 5px;\n    padding: 15px;\n    font-weight: bold;\n}\n\n.dia-confirm-text {\n    height: 50px;\n    text-align: center;\n}\n\n.dia-confirm-span {\n    height: 20px;\n}\n\n.dia-confirm-buttons {\n    text-align: right;\n}\n\n.dia-confirm-btn {\n    margin: 0 5px;\n    height: 22px;\n    border: 0;\n    font-weight: bold;\n    background-color: transparent;\n}\n\n.dia-confirm-btn:hover {\n    border: 0;\n    cursor: pointer;\n    text-decoration: underline;\n}\n\n.dia-confirm-btn-ok {\n    color: darkred;\n}\n\n.dia-confirm-btn-cancel {\n    color: royalblue;\n}"}));define("text!controls/gojs-workflow/workflow-diagram/helpers/workflow-diagram-confirm.html",[],(function(){return'<template>\n    <require from="./workflow-diagram-confirm.css"></require>\n    <div class="dia-confirm-modal">\n        <div class="dia-confirm-container">\n            <div class="dia-confirm-text">${data}</div>\n            <div class="dia-confirm-span"></div>\n            <div class="dia-confirm-buttons">\n                <button class="dia-confirm-btn dia-confirm-btn-ok" click.delegate="ok()">DELETE</button>\n                <button class="dia-confirm-btn dia-confirm-btn-cancel" click.delegate="cancel()">CANCEL</button>\n            </div>\n        </div>\n    </div>\n</template>'}));define("controls/gojs-workflow/workflow-diagram/services/wf-diagram-service",["require","exports","tslib","aurelia-framework","aurelia-fetch-client"],(function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WfDiagramServiceFabric=t.ApiClientWfDia=t.WfDiagramService=void 0;var n=function(){function e(e,t){this.params=e;this.apiClient=t;this.results=new Map;this.baseQuery={graph:this.params.graph,currentState:this.params.currentState,currentTransition:this.params.currentTransition,viewState:this.params.viewState,viewTransition:this.params.viewTransition,view:this.params.view,graphStateId:this.params.graphStateId,eventName:this.params.eventName,json:this.params.json}}e.prototype.setCurrents=function(e,t,o,r){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(a){if(!(e||t))return[2,false];n=i.__assign(i.__assign({},this.baseQuery),{currentState:e,currentTransition:t,eventName:o,json:r});return[2,this.setCurrentsInternal(n).then((function(e){return e}))]}))}))};e.prototype.setCurrentsInternal=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,this.apiClient.setCurrents(e).then((function(e){return e}))]}))}))};return e}();t.WfDiagramService=n;var a=function(){function e(e){this.client=e;this.root=""}e.prototype.setCurrents=function(e){return this.client.fetch("workflowui/Diagram/SetCurrents",{method:"POST",body:r.json(e)}).then((function(e){if(e.ok)return e.json();return false}))};e=i.__decorate([o.autoinject,i.__metadata("design:paramtypes",[r.HttpClient])],e);return e}();t.ApiClientWfDia=a;var s=function(){function e(e){this.apiClient=e}e.prototype.getWfDiagramService=function(e){return new n(e,this.apiClient)};e=i.__decorate([o.autoinject,i.__metadata("design:paramtypes",[a])],e);return e}();t.WfDiagramServiceFabric=s}));define("controls/gojs-workflow/workflow-diagram/workflow-diagram",["require","exports","tslib","./services/wf-diagram-service","./helpers/context-menu","aurelia-framework","aurelia-event-aggregator","./helpers/go-wrapper","./helpers/diagram-properties","./helpers/event-args-message","./workflow-diagram-actions"],(function(e,t,i,o,r,n,a,s,l,d,g){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QPWorkflowDiagramCustomElement=void 0;var c=function(){function e(e,t,i){this.eventAggregator=e;this.goWrapper=t;this.wfDiagramServiceFabric=i;this.skipValueChanged=false;this.modeReadOnly=false;this.hidden=false;this.diaHideTransition=false;this.hadSetFirstPosition=false;this.waitConfig=null;this.observer=undefined;this.ctxScope={linkButtonHover:false,contextNode:null,contextLink:null,contextEvent:null,func:null,selectedFromNode:false,lastCurrentClient:null,lastCurrentSrv:null};this.confirmText=undefined;this.showConfirm=undefined}t=e;e.prototype.getRandomColor=function(){var e="0123456789ABCDEF";var t="#";for(var i=0;i<6;i++){t+=e[Math.floor(Math.random()*16)]}return t};e.prototype.valueChanged=function(e,t){var i=this;var o,r,n,a,s;if(this.skipValueChanged){return}if(e&&e.trim()){var d;try{d=JSON.parse(e)}catch(e){this.diagram&&this.diagram.clear();this.loadErrorDiagram();return}var g=0;var c=l.DiagramProperties.colors.main.length;if(c<49){for(var p=l.DiagramProperties.colors.main.length;p<50;p++){var u=this.getRandomColor();l.DiagramProperties.colors.main.push({node:u,link:u})}c=l.DiagramProperties.colors.main.length}(o=d.nodeDataArray)===null||o===void 0?void 0:o.forEach((function(e){if(g>=c){e.color=i.getRandomColor();e.linkColor=e.color}else{e.color=l.DiagramProperties.colors.main[g].node;e.linkColor=l.DiagramProperties.colors.main[g].link}g++}));var h=this.options.allowSelect===undefined?true:this.options.allowSelect;var f="";var m="";var v=(r=d.nodeDataArray)===null||r===void 0?void 0:r.filter((function(e){return!e.loc}))[0];if(v){v.loc="550 500";v.isSelected=h||false;d.nodeDataArray.splice(d.nodeDataArray.indexOf(v),1);d.nodeDataArray.push(v);f="Move";m=v.key}if(!m){var k=(n=d.nodeDataArray)===null||n===void 0?void 0:n.filter((function(e){return e.isSelected}))[0];if(k){m=k.key}}(a=d.linkDataArray)===null||a===void 0?void 0:a.forEach((function(e){var t,i,o,r;e.zOrder=10;e.color=(i=(t=d.nodeDataArray)===null||t===void 0?void 0:t.filter((function(t){return t.key==e.from}))[0])===null||i===void 0?void 0:i.linkColor;e.markColor=(r=(o=d.nodeDataArray)===null||o===void 0?void 0:o.filter((function(t){return t.key==e.to}))[0])===null||r===void 0?void 0:r.color;e.fromIndex=undefined}));(s=d.linkDataArray)===null||s===void 0?void 0:s.forEach((function(e){e.fromIndex=d.linkDataArray.filter((function(t){return t.from==e.from&&t.fromPort==e.fromPort&&!t.fromIndex})).length}));var w={modeReadOnly:!this.config.enabled||this.config.readOnly,allowSelect:h,nodeDataArray:d.nodeDataArray,linkDataArray:d.linkDataArray,selectedNode:h?m:null,doAction:f,doActionStateKey:m};this.diagramConfigChanged(w)}else{this.diagram&&this.diagram.clear()}};e.prototype.refreshDiagram=function(e){var t=this;if(e===void 0){e=false}var i=setTimeout((function(){if(!t.diagram)return;t.diagram.computeBounds();if(t.diagram.nodes.count!=0){t.diagram.redraw()}else if(t.value){t.valueChanged(t.value,null)}t.setInitialPosition(e);t.setInitialPosition(e);if(t.diagram.nodes.count==0&&t.value){t.refreshDiagram(e)}clearTimeout(i)}),300)};e.prototype.updateServer=function(e){var t=this;this.value=e.json||this.diagram.model.toJSON();if(!(e.activeState||e.activeTransition))return;this.ctxScope.lastCurrentClient=e.activeState||e.activeTransition;this.wfDiagramService.setCurrents(e.activeState,e.activeTransition,e.type,this.value).then((function(i){if(i){t.ctxScope.lastCurrentSrv=i;if(window[t.options.onsetcurrent])window[t.options.onsetcurrent].call(null,i);g.diagramUpdatingWatcher(e,t.options.callbacks)}}))};e.prototype.diagramConfigChanged=function(e){if(!this.diagram){this.waitConfig=e;return}this.setInitialPosition(false);var t=this.diagram.selection.first();if(t){if(t instanceof this.goWrapper.go.Node)t={t:"Node",key:t.key};else if(t instanceof this.goWrapper.go.Link){t={t:"Link",key:t.data.id,from:t.data.from,fromPort:t.data.fromPort,to:t.data.to,toPort:t.data.toPort};if(t.fromPort==l.DiagramProperties.callBackNames.AddTransitionNode){t={t:"Node",key:t.from}}}}if(e.nodeDataArray){this.modeReadOnly=e.modeReadOnly;this.model.nodeDataArray=e.nodeDataArray;this.model.linkDataArray=e.linkDataArray;if(e.selectedNode){this.selectNodeByKey(e.selectedNode)}else if(!t){this.hideAllContextMenu();this.deselectFromItems();this.clearHighlighteds();this.clearSelection()}else if((t===null||t===void 0?void 0:t.t)==="Node"){this.selectNodeByKey(t.key)}else if((t===null||t===void 0?void 0:t.t)==="Link"){this.selectLinkByKey(t.key,t)}}else{this.diagram&&this.diagram.clear()}this.diagram.allowSelect=e.allowSelect||true;this.modeReadOnlyChanged(e.modeReadOnly);if(e.doAction){this.wfDiagramService.setCurrents(e.doActionStateKey,undefined,e.doAction,this.diagram.model.toJSON())}};e.prototype.modeReadOnlyChanged=function(e,t){this.diagram.isReadOnly=e||this.modeReadOnly;this.diagram.allowDelete=!e;this.diagram.allowLink=!e;this.diagram.allowRelink=!e;this.diagram.allowMove=true;if(e){this.diagram.contextMenu=null;this.diagram.nodeTemplateMap.first().value.contextMenu=null;this.diagram.linkTemplateMap.first().value.contextMenu=null;this.diagram.nodes.each((function(e){return e.contextMenu=null}));this.diagram.links.each((function(e){return e.contextMenu=null}))}};e.prototype.setInitialPosition=function(e){if(e===void 0){e=false}if(!this.hadSetFirstPosition||e){this.diagram.alignContent=this.goWrapper.go.Spot.Center;this.diagram.alignDocument(this.goWrapper.go.Spot.Center,this.goWrapper.go.Spot.Center);this.diagram.autoScale=this.goWrapper.go.Diagram.Uniform;this.hadSetFirstPosition=true;this.diagram.autoScale=this.goWrapper.go.Diagram.None}};e.prototype.ensureWfDiagramService=function(){var e=this.wfDiagramService===undefined;if(e){this.wfDiagramService=this.wfDiagramServiceFabric.getWfDiagramService({graph:this.config.graph,view:this.config.view,viewState:this.options.viewState,viewTransition:this.options.viewTransition,graphStateId:this.config.graphStateId,currentState:undefined,currentTransition:undefined,eventName:undefined,json:undefined})}};e.prototype.selectNodeByKey=function(e){var t=this.diagram.nodes.filter((function(t){return t.key==e})).first();if(t)this.selectNode(null,t)};e.prototype.selectNode=function(e,t){var i=this;var o=t.diagram;if(!o)return;if(!o.allowSelect)return;if(this.ctxScope.selectedFromNode){this.ctxScope.selectedFromNode=false;this.clearHighlighteds();this.clearSelection();return}o.startTransaction(l.DiagramProperties.transactionNames.highlight);o.isHighlighted=false;o.clearHighlighteds();o.nodes.each((function(e){e.isHighlighted=false;e.zOrder=1}));o.links.each((function(e){e.isHighlighted=false;e.zOrder=10}));o.isHighlighted=true;if(t.findLinksOutOf)t.findLinksOutOf().each((function(e){e.isHighlighted=true}));if(t.findNodesOutOf)t.findNodesOutOf().each((function(e){e.isHighlighted=true}));o.commitTransaction(l.DiagramProperties.transactionNames.highlight);o.commandHandler.selectAll();o.select(t);t.zOrder=2;if(this.wfDiagramService&&t.data.key&&this.ctxScope.lastCurrentClient!=t.data.key){this.ctxScope.lastCurrentClient=t.data.key;if(!this.modeReadOnly){this.wfDiagramService.setCurrents(t.data.key,"").then((function(e){if(e){i.ctxScope.lastCurrentSrv=e;if(window[i.options.onsetcurrent])window[i.options.onsetcurrent].call(null,e)}}))}}};e.prototype.selectLinkByKey=function(e,t){var i=undefined;if(e)i=this.diagram.links.filter((function(t){return t.data.id==e})).first();else if(t){i=this.diagram.links.filter((function(e){return e.data.from==t.from&&e.data.fromPort==t.fromPort&&e.data.to==t.to&&(!t.toPort||e.data.toPort==t.toPort)})).first()}if(i)this.selectLink(null,i)};e.prototype.selectLink=function(e,t){var i=t.diagram;if(!i.allowSelect)return;if(e&&e.documentPoint&&(t.toPort.portId||t.fromPort.portId)){var o=i.findObjectsAt(e.documentPoint).filter((function(e){return e.part.fromNode||e.part.toNode})).map((function(e){return e.part})).toArray().sort((function(e){return e.data.id}));if(t.zOrder==100){var r=0;var n=0;o.forEach((function(e){if(e.zOrder==100)r=n;n++}));n=0;if(r==0)r=o.length;o.forEach((function(e){if(n==r-1){e.zOrder=100;t=e}else{e.zOrder=n+10}n++}))}else{var a=-1;o.forEach((function(e){e.zOrder=10+a++}));t.zOrder=100}}i.startTransaction(l.DiagramProperties.transactionNames.highlight);i.isHighlighted=false;i.clearHighlighteds();i.nodes.each((function(e){return e.isHighlighted=false}));i.links.each((function(e){return e.isHighlighted=false}));i.isHighlighted=true;t.fromNode.isHighlighted=true;t.toNode.isHighlighted=true;t.isHighlighted=true;i.commitTransaction(l.DiagramProperties.transactionNames.highlight);var s=this;i.commit((function(e){i.commandHandler.selectAll();i.clearSelection();i.select(t);if(s.wfDiagramService&&t.data.id&&s.ctxScope.lastCurrentClient!=t.data.id){s.ctxScope.lastCurrentClient=t.data.id;s.wfDiagramService.setCurrents("",t.data.id).then((function(e){if(e){s.ctxScope.lastCurrentSrv=e;if(window[s.options.onsetcurrent])window[s.options.onsetcurrent].call(null,e)}}))}}),"no selecteds")};e.prototype.opacityNodeBinding=function(e,t){var i;if(!t.diagram.isHighlighted)i=l.DiagramProperties.opacitySetting.normal;else if(t.part.isSelected)i=l.DiagramProperties.opacitySetting.nodeOpacity.selected;else if(e.isHighlighted)i=l.DiagramProperties.opacitySetting.nodeOpacity.highlighted;else i=l.DiagramProperties.opacitySetting.nodeOpacity.opaсity;return i};e.prototype.lightenNodeBinding=function(e,t){var i;if(!t.diagram.isHighlighted)i=t.part.data.color;else if(t.part.isSelected)i=t.part.data.color;else if(e.isHighlighted)i=t.part.data.color;else i=t.part.data.color+"35";return i};e.prototype.darkenNodeTitleBinding=function(e,t){var i;if(!t.diagram.isHighlighted)i=l.DiagramProperties.colors.font;else if(t.part.isSelected)i=l.DiagramProperties.colors.font;else if(e.isHighlighted)i=l.DiagramProperties.colors.font;else i=t.part.data.color;return i};e.prototype.opacityLinkBinding=function(e,t){var i;if(!t.diagram.isHighlighted)i=l.DiagramProperties.opacitySetting.normal;else if(e.isHighlighted)i=l.DiagramProperties.opacitySetting.linkOpacity.highlighted;else i=l.DiagramProperties.opacitySetting.linkOpacity.opaсity;return i};e.prototype.detached=function(){var e,t;(e=this.subscriber)===null||e===void 0?void 0:e.dispose();(t=this.resizeSubscription)===null||t===void 0?void 0:t.dispose();this.resizeSubscription=undefined;this.observer=undefined};e.prototype.loadTestDiagram=function(){var e=JSON.parse('{ \n             "nodeDataArray": [ \n           {"key":"Task_N", "name":"NEW", "fields":[ {"key":"open", "name":"Open"},{"key":"won", "name":"Close as Won"},{"key":"lost", "name":"Close as Lost"} ], "loc":"125 381"}\n            ],\n             "linkDataArray": []}');this.model.nodeDataArray=e.nodeDataArray;this.model.linkDataArray=e.linkDataArray};e.prototype.loadErrorDiagram=function(){var e=JSON.parse('{ \n             "nodeDataArray": [ \n           {"key":"Task_Error", "name":"loading error", "fields":[], "loc":"125 381"}\n            ],\n             "linkDataArray": []}');this.model.nodeDataArray=e.nodeDataArray;this.model.linkDataArray=e.linkDataArray};e.prototype.resizeSubscribe=function(){var e=this;if(this.options.autoSize){this.observer=new MutationObserver((function(t){e.refreshDiagram(true);e.resize()}));var t=document.getElementById(this.options.containerElement);if(t){this.observer.observe(t,{attributes:true,attributeFilter:["style"]});g.resizeParent(this.options.contentElement,this.options.containerElement)}this.resizeSubscription=this.eventAggregator.subscribe("resize-window",(function(){e.resize()}))}};e.prototype.resize=function(){var e=this;if(this.resizeDebounce){clearTimeout(this.resizeDebounce)}else{g.resizeParent(this.options.contentElement,this.options.containerElement);this.refreshDiagram(true)}this.resizeDebounce=setTimeout((function(){g.resizeParent(e.options.contentElement,e.options.containerElement);e.refreshDiagram(true);clearTimeout(e.resizeDebounce);e.resizeDebounce=null}),t.RESIZETIMEOUT)};e.prototype.newState=function(e,t){var i=this;this.hideAllContextMenu();return;var o=e.diagram;var r=true;if(!o){o=this.diagram;r=false}o.commit((function(e){var t={};e.model.addNodeData(t);var o=e.findPartForData(t);o.location=e.lastInput.documentPoint||new i.goWrapper.go.Point(300,200)}),l.DiagramProperties.callBackNames.new_node)};e.prototype.newPredefinedState=function(e,t){var i=this;this.hideAllContextMenu();return;var o=e.diagram;var r=true;if(!o){o=this.diagram;r=false}o.commit((function(e){var t={};e.model.addNodeData(t);var o=e.findPartForData(t);o.location=e.lastInput.documentPoint||new i.goWrapper.go.Point(300,200)}),l.DiagramProperties.callBackNames.new_predifined_node)};e.prototype.changeScale=function(e){var t=this.diagram;t.scale+=e;t.redraw()};e.prototype.scale100=function(){var e=this.diagram;e.scale=1;e.redraw()};e.prototype.scaleFit=function(){this.setInitialPosition(true);this.setInitialPosition(true)};e.prototype.allToogleView=function(e){var t=this;this.diaHideTransition=!this.diaHideTransition;this.diagram.nodes.each((function(e){e.data.hideTranition=t.diaHideTransition}));this.diagram.rebuildParts()};e.prototype.hideAllContextMenu=function(){this.nodeCtxMenu.hideContextMenu();this.linkCtxMenu.hideContextMenu();this.diagramCtxMenu.hideContextMenu()};e.prototype.deselectFromItems=function(){var e=this;this.diagram.model.nodeDataArray.forEach((function(t){var i;(i=t.fields)===null||i===void 0?void 0:i.forEach((function(t){e.model.setDataProperty(t,"isSelected",false)}))}))};e.prototype.clearHighlighteds=function(){this.diagram.isHighlighted=false;this.diagram.commit((function(e){e.nodes.each((function(e){return e.isHighlighted=false}));e.links.each((function(e){return e.isHighlighted=false}));e.clearHighlighteds()}),"no highlighteds")};e.prototype.clearSelection=function(){this.diagram.commit((function(e){e.commandHandler.selectAll();e.clearSelection()}),"no selecteds")};e.prototype.selectFromItem=function(e,t){var i=this;t=t.replace(/_(R|L)$/g,"");e.fields.forEach((function(e){if(e.key==t)i.model.setDataProperty(e,"isSelected",true)}))};e.prototype.addTransition=function(e){var t,i,o,r;if(this.modeReadOnly)return;var n=new d.EventArgsMessage;n.eventName=d.EventNames.updateDiagram;n.actualValue=(i=(t=this.ctxScope)===null||t===void 0?void 0:t.contextNode)===null||i===void 0?void 0:i.part.key;n.json=this.diagram.model.toJSON();n.type=l.DiagramProperties.callBackNames.addTransition;n.activeState=(r=(o=this.ctxScope)===null||o===void 0?void 0:o.contextNode)===null||r===void 0?void 0:r.part.key;n.activeTransition=undefined;n.dataSourceID=this.options.dataSourceID;this.diagram.eventAggregator.publish(n);this.hideAllContextMenu()};e.prototype.confirmValueChanged=function(e,t){this.showConfirm=this.confirmValue==l.DiagramProperties.strings.waitAnswer;if(e=="ok"&&this.ctxScope.func){this.ctxScope.func();this.confirmValue=undefined}};e.prototype.removeState=function(e){var t=this;if(this.modeReadOnly)return;this.confirmValue=l.DiagramProperties.strings.waitAnswer;this.confirmText=l.DiagramProperties.strings.confirmTextRemoveState;this.hideAllContextMenu();this.ctxScope.func=function(){var e=t;e.diagram.commit((function(t){var i,o;e.diagram.remove((o=(i=e.ctxScope)===null||i===void 0?void 0:i.contextNode)===null||o===void 0?void 0:o.part)}),"Delete")}};e.prototype.showState=function(e){var t,i,o,r;if(this.modeReadOnly)return;this.hideAllContextMenu();var n=new d.EventArgsMessage;n.eventName=d.EventNames.updateDiagram;n.actualValue=(i=(t=this.ctxScope)===null||t===void 0?void 0:t.contextNode)===null||i===void 0?void 0:i.part.data;n.json=this.diagram.model.toJSON();n.type=n.actualValue.id?l.DiagramProperties.callBackNames.showTransition:l.DiagramProperties.callBackNames.showStates;n.activeState=(r=(o=this.ctxScope)===null||o===void 0?void 0:o.contextNode)===null||r===void 0?void 0:r.part.data.key;n.activeTransition=undefined;n.dataSourceID=this.options.dataSourceID;this.eventAggregator.publish(n)};e.prototype.showTransition=function(e){var t,i,o,r;if(this.modeReadOnly)return;this.hideAllContextMenu();var n=new d.EventArgsMessage;n.eventName=d.EventNames.updateDiagram;n.actualValue=(i=(t=this.ctxScope)===null||t===void 0?void 0:t.contextLink)===null||i===void 0?void 0:i.part.data;n.json=this.diagram.model.toJSON();n.type=n.actualValue.id?l.DiagramProperties.callBackNames.showTransition:l.DiagramProperties.callBackNames.showStates;n.activeState=undefined;n.activeTransition=(r=(o=this.ctxScope)===null||o===void 0?void 0:o.contextLink)===null||r===void 0?void 0:r.part.data.id;n.dataSourceID=this.options.dataSourceID;this.eventAggregator.publish(n)};e.prototype.removeTransition=function(e){var t=this;if(this.modeReadOnly)return;this.confirmValue=l.DiagramProperties.strings.waitAnswer;this.confirmText=l.DiagramProperties.strings.confirmTextRemoveTransition;this.hideAllContextMenu();this.ctxScope.func=function(){var e=t;e.diagram.commit((function(t){var i,o;e.diagram.remove((o=(i=e.ctxScope)===null||i===void 0?void 0:i.contextLink)===null||o===void 0?void 0:o.part)}),"Delete")}};e.prototype.attached=function(){var e;return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.goWrapper.ready];case 1:i.sent();this.nodeCtxMenu=new r.ContextMenu("nodeContextMenu");this.linkCtxMenu=new r.ContextMenu("linkContextMenu");this.diagramCtxMenu=new r.ContextMenu("diagramContextMenu");this.goWrapper.go.Diagram.licenseKey=l.DiagramProperties.LicenseKey;this.diagram=this.goWrapper.goMake(this.goWrapper.go.Diagram);this.model=this.goWrapper.goMake(this.goWrapper.go.GraphLinksModel);this.Geometry_zip=this.goWrapper.go.Geometry.parse("M10.7314 8.35611C10.6276 8.13671 10.4231 7.99964 10.2005 7.99964H6.16907L7.78222 0.827887C7.85314 0.515077 7.7113 0.190801 7.44705 0.0583301C7.18334 -0.0725406 6.87049 0.0221956 6.70579 0.28847L0.105593 10.9555C-0.0206511 11.1593 -0.0347517 11.4242 0.0689913 11.6436C0.173034 11.8624 0.37722 11.9998 0.600187 11.9998H4.09187L3.00842 19.2239C2.96216 19.5319 3.11474 19.8346 3.37551 19.9518C3.44883 19.9844 3.52497 20 3.59998 20C3.79306 20 3.97997 19.8965 4.09481 19.7109L10.695 9.04393C10.821 8.84013 10.835 8.57519 10.7314 8.35611Z",true);this.Geometry_event=this.goWrapper.go.Geometry.parse("M3 3C3 2.64101 3.29102 2.35 3.65001 2.35001L4.50003 2.35002C7.06813 2.35005 9.14998 4.43191 9.14998 7.00001V8.35007H11.5L8.49997 12.3501L5.49997 8.35007H7.84998V7.00001C7.84998 5.14988 6.35016 3.65004 4.50002 3.65002L3.64999 3.65001C3.29101 3.65 3 3.35898 3 3ZM2 14.5C2 14.1411 2.29101 13.85 2.65 13.85H14.15C14.509 13.85 14.8 14.1411 14.8 14.5C14.8 14.859 14.509 15.15 14.15 15.15H2.65C2.29101 15.15 2 14.859 2 14.5Z",true);this.model.copiesArrays=true;this.model.copiesArrayObjects=true;this.model.linkFromPortIdProperty="fromPort";this.model.linkToPortIdProperty="toPort";this.diagram.animationManager.canStart=function(e){return false};this.diagram.commandHandler.canCutSelection=function(){return false};this.diagram.commandHandler.canDeleteSelection=function(){if(t.modeReadOnly)return false;if(!t.diagram.allowDelete)return false;t.hideAllContextMenu();var e=t.diagram.selection.first();if(e&&e instanceof t.goWrapper.go.Node){t.confirmValue=l.DiagramProperties.strings.waitAnswer;t.confirmText=l.DiagramProperties.strings.confirmTextRemoveState;t.ctxScope.contextNode=e;t.ctxScope.func=function(){var e,i;var o=t;if(!((i=(e=o.ctxScope)===null||e===void 0?void 0:e.contextNode)===null||i===void 0?void 0:i.part))return;o.diagram.commit((function(e){var t,i;o.diagram.remove((i=(t=o.ctxScope)===null||t===void 0?void 0:t.contextNode)===null||i===void 0?void 0:i.part)}),"Delete")}}else if(e&&e instanceof t.goWrapper.go.Link){t.confirmValue=l.DiagramProperties.strings.waitAnswer;t.confirmText=l.DiagramProperties.strings.confirmTextRemoveTransition;t.ctxScope.contextLink=e;t.ctxScope.func=function(){var e,i;var o=t;if(!((i=(e=o.ctxScope)===null||e===void 0?void 0:e.contextLink)===null||i===void 0?void 0:i.part))return;o.diagram.commit((function(e){var t,i;o.diagram.remove((i=(t=o.ctxScope)===null||t===void 0?void 0:t.contextLink)===null||i===void 0?void 0:i.part)}),"Delete")}}return false};this.diagram.animationManager.initialAnimationStyle=this.goWrapper.go.AnimationManager.None;this.diagram.div=this.diagramContainer;this.diagram.nodeTemplateMap=this.createNodeTemplates();this.diagram.linkTemplateMap=this.createLinkTemplates();this.diagram.undoManager.isEnabled=true;this.ensureWfDiagramService();this.diagram.model=this.model;this.diagram.eventAggregator=this.eventAggregator;if(this.waitConfig){this.diagramConfigChanged(this.waitConfig);this.waitConfig=null}if(((e=this.options)===null||e===void 0?void 0:e.callbacks)&&typeof this.options.callbacks==="string")this.options.callbacks=JSON.parse(this.options.callbacks.replace(/'/g,'"'));this.resizeSubscribe();this.resize();this.subscriber=this.eventAggregator.subscribe(d.EventArgsMessage,(function(e){t.updateServer(e)}));this.diagram.addDiagramListener("ChangedSelection",(function(e){if(!t.modeReadOnly)return;t.skipValueChanged=true;t.value=t.model.toJSON();setTimeout((function(){t.skipValueChanged=false}),1e3)}));this.diagram.addDiagramListener("BackgroundSingleClicked",(function(e){t.hideAllContextMenu();t.deselectFromItems();t.clearHighlighteds();t.clearSelection()}));this.diagram.addDiagramListener("BackgroundContextClicked",(function(e){t.hideAllContextMenu();t.deselectFromItems();t.clearHighlighteds();t.clearSelection()}));this.diagram.addModelChangedListener((function(e){var i,o,r,n,a,s,g;if(!e.isTransactionFinished)return;var c=null;var p=undefined;var u=undefined;var h=e.To||e.object;switch(h===null||h===void 0?void 0:h.name){case l.DiagramProperties.callBackNames.new_node:case l.DiagramProperties.callBackNames.new_predifined_node:c=h.changes.first().newValue;p=c.key;break;case"Move":c=h.changes.first().object;p=(i=c===null||c===void 0?void 0:c.data)===null||i===void 0?void 0:i.key;if(!p){c=t.diagram.nodes.filter((function(e){return e.isSelected})).first();p=(o=c===null||c===void 0?void 0:c.data)===null||o===void 0?void 0:o.key}break;case"Linking":c=(n=(r=h.changes.filter((function(e){return e.modelChange=="linkDataArray"})))===null||r===void 0?void 0:r.first())===null||n===void 0?void 0:n.newValue;p=c===null||c===void 0?void 0:c.from;u=c===null||c===void 0?void 0:c.id;break;case"Relinking":c=(a=h.changes.filter((function(e){return e.modelChange=="linkToKey"||e.modelChange=="linkToPortId"||e.modelChange=="linkFromPortId"})))===null||a===void 0?void 0:a.first().object;p=c===null||c===void 0?void 0:c.from;u=c===null||c===void 0?void 0:c.id;break;case"Delete":c=h.changes.last().oldValue;if(c.data){p=c.data.key;u=c.data.id}else{c=(g=(s=h.changes.filter((function(e){return e.modelChange=="linkDataArray"})))===null||s===void 0?void 0:s.first())===null||g===void 0?void 0:g.oldValue;p="";u=c===null||c===void 0?void 0:c.id}break}if(!c)return;var f=new d.EventArgsMessage;f.eventName=d.EventNames.updateDiagram;f.json=e.model.toJson();f.type=h===null||h===void 0?void 0:h.name;f.actualValue=c;f.activeState=p;f.activeTransition=u;f.dataSourceID=t.options.dataSourceID;t.eventAggregator.publish(f)}));this.diagram.toolManager.relinkingTool.fromHandleArchetype=this.goWrapper.goMake(this.goWrapper.go.Shape,"Diamond",{cursor:"pointer",strokeWidth:3,stroke:"magenta",fill:"rgba(0,0,0,.2)",desiredSize:new this.goWrapper.go.Size(18,18),segmentIndex:0});this.diagram.toolManager.relinkingTool.toHandleArchetype=this.goWrapper.goMake(this.goWrapper.go.Shape,"Diamond",{cursor:"pointer",strokeWidth:3,stroke:"magenta",fill:"rgba(0,0,0,.2)",desiredSize:new this.goWrapper.go.Size(18,18),segmentIndex:-1});this.diagram.toolManager.relinkingTool.linkValidation=function(e,t,i,o){return t.portId!=l.DiagramProperties.callBackNames.AddTransitionNode};this.diagram.toolManager.linkingTool.doActivate=function(){t.hideAllContextMenu();t.goWrapper.go.LinkingTool.prototype.doActivate.call(t.diagram.toolManager.linkingTool)};this.diagram.toolManager.relinkingTool.doMouseUp=function(){t.hideAllContextMenu();var e=t.diagram.toolManager.relinkingTool.isForwards?t.diagram.toolManager.relinkingTool.originalToPort:t.diagram.toolManager.relinkingTool.originalFromPort;if(e!==null&&e.actualBounds.copy().inflate(5,5).containsPoint(e.getLocalPoint(t.diagram.lastInput.documentPoint))){t.diagram.toolManager.relinkingTool.doCancel()}else{t.goWrapper.go.RelinkingTool.prototype.doMouseUp.call(t.diagram.toolManager.relinkingTool)}};return[2]}}))}))};e.prototype.createLinkTemplates=function(){var e=this;var t=new this.goWrapper.go.Map("string",this.goWrapper.go.Link);var i=this.goWrapper.goMake(this.goWrapper.go.Link,{relinkableFrom:true,relinkableTo:true,selectionAdorned:true,reshapable:false,toShortLength:4,fromShortLength:1,fromEndSegmentLength:80,toEndSegmentLength:30,routing:this.goWrapper.go.Link.AvoidsNodes,curve:this.goWrapper.go.Link.JumpGap,adjusting:this.goWrapper.go.Link.None,corner:4,doubleClick:function(t,i){e.showTransition(t)}},{selectionAdornmentTemplate:this.goWrapper.goMake(this.goWrapper.go.Adornment,this.goWrapper.goMake(this.goWrapper.go.Shape,{isPanelMain:true,strokeWidth:4},new this.goWrapper.go.Binding("stroke","color")),this.goWrapper.goMake(this.goWrapper.go.Shape,{toArrow:"Standard",stroke:null,scale:3},new this.goWrapper.go.Binding("fill","color")),{click:function(e,t){debugger}})},this.goWrapper.goMake(this.goWrapper.go.Shape,{isPanelMain:true,stroke:"transparent",strokeWidth:8}),this.goWrapper.goMake(this.goWrapper.go.Shape,{isPanelMain:true,strokeWidth:2},new this.goWrapper.go.Binding("stroke","color"),new this.goWrapper.go.Binding("opacity","",(function(t,i){return e.opacityLinkBinding(t,i)})).ofObject()),this.goWrapper.goMake(this.goWrapper.go.Shape,{toArrow:"Standard",strokeWidth:2},new this.goWrapper.go.Binding("stroke","color"),new this.goWrapper.go.Binding("fill","color"),new this.goWrapper.go.Binding("opacity","",(function(t,i){return e.opacityLinkBinding(t,i)})).ofObject()),{mouseEnter:function(e,t){t.elt(0).stroke=l.DiagramProperties.colors.highlighted;t.elt(0).part.findObject("Diamond").stroke=l.DiagramProperties.colors.highlighted;t.elt(0).part.findObject("Zip").stroke=l.DiagramProperties.colors.highlighted},mouseLeave:function(e,t){t.elt(0).stroke="transparent";t.elt(0).part.findObject("Diamond").stroke="white";t.elt(0).part.findObject("Zip").stroke="white"}},this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{background:"white",width:11,height:11,visible:true,segmentIndex:NaN,segmentOffset:new this.goWrapper.go.Point(20,0)},new this.goWrapper.go.Binding("opacity","",(function(t,i){return e.opacityLinkBinding(t,i)})).ofObject(),new this.goWrapper.go.Binding("segmentOffset","fromIndex",(function(t,i){return new e.goWrapper.go.Point(20+20*t,0)})),this.goWrapper.goMake(this.goWrapper.go.Shape,"Ellipse",{strokeWidth:0,width:11,height:11},new this.goWrapper.go.Binding("fill","markColor"))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{segmentOffset:new this.goWrapper.go.Point(16,-20),padding:new this.goWrapper.go.Margin(2,2,2,2),background:"transparent",visible:false,toolTip:this.goWrapper.goMake(this.goWrapper.go.Adornment,"Spot",{background:"transparent"},this.goWrapper.goMake(this.goWrapper.go.Placeholder,{padding:5}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,{alignment:this.goWrapper.go.Spot.Top,alignmentFocus:this.goWrapper.go.Spot.Bottom,stroke:"black",text:"Autorun = "},new this.goWrapper.go.Binding("text","",(function(e,t){var i,o;if(e.isAutoRun){if((i=e.autoRunCondition)===null||i===void 0?void 0:i.toString()){return"Autorun = "+((o=e.autoRunCondition)===null||o===void 0?void 0:o.toString())}else return"Has Autorun"}}))))},new this.goWrapper.go.Binding("visible","isAutoRun",(function(e){return e==true})),new this.goWrapper.go.Binding("opacity","",(function(t,i){return e.opacityLinkBinding(t,i)})).ofObject(),this.goWrapper.goMake(this.goWrapper.go.Shape,{name:"Zip",geometry:this.Geometry_zip,strokeJoin:"bevel",strokeCap:"butt",strokeWidth:1,stroke:"white",scale:1.4,mouseOver:function(e,t){t.stroke="black";t.cursor="pointer"}},new this.goWrapper.go.Binding("fill","color"))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{segmentOffset:new this.goWrapper.go.Point(36,-20),padding:2,background:"transparent",visible:false,toolTip:this.goWrapper.goMake(this.goWrapper.go.Adornment,"Spot",{background:"transparent"},this.goWrapper.goMake(this.goWrapper.go.Placeholder,{padding:5}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,{alignment:this.goWrapper.go.Spot.Top,alignmentFocus:this.goWrapper.go.Spot.Bottom,stroke:"black"},new this.goWrapper.go.Binding("text","condition")))},new this.goWrapper.go.Binding("visible","hasCondition",(function(e){return e==true})),new this.goWrapper.go.Binding("opacity","",(function(t,i){return e.opacityLinkBinding(t,i)})).ofObject(),this.goWrapper.goMake(this.goWrapper.go.Shape,"Diamond",{name:"Diamond",strokeJoin:"bevel",strokeCap:"butt",strokeWidth:8,stroke:"white",scale:.2,mouseOver:function(e,t){t.stroke="black";t.cursor="pointer"}},new this.goWrapper.go.Binding("fill","color"))),{click:function(t,i){e.hideAllContextMenu();if(e.modeReadOnly)return;e.ctxScope.contextEvent=t;e.ctxScope.contextLink=i;e.linkCtxMenu.showContextMenu(t.viewPoint,"row",{x:-10,y:-45});e.selectLink(t,i)},contextClick:function(t,i){e.hideAllContextMenu();if(e.modeReadOnly)return;e.ctxScope.contextEvent=t;e.ctxScope.contextLink=i;e.linkCtxMenu.showContextMenu(t.viewPoint,"row",{x:-10,y:-45})}});t.add("",i);return t};e.prototype.makePort=function(e,t,i){return this.goWrapper.goMake(this.goWrapper.go.Shape,"Circle",{fill:null,stroke:null,desiredSize:new this.goWrapper.go.Size(10,10),alignment:t,portId:e,toSpot:i,fromLinkable:false,toLinkable:true,toLinkableDuplicates:true,cursor:"pointer"})};e.prototype.showSmallPorts=function(e,t){e.ports.each((function(e){if(e.portId==="B"||e.portId==="T"){e.fill=t?"rgba(0,0,0,.35)":null}}))};e.prototype.makeStartMark=function(){return this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{visible:false,background:"transparent",desiredSize:new this.goWrapper.go.Size(50,50),alignment:new this.goWrapper.go.Spot(0,0,4,2),cursor:"pointer"},new this.goWrapper.go.Binding("visible","isStart"),this.goWrapper.goMake(this.goWrapper.go.Shape,"Circle",{fill:"#d2d2d2",stroke:null}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,"START",{stroke:"black",font:"bold 10px sans-serif",cursor:"pointer"}))};e.prototype.createNodeTemplates=function(){var e=this;var t=new this.goWrapper.go.Map;var i=this.goWrapper.goMake(this.goWrapper.go.Panel,"Spot",{background:"transparent",margin:new this.goWrapper.go.Margin(3,0)},this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{background:"transparent",width:180,click:function(t,i){e.hideAllContextMenu();e.deselectFromItems();var o=i.findMainElement();e.selectFromItem(i.part.data,o.cp);e.ctxScope.selectedFromNode=true}},this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{fill:l.DiagramProperties.colors.item.background,strokeWidth:2,name:"nodeFieldRectangle",stroke:"transparent"},new this.goWrapper.go.Binding("portId","key"),new this.goWrapper.go.Binding("stroke","isSelected",(function(e,t){if(e)return"black";return"transparent"}))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Table",{stretch:this.goWrapper.go.GraphObject.Horizontal},this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{stretch:this.goWrapper.go.GraphObject.Horizontal,row:0,column:0},this.goWrapper.goMake(this.goWrapper.go.TextBlock,{margin:new this.goWrapper.go.Margin(8,8,8,8),font:"bold 14px sans-serif",alignment:this.goWrapper.go.Spot.LeftCenter,fromLinkable:true,toLinkable:false,stroke:l.DiagramProperties.colors.font,stretch:this.goWrapper.go.GraphObject.None,wrap:this.goWrapper.go.TextBlock.WrapFit,isActionable:true},new this.goWrapper.go.Binding("text","name"))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{row:0,column:1,name:"btnTransitionMenu",alignment:this.goWrapper.go.Spot.MiddleRight,visible:true,cursor:"pointer",margin:new this.goWrapper.go.Margin(0,8),width:20,height:20},new this.goWrapper.go.Binding("visible","isEvent",(function(e){return e==true})),this.goWrapper.goMake(this.goWrapper.go.Shape,{geometry:this.Geometry_event,strokeJoin:"bevel",strokeCap:"butt",fill:l.DiagramProperties.colors.font,strokeWidth:0,stroke:null,scale:.25}))),this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{fill:"transparent",stroke:"transparent",strokeWidth:2,width:176,height:30,fromLinkable:true,fromSpot:this.goWrapper.go.Spot.LeftRightSides,cursor:"alias"},new this.goWrapper.go.Binding("portId","key"),new this.goWrapper.go.Binding("width","isSelected",(function(e,t){if(e)return 210;return 176})))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{alignment:new this.goWrapper.go.Spot(0,.5,-10,0),fromSpot:this.goWrapper.go.Spot.Left,toSpot:this.goWrapper.go.Spot.Left,fromLinkable:true,toLinkable:false,toLinkableDuplicates:true,cursor:"alias",visible:true,width:0},new this.goWrapper.go.Binding("width","isSelected",(function(e,t){if(e)return 18;return 0})),new this.goWrapper.go.Binding("portId","key",(function(e,t){return e+"_L"})),this.goWrapper.goMake(this.goWrapper.go.Shape,"Circle",{fill:"#333333",stroke:null,desiredSize:new this.goWrapper.go.Size(18,18)}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,"+",{stroke:"white",font:"normal 16px sans-serif",margin:new this.goWrapper.go.Margin(2,0,0,0)})),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{alignment:new this.goWrapper.go.Spot(1,.5,10,0),fromSpot:this.goWrapper.go.Spot.Right,toSpot:this.goWrapper.go.Spot.Right,fromLinkable:true,toLinkable:false,toLinkableDuplicates:true,cursor:"alias",visible:true,width:0},new this.goWrapper.go.Binding("width","isSelected",(function(e,t){if(e)return 18;return 0})),new this.goWrapper.go.Binding("portId","key",(function(e,t){return e+"_R"})),this.goWrapper.goMake(this.goWrapper.go.Shape,"Circle",{fill:"#333333",stroke:null,desiredSize:new this.goWrapper.go.Size(18,18)}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,"+",{stroke:"white",font:"normal 16px sans-serif",margin:new this.goWrapper.go.Margin(2,0,0,0)})));var o=this.goWrapper.goMake(this.goWrapper.go.Node,"Spot",{copyable:false,deletable:true,minSize:new this.goWrapper.go.Size(240,50),stretch:this.goWrapper.go.GraphObject.Horizontal,zOrder:1},{locationSpot:new this.goWrapper.go.Spot(.5,.5),fromLinkable:false,toLinkable:false,selectionAdorned:false},new this.goWrapper.go.Binding("location","loc",this.goWrapper.go.Point.parse).makeTwoWay(this.goWrapper.go.Point.stringify),new this.goWrapper.go.Binding("visible","visible"),new this.goWrapper.go.Binding("zOrder","isSelected",(function(e,t){if(e)return 2;return 1})),{doubleClick:function(t,i){e.ctxScope.contextEvent=t;e.ctxScope.contextNode=i;e.showState(t)},click:function(t,i){var o,r,n;if(((o=e.ctxScope)===null||o===void 0?void 0:o.contextNode)&&((n=(r=e.ctxScope)===null||r===void 0?void 0:r.contextNode)===null||n===void 0?void 0:n.part)!=i)e.hideAllContextMenu();e.linkCtxMenu.hideContextMenu();e.ctxScope.contextEvent=t;e.ctxScope.contextNode=i;e.selectNode(t,i)},contextClick:function(t,i){e.hideAllContextMenu();if(e.modeReadOnly)return;e.ctxScope.contextEvent=t;e.ctxScope.contextNode=i;e.nodeCtxMenu.showContextMenu(i.diagram.lastInput.viewPoint)}},this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{stretch:this.goWrapper.go.GraphObject.Horizontal},new this.goWrapper.go.Binding("portId","key"),this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{portId:"",fromLinkable:false,toLinkable:true,toLinkableDuplicates:true,toSpot:this.goWrapper.go.Spot.TopBottomSides,fromSpot:this.goWrapper.go.Spot.LeftRightSides,fill:l.DiagramProperties.nodeColor.defaultColor,strokeWidth:4,stroke:"transparent",row:1,column:0,columnSpan:3},new this.goWrapper.go.Binding("fill","",(function(t,i){return e.lightenNodeBinding(t,i)})).ofObject(),new this.goWrapper.go.Binding("stroke","",(function(e,t){if(t.part.isSelected)return"black";else if(t.part.isHighlighted)return"transparent";else return"transparent"})).ofObject()),this.goWrapper.goMake(this.goWrapper.go.Panel,"Table",{margin:0,padding:0,stretch:this.goWrapper.go.GraphObject.Fill},this.goWrapper.goMake(this.goWrapper.go.RowColumnDefinition,{column:0,width:220}),this.goWrapper.goMake(this.goWrapper.go.Panel,"Table",{background:"transparent",padding:0,margin:0,cursor:"pointer",row:0,column:0,columnSpan:3,stretch:this.goWrapper.go.GraphObject.Horizontal},this.goWrapper.goMake(this.goWrapper.go.Panel,"Table",{stretch:this.goWrapper.go.GraphObject.Horizontal},this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{stretch:this.goWrapper.go.GraphObject.Horizontal,row:0,column:0},this.goWrapper.goMake(this.goWrapper.go.TextBlock,{stretch:this.goWrapper.go.GraphObject.Horizontal,font:"bold 20px Arial, sans-serif",margin:8,alignment:this.goWrapper.go.Spot.Left,wrap:this.goWrapper.go.TextBlock.WrapFit,editable:false},new this.goWrapper.go.Binding("text","name"),new this.goWrapper.go.Binding("stroke","",(function(t,i){return e.darkenNodeTitleBinding(t,i)})).ofObject())),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{row:0,column:2,name:"btnStateMenu",alignment:this.goWrapper.go.Spot.MiddleRight,visible:true,cursor:"pointer",margin:2},new this.goWrapper.go.Binding("visible","",(function(t,i){return!e.modeReadOnly})),this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{fill:"transparent",strokeWidth:1,stroke:"transparent",width:26,cursor:"pointer"}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,"...",{stroke:l.DiagramProperties.colors.font,font:"bold 16px sans-serif",cursor:"pointer"}),{mouseEnter:function(e,t){t.background="rgba(0, 0, 0, 0.3)"},mouseLeave:function(e,t){t.background="transparent"},click:function(t,i){e.hideAllContextMenu();if(e.modeReadOnly)return;e.ctxScope.contextEvent=t;e.ctxScope.contextNode=i;e.nodeCtxMenu.showContextMenu(i.diagram.lastInput.viewPoint)}}),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{row:0,column:1,name:"btnStateToggleSize",alignment:this.goWrapper.go.Spot.MiddleRight,visible:true,cursor:"pointer",margin:2},this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{fill:"transparent",strokeWidth:1,stroke:"transparent",width:26,cursor:"pointer"}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,"⏶",{stroke:l.DiagramProperties.colors.font,font:"bold 16px sans-serif",cursor:"pointer"},new this.goWrapper.go.Binding("angle","",(function(e,t){return t.part.data.hideTranition?180:0}))),{click:function(e,t){t.part.data.hideTranition=!t.part.data.hideTranition;t.part.diagram.rebuildParts()}},{mouseEnter:function(e,t){t.background="rgba(0, 0, 0, 0.3)"},mouseLeave:function(e,t){t.background="transparent"}}))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Vertical",{row:1,column:0,columnSpan:3,margin:new this.goWrapper.go.Margin(0,0,10,0),itemTemplate:i},new this.goWrapper.go.Binding("itemArray","",(function(e,t){if(t.part.data.hideTranition)return null;return t.part.data.fields}))),this.goWrapper.goMake(this.goWrapper.go.Panel,"Auto",{row:2,column:0,columnSpan:3,margin:new this.goWrapper.go.Margin(0,22,15,22),height:30,stretch:this.goWrapper.go.GraphObject.Horizontal,cursor:"alias"},new this.goWrapper.go.Binding("visible","",(function(t,i){return!e.modeReadOnly})),this.goWrapper.goMake(this.goWrapper.go.Shape,"RoundedRectangle",{fill:"transparent",stretch:this.goWrapper.go.GraphObject.Horizontal,strokeWidth:2,name:l.DiagramProperties.callBackNames.AddTransitionNode,fromLinkable:true,toLinkable:false,fromSpot:this.goWrapper.go.Spot.LeftRightSides,portId:l.DiagramProperties.callBackNames.AddTransitionNode,stroke:"#313131",strokeDashArray:[2,2]}),this.goWrapper.goMake(this.goWrapper.go.TextBlock,{font:"normal 26px sans-serif",alignment:new this.goWrapper.go.Spot(.5,.5),margin:new this.goWrapper.go.Margin(0,0,0,0),stroke:"black",wrap:this.goWrapper.go.TextBlock.WrapFit,isActionable:false,text:"+"})))),this.makePort("T",new this.goWrapper.go.Spot(.5,0,0,5),this.goWrapper.go.Spot.Top),this.makePort("B",new this.goWrapper.go.Spot(.5,1,0,-5),this.goWrapper.go.Spot.Bottom),{mouseEnter:function(t,i){e.showSmallPorts(i,true);i.findObject("btnStateToggleSize").visible=true},mouseLeave:function(t,i){e.showSmallPorts(i,false);i.findObject("btnStateToggleSize").visible=true}},this.makeStartMark());t.add("",o);return t};var t;e.RESIZETIMEOUT=500;i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"options",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"confirmValue",void 0);e=t=i.__decorate([n.autoinject,n.customElement("qp-workflow-diagram"),i.__metadata("design:paramtypes",[a.EventAggregator,s.GoWrapper,o.WfDiagramServiceFabric])],e);return e}();t.QPWorkflowDiagramCustomElement=c}));define("controls/gojs-workflow/workflow-diagram/workflow-diagram-actions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resizeParent=t.diagramUpdatingWatcher=void 0;function i(e,t){var i=px_alls[e.dataSourceID];switch(e.type){case"new node":if(t.addState)i.executeCallback(t.addState);break;case"new predifined node":if(t.addPredefinedState)i.executeCallback(t.addPredefinedState);break;case"edit node":if(t.showStates)i.executeCallback(t.showStates);break;case"Linking":if(e.actualValue.fromPort=="AddTransitionNode"){if(t.addTransitionFromDiagram)i.executeCallback(t.addTransitionFromDiagram)}else{if(t.applyDiagramChanges)i.executeCallback(t.applyDiagramChanges)}break;case"Relinking":case"Delete":if(t.applyDiagramChanges)i.executeCallback(t.applyDiagramChanges);break;case"showStates":if(t.showStates)i.executeCallback(t.showStates);break;case"showTransition":if(t.showTransition)i.executeCallback(t.showTransition);break;case"addTransition":if(t.addTransition)i.executeCallback(t.addTransition);break}}t.diagramUpdatingWatcher=i;function o(e,t){var i=document.getElementById(t);if(!i)return;var o=15,r=300;var n=document.getElementById(e);var a;if(!n)a=document.getElementsByClassName(e);if(!a.length)return;n=a[0];if(!n)return;var s=0;var l=n.previousElementSibling;while(l){if(l["style"].display!="none"&&l["style"].position==""){s+=l.clientHeight}l=l.previousElementSibling}l=n.nextElementSibling;while(l){if(l["style"].display!="none"&&l["style"].position==""){s+=l.clientHeight}l=l.nextElementSibling}var d=window.innerHeight-s-o;if(d<300)d=r;i.style.height=d+"px"}t.resizeParent=o}));define("text!controls/gojs-workflow/workflow-diagram/workflow-diagram.css",[],(function(){return".gsfBackground {\n    border-color: #bdbda7;\n    font-size: 11;\n    margin-bottom: 2;\n  }\n  \n.diagram-container {\n    overflow: hidden;\n    height: 100%;\n    width: 100%;\n\n    /*border: 1px solid red;*/\n    background-color: white;\n}\n\ndiv.diagram-button:hover {\n    background-color: #e4e4e4;\n    cursor: pointer;\n}\n\ndiv.diagram-button-addstate {\n    top: 10px;\n    left: 20px;\n    font-weight: 600;\n    right: unset;\n    height: 23px;\n    width: 140px;\n}\n\ndiv.diagram-buttons {\n    position: absolute;\n    right: 20px;\n    top: 100px;\n    z-index: 10;\n    user-select: none;\n}\n\ndiv.diagram-buttons-block {\n    border: solid 1px #e4e4e4;\n    border-radius: 60px;\n    text-align: center;\n    z-index: 10;\n    display: flex;\n    flex-flow: column;\n    user-select: none;\n    padding: 2px;\n    margin-bottom: 20px;\n    box-shadow: 0 0 14px 0 rgba(0, 0, 0, 0.2);\n}\n\ndiv.diagram-button {\n    border: solid 1px #e4e4e4;\n    text-align: center;\n    z-index: 10;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    user-select: none;\n    width: 30px;\n    border-radius: 60px;\n    height: 30px;\n    margin-bottom: 20px;\n    flex-flow: column;\n    background-color: white;\n    box-shadow: 0 0 14px 0 rgba(0, 0, 0, 0.2);\n}\n\ndiv.diagram-buttons-block>div.diagram-button {\n    border: none;\n}\n\ndiv.diagram-button-plus {\n    margin-bottom: 10px;\n    font-weight: normal;\n    font-size: 14px;\n    box-shadow: none;\n}\n\ndiv.diagram-button-minus {\n    font-weight: normal;\n    font-size: 14px;\n    margin-bottom: 0;\n    box-shadow: none;\n}\n\nul.dia-menu {\n    display: none;\n    background-color: white;\n    list-style-type: none;\n    width: auto;\n    line-height: 26px;\n    border: solid 1px lightgray;\n    border-radius: 4px;\n    padding: 3px;\n    margin: 2px;\n    font-size: 14px;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    z-index: 10;\n    position: absolute;\n    top: 0;\n    left: 100px;\n}\n\nul.dia-menu > li {\n    padding: 0 3px;\n}\n\nul.dia-menu > li.row {\n    min-width: 22px;\n    text-align: center;\n}\n\nul.dia-menu > li:hover {\n    background: dodgerblue;\n    color: white;\n    cursor: pointer;\n}\n\nul.dia-show-menu-column {\n    display: block;\n}\n\nul.dia-show-menu-row {\n    display: flex;\n}\n\n"}));define("text!controls/gojs-workflow/workflow-diagram/workflow-diagram.html",[],(function(){return'<template show.bind="!config.hidden">\n  <require from="./workflow-diagram.css"></require>\n  <require from="./helpers/workflow-diagram-confirm"></require>\n  <input if.bind="config && config.id" id="${config.id}" name="${config.name}" value.to-view="value" ref="elemText"\n    style="width:0px;height:0px;visibility:hidden;position:absolute;">\n  <div class="diagram-container" ref="diagramContainer"></div>\n\n  <ul id="nodeContextMenu" class="dia-menu">\n    <li id="showState" click.delegate="showState($event)"><i class="ac ac-border_color"></i> Edit State</li>\n    <li id="addTransition" click.delegate="addTransition($event)"><i class="ac ac-add"></i> Add Transition</li>\n    <li id="removeState" click.delegate="removeState($event)"><i class="ac ac-delete"></i> Delete State</li>\n  </ul>\n\n  <ul id="transitionContextMenu" class="dia-menu">\n    <li id="showTransition" click.delegate="showTransition($event)">Properties</li>\n    <li id="removeTransition" click.delegate="removeTransition($event)">Delete Transition</li>\n  </ul>\n\n  <ul id="linkContextMenu" class="dia-menu">\n    <li id="showTransition" class="row" click.delegate="showTransition($event)"><i class="ac ac-border_color"></i></li>\n    <li id="removeTransition" class="row" click.delegate="removeTransition($event)"><i class="ac ac-delete"></i></li>\n  </ul>\n\n  <ul id="diagramContextMenu" class="dia-menu">\n    <li id="newState" click.delegate="newState($event)"><i class="ac ac-add"></i> Add State</li>\n    <li id="newPredefinedState" click.delegate="newPredefinedState($event)"><i class="ac ac-add"></i> Add Predefined State</li>\n  </ul>\n\n\n  \x3c!--div show.bind="!modeReadOnly" class="diagram-button diagram-button-addstate" click.delegate="newState($event)">NEW STATE</div--\x3e\n  <div class="diagram-buttons">\n    <div class="diagram-buttons-block">\n      <div class="diagram-button diagram-button-plus" click.delegate="changeScale(.2)">\n        <svg width="16px" height="16px" xmlns="http://www.w3.org/2000/svg">\n          <path d="M14.8 8.8H8.40005V15H7.00005V8.8H0.800049V7.2H7.00005V1H8.40005V7.2H14.8V8.8Z" fill="black" />\n        </svg>\n      </div>\n      <div class="diagram-button diagram-button-minus" click.delegate="changeScale(-.2)">\n        <svg width="16px" height="16px" xmlns="http://www.w3.org/2000/svg">\n          <path d="M14.8 8.79995H0.800049V7.19995H14.8V8.79995Z" fill="black" />\n        </svg>\n      </div>\n    </div>\n    <div class="diagram-button diagram-button-100" click.delegate="scale100()">\n      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path\n          d="M4.04492 12H2.39844V5.79492C1.79688 6.35742 1.08789 6.77344 0.271484 7.04297V5.54883C0.701172 5.4082 1.16797 5.14258 1.67188 4.75195C2.17578 4.35742 2.52148 3.89844 2.70898 3.375H4.04492V12Z"\n          fill="black" />\n        <path d="M7.17969 7.42383V5.77734H8.82617V7.42383H7.17969ZM7.17969 12V10.3535H8.82617V12H7.17969Z"\n          fill="black" />\n        <path\n          d="M14.7207 12H13.0742V5.79492C12.4727 6.35742 11.7637 6.77344 10.9473 7.04297V5.54883C11.377 5.4082 11.8438 5.14258 12.3477 4.75195C12.8516 4.35742 13.1973 3.89844 13.3848 3.375H14.7207V12Z"\n          fill="black" />\n      </svg>\n    </div>\n    <div class="diagram-button diagram-button-fit" click.delegate="scaleFit()">\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16">\n        <path fill="#000" d="M15 1h1v14h-1V1zM0 1h1v14H0V1zM14 7.5L11.5 5v2h-7V5L2 7.5 4.5 10V8h7v2L14 7.5z" />\n      </svg>\n    </div>\n    <div class="diagram-button diagram-button-toggleview" click.delegate="allToogleView($event)">\n\n      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g clip-path="url(#clip0)">\n          <path fill-rule="evenodd" clip-rule="evenodd"\n            d="M13 2H3C1.89543 2 1 2.89543 1 4V12C1 13.1046 1.89543 14 3 14H13C14.1046 14 15 13.1046 15 12V4C15 2.89543 14.1046 2 13 2ZM3 1C1.34315 1 0 2.34315 0 4V12C0 13.6569 1.34315 15 3 15H13C14.6569 15 16 13.6569 16 12V4C16 2.34315 14.6569 1 13 1H3Z"\n            fill="black" />\n          <path\n            d="M2 8C2 7.44772 2.44772 7 3 7H13C13.5523 7 14 7.44772 14 8V8C14 8.55228 13.5523 9 13 9H3C2.44772 9 2 8.55228 2 8V8Z"\n            fill="black" />\n          <path\n            d="M2 11C2 10.4477 2.44772 10 3 10H13C13.5523 10 14 10.4477 14 11V11C14 11.5523 13.5523 12 13 12H3C2.44772 12 2 11.5523 2 11V11Z"\n            fill="black" />\n        </g>\n        <defs>\n          <clipPath id="clip0">\n            <rect width="16" height="16" fill="white" />\n          </clipPath>\n        </defs>\n      </svg>\n\n    </div>\n  </div>\n\n  <workflow-diagram-confirm show.bind="showConfirm" value.two-way="confirmValue" data.bind="confirmText">\n  </workflow-diagram-confirm>\n\n</template>\n'}));